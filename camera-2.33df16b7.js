parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sC8V":[function(require,module,exports) {

},{}],"g5IB":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"FRly":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"Quj6":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"aqZJ":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"aMB2":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FRly","ieee754":"Quj6","isarray":"aqZJ","buffer":"aMB2"}],"PqBP":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var Buffer = require("buffer").Buffer;
var t=arguments[3],e=require("process"),n=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.avgPool3d=exports.avgPool=exports.atanh=exports.atan2=exports.atan=exports.asinh=exports.asin=exports.argMin=exports.argMax=exports.any=exports.all=exports.addStrict=exports.addN=exports.add=exports.acosh=exports.acos=exports.abs=exports.Variable=exports.Transpose=exports.Tile=exports.TensorBuffer=exports.Tensor=exports.SquaredDifference=exports.Square=exports.SGDOptimizer=exports.Reduction=exports.Rank=exports.RMSPropOptimizer=exports.PadV2=exports.Optimizer=exports.OneHot=exports.NonMaxSuppressionV5=exports.MomentumOptimizer=exports.MaxPoolWithArgmax=exports.KernelBackend=exports.Identity=exports.FusedBatchNorm=exports.FromPixels=exports.Environment=exports.ENV=exports.Div=exports.DataStorage=exports.BroadcastTo=exports.AddN=exports.Add=exports.AdamaxOptimizer=exports.AdamOptimizer=exports.AdagradOptimizer=exports.AdadeltaOptimizer=void 0,exports.backend=fn,exports.browser=exports.broadcastTo=exports.booleanMaskAsync=exports.batchToSpaceND=exports.batchNormalization4d=exports.batchNormalization3d=exports.batchNormalization2d=exports.batchNormalization=exports.batchNorm4d=exports.batchNorm3d=exports.batchNorm2d=exports.batchNorm=exports.basicLSTMCell=exports.backend_util=void 0,exports.buffer=or,exports.cumsum=exports.cosh=exports.cos=exports.conv3dTranspose=exports.conv3d=exports.conv2dTranspose=exports.conv2d=exports.conv1d=exports.concat4d=exports.concat3d=exports.concat2d=exports.concat1d=exports.concat=exports.complex=exports.clone=exports.clipByValue=exports.ceil=exports.cast=void 0,exports.customGrad=sa,exports.deprecationWarn=Qe,exports.diag=exports.depthwiseConv2d=exports.depthToSpace=void 0,exports.disableDeprecationWarnings=$e,exports.dispose=rn,exports.disposeVariables=Je,exports.elu=exports.dropout=exports.dot=exports.divStrict=exports.divNoNan=exports.div=void 0,exports.enableDebugMode=Ye,exports.enableProdMode=Xe,exports.engine=Ze,exports.env=c,exports.fft=exports.eye=exports.expm1=exports.expandDims=exports.exp=exports.erf=exports.equalStrict=exports.equal=void 0,exports.fill=jn,exports.findBackend=pn,exports.findBackendFactory=hn,exports.gather_util=exports.gatherND=exports.gather=exports.fused=exports.frame=exports.floorDiv=exports.floor=void 0,exports.getBackend=cn,exports.getGradient=f,exports.getKernel=d,exports.getKernelsForBackend=v,exports.grad=na,exports.grads=ra,exports.isNaN=exports.isInf=exports.isFinite=exports.irfft=exports.io=exports.inTopKAsync=exports.image=exports.imag=exports.ifft=exports.hannWindow=exports.hammingWindow=exports.greaterStrict=exports.greaterEqualStrict=exports.greaterEqual=exports.greater=void 0,exports.keep=on,exports.linalg=exports.lessStrict=exports.lessEqualStrict=exports.lessEqual=exports.less=exports.leakyRelu=void 0,exports.linspace=Xn,exports.mean=exports.maximumStrict=exports.maximum=exports.maxPoolWithArgmax=exports.maxPool3d=exports.maxPool=exports.max=exports.math=exports.matMul=exports.losses=exports.logicalXor=exports.logicalOr=exports.logicalNot=exports.logicalAnd=exports.logSumExp=exports.logSoftmax=exports.logSigmoid=exports.log1p=exports.log=exports.localResponseNormalization=void 0,exports.memory=tn,exports.neg=exports.multinomial=exports.multiRNNCell=exports.mulStrict=exports.mul=exports.movingAverage=exports.moments=exports.modStrict=exports.mod=exports.minimumStrict=exports.minimum=exports.min=void 0,exports.nextFrame=uf,exports.oneHot=exports.notEqualStrict=exports.notEqual=exports.norm=void 0,exports.ones=qn,exports.onesLike=void 0,exports.op=Dn,exports.prelu=exports.powStrict=exports.pow=exports.pool=exports.pad4d=exports.pad3d=exports.pad2d=exports.pad1d=exports.pad=exports.outerProduct=void 0,exports.print=ar,exports.prod=void 0,exports.profile=en,exports.randomUniform=exports.randomNormal=exports.randomGamma=exports.rand=void 0,exports.range=Yn,exports.ready=un,exports.reciprocal=exports.real=void 0,exports.registerBackend=dn,exports.registerGradient=g,exports.registerKernel=m,exports.relu6=exports.relu=void 0,exports.removeBackend=ln,exports.rsqrt=exports.round=exports.rfft=exports.reverse4d=exports.reverse3d=exports.reverse2d=exports.reverse1d=exports.reverse=exports.reshape=void 0,exports.scalar=Pn,exports.serialization=exports.separableConv2d=exports.selu=exports.scatter_util=exports.scatterND=void 0,exports.setBackend=sn,exports.setPlatform=vn,exports.sum=exports.subStrict=exports.sub=exports.stridedSlice=exports.stft=exports.step=exports.stack=exports.squeeze=exports.squaredDifferenceStrict=exports.squaredDifference=exports.square=exports.sqrt=exports.split=exports.spectral=exports.sparseToDense=exports.spaceToBatchND=exports.softplus=exports.softmax=exports.slice_util=exports.slice4d=exports.slice3d=exports.slice2d=exports.slice1d=exports.slice=exports.sinh=exports.sin=exports.signal=exports.sign=exports.sigmoid=exports.setdiff1dAsync=void 0,exports.sumOutType=_t,exports.tanh=exports.tan=void 0,exports.tensor=Mn,exports.tensor1d=Ln,exports.tensor2d=Wn,exports.tensor3d=zn,exports.tensor4d=Un,exports.tensor5d=Vn,exports.tensor6d=Gn,exports.test_util=exports.tensor_util=void 0,exports.tidy=nn,exports.tile=void 0,exports.time=an,exports.truncatedNormal=exports.transpose=exports.train=exports.topk=void 0,exports.unregisterGradient=y,exports.unregisterKernel=x,exports.util=exports.unstack=exports.unsortedSegmentSum=void 0,exports.valueAndGrad=oa,exports.valueAndGrads=aa,exports.variable=Hn,exports.variableGrads=ia,exports.whereAsync=exports.where=exports.webgl=exports.version_core=void 0,exports.zeros=Kn,exports.zerosLike=void 0;var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e,n,r){return new(n||(n=Promise))(function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(i,s)}u((r=r.apply(t,e||[])).next())})}function i(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var s=function(){function t(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(t,e){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},t.prototype.registerFlag=function(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){var r=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+r+"."),this.set(t,r)}},t.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},t.prototype.getNumber=function(t){return this.get(t)},t.prototype.getBool=function(t){return this.get(t)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){if(null==this.flagRegistry[t])throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)},t.prototype.evaluateFlag=function(t){if(null==this.flagRegistry[t])throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},t.prototype.setFlags=function(t){this.flags=Object.assign({},t)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var t=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var e,n,r=(e=this.global.location.search,n={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return u(n,e[0],e[1]),e.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(e){var n=e.split(":"),r=n[0],o=n[1];t.urlFlags[r]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error("Could not parse value flag value "+e+" for flag "+t+".")}(r,o)})}},t}();function u(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function c(){return l}exports.Environment=s;var l=null;exports.ENV=l;var p=new Map,h=new Map;function d(t,e){var n=b(t,e);return p.get(n)}function f(t){return h.get(t)}function v(t){for(var e=p.entries(),n=[];;){var r=e.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===t&&n.push(s)}return n}function m(t){var e=t.kernelName,n=t.backendName,r=b(e,n);if(p.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");p.set(r,t)}function g(t){var e=t.kernelName;h.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),h.set(e,t)}function x(t,e){var n=b(t,e);if(!p.has(n))throw new Error("The kernel '"+t+"' for backend '"+e+"' is not registered");p.delete(n)}function y(t){if(!h.has(t))throw new Error("The gradient '"+t+"' for backend is not registered");h.delete(t)}function b(t,e){return e+"_"+t}function w(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function C(t,e,n){return Math.max(t,Math.min(e,n))}function E(t){return t%2==0?t:t+1}function R(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function I(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function k(t,e,n){void 0===n&&(n=""),I(T(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function S(t){I(null!=t,function(){return"The input to the tensor constructor must be a non-null value."})}function A(t,e,n){if(void 0===e&&(e=[]),void 0===n&&(n=!1),null==e&&(e=[]),Array.isArray(t)||H(t)&&!n)for(var r=0;r<t.length;++r)A(t[r],e,n);else e.push(t);return e}function N(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function T(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function D(t){return t%1==0}function F(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function _(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function O(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function M(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,o){var a=0,i=function(){if(t())r();else{var s=e(++a);null!=n&&a>=n?o():setTimeout(i,s)}};i()})}function B(t,e){for(var n=1,r=-1,o=0;o<t.length;++o)if(t[o]>=0)n*=t[o];else if(-1===t[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(t[o]<0)throw Error("Shapes can not be < 0. Found "+t[o]+" at dim "+o);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function P(t,e){var n=e.length;return I((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),I(t.every(function(t){return D(t)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(t){return t<0?n+t:t})}function L(t,e){for(var n=[],r=[],o=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||o?null:P(e,t).sort(),i=0,s=0;s<t.length;++s){if(null!=a){if(a[i]===s&&1!==t[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(null==a[i]||a[i]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),a[i]<=s&&i++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function W(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function z(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error("Unknown data type "+t);n=new Array(e)}return n}function U(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function V(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function G(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function H(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function q(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function K(t){if(null==t)return 0;var e=0;return t.forEach(function(t){return e+=t.length}),e}function j(t){return"string"==typeof t||t instanceof String}function X(t){return"boolean"==typeof t}function Y(t){return"number"==typeof t}function $(t){return Array.isArray(t)?$(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Y(t)?"float32":j(t)?"string":X(t)?"bool":"float32"}function Q(t){return!!(t&&t.constructor&&t.call&&t.apply)}function J(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Z(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function tt(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=A(t)),n&&U(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),o=0;o<r.length;++o)0!==Math.round(t[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+e)}function et(t,e){if(0===t.length)return e[0];var n=t.reduce(function(t,e){return t*e});if(0===n)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function t(e,n,r){var o=new Array;if(1===n.length)for(var a=n[0],i=0;i<a;i++)o[i]=r[e+i];else{a=n[0];var s=n.slice(1),u=s.reduce(function(t,e){return t*e});for(i=0;i<a;i++)o[i]=t(e+i*u,s,r)}return o}(0,t,e)}function nt(t,e){for(var n=rt(t,e),r=0;r<n.length;r++)n[r]=1;return n}function rt(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function ot(){return c().platform.now()}function at(t){t.forEach(function(e){I(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function it(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",c().platform.encode(t,e)}function st(t,e){return void 0===e&&(e="utf-8"),e=e||"utf-8",c().platform.decode(t,e)}function ut(t,e,n){if(0===e)return 0;if(1===e)return t[0];for(var r=t[t.length-1],o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function ct(t,e,n){if(0===e)return[];if(1===e)return[t];for(var r=new Array(e),o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}var lt=Object.freeze({shuffle:w,clamp:C,nearestLargerEven:E,sum:R,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var o=Number(t[r])-Number(e[r]);n+=o*o}return n},assert:I,assertShapesMatch:k,assertNonNull:S,flatten:A,sizeFromShape:N,isScalarShape:function(t){return 0===t.length},arraysEqual:T,isInt:D,tanh:F,sizeToSquarishShape:_,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return w(e),e},rightPad:O,repeatedTry:M,inferFromImplicitShape:B,parseAxisParam:P,squeezeShape:L,getTypedArrayFromDType:W,getArrayFromDType:z,checkConversionForErrors:U,isValidDtype:V,hasEncodingLoss:G,isTypedArray:H,bytesPerElement:q,bytesFromStringArray:K,isString:j,isBoolean:X,isNumber:Y,inferDtype:$,isFunction:Q,nearestDivisor:J,computeStrides:Z,toTypedArray:tt,toNestedArray:et,makeOnesTypedArray:nt,makeZerosTypedArray:rt,now:ot,assertNonNegativeIntegerDimensions:at,fetch:function(t,e){return c().platform.fetch(t,e)},encodeString:it,decodeString:st,locToIndex:ut,indexToLoc:ct}),pt=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new ht)}return t.prototype.profileKernel=function(t,e,n){var r,o=this,a=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(t,e,n){if("float32"!==e)return!1;for(var r=0;r<t.length;r++){var o=t[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,t),a.then(function(a){var i="";null!=a.getExtraProfileInfo&&(i=a.getExtraProfileInfo()),o.logger.logKernelProfile(t,n,r,a.kernelMs,e,i)})})}),r},t}();exports.util=lt;var ht=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r,o,a){var i="number"==typeof r?O(r+"ms",9):r.error,s=O(t,25),u=e.rank,c=e.size,l=O(e.shape.toString(),14),p="";for(var h in o){var d=o[h].shape||e.shape,f=d.length;p+=h+": "+f+"D "+(f>0?d:"")+" "}console.log("%c"+s+"\t%c"+i+"\t%c"+u+"D "+l+"\t%c"+c+"\t%c"+p+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),dt=20,ft=3,vt=7;function mt(t,e,n,r){var o=Z(e),a=function(t,e,n,r){var o=N(e),a=r[r.length-1],i=new Array(a).fill(0),s=e.length,u="complex64"===n?yt(t):t;if(s>1)for(var c=0;c<o/a;c++)for(var l=c*a,p=0;p<a;p++)i[p]=Math.max(i[p],gt(u[l+p],0,n).length);return i}(t,e,n,o),i=e.length,s=function t(e,n,r,o,a,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],c=n.length;if(0===c)return"complex64"===r?[gt(yt(e)[0],0,r)]:"bool"===r?[xt(e[0])]:[e[0].toString()];if(1===c){if(u>dt){var l=ft*s,p=Array.from(e.slice(0,l)),h=Array.from(e.slice((u-ft)*s,u*s));return"complex64"===r&&(p=yt(p),h=yt(h)),["["+p.map(function(t,e){return gt(t,a[e],r)}).join(", ")+", ..., "+h.map(function(t,e){return gt(t,a[u-ft+e],r)}).join(", ")+"]"]}return["["+("complex64"===r?yt(e):Array.from(e)).map(function(t,e){return gt(t,a[e],r)}).join(", ")+"]"]}var d=n.slice(1),f=o.slice(1),v=o[0]*s,m=[];if(u>dt){for(var g=0;g<ft;g++){var x=(y=g*v)+v;m.push.apply(m,t(e.slice(y,x),d,r,f,a,!1))}for(m.push("..."),g=u-ft;g<u;g++)x=(y=g*v)+v,m.push.apply(m,t(e.slice(y,x),d,r,f,a,g===u-1))}else for(g=0;g<u;g++){var y;x=(y=g*v)+v,m.push.apply(m,t(e.slice(y,x),d,r,f,a,g===u-1))}var b=2===c?",":"";for(m[0]="["+m[0]+b,g=1;g<m.length-1;g++)m[g]=" "+m[g]+b;var w=",\n";for(g=2;g<c;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":w),m}(t,e,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(t){return"    "+t}).join("\n")),u.join("\n")}function gt(t,e,n){return O(Array.isArray(t)?parseFloat(t[0].toFixed(vt))+" + "+parseFloat(t[1].toFixed(vt))+"j":j(t)?"'"+t+"'":"bool"===n?xt(t):parseFloat(t.toFixed(vt)).toString(),e)}function xt(t){return 0===t?"false":"true"}function yt(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var bt=function(){function t(t,e,n){var r=this;if(this.dtype=e,this.shape=t.slice(),this.size=N(t),null!=n){var o=n.length;I(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||z(e,this.size),this.strides=Z(t)}return t.prototype.set=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),I(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(n);this.values[o]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=0,r=0,o=t;r<o.length;r++){var a=o[r];if(a<0||a>=this.shape[n]){var i="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=t[t.length-1],u=0;u<t.length-1;++u)s+=this.strides[u]*t[u];return this.values[s]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return wt().makeTensor(this.values,this.shape,this.dtype)},t}(),wt=null,Ct=null,Et=null;exports.TensorBuffer=bt;var Rt=function(){function t(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=N(t),this.strides=Z(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),I(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),this.reshape([t,e,n,r,o])},t.prototype.asType=function(t){return this.throwIfDisposed(),Ct.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,Ct.buffer(this.shape,this.dtype,t)]}})})},t.prototype.bufferSync=function(){return Ct.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,et(this.shape,t)]}})})},t.prototype.arraySync=function(){return et(this.shape,this.dataSync())},t.prototype.data=function(){return a(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=wt().read(this.dataId),"string"!==this.dtype?[3,2]:[4,t];case 1:e=n.sent();try{return[2,e.map(function(t){return st(t)})]}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var t=wt().readSync(this.dataId);if("string"===this.dtype)try{return t.map(function(t){return st(t)})}catch(t){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},t.prototype.bytes=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,wt().read(this.dataId)];case 1:return t=e.sent(),"string"===this.dtype?[2,t]:[2,new Uint8Array(t.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(wt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),Ct.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),Ct.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),Ct.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),Ct.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),Ct.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),Ct.clone(this)},t.prototype.toString=function(t){return void 0===t&&(t=!1),mt(this.dataSync(),this.shape,this.dtype,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Ct.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Ct.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),Ct.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),Ct.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),Ct.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),Ct.reverse(this,t)},t.prototype.concat=function(e,n){return void 0===n&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),Ct.concat([this].concat(e),n)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Ct.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),Ct.stack([this,t],e)},t.prototype.unstack=function(t){return void 0===t&&(t=0),Ct.unstack(this,t)},t.prototype.batchNormalization=function(t,e,n,r,o){return void 0===n&&(n=.001),Et("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,o,r,n)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.sum(this,t,e)},t.prototype.prod=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.prod(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Ct.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),Ct.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),Ct.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),Ct.cast(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),Ct.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),Ct.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),Ct.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),Ct.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),Ct.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),Ct.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),Ct.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),Ct.mulStrict(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),Ct.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),Ct.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),Ct.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Ct.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),Ct.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Ct.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),Ct.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),Ct.modStrict(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Ct.squaredDifferenceStrict(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),Ct.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Ct.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),Ct.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),Ct.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),Ct.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),Ct.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),Ct.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Ct.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),Ct.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Ct.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ct.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Ct.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ct.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),Ct.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Ct.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),Ct.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),Ct.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),Ct.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Ct.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Ct.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Ct.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),Ct.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),Ct.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),Ct.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Ct.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Ct.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Ct.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Ct.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Ct.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Ct.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Ct.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Ct.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Ct.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ct.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),Ct.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),Ct.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Ct.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Ct.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),Ct.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),Ct.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Ct.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ct.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Ct.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Ct.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Ct.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Ct.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Ct.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Ct.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Ct.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Ct.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Ct.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Ct.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Ct.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Ct.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Ct.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Ct.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Ct.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Ct.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Ct.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),Ct.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),Ct.softmax(this,t)},t.prototype.logSoftmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),Ct.logSoftmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),Ct.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),Ct.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,o,a){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),Ct.conv1d(this,t,e,n,r,o,a)},t.prototype.conv2d=function(t,e,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Ct.conv2d(this,t,e,n,r,o,a)},t.prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),Ct.conv2dTranspose(this,t,e,n,r,o)},t.prototype.depthwiseConv2D=function(t,e,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Ct.depthwiseConv2d(this,t,e,n,r,o,a)},t.prototype.separableConv2d=function(t,e,n,r,o,a){return void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),Ct.separableConv2d(this,t,e,n,r,o,a)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Ct.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Ct.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),Ct.localResponseNormalization(this,t,e,n,r)},t.prototype.pool=function(t,e,n,r,o){return this.throwIfDisposed(),Ct.pool(this,t,e,n,r,o)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),wt().makeVariable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Ct.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Ct.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Ct.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),Ct.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,o,a,i,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),Ct.stridedSlice(this,t,e,n,r,o,a,i,s)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Ct.depthToSpace(this,t,e)},t.prototype.fft=function(){return this.throwIfDisposed(),Ct.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),Ct.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),Ct.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),Ct.spectral.irfft(this)},t}();exports.Tensor=Rt,Object.defineProperty(Rt,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype}});var It,kt,St,At,Nt,Tt=function(t){function e(e,n,r,o){var a=t.call(this,e.shape,e.dtype,e.dataId,o)||this;return a.trainable=n,a.name=r,a}return o(e,t),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!T(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");wt().disposeTensor(this),this.dataId=t.dataId,wt().incRef(this,null)},e.prototype.dispose=function(){wt().disposeVariable(this),this.isDisposedInternal=!0},e}(Rt);exports.Variable=Tt,exports.Rank=It,Object.defineProperty(Tt,Symbol.hasInstance,{value:function(t){return t instanceof Rt&&null!=t.assign&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(It||(exports.Rank=It={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(kt||(kt={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(St||(St={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(At||(At={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Nt||(Nt={}));var Dt={float32:At,int32:kt,bool:St,complex64:Nt};function Ft(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error("Can not upcast "+t+" with "+e)}return Dt[t][e]}function _t(t){return Ft(t,"int32")}function Ot(t,e){if(t.dtype===e.dtype)return[t,e];var n=Ft(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Mt(t,e){I(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function Bt(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof Rt)n.push(e);else if(o=e,Array.isArray(o)||"object"==typeof o){var o,a=e;for(var i in a){var s=a[i];r.has(s)||(r.add(s),t(s,n,r))}}}(t,e,new Set),e}var Pt,Lt=Object.freeze({makeTypesMatch:Ot,assertTypesMatch:Mt,isTensorInList:function(t,e){return e.some(function(e){return e.id===t.id})},getTensorsInContainer:Bt}),Wt=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},t}(),zt=function(){function t(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Wt}return t.prototype.ready=function(){return a(this,void 0,void 0,function(){var t,e,n;return i(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];t=this.getSortedBackends(),e=0,r.label=1;case 1:return e<t.length?(n=t[e],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;if(this.initializeBackend(t).asyncInit)return null}return this.registry[t]},t.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},t.prototype.registerBackend=function(t,e,n){return void 0===n&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)},t.prototype.setBackend=function(t){return a(this,void 0,void 0,function(){var e,n,r;return i(this,function(o){switch(o.label){case 0:if(null==this.registryFactory[t])throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,null!=this.registry[t]?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),n=e.success,e.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new pt(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var t=this;v(this.backendName).forEach(function(e){null!=e.setupFunc&&e.setupFunc(t.backendInstance)})},t.prototype.disposeRegisteredKernels=function(t){var e=this;v(t).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(e.registry[t])})},t.prototype.initializeBackend=function(t){var e=this,n=this.registryFactory[t];if(null==n)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,a=r.then(function(n){return!(o<e.pendingBackendInitId||(e.registry[t]=n,e.pendingBackendInit=null,0))}).catch(function(n){return!(o<e.pendingBackendInitId||(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(n.stack||n.message),1))});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(e){return console.warn("Initialization of backend "+t+" failed"),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var t=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,n){return t.registryFactory[n].priority-t.registryFactory[e].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var n=t[e],r=this.initializeBackend(n),o=r.success,a=r.asyncInit;if(a||o)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(t,e){var n=this.state.tensorInfo.get(e),r=n.backend,o=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(t,e){var n,r=this,o=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun(function(){return r.startScope(o)},function(){return r.endScope(n)},function(){return(n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],function(t){return{x:function(){return t.toFloat()}}},[],{}),e},t.prototype.runKernel=function(t,e,n,r,o){return this.runKernelFunc(null,e,null,t,n,r,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(t,e,n){var r=this.backend.numDataIds(),o=0;n.forEach(function(t){o+="complex64"===t.dtype?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-e-o-a;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+t+"'")},t.prototype.runKernelFunc=function(t,e,n,r,o,a,i){var s,u=this,c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var p,h=this.state.numBytes,f=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var v,m=d(r,this.backendName);if(null!=m)p=function(){var t=u.backend.numDataIds();v=m.kernelFunc({inputs:e,attrs:o,backend:u.backend});var n=Array.isArray(v)?v:[v];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n);var s=n.map(function(t){var e=t.dataId,n=t.shape,r=t.dtype;return u.makeTensorFromDataId(e,n,r)});if(l){var p=u.getTensorsForGradient(r,e,s);if(null==p){null==i&&(i=[]);var h=s.filter(function(t,e){return i[e]});p=(a||[]).slice().concat(h)}c=u.saveTensorsForBackwardMode(p)}return s};else{var g=function(t){l&&(c=t.map(function(t){return u.keep(u.clone(t))}))};p=function(){var e=u.backend.numDataIds();v=u.tidy(function(){return t(u.backend,g)});var n=Array.isArray(v)?v:[v];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n),n}}return this.scopedRun(function(){return u.state.kernelDepth++},function(){return u.state.kernelDepth--},function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,e,function(){return p()}):p()}),l&&this.addTapeNode(r,e,s,n,c,o),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-h,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(t){return e[t].shape}),outputShapes:s.map(function(t){return t.shape})}),Array.isArray(v)?s:s[0]},t.prototype.saveTensorsForBackwardMode=function(t){var e=this;return t.map(function(t){return e.keep(e.clone(t))})},t.prototype.getTensorsForGradient=function(t,e,n){var r=f(t);if(null!=r){var o=r.inputsToSave||[],a=r.outputsToSave||[],i=void 0;r.saveAllInputs?(I(Array.isArray(e),function(){return"saveAllInputs is true, expected inputs to be an array."}),i=Object.keys(e).map(function(t){return e[t]})):i=o.map(function(t){return e[t]});var s=n.filter(function(t,e){return a[e]});return i.concat(s)}return null},t.prototype.makeTensor=function(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=t;"string"===n&&j(t[0])&&(o=t.map(function(t){return it(t)}));var a=r.write(o,e,n),i=new Rt(e,n,a,this.nextTensorId());if(this.incRef(i,r),"string"===n){var s=this.state.tensorInfo.get(a),u=K(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return i},t.prototype.makeTensorFromDataId=function(t,e,n,r){var o=new Rt(e,n=n||"float32",t,this.nextTensorId());return this.incRef(o,r),o},t.prototype.makeVariable=function(t,e,n,r){void 0===e&&(e=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.asType(r));var o=new Tt(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(t,e){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(r=t.size*q(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Tt||this.track(t)},t.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}},t.prototype.disposeVariable=function(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},t.prototype.profile=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){return this.state.profiling=!0,e=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(t){return t.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.prototype.addTapeNode=function(t,e,n,r,o,a){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:o},u=f(t);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(t){return t=t.map(function(t,e){if(null==t){var r=n[e],o=rt(r.size,r.dtype);return i.makeTensor(o,r.shape,r.dtype)}return t}),r(t.length>1?t:t[0],o,a)}),this.state.activeTape.push(s)},t.prototype.keep=function(t){return t.kept=!0,t},t.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},t.prototype.endScope=function(t){for(var e=this,n=Bt(t),r=new Set(n.map(function(t){return t.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||r.has(a.id)||a.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(t){t.kept||t.scopeId!==i.id||e.track(t)})},t.prototype.gradients=function(t,e,n,r){var o=this;if(void 0===r&&(r=!1),I(e.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",t)});I(a instanceof Rt,function(){return"The result y returned by f() must be a tensor."});var i=function(t,e,n){for(var r={},o={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var i=(f=t[a]).inputs;for(var s in i){for(var u=i[s],c=!1,l=0;l<e.length;l++)if(r[u.id]){f.outputs.forEach(function(t){return r[t.id]=!0}),c=!0,o[f.id]=!0;break}if(c)break}}var p={};p[n.id]=!0;var h={};for(a=t.length-1;a>=0;a--)for(i=(f=t[a]).inputs,l=0;l<f.outputs.length;l++)if(p[f.outputs[l].id]){for(var s in i)p[i[s].id]=!0,h[f.id]=!0;break}var d=[];for(a=0;a<t.length;a++){var f;if(o[(f=t[a]).id]&&h[f.id]){var v={};for(var s in f.inputs){var m=f.inputs[s];r[m.id]&&(v[s]=m)}var g=Object.assign({},f);g.inputs=v,g.outputs=f.outputs,d.push(g)}}return d}(this.state.activeTape,e,a);if(!r&&0===i.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var t,r,s={};s[a.id]=null==n?(r=nt(N(t=a.shape),"float32"),Ut.makeTensor(r,t,"float32")):n,function(t,e,n){for(var r=function(r){var o=e[r],a=[];if(o.outputs.forEach(function(e){var n=t[e.id];null!=n?a.push(n):a.push(null)}),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var i=o.gradient(a),s=function(e){if(!(e in i))throw new Error("Cannot backprop through input "+e+". Available gradients found: "+Object.keys(i)+".");var r=n(function(){return i[e]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+e+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=o.inputs[e];if(!T(r.shape,a.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+e+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==t[a.id])t[a.id]=r;else{var s=t[a.id];t[a.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=e.length-1;o>=0;o--)r(o)}(s,i,function(t){return o.tidy(t)});var u=e.map(function(t){return s[t.id]});return 0===o.state.gradientDepth&&(o.state.activeTape.forEach(function(t){for(var e=0,n=t.saved;e<n.length;e++)n[e].dispose()}),o.state.activeTape=null),{value:a,grads:u}})},t.prototype.customGrad=function(t){var e=this;return I(Q(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];I(r.every(function(t){return t instanceof Rt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return r.forEach(function(t,e){a[e]=t}),e.runKernelFunc(function(e,o){return I((n=t.apply(void 0,r.concat([o]))).value instanceof Rt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),I(Q(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},a,function(t,e){var o=n.gradFunc(t,e),a=Array.isArray(o)?o:[o];I(a.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),I(a.every(function(t){return t instanceof Rt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var i={};return a.forEach(function(t,e){i[e]=function(){return t}}),i})}},t.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},t.prototype.time=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=ot(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=ot()-e,[2,n]}})})},t.prototype.track=function(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Wt,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}();exports.tensor_util=Lt;var Ut=function(){var n=function(){if(null==Pt){var n=void 0;if("undefined"!=typeof window)n=window;else if(void 0!==t)n=t;else if(void 0!==e)n=e;else{if("undefined"==typeof self)throw new Error("Could not find a global object");n=self}Pt=n}return Pt}();if(null==n._tfengine){var r=new s(n);n._tfengine=new zt(r)}return function(t){exports.ENV=l=t}(n._tfengine.ENV),wt=function(){return n._tfengine},n._tfengine}();function Vt(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Gt=c();Gt.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Gt.registerFlag("IS_BROWSER",function(){return Vt()}),Gt.registerFlag("IS_NODE",function(){return void 0!==e&&void 0!==e.versions&&void 0!==e.versions.node}),Gt.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Gt.registerFlag("PROD",function(){return!1}),Gt.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Gt.getBool("DEBUG")}),Gt.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Gt.registerFlag("IS_TEST",function(){return!1});var Ht,qt,Kt,jt={},Xt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Yt(t,e){jt[t]=e}function $t(t){t in jt||(jt[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",function(e){e.preventDefault(),delete jt[t]},!1),1===t?e.getContext("webgl",Xt)||e.getContext("experimental-webgl",Xt):e.getContext("webgl2",Xt)}(t));var e=jt[t];return e.isContextLost()?(delete jt[t],$t(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),jt[t])}function Qt(t,e){return[e,t]}function Jt(t){var e=N(t);return _(Math.ceil(e/4))}function Zt(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function te(t,e){var n,r,o,a,i,s,u,l,p,h=t;return 2===c().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,o=h.RGBA16F,a=h.RGBA32F,i=h.RED,s=4,u=1,l=h.HALF_FLOAT,p=h.FLOAT):(n=t.RGBA,r=t.RGBA,o=t.RGBA,a=h.RGBA,i=t.RGBA,s=4,u=4,l=null!=e?e.HALF_FLOAT_OES:null,p=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:p}}function ee(t,e,n){var r=n();return e&&function(t){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+ae(t,e))}(t),r}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(Ht||(Ht={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(qt||(qt={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Kt||(Kt={}));var ne=5.96e-8,re=65504;function oe(t){return!!(c().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||ne<Math.abs(t)&&Math.abs(t)<re)}function ae(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function ie(t,e,n){return Ne(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function se(t,e,n){var r=Ne(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(ee(t,e,function(){return t.shaderSource(r,n)}),ee(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function ue(t,e,n){var r=Ne(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(ee(t,e,function(){return t.shaderSource(r,n)}),ee(t,e,function(){return t.compileShader(r)}),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw function(t,e){var n=pe.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],o=t.split("\n"),a=o.length.toString().length+2,i=o.map(function(t,e){return O((e+1).toString(),a)+t}),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var c=i.slice(0,r-1),l=i.slice(r-1,r),p=i.slice(r);console.log(c.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+O(l[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var ce,le,pe=/ERROR: [0-9]+:([0-9]+):/g;function he(t,e){return Ne(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function de(t,e,n){if(ee(t,e,function(){return t.linkProgram(n)}),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function fe(t,e,n){if(ee(t,e,function(){return t.validateProgram(n)}),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function ve(t,e,n){var r=Ne(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ee(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),ee(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function me(t,e,n){var r=Ne(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return ee(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),ee(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function ge(t,e){return Ne(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function xe(t,e){var n=c().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function ye(t,e){return Ne(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function be(t,e,n,r,o,a,i,s){var u=t.getAttribLocation(n,r);return-1!==u&&(ee(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,o)}),ee(t,e,function(){return t.vertexAttribPointer(u,a,t.FLOAT,!1,i,s)}),ee(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function we(t,e,n,r){Te(t,r),ee(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function Ce(t,e,n,r){return Ne(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Ee(t,e,n){return t.getUniformLocation(e,n)}function Re(t,e,n,r,o,a){ee(t,e,function(){return we(t,e,r,a)}),ee(t,e,function(){return t.uniform1i(o,a)})}function Ie(t,e,n,r){ee(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),ee(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function ke(t,e,n){ee(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),ee(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function Se(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ae(t,e))}function Ae(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Ne(t,e,n,r){var o=ee(t,e,function(){return n()});if(null==o)throw new Error(r);return o}function Te(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function De(t,e){return void 0===e&&(e=2),N(t.slice(0,t.length-e))}function Fe(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function _e(t){var e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[De(t)].concat(Fe(t))),e}function Oe(t,e){var n;void 0===e&&(e=!1);var r=c().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,1===(t=t.map(function(e,n){return n>=t.length-2?E(t[n]):t[n]})).length&&(t=[2,t[0]])),2!==t.length){var o=L(t);t=o.newShape}var a=N(t);if(t.length<=1&&a<=r)return[1,a];if(2===t.length&&t[0]<=r&&t[1]<=r)return t;if(3===t.length&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var i=De(t),s=2,u=2;return t.length&&(s=(n=Fe(t))[0],u=n[1]),_(a=i*(s/2)*(u/2)).map(function(t){return 2*t})}return _(a)}function Me(t){return t%2==0}function Be(t,e){if(T(t=t.slice(-2),e=e.slice(-2)))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(Me(n)&&Me(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&Me(t[0])&&Me(e[0])}function Pe(t){if(null==ce){var e=$t(t);ce=e.getParameter(e.MAX_TEXTURE_SIZE)}return ce}function Le(t){if(null==le){var e=$t(t);le=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,le)}function We(t){if(0===t)return 0;var e=$t(t);return ze(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:ze(e,"EXT_disjoint_timer_query")?1:0}function ze(t,e){return null!=t.getExtension(e)}function Ue(t){try{if(null!=$t(t))return!0}catch(t){return!1}return!1}function Ve(t){if(0===t)return!1;var e=$t(t);if(1===t){if(!ze(e,"OES_texture_float"))return!1}else if(!ze(e,"EXT_color_buffer_float"))return!1;return He(e)}function Ge(t){if(0===t)return!1;var e=$t(t);if(1!==t){if(ze(e,"EXT_color_buffer_float"))return He(e);if(ze(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(t,e){var n=te(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}(e,n)}return!1}return!!ze(e,"OES_texture_float")&&!!ze(e,"WEBGL_color_buffer_float")&&He(e)}function He(t){var e=te(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),o}function qe(t){return 2===t&&null!=$t(t).fenceSync}var Ke=Object.freeze({callAndCheck:ee,canBeRepresented:oe,getWebGLErrorMessage:ae,getExtensionOrThrow:ie,createVertexShader:se,createFragmentShader:ue,createProgram:he,linkProgram:de,validateProgram:fe,createStaticVertexBuffer:ve,createStaticIndexBuffer:me,getNumChannels:function(){return 2===c().getNumber("WEBGL_VERSION")?1:4},createTexture:ge,validateTextureSize:xe,createFramebuffer:ye,bindVertexBufferToProgramAttribute:be,bindTextureUnit:we,unbindTextureUnit:function(t,e,n){Te(t,n),ee(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Ce,getProgramUniformLocation:Ee,bindTextureToProgramUniformSampler:Re,bindCanvasToFramebuffer:function(t,e){ee(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),ee(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),ee(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Ie,unbindColorTextureFromFramebuffer:ke,validateFramebuffer:Se,getFramebufferErrorMessage:Ae,getBatchDim:De,getRowsCols:Fe,getShapeAs3D:_e,getTextureShapeFromLogicalShape:Oe,isReshapeFree:Be,getWebGLMaxTextureSize:Pe,resetMaxTextureSize:function(){ce=null},resetMaxTexturesInShader:function(){le=null},getMaxTexturesInShader:Le,getWebGLDisjointQueryTimerVersion:We,hasExtension:ze,isWebGLVersionEnabled:Ue,isCapableOfRenderingToFloatTexture:Ve,isDownloadFloatTextureEnabled:Ge,isWebGLFenceEnabled:qe}),je=c();function Xe(){c().set("PROD",!0)}function Ye(){c().set("DEBUG",!0)}function $e(){c().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Qe(t){c().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Je(){Ut.disposeVariables()}function Ze(){return Ut}function tn(){return Ut.memory()}function en(t){return Ut.profile(t)}function nn(t,e){return Ut.tidy(t,e)}function rn(t){Bt(t).forEach(function(t){return t.dispose()})}function on(t){return Ut.keep(t)}function an(t){return Ut.time(t)}function sn(t){return Ut.setBackend(t)}function un(){return Ut.ready()}function cn(){return Ut.backendName}function ln(t){Ut.removeBackend(t)}function pn(t){return Ut.findBackend(t)}function hn(t){return Ut.findBackendFactory(t)}function dn(t,e,n){return void 0===n&&(n=1),Ut.registerBackend(t,e,n)}function fn(){return Ut.backend}function vn(t,e){c().setPlatform(t,e)}function mn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c().getBool("IS_TEST")||console.warn.apply(console,t)}function gn(t,e){var n=t;if(H(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||H(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&c().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],Array.isArray(e)||H(e)){I(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),I(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var o=n.slice(1),a=0;a<e.length;++a)t(e[a],o,r.concat(a))}else I(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(t,r,[]),r}function xn(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function yn(t,e,n,r){if(void 0===r&&(r="numeric"),t instanceof Rt)return xn(r,t.dtype,e,n),t;var o=$(t);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),xn(r,o,e,n),null==t||!H(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t){var a=null==t?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=gn(t,o);H(t)||Array.isArray(t)||(t=[t]);var s="string"!==o?tt(t,o,c().getBool("DEBUG")):A(t,[],!0);return Ut.makeTensor(s,i,o)}function bn(t,e,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return yn(t,e+"["+r+"]",n)},r)}function wn(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Cn(t,e,n){for(var r=t.length+e.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(t[a++]):o.push(e[i++]);return o}function En(t,e){for(var n=[],r=t.length,o=0;o<r;o++)-1===e.indexOf(o)&&n.push(t[o]);return[n,e.map(function(e){return t[e]})]}function Rn(t,e){return Cn(t,e.map(function(t){return 1}),e)}function In(t,e,n){I(wn(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function kn(t,e){if(wn(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function Sn(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function An(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Nn(t,e){var n=t[0].length;t.forEach(function(t,e){I(t.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")"})}),I(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(t,o){for(var a=0;a<n;a++)I(a===e||t[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Tn(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function Dn(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ut.startScope(n);try{var o=r.apply(void 0,t);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ut.endScope(o),o}catch(t){throw Ut.endScope(null),t}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}je.registerFlag("HAS_WEBGL",function(){return je.getNumber("WEBGL_VERSION")>0}),je.registerFlag("WEBGL_VERSION",function(){return Ue(2)?2:Ue(1)?1:0}),je.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===je.get("WEBGL_VERSION")}),je.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),je.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),je.registerFlag("WEBGL_PACK",function(){return je.getBool("HAS_WEBGL")}),je.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_CLIP",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_REDUCE",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_LAZILY_UNPACK",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_CONV_IM2COL",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Pe(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Le(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=je.getNumber("WEBGL_VERSION");return 0===t?0:We(t)}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Ve(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!je.getBool("WEBGL_FORCE_F16_TEXTURES")&&je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Ge(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return qe(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Et=Qe;var Fn=Dn({complex_:function(t,e){var n=yn(t,"real","complex"),r=yn(e,"imag","complex");return k(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Ut.runKernelFunc(function(t){return t.complex(n,r)},{$real:n,$imag:r})}}),_n=Dn({real_:function(t){var e=yn(t,"input","real");return Ut.runKernelFunc(function(t){return t.real(e)},{$input:e})}}),On=Dn({imag_:function(t){var e=yn(t,"input","imag");return Ut.runKernelFunc(function(t){return t.imag(e)},{$input:e})}});function Mn(t,e,n){return Bn(t,e,gn(t,n),n)}function Bn(t,e,n,r){if(null==r&&(r=$(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!H(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){at(e);var o=N(e),a=N(n);I(o===a,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+o+" values but has "+a});for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==N(e.slice(i));I(n[i]===e[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return H(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?tt(t,r,c().getBool("DEBUG")):A(t,[],!0),Ut.makeTensor(t,e,r)}function Pn(t,e){if((H(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&H(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bn(t,[],[],e)}function Ln(t,e){S(t);var n=gn(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bn(t,null,n,e)}function Wn(t,e,n){if(S(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=gn(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bn(t,e,r,n)}function zn(t,e,n){if(S(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=gn(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Bn(t,e,r,n)}function Un(t,e,n){if(S(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=gn(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Bn(t,e,r,n)}function Vn(t,e,n){if(S(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=gn(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Bn(t,e,r,n)}function Gn(t,e,n){if(S(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=gn(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Bn(t,e=e||r,r,n)}function Hn(t,e,n,r){return void 0===e&&(e=!0),Ut.makeVariable(t,e,n,r)}function qn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=qn(t,"float32"),r=Kn(t,"float32");return Fn(n,r)}var o=nt(N(t),e);return Ut.makeTensor(o,t,e)}function Kn(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=Kn(t,"float32"),r=Kn(t,"float32");return Fn(n,r)}var o=rt(N(t),e);return Ut.makeTensor(o,t,e)}function jn(t,e,n){return Ut.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function Xn(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Ut.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function Yn(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return Kn([0],r);var o=rt(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return Ln(o,r)}exports.imag=On,exports.real=_n,exports.complex=Fn;var $n=Dn({onesLike_:function(t){var e=yn(t,"x","onesLike");if("complex64"===e.dtype){var n=$n(_n(e)),r=Qn(On(e));return Fn(n,r)}return Ut.runKernelFunc(function(t){return t.onesLike(e)},{x:e},function(t,e){return{x:function(){return Qn(t)}}},"OnesLike")}}),Qn=Dn({zerosLike_:function(t){var e=yn(t,"x","zerosLike");return Ut.runKernelFunc(function(t){return t.zerosLike(e)},{x:e},function(t,e){return{x:function(){return Qn(t)}}},"ZerosLike")}});exports.zerosLike=Qn,exports.onesLike=$n;var Jn=Dn({concat_:function(t,e){void 0===e&&(e=0),I(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=bn(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(t){if("complex64"!==t.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+t.dtype+". ")}),e=P(e,n[0].shape)[0];var r=Tn(n.map(function(t){return t.shape}),e);if(0===N(r))return Mn([],r);if(1===(n=n.filter(function(t){return t.size>0})).length)return n[0];var o=n.map(function(t){return t.shape});Nn(o,e);var a=n,i={axis:e};return Ut.runKernelFunc(function(t){return t.concat(n,e)},a,function(t){var n=o.map(function(t){return t[e]});return rr(t,n,e).map(function(t){return function(){return t}})},"Concat",i)}}),Zn=Dn({concat1d_:function(t){return Jn(t,0)}}),tr=Dn({concat2d_:function(t,e){return Jn(t,e)}}),er=Dn({concat3d_:function(t,e){return Jn(t,e)}}),nr=Dn({concat4d_:function(t,e){return Jn(t,e)}}),rr=Dn({split_:function(t,e,n){void 0===n&&(n=0);var r,o=yn(t,"x","split");return n=P(n,o.shape)[0],"number"==typeof e?(I(o.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(o.shape[n]/e)):(I(o.shape[n]===e.reduce(function(t,e){return t+e}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),Ut.runKernelFunc(function(t){return t.split(o,r,n)},{$x:o},function(t){return{$x:function(){return Jn(t,n)}}})}});function or(t,e,n){return void 0===e&&(e="float32"),e=e||"float32",at(t),new bt(t,e,n)}function ar(t,e){void 0===e&&(e=!1),console.log(t.toString(e))}exports.split=rr,exports.concat4d=nr,exports.concat3d=er,exports.concat2d=tr,exports.concat1d=Zn,exports.concat=Jn;var ir=Dn({batchToSpaceND_:function(t,e,n){var r=yn(t,"x","batchToSpaceND"),o=e.reduce(function(t,e){return t*e});return I(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),I(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),I(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+o}),Ut.runKernelFunc(function(t){return t.batchToSpaceND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}})}}),sr=Dn({cast_:function(t,e){var n=yn(t,"x","cast");if(!V(e))throw new Error("Failed to cast to unknown dtype "+e);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:e};return Ut.runKernelFunc(function(t){return t.cast(n,e)},{x:n},function(t){return{x:function(){return t.clone()}}},"Cast",r)}}),ur=Dn({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=yn(t,"x","cumsum"),a=kn([e|=0],o.rank),i=o;null!=a&&(i=o.transpose(a));var s=An(1,o.rank)[0],u=Ut.runKernelFunc(function(t){return t.cumsum(i,s,n,r)},{permutedX:i},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=a&&(u=u.transpose(a)),u}}),cr=Dn({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=yn(t,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return I(o*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+e+"  for depthToSpace with input shape\n      "+r.shape}),I(a*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+e+" for depthToSpace with input shape\n          "+r.shape}),I(i%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+i+" for depthToSpace with input shape "+r.shape}),Ut.runKernelFunc(function(t){return t.depthToSpace(r,e,n)},{$x:r})}}),lr=Dn({expandDims_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","expandDims",null);I(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(I(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),pr(n,r)}}),pr=Dn({reshape_:function(t,e){var n=yn(t,"x","reshape",null);e=B(e,n.size),I(n.size===N(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return Ut.runKernelFunc(function(t){return t.reshape(n,e)},{x:n},function(t){return{x:function(){return t.reshape(n.shape)}}},"Reshape",r)}}),hr=Dn({spaceToBatchND_:function(t,e,n){var r=yn(t,"x","spaceToBatchND");return I(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),I(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),I(r.shape.reduce(function(t,r,o){return o>0&&o<=e.length?t&&(r+n[o-1][0]+n[o-1][1])%e[o-1]==0:t},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),Ut.runKernelFunc(function(t){return t.spaceToBatchND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}})}}),dr=Dn({squeeze_:function(t,e){var n=yn(t,"x","squeeze");return pr(n,L(n.shape,e).newShape)}}),fr=Dn({stack_:function(t,e){void 0===e&&(e=0);var n=bn(t,"tensors","stack");if(I(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(e);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;I(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(t){k(o,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){I(a===t.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(t){return t.expandDims(e)});return Jn(i,e)}}),vr=Dn({unstack_:function(t,e){void 0===e&&(e=0),e=e||0;var n=yn(t,"x","unstack");I(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return Ut.runKernelFunc(function(t){return t.unstack(n,e)},{x:n},function(t){return{x:function(){return fr(t,e)}}},"Unpack",r)}}),mr=function(t,e){return a(this,void 0,void 0,function(){var n,r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return n=yn(t,"x","setdiff1d"),r=yn(e,"y","setdiff1d"),I(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),I(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),I(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=i.sent(),[4,r.data()];case 2:for(a=i.sent(),s=new Set(a),u=0,p=0;p<o.length;p++)s.has(o[p])||u++;for(c=new bt([u],n.dtype),l=new bt([u],"int32"),p=0,h=0;p<o.length;p++)s.has(o[p])||(c.values[h]=o[p],l.values[h]=p,h++);return[2,[c.toTensor(),l.toTensor()]]}})})};function gr(t,e,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(e.slice(0))).push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);for(var a=e.length,i=0;i<a;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(a+1))}return o}function xr(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<t;++o)o>=2*e+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function yr(t,e,n,r){void 0===r&&(r=!0);var o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?o.push(e[a-1]*t[a]):o.push(t[a]/e[a-1]):o.push(t[a]);return o}function br(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function wr(t,e,n){for(var r=t.slice(0,1),o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}exports.setdiff1dAsync=mr,exports.unstack=vr,exports.stack=fr,exports.squeeze=dr,exports.spaceToBatchND=hr,exports.reshape=pr,exports.expandDims=lr,exports.depthToSpace=cr,exports.cumsum=ur,exports.cast=sr,exports.batchToSpaceND=ir;var Cr="Add",Er="AddN",Rr="Div",Ir="FusedBatchNorm",kr="SquaredDifference",Sr="Square",Ar="Transpose",Nr="NonMaxSuppressionV5",Tr="BroadcastTo",Dr="OneHot",Fr="Identity",_r="Tile",Or="PadV2",Mr="FromPixels",Br="MaxPoolWithArgmax";exports.MaxPoolWithArgmax=Br,exports.FromPixels=Mr,exports.PadV2=Or,exports.Tile=_r,exports.Identity=Fr,exports.OneHot=Dr,exports.BroadcastTo=Tr,exports.NonMaxSuppressionV5=Nr,exports.Transpose=Ar,exports.Square=Sr,exports.SquaredDifference=kr,exports.FusedBatchNorm=Ir,exports.Div=Rr,exports.AddN=Er,exports.Add=Cr;var Pr=Dn({add_:function(t,e){var n,r=yn(t,"a","add"),o=yn(e,"b","add");n=Ot(r,o),r=n[0],o=n[1];var a={a:r,b:o};return Ut.runKernelFunc(function(t,e){var n=t.add(r,o);return e([r,o]),n},a,null,Cr)}});function Lr(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function Wr(t,e){for(var n=[],r=0;r<e.length;r++){var o=t[t.length-r-1],a=e.length-r-1,i=e[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function zr(t,e){for(var n=[],r=Math.max(t.length,e.length),o=0;o<r;o++){var a=t[t.length-o-1];null==a&&(a=1);var i=e[e.length-o-1];if(null==i&&(i=1),1===a)n.unshift(i);else if(1===i)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}exports.add=Pr;var Ur=Dn({abs_:function(t){var e=yn(t,"x","abs");return"complex64"===e.dtype?Ut.runKernelFunc(function(t){return t.complexAbs(e)},{$x:e}):Ut.runKernelFunc(function(t,n){var r=t.abs(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().step(-1))}}},"Abs")}}),Vr=Dn({acos_:function(t){var e=yn(t,"x","acos");return Ut.runKernelFunc(function(t,n){var r=t.acos(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),Gr=Dn({acosh_:function(t){var e=yn(t,"x","acosh");return Ut.runKernelFunc(function(t,n){var r=t.acosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),Hr=Dn({asin_:function(t){var e=yn(t,"x","asin");return Ut.runKernelFunc(function(t,n){var r=t.asin(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).sub(n.toFloat().square()).sqrt())}}})}}),qr=Dn({asinh_:function(t){var e=yn(t,"x","asinh");return Ut.runKernelFunc(function(t,n){var r=t.asinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.divStrict(Pn(1).add(n.toFloat().square()).sqrt())}}})}}),Kr=Dn({atan_:function(t){var e=yn(t,"x","atan");return Ut.runKernelFunc(function(t,n){var r=t.atan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().square().add(1))}}})}}),jr=Dn({atanh_:function(t){var e=yn(t,"x","atanh");return Ut.runKernelFunc(function(t,n){var r=t.atanh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(Pn(1).sub(n.toFloat().square()))}}})}}),Xr=Dn({ceil_:function(t){var e=yn(t,"x","ceil");return Ut.runKernelFunc(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),Yr=Dn({clipByValue_:function(t,e,n){var r=yn(t,"x","clipByValue");I(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var o=[r],a={min:e,max:n};return Ut.runKernelFunc(function(t,o){var a=t.clip(r,e,n);return o([r]),a},{x:r},function(t,r){var o=r[0];return{x:function(){return t.where(o.greaterEqual(e).logicalAnd(o.lessEqual(n)),Qn(t))}}},"ClipByValue",a,o)}}),$r=Dn({cos_:function(t){var e=yn(t,"x","cos"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.cos(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return n.toFloat().sin().neg().mul(t)}}},"Cos",{},n)}}),Qr=Dn({cosh_:function(t){var e=yn(t,"x","cosh");return Ut.runKernelFunc(function(t,n){var r=t.cosh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().sinh().mulStrict(t)}}})}}),Jr=Dn({erf_:function(t){var e=yn(t,"x","erf");return I("int32"===e.dtype||"float32"===e.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===e.dtype&&(e=e.toFloat()),Ut.runKernelFunc(function(t,n){var r=t.erf(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Zr=Dn({exp_:function(t){var e=yn(t,"x","exp");return Ut.runKernelFunc(function(t,n){var r=t.exp(e);return n([r]),r},{x:e},function(t,e){return{x:function(){return t.mulStrict(e[0])}}},"Exp",{},[],[!0])}}),to=Dn({expm1_:function(t){var e=yn(t,"x","expm1");return Ut.runKernelFunc(function(t,n){var r=t.expm1(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.exp())}}})}}),eo=Dn({floor_:function(t){var e=yn(t,"x","floor");return Ut.runKernelFunc(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),no=Dn({log_:function(t){var e=yn(t,"x","log"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.log(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.div(n.toFloat())}}},"Log",{},n)}}),ro=Dn({log1p_:function(t){var e=yn(t,"x","log1p");return Ut.runKernelFunc(function(t,n){var r=t.log1p(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.add(1))}}})}}),oo=Dn({logSigmoid_:function(t){var e=yn(t,"x","logSigmoid");return Ut.runKernelFunc(function(t,n){var r=t.softplus(e.neg()).neg();return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.neg().sigmoid())}}})}}),ao=Dn({neg_:function(t){var e=yn(t,"x","neg"),n=[e];return Ut.runKernelFunc(function(t){return t.neg(e)},{x:e},function(t){return{x:function(){return t.neg()}}},"Neg",{},n)}}),io=Dn({reciprocal_:function(t){var e=yn(t,"x","reciprocal");return Ut.runKernelFunc(function(t,n){var r=t.reciprocal(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.square().neg())}}})}}),so=Dn({round_:function(t){var e=yn(t,"x","round");return Ut.runKernelFunc(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),uo=Dn({rsqrt_:function(t){var e=yn(t,"x","rsqrt"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.rsqrt(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),co=Dn({sigmoid_:function(t){var e=yn(t,"x","sigmoid");return Ut.runKernelFunc(function(t,n){var r=t.sigmoid(e);return n([r]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mul(n.mul(Pn(1).sub(n)))}}},"Sigmoid")}}),lo=Dn({sign_:function(t){var e=yn(t,"x","sign");return Ut.runKernelFunc(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),po=Dn({isNaN_:function(t){var e=yn(t,"x","isNaN");return Ut.runKernelFunc(function(t){return t.isNaN(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),ho=Dn({isInf_:function(t){var e=yn(t,"x","isInf");return Ut.runKernelFunc(function(t){return t.isInf(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),fo=Dn({isFinite_:function(t){var e=yn(t,"x","isFinite");return Ut.runKernelFunc(function(t){return t.isFinite(e)},{$x:e},function(t){return{$x:function(){return Qn(t)}}})}}),vo=Dn({sin_:function(t){var e=yn(t,"x","sin"),n=[e];return Ut.runKernelFunc(function(t,n){var r=t.sin(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return n.toFloat().cos().mul(t)}}},"Sin",{},n)}}),mo=Dn({sinh_:function(t){var e=yn(t,"x","sinh");return Ut.runKernelFunc(function(t,n){var r=t.sinh(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return n.toFloat().cosh().mulStrict(t)}}})}}),go=Dn({softplus_:function(t){var e=yn(t,"x","softplus");return Ut.runKernelFunc(function(t,n){var r=t.softplus(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mul(n.sigmoid())}}})}}),xo=Dn({sqrt_:function(t){var e=yn(t,"x","sqrt");return Ut.runKernelFunc(function(t,n){var r=t.sqrt(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.toFloat().sqrt().mul(2))}}})}}),yo=Dn({step_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","step");return Ut.runKernelFunc(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return Qn(t)}}})}}),bo=Dn({tan_:function(t){var e=yn(t,"x","tan");return Ut.runKernelFunc(function(t,n){var r=t.tan(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.div(n.cos().square())}}})}}),wo=Dn({tanh_:function(t){var e=yn(t,"x","tanh");return Ut.runKernelFunc(function(t,n){var r=t.tanh(e);return n([r]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return Pn(1).sub(n.square()).mulStrict(t)}}},"Tanh",{},null,[!0])}});exports.tanh=wo,exports.tan=bo,exports.step=yo,exports.sqrt=xo,exports.softplus=go,exports.sinh=mo,exports.sin=vo,exports.isFinite=fo,exports.isInf=ho,exports.isNaN=po,exports.sign=lo,exports.sigmoid=co,exports.rsqrt=uo,exports.round=so,exports.reciprocal=io,exports.neg=ao,exports.logSigmoid=oo,exports.log1p=ro,exports.log=no,exports.floor=eo,exports.expm1=to,exports.exp=Zr,exports.erf=Jr,exports.cosh=Qr,exports.cos=$r,exports.clipByValue=Yr,exports.ceil=Xr,exports.atanh=jr,exports.atan=Kr,exports.asinh=qr,exports.asin=Hr,exports.acosh=Gr,exports.acos=Vr,exports.abs=Ur;var Co=Dn({addStrict_:function(t,e){var n=yn(t,"a","addStrict"),r=yn(e,"b","addStrict");return k(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Eo=Dn({atan2_:function(t,e){var n,r=yn(t,"a","atan2"),o=yn(e,"b","atan2");n=Ot(r,o),r=n[0],o=n[1];var a=zr(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.atan2(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=Pr(n.square(),r.square()),o=t.mul(r.div(e)),i=Wr(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},$b:function(){var e=Pr(n.square(),r.square()),o=ao(t.mul(n.div(e))),i=Wr(r.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(r.shape)}}})}}),Ro=Dn({divStrict_:function(t,e){var n=yn(t,"a","div"),r=yn(e,"b","div");return k(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Io=Dn({floorDiv_:function(t,e){var n,r=yn(t,"a","floorDiv"),o=yn(e,"b","floorDiv");n=Ot(r,o),r=n[0],o=n[1];var a=zr(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.floorDiv(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.div(r.toFloat()),o=Wr(n.shape,a);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=Wr(r.shape,a);o.length>0&&(e=e.sum(o).reshape(r.shape));var i=r.square();return e.div(i.toFloat()).neg()}}},"FloorDiv")}}),ko=Dn({maximum_:function(t,e){var n,r=yn(t,"a","maximum"),o=yn(e,"b","maximum");return n=Ot(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),zr(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.maximum(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.greaterEqual(r).toFloat())},b:function(){return t.mul(n.less(r).toFloat())}}},"Maximum")}}),So=Dn({maximumStrict_:function(t,e){var n=yn(t,"a","maximumStrict"),r=yn(e,"b","maximumStrict");return k(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Ao=Dn({minimum_:function(t,e){var n,r=yn(t,"a","minimum"),o=yn(e,"b","minimum");return n=Ot(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),zr(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.minimum(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){return t.mul(n.lessEqual(r).toFloat())},b:function(){return t.mul(n.greater(r).toFloat())}}},"Minimum")}}),No=Dn({minimumStrict_:function(t,e){var n=yn(t,"a","minimumStrict"),r=yn(e,"b","minimumStrict");return k(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),To=Dn({mod_:function(t,e){var n,r=yn(t,"a","mod"),o=yn(e,"b","mod");n=Ot(r,o),r=n[0],o=n[1];var a=zr(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.mod(r,o);return e([r,o]),n},{$a:r,$b:o},function(t,e){var n=e[0],r=e[1];return{$a:function(){var e=Wr(n.shape,a);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),o=Wr(r.shape,a);return o.length>0?e.sum(o).reshape(r.shape):e}}})}}),Do=Dn({modStrict_:function(t,e){var n=yn(t,"a","modStrict"),r=yn(e,"b","modStrict");return k(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Fo=Dn({mul_:function(t,e){var n,r=yn(t,"a","mul"),o=yn(e,"b","mul");n=Ot(r,o),r=n[0],o=n[1];var a=zr(r.shape,o.shape);return Ut.runKernelFunc(function(t,e){var n=t.multiply(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){var e=t.mul(r.toFloat()),o=Wr(n.shape,a);return o.length>0?e.sum(o).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),o=Wr(r.shape,a);return o.length>0?e.sum(o).reshape(r.shape):e}}},"Mul")}}),_o=Dn({mulStrict_:function(t,e){var n=yn(t,"a","mul"),r=yn(e,"b","mul");return k(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Oo=Dn({pow_:function(t,e){var n,r=yn(t,"base","pow"),o=yn(e,"exp","pow");n=Ot(r,o),r=n[0],o=n[1];var a=zr(r.shape,o.shape),i=[r,o];return Ut.runKernelFunc(function(t,e){var n=t.pow(r,o);return e([r,o,n]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1],o=e[2];return{a:function(){var e=r.toFloat(),o=t.mul(e.mul(n.pow(e.sub(Pn(1))))),i=Wr(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},b:function(){var e=n.greater(0),i=n.log().where(e,Qn(n)),s=t.mul(o.mul(i)),u=Wr(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}},"Pow",{},i,[!0])}}),Mo=Dn({powStrict_:function(t,e){return k(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Bo=Dn({squaredDifferenceStrict_:function(t,e){var n=yn(t,"a","squaredDifferenceStrict"),r=yn(e,"b","squaredDifferenceStrict");return k(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Po=Dn({sub_:function(t,e){var n,r=yn(t,"a","sub"),o=yn(e,"b","sub");n=Ot(r,o),r=n[0],o=n[1];var a=zr(r.shape,o.shape);return Ut.runKernelFunc(function(t){return t.subtract(r,o)},{a:r,b:o},function(t){return{a:function(){var e=t,n=Wr(r.shape,a);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)},b:function(){var e=t,n=Wr(o.shape,a);return n.length>0&&(e=e.sum(n)),e.neg().reshape(o.shape)}}},"Sub")}}),Lo=Dn({subStrict_:function(t,e){var n=yn(t,"a","subStrict"),r=yn(e,"b","subStrict");return k(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}});exports.subStrict=Lo,exports.sub=Po,exports.squaredDifferenceStrict=Bo,exports.powStrict=Mo,exports.pow=Oo,exports.mulStrict=_o,exports.mul=Fo,exports.modStrict=Do,exports.mod=To,exports.minimumStrict=No,exports.minimum=Ao,exports.maximumStrict=So,exports.maximum=ko,exports.floorDiv=Io,exports.divStrict=Ro,exports.atan2=Eo,exports.addStrict=Co;var Wo=Dn({div_:function(t,e){var n,r=yn(t,"a","div"),o=yn(e,"b","div");if(n=Ot(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return Io(r,o);var a={a:r,b:o};return Ut.runKernelFunc(function(t,e){var n=t.realDivide(r,o);return e([r,o]),n},a,null,Rr,{})}});function zo(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=t.shape,s=n.slice();s.pop();var u=1;for(a=r;a<t.rank;++a)u*=i[a],s.push(i[a]);var c=Z(t.shape).map(function(t){return t/u}).concat([1]).slice(0,r);return[s,o,u,c]}exports.div=Wo;var Uo=Object.freeze({prepareAndValidate:zo}),Vo=30;function Go(t){return t<=Vo?t:J(t,Math.floor(Math.sqrt(t)))}function Ho(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(t.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+t.length-r)throw new Error(a+" update.rank != "+(o+t.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+e.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+t[i+o]+")")}function qo(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==e.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===e.size)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(0===t.size)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Ho(n,e,t)}function Ko(t,e,n){for(var r=e.shape.length,o=r>1?e.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:N(e.shape)/u,sliceSize:i,strides:Z(n.slice(0,o)).concat([1]),outputSize:N(n)}}exports.gather_util=Uo;var jo=Object.freeze({validateUpdateShape:Ho,validateInput:qo,calculateShapes:Ko});function Xo(t,e,n){I(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),I(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(r){I(e[r]+n[r]<=t.shape[r],function(){return"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")"})},o=0;o<t.rank;++o)r(o)}function Yo(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function $o(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function Qo(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||null==a)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),C(0,a,s-1)}function Jo(t,e,n,r,o){var a=e[o],i=n[o]||1;(t&1<<o||null==a)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),i>0?C(0,a,s):C(-1,a,s-1)}function Zo(t,e,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function ta(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}exports.scatter_util=jo;var ea=Object.freeze({assertParamsValid:Xo,maskToAxes:Yo,computeOutShape:$o,startForAxis:Qo,stopForAxis:Jo,isSliceContinous:Zo,computeFlatOffset:ta});function na(t){return I(Q(t),function(){return"The f passed in grad(f) must be a function"}),function(e,n){var r=yn(e,"x","tf.grad",null),o=null!=n?yn(n,"dy","tf.grad"):null;return Ut.tidy(function(){var e=Ut.gradients(function(){return t(r)},[r],o),n=e.value,a=e.grads;return null!=o&&k(n.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),ua(a),a[0]})}}function ra(t){return I(Q(t),function(){return"The f passed in grads(f) must be a function"}),function(e,n){I(Array.isArray(e),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=bn(e,"args","tf.grads",null),o=null!=n?yn(n,"dy","tf.grads"):null;return Ut.tidy(function(){var e=Ut.gradients(function(){return t.apply(void 0,r)},r,o),n=e.value,a=e.grads;return null!=o&&k(n.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ua(a),a})}}function oa(t){return I(Q(t),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(e,n){I(e instanceof Rt,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),I(null==n||n instanceof Rt,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=Ut.gradients(function(){return t(e)},[e],n),o=r.grads,a=r.value;return ua(o),{grad:o[0],value:a}}}function aa(t){return I(Q(t),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(e,n){I(Array.isArray(e)&&e.every(function(t){return t instanceof Rt}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),I(null==n||n instanceof Rt,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=Ut.gradients(function(){return t.apply(void 0,e)},e,n);return null!=n&&k(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),ua(r.grads),r}}function ia(t,e){I(Q(t),function(){return"The f passed in variableGrads(f) must be a function"}),I(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof Tt}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=e;if(!n)for(var r in e=[],Ut.registeredVariables)e.push(Ut.registeredVariables[r]);var o=n?e.filter(function(t){return!t.trainable}):null,a=e.length;I((e=e.filter(function(t){return t.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var i=Ut.gradients(t,e,null,!0),s=i.value,u=i.grads;I(u.some(function(t){return null!=t}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),I(0===s.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var c={};return e.forEach(function(t,e){null!=u[e]&&(c[t.name]=u[e])}),null!=o&&o.forEach(function(t){return c[t.name]=null}),{value:s,grads:c}}function sa(t){return Ut.customGrad(t)}function ua(t){if(t.filter(function(t){return null==t}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}exports.slice_util=ea;var ca=Dn({softmax_:function(t,e){void 0===e&&(e=-1);var n=yn(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Ut.runKernelFunc(function(t,r){var o=t.softmax(n,e);return r([o]),o},{logits:n},function(t,n){var r=n[0],o=t.mul(r);return{logits:function(){return o.sub(o.sum([e],!0).mul(r))}}},"Softmax",{dim:e},[],[!0])}}),la=Dn({logSoftmax_:function(t,e){void 0===e&&(e=-1);var n=yn(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return sa(function(t,n){var r=t.max(e,!0),o=t.sub(r),a=o.toFloat().sub(o.exp().sum(e,!0).log());return n([a]),{value:a,gradFunc:function(t,n){var r=n[0].exp();return t.sub(t.sum(e,!0).mul(r))}}})(n)}});exports.logSoftmax=la,exports.softmax=ca;var pa=Dn({transpose_:function(t,e){var n=yn(t,"x","transpose");if(null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),I(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(t){I(t>=0&&t<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return Ut.runKernelFunc(function(t){return t.transpose(n,e)},{x:n},null,"Transpose",r)}}),ha=function(){function t(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},t.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),da=function(){function t(){}return t.prototype.time=function(t){return fa("time")},t.prototype.read=function(t){return fa("read")},t.prototype.readSync=function(t){return fa("readSync")},t.prototype.numDataIds=function(){return fa("numDataIds")},t.prototype.disposeData=function(t){return fa("disposeData")},t.prototype.write=function(t,e,n){return fa("write")},t.prototype.move=function(t,e,n,r){return fa("move")},t.prototype.memory=function(){return fa("memory")},t.prototype.floatPrecision=function(){return fa("floatPrecision")},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.batchMatMul=function(t,e,n,r){return fa("batchMatMul")},t.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,fa("fusedBatchMatMul")},t.prototype.slice=function(t,e,n){return fa("slice")},t.prototype.stridedSlice=function(t,e,n,r){return fa("stridedSlice")},t.prototype.unstack=function(t,e){return fa("unstack")},t.prototype.reverse=function(t,e){return fa("reverse")},t.prototype.concat=function(t,e){return fa("concat")},t.prototype.neg=function(t){return fa("neg")},t.prototype.add=function(t,e){return fa("add")},t.prototype.addN=function(t){return fa("addN")},t.prototype.subtract=function(t,e){return fa("subtract")},t.prototype.multiply=function(t,e){return fa("multiply")},t.prototype.realDivide=function(t,e){return fa("realDivide")},t.prototype.floorDiv=function(t,e){return fa("floorDiv")},t.prototype.sum=function(t,e){return fa("sum")},t.prototype.prod=function(t,e){return fa("prod")},t.prototype.unsortedSegmentSum=function(t,e,n){return fa("unsortedSegmentSum")},t.prototype.argMin=function(t,e){return fa("argMin")},t.prototype.argMax=function(t,e){return fa("argMax")},t.prototype.equal=function(t,e){return fa("equal")},t.prototype.notEqual=function(t,e){return fa("notEqual")},t.prototype.less=function(t,e){return fa("less")},t.prototype.lessEqual=function(t,e){return fa("lessEqual")},t.prototype.greater=function(t,e){return fa("greater")},t.prototype.greaterEqual=function(t,e){return fa("greaterEqual")},t.prototype.logicalNot=function(t){return fa("logicalNot")},t.prototype.logicalAnd=function(t,e){return fa("logicalAnd")},t.prototype.logicalOr=function(t,e){return fa("logicalOr")},t.prototype.where=function(t){return fa("where")},t.prototype.select=function(t,e,n){return fa("select")},t.prototype.topk=function(t,e,n){return fa("topk")},t.prototype.min=function(t,e){return fa("min")},t.prototype.minimum=function(t,e){return fa("minimum")},t.prototype.mod=function(t,e){return fa("mod")},t.prototype.max=function(t,e){return fa("max")},t.prototype.maximum=function(t,e){return fa("maximum")},t.prototype.all=function(t,e){return fa("all")},t.prototype.any=function(t,e){return fa("any")},t.prototype.squaredDifference=function(t,e){return fa("squaredDifference")},t.prototype.ceil=function(t){return fa("ceil")},t.prototype.floor=function(t){return fa("floor")},t.prototype.round=function(t){return fa("round")},t.prototype.sign=function(t){return fa("sign")},t.prototype.isNaN=function(t){return fa("isNaN")},t.prototype.isInf=function(t){return fa("isInf")},t.prototype.isFinite=function(t){return fa("isFinite")},t.prototype.pow=function(t,e){return fa("pow")},t.prototype.exp=function(t){return fa("exp")},t.prototype.expm1=function(t){return fa("expm1")},t.prototype.softmax=function(t,e){return fa("softmax")},t.prototype.log=function(t){return fa("log")},t.prototype.log1p=function(t){return fa("log1p")},t.prototype.sqrt=function(t){return fa("sqrt")},t.prototype.rsqrt=function(t){return fa("rsqrt")},t.prototype.square=function(t){return fa("square")},t.prototype.reciprocal=function(t){return fa("reciprocal")},t.prototype.relu=function(t){return fa("relu")},t.prototype.relu6=function(t){return fa("relu6")},t.prototype.prelu=function(t,e){return fa("prelu")},t.prototype.elu=function(t){return fa("elu")},t.prototype.eluDer=function(t,e){return fa("eluDer")},t.prototype.selu=function(t){return fa("selu")},t.prototype.int=function(t){return fa("int")},t.prototype.clip=function(t,e,n){return fa("clip")},t.prototype.abs=function(t){return fa("abs")},t.prototype.complexAbs=function(t){return fa("complexAbs")},t.prototype.sigmoid=function(t){return fa("sigmoid")},t.prototype.softplus=function(t){return fa("softplus")},t.prototype.sin=function(t){return fa("sin")},t.prototype.cos=function(t){return fa("cos")},t.prototype.tan=function(t){return fa("tan")},t.prototype.asin=function(t){return fa("asin")},t.prototype.acos=function(t){return fa("acos")},t.prototype.atan=function(t){return fa("atan")},t.prototype.atan2=function(t,e){return fa("atan2")},t.prototype.sinh=function(t){return fa("sinh")},t.prototype.cosh=function(t){return fa("cosh")},t.prototype.tanh=function(t){return fa("tanh")},t.prototype.asinh=function(t){return fa("asinh")},t.prototype.acosh=function(t){return fa("acosh")},t.prototype.atanh=function(t){return fa("atanh")},t.prototype.erf=function(t){return fa("erf")},t.prototype.step=function(t,e){return fa("step")},t.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,fa("fusedConv2d")},t.prototype.conv2d=function(t,e,n){return fa("conv2d")},t.prototype.conv2dDerInput=function(t,e,n){return fa("conv2dDerInput")},t.prototype.conv2dDerFilter=function(t,e,n){return fa("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,fa("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(t,e,n){return fa("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(t,e,n){return fa("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){return fa("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(t,e,n){return fa("conv3d")},t.prototype.conv3dDerInput=function(t,e,n){return fa("conv3dDerInput")},t.prototype.conv3dDerFilter=function(t,e,n){return fa("conv3dDerFilter")},t.prototype.maxPool=function(t,e){return fa("maxPool")},t.prototype.maxPoolBackprop=function(t,e,n,r){return fa("maxPoolBackprop")},t.prototype.avgPool=function(t,e){return fa("avgPool")},t.prototype.avgPoolBackprop=function(t,e,n){return fa("avgPoolBackprop")},t.prototype.avgPool3d=function(t,e){return fa("avgPool3d")},t.prototype.avgPool3dBackprop=function(t,e,n){return fa("avgPool3dBackprop")},t.prototype.maxPool3d=function(t,e){return fa("maxPool3d")},t.prototype.maxPool3dBackprop=function(t,e,n,r){return fa("maxPool3dBackprop")},t.prototype.reshape=function(t,e){return fa("reshape")},t.prototype.cast=function(t,e){return fa("cast")},t.prototype.tile=function(t,e){return fa("tile")},t.prototype.pad=function(t,e,n){return fa("pad")},t.prototype.transpose=function(t,e){return fa("transpose")},t.prototype.gather=function(t,e,n){return fa("gather")},t.prototype.gatherND=function(t,e){return fa("gatherND")},t.prototype.scatterND=function(t,e,n){return fa("scatterND")},t.prototype.batchToSpaceND=function(t,e,n){return fa("batchToSpaceND")},t.prototype.spaceToBatchND=function(t,e,n){return fa("spaceToBatchND")},t.prototype.resizeBilinear=function(t,e,n,r){return fa("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(t,e,n){return fa("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(t,e,n,r){return fa("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){return fa("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(t,e,n,r,o,a){return fa("batchNormalization")},t.prototype.localResponseNormalization4D=function(t,e,n,r,o){return fa("localResponseNormalization4D")},t.prototype.LRNGrad=function(t,e,n,r,o,a,i){return fa("LRNGrad")},t.prototype.multinomial=function(t,e,n,r){return fa("multinomial")},t.prototype.oneHot=function(t,e,n,r){return fa("oneHot")},t.prototype.cumsum=function(t,e,n,r){return fa("cumsum")},t.prototype.nonMaxSuppression=function(t,e,n,r,o){return fa("nonMaxSuppression")},t.prototype.fft=function(t){return fa("fft")},t.prototype.ifft=function(t){return fa("ifft")},t.prototype.complex=function(t,e){return fa("complex")},t.prototype.real=function(t){return fa("real")},t.prototype.imag=function(t){return fa("imag")},t.prototype.cropAndResize=function(t,e,n,r,o,a){return fa("cropAndResize")},t.prototype.depthToSpace=function(t,e,n){return fa("depthToSpace")},t.prototype.split=function(t,e,n){return fa("split")},t.prototype.sparseToDense=function(t,e,n,r){return fa("sparseToDense")},t.prototype.diag=function(t){return fa("diag")},t.prototype.fill=function(t,e,n){return fa("fill")},t.prototype.onesLike=function(t){return fa("onesLike")},t.prototype.zerosLike=function(t){return fa("zerosLike")},t.prototype.linspace=function(t,e,n){return fa("linspace")},t.prototype.dispose=function(){return fa("dispose")},t}();function fa(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function va(t,e,n,r,o,a,i){void 0===i&&(i="channelsLast");var s,u=ba(e),c=u[0],l=u[1];if("channelsLast"===i)s=[c,l,t[3],t[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[c,l,t[1],t[1]]}return ga(t,s,n,r,o,a,!1,i)}function ma(t,e,n,r,o,a,i){void 0===i&&(i="NDHWC");var s,u,c=wa(e),l=c[0],p=c[1],h=c[2];if("NDHWC"===i)u="channelsLast",s=[l,p,h,t[4],t[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[l,p,h,t[1],t[1]]}return xa(t,s,n,r,o,!1,u,a)}function ga(t,e,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],p=u[2],h=u[3];if("channelsLast"===s)c=t[0],l=t[1],p=t[2],h=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);c=t[0],h=t[1],l=t[2],p=t[3]}var d,f=e[0],v=e[1],m=e[3],g=ba(n),x=g[0],y=g[1],b=ba(r),w=b[0],C=b[1],E=Ca(f,w),R=Ca(v,C),k=function(t,e,n,r,o,a,i,s){var u,c,l;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var p=function(t,e,n,r,o){null==r&&(r=ya(t,e,n));var a=t[1],i=Ea((t[0]-e+2*r)/n+1,o);I(D(i),function(){return"The output # of rows ("+i+") must be an integer. Change the stride and/or zero pad parameters"});var s=Ea((a-e+2*r)/n+1,o);return I(D(s),function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"}),[i,s]}([e,n],a,r,t,s);c=p[0],l=p[1]}else if("same"===t){c=Math.ceil(e/r),l=Math.ceil(n/o);var h=Math.max(0,(c-1)*r+a-e),d=Math.max(0,(l-1)*o+i-n),f=Math.floor(h/2),v=h-f,m=Math.floor(d/2);u={top:f,bottom:v,left:m,right:d-m,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/r),l=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:c,outWidth:l}}(o,l,p,x,y,E,R,a),S=k.padInfo,A=k.outHeight,N=k.outWidth,T=i?m*h:m;return"channelsFirst"===s?d=[c,T,A,N]:"channelsLast"===s&&(d=[c,A,N,T]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:p,inChannels:h,outHeight:A,outWidth:N,outChannels:T,padInfo:S,strideHeight:x,strideWidth:y,filterHeight:f,filterWidth:v,effectiveFilterHeight:E,effectiveFilterWidth:R,dilationHeight:w,dilationWidth:C,inShape:t,outShape:d,filterShape:e}}function xa(t,e,n,r,o,a,i,s){void 0===a&&(a=!1),void 0===i&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],p=u[2],h=u[3],d=u[4];if("channelsLast"===i)c=t[0],l=t[1],p=t[2],h=t[3],d=t[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);c=t[0],d=t[1],l=t[2],p=t[3],h=t[4]}var f,v=e[0],m=e[1],g=e[2],x=e[4],y=wa(n),b=y[0],w=y[1],C=y[2],E=wa(r),R=E[0],k=E[1],S=E[2],A=Ca(v,R),N=Ca(m,k),T=Ca(g,S),F=function(t,e,n,r,o,a,i,s,u,c,l){var p,h,d,f;if("number"==typeof t){p={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};var v=function(t,e,n,r,o,a){null==o&&(o=ya(t,e,r));var i=t[1],s=t[2],u=Ea((t[0]-e+2*o)/r+1,a);I(D(u),function(){return"The output # of depths ("+u+") must be an integer. Change the stride and/or zero pad parameters"});var c=Ea((i-e+2*o)/r+1,a);I(D(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var l=Ea((s-e+2*o)/r+1,a);return I(D(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[u,c,l,1]}([e,n,r,1],s,0,o,t,l);h=v[0],d=v[1],f=v[2]}else if("same"===t){var m=((h=Math.ceil(e/o))-1)*o+s-e,g=((d=Math.ceil(n/a))-1)*a+u-n,x=((f=Math.ceil(r/i))-1)*i+c-r,y=Math.floor(m/2),b=m-y,w=Math.floor(g/2),C=g-w,E=Math.floor(x/2);p={top:w,bottom:C,left:E,right:x-E,front:y,back:b,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((e-s+1)/o),d=Math.ceil((n-u+1)/a),f=Math.ceil((r-c+1)/i)}return{padInfo:p,outDepth:h,outHeight:d,outWidth:f}}(o,l,p,h,b,w,C,A,N,T,s),_=F.padInfo,O=F.outDepth,M=F.outHeight,B=F.outWidth,P=a?x*d:x;return"channelsFirst"===i?f=[c,P,O,M,B]:"channelsLast"===i&&(f=[c,O,M,B,P]),{batchSize:c,dataFormat:i,inDepth:l,inHeight:p,inWidth:h,inChannels:d,outDepth:O,outHeight:M,outWidth:B,outChannels:P,padInfo:_,strideDepth:b,strideHeight:w,strideWidth:C,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationDepth:R,dilationHeight:k,dilationWidth:S,inShape:t,outShape:f,filterShape:e}}function ya(t,e,n,r){void 0===r&&(r=1);var o=Ca(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function ba(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function wa(t){return"number"==typeof t?[t,t,t]:t}function Ca(t,e){return e<=1?t:t+(t-1)*(e-1)}function Ea(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Ra(t){var e=ba(t),n=e[0],r=e[1],o=e[2];return 1===n&&1===r&&1===o}function Ia(t,e){return Ra(t)||Ra(e)}function ka(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function Sa(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=Kn(t.shape),o=t.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!G(t.dtype,e))return Ut.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){var i=n.real(t);return a=i.cast(e),i.dispose(),a}if("int32"===e)return n.int(t);if("bool"===e){var s=Pn(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function Aa(t,e){return Ut.makeTensorFromDataId(t.dataId,e,t.dtype)}function Na(t,e,n){var r=(e-t)/(n-1),o=rt(n,"float32");o[0]=t;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return Ln(o,"float32")}exports.KernelBackend=da,exports.DataStorage=ha,exports.transpose=pa;var Ta=Object.freeze({castTensor:Sa,reshapeTensor:Aa,linspaceImpl:Na,upcastType:Ft,axesAreInnerMostDims:wn,combineLocations:Cn,computeOutAndReduceShapes:En,expandShapeToKeepDim:Rn,assertAxesAreInnerMostDims:In,getAxesPermutation:kn,getUndoAxesPermutation:Sn,getInnerMostAxes:An,getBroadcastDims:Lr,getReductionAxes:Wr,assertAndGetBroadcastShape:zr,assertParamsConsistent:Nn,computeOutShape:Tn,computePool2DInfo:va,computePool3DInfo:ma,computeConv2DInfo:ga,computeConv3DInfo:xa,computeDefaultPad:ya,tupleValuesAreOne:Ra,eitherStridesOrDilationsAreOne:Ia,convertConv2DDataFormat:ka,PARALLELIZE_THRESHOLD:Vo,computeOptimalWindowSize:Go});function Da(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function Fa(t,e){return{real:t[2*e],imag:t[2*e+1]}}function _a(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Oa(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Ma(t,e,n){var r=function(t,e,n){return function(t,e,n){for(var r=0,o=t.length,a=0,i=!1;r<o;){var s=n(e,t[a=r+(o-r>>>1)]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(t,e,n||Ba)}(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function Ba(t,e){return t>e?1:t<e?-1:0}function Pa(t,e,n,r,o){return Wa(t,e,n,r,o,0).selectedIndices}function La(t,e,n,r,o,a){var i=Wa(t,e,n,r,o,a,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function Wa(t,e,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);for(var u=Array.from(e).map(function(t,e){return{score:t,boxIndex:e,suppressBeginIndex:0}}).filter(function(t){return t.score>o}).sort(Va),c=a>0?-.5/a:0,l=[],p=[];l.length<n&&u.length>0;){var h=u.pop(),d=h.score,f=h.boxIndex,v=h.suppressBeginIndex;if(d<o)break;for(var m=!1,g=l.length-1;g>=v;--g){var x=za(t,f,l[g]);if(x>=r){m=!0;break}if(h.score=h.score*Ua(r,c,x),h.score<=o)break}h.suppressBeginIndex=l.length,m||(h.score===d?(l.push(f),p.push(h.score)):h.score>o&&Ma(u,h,Va))}var y=l.length;return s&&(l.fill(0,y),p.fill(0,y)),{selectedIndices:Ln(l,"int32"),selectedScores:Ln(p,"float32"),numValidOutputs:Pn(y,"int32")}}function za(t,e,n){var r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),p=Math.max(o[0],o[2]),h=Math.max(o[1],o[3]),d=(s-a)*(u-i),f=(p-c)*(h-l);if(d<=0||f<=0)return 0;var v=Math.max(a,c),m=Math.max(i,l),g=Math.min(s,p),x=Math.min(u,h),y=Math.max(g-v,0)*Math.max(x-m,0);return y/(d+f-y)}function Ua(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function Va(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function Ga(t,e,n){var r=new Array(t.rank).fill(0),o=t.shape.slice();return e.map(function(e){o[n]=e;var a=t.slice(r,o);return r[n]+=e,a})}function Ha(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var o=or(n,t.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(t.rank),s=0;s<i.length;s++)i[s]=a[s]%t.shape[s];var u=t.locToIndex(i);o.values[r]=t.values[u]}return o.toTensor()}function qa(t,e,n,r,o){for(var a=e[e.length-1],i=[t.length/a,a],s=i[0],u=i[1],c=W(n,s*r),l=W("int32",s*r),p=0;p<s;p++){for(var h=p*u,d=t.subarray(h,h+u),f=[],v=0;v<d.length;v++)f.push({value:d[v],index:v});f.sort(function(t,e){return e.value-t.value});var m=p*r,g=c.subarray(m,m+r),x=l.subarray(m,m+r);for(v=0;v<r;v++)g[v]=f[v].value,x[v]=f[v].index}var y=e.slice();return y[y.length-1]=r,[Mn(c,y,n),Mn(l,y,"int32")]}function Ka(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var o=or(t,"int32"),a=or([n.length,t.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*t.length;a.values.set(i,s)}return a.toTensor()}exports.backend_util=Ta;var ja=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("float v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Xa=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(t,e){return"T"+e});var n=[];this.variableNames.forEach(function(t){n.push("vec4 v"+t+" = get"+t+"AtOutCoords();")});var r=this.variableNames.map(function(t){return"v"+t}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Ya=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,o=t.batchSize,a=t.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function $a(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(e){return t+"."+e})}function Qa(t,e){return 1===e?[t]:$a(t,e)}function Ja(){var t,e,n,r,o,a,i,s,u,l;return 2===c().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Za(t,e,n){void 0===n&&(n="index");var r=Z(e);return r.map(function(e,o){return"int "+t[o]+" = "+n+" / "+e+"; "+(o===r.length-1?"int "+t[o+1]+" = "+n+" - "+t[o]+" * "+e:"index -= "+t[o]+" * "+e)+";"}).join("")}function ti(t){var e=Z(t).map(function(t){return t.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+e[0]+" + coords.y * "+e[1]+" + coords.z;\n  }\n"}var ei="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function ni(t,e,n,r){var o=[];t.forEach(function(t){var e=N(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?o.push("uniform float "+t.name+(e>1?"["+e+"]":"")+";"):(o.push("uniform sampler2D "+t.name+";"),o.push("uniform int offset"+t.name+";"))});var a,i,s=o.join("\n"),u=t.map(function(t){return function(t,e,n){void 0===n&&(n=!1);var r="";r+=n?oi(t):ri(t);var o=t.shapeInfo.logicalShape,a=e.logicalShape;return o.length<=a.length&&(r+=n?function(t,e){var n,r=t.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=t.shapeInfo.logicalShape.length,s=e.logicalShape.length,u=Lr(t.shapeInfo.logicalShape,e.logicalShape),c=pi(s),l=s-i,p=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map(function(t){return"coords."+p[t+l]+" = 0;"}).join("\n");var h;h=s<2&&i>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+p[e+l]}).join(", ");var d="return outputValue;",f=1===N(t.shapeInfo.logicalShape),v=1===N(e.logicalShape);if(1!==i||f||v){if(f&&!v)d=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=i-2,g=i-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?d="return vec4(outputValue.x);":u.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+h+");\n      "+d+"\n    }\n  "}(t,e):function(t,e){var n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=e.texShape,i=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===u&&null==t.shapeInfo.flatOffset&&T(i,a))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c=pi(u),l=Lr(t.shapeInfo.logicalShape,e.logicalShape),p=u-s,h=["x","y","z","w","u","v"];return"\n    float "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===s?"":u<2&&l.length>=1?"coords = 0;":l.map(function(t){return"coords."+h[t+p]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(u<2&&s>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords."+h[e+p]}).join(", "))+");\n    }\n  "}(t,e)),r}(t,e,r)}).join("\n"),c=e.texShape,l=Ja(),p="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+l.texture2D+"(textureSampler, uv).r;\n    }\n  ",h=function(t){return t.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+t.varyingFs+" vec2 resultUV;\n    "+t.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+t.defineSpecialNaN+"\n    "+t.defineSpecialInf+"\n    "+t.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+ai+"\n    "+ii+"\n    "+si+"\n  "}(l);return e.isPacked?(a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,e);case 2:return function(t,e){var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(T(t,e))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(t[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=t,r=e,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=(a=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(t,e){for(var n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),a=o,i="",s="b, r, c",u=2;u<t.length-1;u++)i="\n      int b"+u+" = index / "+(a*=t[t.length-u-1])+";\n      index -= b"+u+" * "+a+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+t.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+t.length+"("+s+");\n    }\n  "}(t,e)}var n,r,o,a,i}(e.logicalShape,c),i="\n    void setOutput(vec4 val) {\n      "+l.output+" = val;\n    }\n  "):(a=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return T(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return n=e,r=Za(["r","c","d"],t),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(t,e){var n=Za(["r","c","d","d2"],t);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=Za(["r","c","d","d2","d3"],t);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=Za(["r","c","d","d2","d3","d4"],t);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}var n,r}(e.logicalShape,c),i="\n    void setOutput(float val) {\n      "+l.output+" = vec4(val, 0, 0, 0);\n    }\n  "),r&&(h+=ui),[h,p,i,s,a,u,n].join("\n")}function ri(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"float "+n+"() {return "+e+";}";var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(1===o&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var i=t.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+i[0]+", "+i[1]+", "+ci(e)+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+li(t)+"\n      }\n    ";var r=t.shapeInfo.texShape,o=r[0],a=r[1];if(1===a&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ";var i=ci(e);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+o+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+a+", index + "+i+");\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape;if(null!=o&&T(e,o)){var a=o[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var i=L(e),s=i.newShape,u=i.keptDims,c=s;if(c.length<e.length)return"\n      "+ri(hi(t,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+di(["row","col"],u)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+e[1]+", 1)));\n        "+li(t)+"\n      }\n    ";var l=o[0],p=o[1],h=ci(n);return 1===p?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===l?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+e[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+p+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+e[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+l+", "+p+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[1]*e[2],a=e[2],i=L(e),s=i.newShape,u=i.keptDims,c=s;if(c.length<e.length)return"\n        "+ri(hi(t,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+di(["row","col","depth"],u)+");\n        }\n      ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+li(t)+"\n      }\n    ";var l=t.shapeInfo.texShape,p=l[0],h=l[1],d=t.shapeInfo.flatOffset;return h===o&&null==d?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+p+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===a&&null==d?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+e[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+p+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+ci(n)+";\n        vec2 uv = uvFromFlat("+p+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[3],a=e[2]*o,i=e[1]*a,s=L(e),u=s.newShape,c=s.keptDims;if(u.length<e.length)return"\n      "+ri(hi(t,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+di(["row","col","depth","depth2"],c)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+a+", "+o+", 1)));\n        "+li(t)+"\n      }\n    ";var l=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],d=p[1];return d===i&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+e[1]*e[2]+", "+e[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+d+", index + "+ci(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],a=e[3]*o,i=e[2]*a,s=e[1]*i,u=L(e),c=u.newShape,l=u.keptDims;if(c.length<e.length)return"\n      "+ri(hi(t,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+di(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+a+", "+o+")) +\n          depth3;\n        "+li(t)+"\n      }\n    ";var p=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,d=h[0],f=h[1];return f===s&&null==p?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===o&&null==p?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]+",\n               "+e[2]*e[3]+", "+e[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+ci(n)+";\n      vec2 uv = uvFromFlat("+d+", "+f+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=L(e),a=o.newShape,i=o.keptDims;if(a.length<e.length)return"\n      "+ri(hi(t,a))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+di(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    ";var s=e[5],u=e[4]*s,c=e[3]*u,l=e[2]*c,p=e[1]*l;if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+p+", "+l+", "+c+", "+u+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+li(t)+"\n      }\n    ";var h=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],v=d[1];return v===p&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+u+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+e[1]*e[2]*e[3]*e[4]+",\n               "+e[2]*e[3]*e[4]+",\n               "+e[3]*e[4]+",\n               "+e[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+p+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+u+" + depth3 * "+s+" + depth4 + "+ci(n)+";\n      vec2 uv = uvFromFlat("+f+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function oi(t){var e;switch(t.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(e=t.name).charAt(0).toUpperCase()+e.slice(1))+"() {\n      return "+Ja().texture2D+"("+e+", halfCR);\n    }\n  ";case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Ja();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+a.texture2D+"("+e+", uv);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=o[0],i=o[1],s=Ja();if(null!=o&&T(e,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(e[1]/2)+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===e[0])return"\n        "+oi(hi(t,e.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+di(["b","row","col"],[1,2])+");\n        }\n      ";var i=a[0],s=a[1],u=Math.ceil(e[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+i+", "+s+", "+u*Math.ceil(e[1]/2)+", "+u+", b, row, col);\n      return "+Ja().texture2D+"("+n+", uv);\n    }\n  "}(t);default:return function(t){for(var e=t.shapeInfo.logicalShape,n=e.length,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],c=Math.ceil(e[n-1]/2),l=c*Math.ceil(e[n-2]/2),p="int b, int row, int col",h="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)p="int b"+d+", "+p,h="b"+d+" * "+(l*=e[n-d-1])+" + "+h;return"\n    vec4 "+o+"("+p+") {\n      int index = "+h+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+Ja().texture2D+"("+r+", uv);\n    }\n  "}(t)}}var ai="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ii="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",si="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ui="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function ci(t){return"offset"+t}function li(t){var e=t.name,n=N(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function pi(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function hi(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function di(t,e){return e.map(function(e){return t[e]}).join(", ")}var fi=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,I(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=t[t.length-1],a=Math.ceil(o/e);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,c=u.length,l=pi(c),p=Qa("coords",c);if(1===a){var h=pi(s=c+1);i="\n        "+h+" sourceLocR = "+h+"("+p.join()+", 0);\n        ++"+p[c-1]+";\n        "+h+" sourceLocG = "+h+"("+p.join()+", 0);\n        ++"+p[c-2]+";\n        "+h+" sourceLocA = "+h+"("+p.join()+", 0);\n        --"+p[c-1]+";\n        "+h+" sourceLocB = "+h+"("+p.join()+", 0);\n        --"+p[c-2]+";"}else s=c,i="\n        "+l+" sourceLocR = coords;\n        ++"+p[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+p[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+p[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+p[c-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),f="."+d[s-1],v=d.map(function(t){return"int "+t}),m=Qa("sourceLocR",s-1).concat("inIdx.r"),g=Qa("sourceLocG",s-1).concat("inIdx.g"),x=Qa("sourceLocB",s-1).concat("inIdx.b"),y=Qa("sourceLocA",s-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+x.join()+"),\n                             getBestIndicesAChannel("+y.join()+")));",C="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+x.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+y.join()+") : 0.)",E=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+E+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+p[c-1]+" < "+(u[c-1]-1)+";\n        bool hasNextRow = "+p[c-2]+" < "+(u[c-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+f+", sourceLocG"+f+",\n          sourceLocB"+f+", sourceLocA"+f+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+b+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},vi=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=s-1-t.padInfo.top,l=u-1-t.padInfo.left,p=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+p+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mi=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterDepth,p=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=p-1-t.padInfo.top,v=h-1-t.padInfo.left,m=1/(e*n*r);this.userCode="\n      const ivec3 pads = ivec3("+d+", "+f+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+p+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},gi=function(t,e,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],zr(t,e),zr(t,n);var i="0.0";null!=r&&(zr(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=o&&(zr(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},xi=function(t,e,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],zr(t,e),zr(t,n);var i="vec4(0.0)";null!=r&&(zr(t,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(zr(t,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},yi="return areal * breal - aimag * bimag;",bi="return areal * bimag + aimag * breal;",wi=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=zr(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Ci="return a + b;",Ei="return a - b;",Ri="return a * b;",Ii="\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",ki="return (a < 0.) ? b * a : a;",Si=function(t,e,n){this.variableNames=["A","B"],this.outputShape=zr(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Ai="\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",Ni="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Ti=function(t,e,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=zr(e,n);var o=this.outputShape.length,a="";if(r)if(0===o||1===N(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+pi(o)+" coords = getOutputCoords();\n        ",1===o)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=Qa("coords",o);a+="\n            bool nextRowOutOfBounds =\n              ("+i[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+i[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},Di=function(){function t(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),Fi=function(){function t(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t,e){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,t),r.gl.uniform1f(n.maxLoc,e)}},t}(),_i=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},Oi=function(t){this.outputShape=[],this.outputShape=Tn(t,1),this.variableNames=t.map(function(t,e){return"T"+e});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var o=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=e.length,i=e[e.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},Mi=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Tn(t,e);var n=this.outputShape,r=n.length,o=pi(r),a=Qa("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(t,e){return"T"+e});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var c=i[e],l=i.slice(-2),p=i.join(),h="if ("+c+" < "+s[0]+") {\n        return getChannel(\n            getT0("+p+"), vec2("+l.join()+"));\n        }";for(u=1;u<s.length;u++){var d=s[u-1];h+="\n        if ("+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+Bi(i,c,d)+"),\n            vec2("+Bi(l,c,d)+"));\n        }"}var f=s.length,v=s[s.length-1];h+="\n        return getChannel(\n          getT"+f+"("+Bi(i,c,v)+"),\n          vec2("+Bi(l,c,v)+"));",this.userCode="\n      float getValue("+i.map(function(t){return"int "+t})+") {\n        "+h+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function Bi(t,e,n){var r=t.indexOf(e);return t.map(function(t,e){return e===r?t+" - "+n:t}).join()}var Pi=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Li=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a="channelsLast"===t.dataFormat,i=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=a?1:2,c=a?2:3,l=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Wi=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+e+" - "+o+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},zi=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,c=r-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ui=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Vi=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,o=t.strideWidth,a=e-1-t.padInfo.top,i=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Gi=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,a=t.padInfo.left,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4,f="channelsLast"===t.dataFormat,v=f?1:2,m=f?2:3,g=f?3:1,x="",y="";n&&(x=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",y="result = activation(result);");var b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+f+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+f+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+f+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+f+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+b+"\n        "+y+"\n        setOutput(result);\n      }\n    "},Hi=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,l=t.filterDepth,p=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+p+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===f)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===f)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===f)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},qi=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,f=t.outChannels/t.inChannels,v="",m="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+p+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},Ki=function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var o=t.inHeight,a=t.inWidth,i=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,p=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,f=d,v="int xR; int xC; int xCOffset;",m=0;m<h;m++)for(var g=0;g<d;g++)v+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<h;m++)for(var x=0;x<f;x++){if(v+="\n          xR = xRCorner + "+m*l+";\n          xC = xCCorner + "+(g=2*x)*p+";\n        ",1===c){if(g<d&&(v+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<d)){var y=s%2==0?E(p):p;p%2==0&&s%2==1||p%2!=0&&s%2!=1?(v+="\n                  xCOffset = xC + "+s%2+" + "+y+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",p>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+y+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<d&&(v+="\n              if(xR >= 0 && xR < "+o+") {\n            ",s%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<d&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<d&&(v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),v+="}");g<d&&(v+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<d&&(v+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<h;m++)for(g=0;g<d;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var b="",w="";n&&(b=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+u+", "+c+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+w+"\n        setOutput(result);\n      }\n    "},ji=function(t,e,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],i=t[1],s=t[2],u=t[3],c=e[0],l=n[0],p=n[1];this.outputShape=[c,l,p,u];var h="bilinear"===r?1:0,d=[i-1+".0",s-1+".0"],f=d[0],v=d[1],m=l>1?[""+(i-1)/(l-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],g=m[0],x=m[1],y=m[2],b=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=b[0],C=b[1],E=b[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+x+";\n        float width_scale = "+C+";\n\n        float in_y = "+y+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+E+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Xi=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,o=t[t.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+pi(r)+" coords = getOutputCoords();\n        int end = "+Yi(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+Yi(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===r)return""+e;if(2===r)return e+".x, "+e+".y";if(3===r)return e+".x, "+e+".y, "+e+".z";if(4===r)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+r+" is not yet supported")}(0,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Yi(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var $i=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Ht.DENSE;var e=Jt(t),n=Ja();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Za(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Qi=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Ht.DENSE;var e=Jt(t),n=Ja();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Za(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ji=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Zi=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},ts=function(t){this.variableNames=["A"],this.outTexUsage=qt.DOWNLOAD;var e=Ja();this.outputShape=t,this.userCode="\n      "+ei+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "},es=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qt.DOWNLOAD;var e=Ja();this.outputShape=t,this.userCode="\n      "+ei+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+e.output+" = encode_float(x);\n      }\n    "},ns=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Ja(),o=e[0],a=e[1];this.outputShape=t;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+ti(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},rs=function(t,e,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Ja(),o=e[0],a=e[1];this.outputShape=t;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+t[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+u+" < "+t[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+ti(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},os="return real * expR - imag * expI;",as="return real * expI + imag * expR;",is=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},ss=function(){function t(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.valueLoc&&(e.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(e.valueLoc,t)}},t}(),us=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var o=pi(this.rank),a=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<t.length;a++)a===e?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}(t,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},cs=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=pi(e.length),o=pi(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function ls(t,e){var n=Ja();return se(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function ps(t,e){return ve(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function hs(t,e){return me(t,e,new Uint16Array([0,1,2,2,1,3]))}function ds(t,e,n,r,o,a,i){xe(n,r);var s=ge(t,e),u=t.TEXTURE_2D;return ee(t,e,function(){return t.bindTexture(u,s)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),ee(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),ee(t,e,function(){return t.texImage2D(u,0,o,n,r,0,a,i,null)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function fs(t,e,n,r,o){var a=Qt(n,r);return ds(t,e,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,t.FLOAT)}function vs(t,e,n,r,o){var a=Qt(n,r);return ds(t,e,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function ms(t,e,n,r,o){var a=Qt(n,r);return ds(t,e,a[0],a[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function gs(t,e,n,r,o){var a=Zt(n,r);return ds(t,e,a[0],a[1],o.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function xs(t,e,n,r,o){var a=Zt(n,r);return ds(t,e,a[0],a[1],o.internalFormatPackedHalfFloat,t.RGBA,o.textureTypeHalfFloat)}function ys(t,e,n,r){return ee(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),be(t,e,n,"clipSpacePos",r,3,20,0)&&be(t,e,n,"uv",r,2,20,12)}function bs(t,e,n,r,o,a,i){var s,u,c;ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=t.UNSIGNED_BYTE,c=t.RGBA):(s=new Float32Array(r*o*4),u=t.FLOAT,c=i.internalFormatPackedFloat),s.set(a),ee(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,c,r,o,0,t.RGBA,u,s)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function ws(t,e,n,r){ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?ee(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):ee(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),ee(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Cs(t,e,n,r,o){var a=t.createBuffer();ee(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,a)});var i=16*n*r;return ee(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,i,t.STREAM_READ)}),ee(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),ee(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),a}function Es(t,e,n){var r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Rs(t,e,n,r,o){var a=Qt(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return ee(t,e,function(){return t.readPixels(0,0,i,s,o.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Is(t,e,n,r,o,a,i,s){var u=t,c=new Float32Array(function(t,e){var n=Zt(a,i);return n[0]*n[1]*4}());return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function ks(t,e,n,r){var o=new Float32Array(n*r*4);return ee(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,o)}),o}var Ss=Object.freeze({createVertexShader:ls,createVertexBuffer:ps,createIndexBuffer:hs,createFloat32MatrixTexture:fs,createFloat16MatrixTexture:vs,createUnsignedBytesMatrixTexture:ms,createPackedMatrixTexture:gs,createFloat16PackedMatrixTexture:xs,bindVertexProgramAttributeStreams:ys,uploadDenseMatrixToTexture:bs,uploadPixelDataToTexture:ws,createBufferFromOutputTexture:Cs,downloadFloat32MatrixFromBuffer:Es,downloadByteEncodedFloatMatrixFromOutputTexture:Rs,downloadPackedMatrixFromBuffer:Is,downloadMatrixFromPackedOutputTexture:ks}),As=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=c().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,Yt(e,t)):this.gl=$t(e);var n="WEBGL_color_buffer_float";if(1===c().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=ie(this.gl,this.debug,"OES_texture_float"),ze(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=ie(this.gl,this.debug,"OES_texture_half_float");else if(c().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),ze(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=ie(this.gl,this.debug,"EXT_color_buffer_half_float");else if(c().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",ze(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!ze(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=ps(this.gl,this.debug),this.indexBuffer=hs(this.gl,this.debug),this.framebuffer=ye(this.gl,this.debug),this.textureConfig=te(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return c().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;ee(e,this.debug,function(){return e.finish()}),ee(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),ee(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),ee(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),ee(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),ee(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),fs(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),vs(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),ms(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),ws(this.gl,this.debug,t,e)},t.prototype.uploadDenseMatrixToTexture=function(t,e,n,r){this.throwIfDisposed(),bs(this.gl,this.debug,t,e,n,r,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),xs(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),gs(this.gl,this.debug,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(ke(this.gl,this.debug,this.framebuffer),this.outputTexture=null),ee(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return Rs(r.gl,r.debug,e,n,r.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(t,e,n,r,o,a){return Is(this.gl,t,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return Es(this.gl,t,e)},t.prototype.createBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=Cs(this.gl,this.debug,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(c().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=o.clientWaitSync(a,0,0);return t===o.ALREADY_SIGNALED||t===o.CONDITION_SATISFIED},e=a}else c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return ks(r.gl,r.debug,e,n)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=ue(e,this.debug,t),r=ls(e,this.debug),o=he(e,this.debug);return ee(e,this.debug,function(){return e.attachShader(o,r)}),ee(e,this.debug,function(){return e.attachShader(o,n)}),de(e,this.debug,o),this.debug&&fe(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=ys(e,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&ee(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&fe(this.gl,this.debug,this.program),ee(this.gl,this.debug,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Ce(this.gl,this.debug,t,e):Ee(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),ee(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Re(this.gl,this.debug,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=Zt(e,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(t,o,a)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&fe(this.gl,this.debug,this.program),Se(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),ee(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),ee(this.gl,this.debug,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=ie(this.gl,this.debug,2===c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(2!==c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return a(this,void 0,void 0,function(){var e=this;return i(this,function(n){switch(n.label){case 0:return[4,M(function(){return e.disposed||e.isQueryAvailable(t,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise(function(n){e.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||M(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Ie(this.gl,this.debug,t,this.framebuffer),this.debug&&Se(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Ie(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Se(this.gl)):ke(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Ie(r,this.debug,t,this.framebuffer),this.debug&&Se(r),this.outputTexture=t,ee(r,this.debug,function(){return r.viewport(0,0,e,n)}),ee(r,this.debug,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var o=this;this.throwIfDisposed(),ee(this.gl,this.debug,function(){return o.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function Ns(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,o=e[n],a=o.shape;if(!T(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!t.isUniform||!o.isUniform){var i=t.texShape,s=o.isUniform?null:o.texData.texShape;if(!T(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}})}var Ts=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,p=n.dataFormat,h=s.left,d=s.top,f=o*r,v=Ja(),m="channelsLast"===p,g=m?0:1,x=m?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+b+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+i+" - "+d+";\n            d0 = offsetY + "+l+" * (pos / "+f+");\n\n            if(d0 < "+e[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+a+". - "+h+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+f+".) / "+o+".));\n\n              if(d1 < "+e[x]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*b+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+y+"\n\n        "+v.output+" = result;\n      }\n    "},Ds=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},Fs=function(t,e,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},_s=function(t,e,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},Os=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,s=a-1-t.padInfo.left,u=o*a-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+e+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ms=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=s-1-t.padInfo.front,p=u-1-t.padInfo.top,h=c-1-t.padInfo.left,d=s*u*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+p+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+e+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+d+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Bs=function(t,e,n,r,o,a,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",p=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",f="";a&&(d=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",f="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+p[0]+" * "+h[0]+");\n          result += ("+p[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},Ps=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),Ls=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Ws=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Qa("rc",e),r=pi(e),o=function(t,e,n){if(1===t)return"rc > "+e[0];for(var r="",o=t-2;o<t;o++)r+=n[o]+" >= "+e[o],o<t-1&&(r+="||");return r}(e,t,n),a=function(t,e,n,r){if(1===t)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+e+";\n    bool rEdge = rp1 >= "+n+";\n  "}(e,t[t.length-1],t[t.length-2],n),i=function(t,e){var n=t.length,r=function(t,e){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),i=2;i<t;i++)a=e[e.length-1-i]+","+a;n.push(a)}return n}(n,e);return 1===n?"getA(rc),\n            rc + 1 >= "+t[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},zs=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,o=pi(r),a=e.map(function(t){return t[0]}).join(","),i=e.map(function(e,n){return e[0]+t[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+a+");\n      "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Us=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});for(var r=t.length,o=pi(r),a=e.map(function(t){return t[0]}).join(","),i=e.map(function(e,n){return e[0]+t[n]}).join(","),s=Qa("rc",r),u=Qa("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+u.slice(-2).join()+")",p=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+c+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",f=0,v=1===r?2:4;f<v;f++)d+="\n        "+p[f]+"\n        if ("+h+") {\n          result["+f+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+f+"] = getChannel(getX("+u.join()+"), "+l+");\n        }\n      ";d+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+a+");\n      const "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},Vs=function(t,e,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,i=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,l=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var f="avg"===e,v="((batch  * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + d",m="(xR * "+t.inWidth+" + xC) * "+t.inChannels+" + d",g="0.0";if(f||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+s+");\n        const ivec2 pads = ivec2("+h+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+";\n                wC += "+c+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = "+(r?o?v:m:"wR * "+p+" + wC")+";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(x="avgValue / count");var y=4*Math.floor(a/4),b=a%4,w="\n      if ("+f+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+h+", "+d+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+u+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+y+"; wC += 4) {\n            int xC = xCCorner + wC * "+c+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+c+", d),\n              getValue(batch, xR, xC + 2 * "+c+", d),\n              getValue(batch, xR, xC + 3 * "+c+", d)\n            );\n\n            "+w+"\n          }\n\n          int xC = xCCorner + "+y+";\n          if ("+(1===b)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(2===b)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+c+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(3===b)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+c+", d),\n              getValue(batch, xR, xC + 2 * "+c+", d),\n              initializationValue\n            );\n\n            "+w+"\n          }\n        }\n        setOutput("+x+");\n      }\n    "}},Gs=function(t,e,n,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var a=t.filterWidth,i=t.strideDepth,s=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,l=t.dilationHeight,p=t.dilationWidth,h=t.effectiveFilterDepth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,v=t.padInfo.front,m=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;var x="avg"===e,y="0.0";if(x||(y="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+s+", "+u+");\n        const ivec3 pads = ivec3("+v+", "+m+", "+g+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+h+";\n              wD += "+c+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+f+";\n                  wC += "+p+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = "+(r?o?"(((batch * "+t.inDepth+" + xD) * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"((xD * "+t.inHeight+" + xR) * "+t.inWidth+" + xC) * "+t.inChannels+" + ch":"wD * "+d+" * "+f+" +\n                      wR * "+f+" + wC")+";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var b=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(b="avgValue / count");var w=4*Math.floor(a/4),C=a%4,E="\n      if ("+x+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+s+", "+u+");\n      const ivec3 pads = ivec3("+v+", "+m+", "+g+");\n      const float initializationValue = "+y+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+y+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+h+";\n            wD += "+c+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+w+"; wC += 4) {\n              int xC = xCCorner + wC * "+p+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+p+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+p+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+p+", ch)\n              );\n\n              "+E+"\n            }\n\n            int xC = xCCorner + "+w+";\n            if ("+(1===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+E+"\n            } else if ("+(2===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+p+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+E+"\n            } else if ("+(3===C)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+p+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+p+", ch),\n                initializationValue\n              );\n\n              "+E+"\n            }\n          }\n          setOutput("+b+");\n        }\n      }\n    "}},Hs=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";"prod"===e?i="1.0":"min"===e?(i="1.0 / 1e-20",s="min"):"max"===e&&(i="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"prod"===e?u="prodValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,p="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===e)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===e?(i="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===e&&(i="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(2===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(3===l)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "},qs=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Za(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+ti(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Ks=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],c=[n&&s>1?o-1:o,n&&u>1?a-1:a],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=c[0]/l[0],h=c[1]/l[1],d=1/p,f=1/h,v=2*Math.ceil(d)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},js=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Xs=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],c=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+",\n          "+u[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Ys=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,o=r[1],a=r[2],i=t.shape,s=i[1],u=i[2],c=[n&&s>1?o-1:o,n&&u>1?a-1:a],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=c[0]/l[0],h=c[1]/l[1],d=1/p,f=1/h,v=2*Math.ceil(d)+2,m=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},$s=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var o=t[0],a=t[1],i=t[2],s=t[3];this.outputShape=[o,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?i-1:i],c=[r&&e>1?e-1:e,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/c[0]+",\n          "+u[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Qs=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),o=pi(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},Js=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Qa("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=pi(n);function s(n){var r=t.map(function(r,o){return function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+s(r.slice())+";\n          if("+o+"){\n            result.g = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",s(t)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(t){return t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",s(t)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Zs=function(t,e,n,r,o,a,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=pi(o.length),u=pi(a.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",p="";1===r?p="i":2===r&&(p="i, coords[1]");var h="getUpdates("+p+")",d=e>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},tu=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";o%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+p+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},eu=function(t,e,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&i.push(""+a[u]);r=i.join(),o=s.join()}var c=pi(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},nu=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,n=pi(this.rank),r="uniform int start["+this.rank+"];",o=function(t){if(1===t)return"sourceLoc";if(t<=6)return ru.slice(0,t).map(function(t){return"sourceLoc."+t}).join(",");throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);e="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+t.map(function(t,e){return"sourceLoc."+ru[e]+" = start["+e+"] + coords."+ru[e]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+e+"\n        setOutput(getSource("+o+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),ru=["x","y","z","w","u","v"],ou=function(){function t(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=pi(this.rank),n=Qa("coords",this.rank),r=Qa("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+o+")",i="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+t[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+t[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+e+"("+t.map(function(t,e){return"start["+e+"]"}).join()+");":t.map(function(t,e){return r[e]+" = "+n[e]+" + start["+e+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+e+" coords = getOutputCoords();\n        "+e+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){null==e.startLoc&&(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null==e.startLoc)||n.gl.uniform1iv(e.startLoc,t)}},t}(),au=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=pi(n.length),a=pi(n.length),i="";if(1===r)i="coords * strides + begin";else{var s=0;i=n.map(function(t,e){return s++,1===n.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(s-1)+"] * strides["+e+"] + begin["+e+"]"}).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+t+");\n      "+o+" strides = "+o+"("+e+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},iu=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e,n){var r,o=su(e,n),a=uu(t,o,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),o===Kt.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===Kt.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===Kt.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===Kt.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===Kt.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(r),r},t.prototype.releaseTexture=function(t,e,n,r){if(null!=this.freeTextures){var o=uu(e,su(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],i=a.indexOf(t);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function su(t,e){if(t===qt.UPLOAD)return Kt.PACKED_2X2_FLOAT32;if(t===qt.RENDER||null==t)return function(t){return c().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Kt.PACKED_2X2_FLOAT32:Kt.UNPACKED_FLOAT32:t?Kt.PACKED_2X2_FLOAT16:Kt.UNPACKED_FLOAT16}(e);if(t===qt.DOWNLOAD||t===qt.PIXELS)return Kt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function uu(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var cu=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var o=pi(this.rank),a=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<t.length;o++)r.push("imod("+n[o]+", "+t[o]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},lu=1.7580993408473768,pu=1.0507009873554805,hu=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},du="if (isnan(x)) return x;",fu="return x;",vu="return abs(x);",mu=du+"\n  return (x < 0.0) ? 0.0 : x;\n",gu=du+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",xu="return (x >= 0.0) ? x : (exp(x) - 1.0);",yu="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+lu+";\n  float scale = "+pu+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",bu="return -x;",wu="return ceil(x);",Cu="return floor(x);",Eu="return exp(x);",Ru="return exp(x) - 1.0;",Iu=du+"\n  return sin(x);\n",ku=du+"\n  return cos(x);\n",Su=du+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",Au=du+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",Nu=du+"\n  return atan(x);\n",Tu=du+"return log(x + sqrt(x * x + 1.0));",Du=du+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",Fu=du+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",_u="return x;",Ou="return x;",Mu="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Bu="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Pu="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Lu=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Wu=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=Qa("rc",e),r=pi(e),o=function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),a=n.slice(-2),i=e<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},zu={};function Uu(t,e){if(void 0===e&&(e=!1),"linear"===t)return e?Ou:fu;if("relu"===t)return e?Mu:mu;if("elu"===t)return e?Pu:xu;if("relu6"===t)return e?Bu:gu;if("prelu"===t)return e?Ni:ki;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Vu=600,Gu=function(t){function e(e){var n,r=t.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!c().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var o=$t(c().getNumber("WEBGL_VERSION"));r.binaryCache=(n=c().getNumber("WEBGL_VERSION"))in zu?zu[n]:(zu[n]={},zu[n]),r.gpgpu=new As(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=e,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=e.gl.canvas;return r.textureManager=new iu(r.gpgpu),r.numMBBeforeWarning=null==c().global.screen?1024:c().global.screen.height*c().global.screen.width*window.devicePixelRatio*Vu/1024/1024,r.texData=new ha(r,Ut),r}return o(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,e,n){if(c().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:qt.UPLOAD}),r},e.prototype.move=function(t,e,n,r){if(c().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:qt.UPLOAD})},e.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,o=e.complexTensors,a=e.slice,i=e.shape,s=e.isPacked;if(null!=a){var u;u=s?new Lu(i,_u):new hu(i,_u);var c=this.runWebGLProgram(u,[{dataId:t,shape:i,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===r)return n;var p,h,d=null!=this.activeTimers;return d&&(p=ot()),h="complex64"===r?Da(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(t),d&&(this.downloadWaitMs+=ot()-p),this.convertAndCacheOnCPU(t,h)},e.prototype.read=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s,u,l,p,h,d,f,v,m,g,x,y,b,w,C,E,R;return i(this,function(i){switch(i.label){case 0:if(this.pendingRead.has(t))return e=this.pendingRead.get(t),[2,new Promise(function(t){return e.push(t)})];if(n=this.texData.get(t),r=n.values,o=n.shape,a=n.slice,s=n.dtype,u=n.complexTensors,l=n.isPacked,null!=a)return void 0,p=l?new Lu(o,_u):new hu(o,_u),h=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:s}],s),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(t)];if(!c().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===c().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,"complex64"!==s&&c().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(t),m=this.texData.get(v.dataId),f=(R=this.gpgpu).createBufferFromTexture.apply(R,[m.texture].concat(Jt(o)))),this.pendingRead.set(t,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:i.sent(),i.label=2;case 2:return"complex64"!==s?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return x=i.sent(),y=x[0],b=x[1],g=Da(y,b),[3,5];case 4:null==f?g=this.getValuesFromTexture(t):(w=N(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(f,w)),i.label=5;case 5:return null!=v&&this.disposeData(v.dataId),C=this.convertAndCacheOnCPU(t,g),E=this.pendingRead.get(t),this.pendingRead.delete(t),E.forEach(function(t){return t(C)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,C]}})})},e.prototype.checkNumericalProblems=function(t){if(null!=t)for(var e=0;e<t.length;e++){var n=t[e];if(!oe(n)){if(c().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},e.prototype.getValuesFromTexture=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,a=n.isPacked,i=N(r);if(c().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(t),u=this.texData.get(s.dataId),l=(e=this.gpgpu).downloadMatrixFromPackedTexture.apply(e,[u.texture].concat(Jt(r))).subarray(0,i);return this.disposeData(s.dataId),l}var p=c().getBool("WEBGL_PACK")&&!0===a,h=p?_e(r):r,d=p?new es(h):new ts(h),f=this.runWebGLProgram(d,[{shape:h,dtype:o,dataId:t}],"float32"),v=this.texData.get(f.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeData(f.dataId),m},e.prototype.time=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s,u;return i(this,function(i){switch(i.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),o=A(this.activeTimers.map(function(t){return t.query})).filter(function(t){return null!=t}),a=A(this.activeTimers.map(function(t){return t.name})).filter(function(t){return null!=t}),this.activeTimers=e,r&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return u=i.sent(),s.kernelMs=R(u),s.getExtraProfileInfo=function(){return u.map(function(t,e){return{name:a[e],ms:t}}).map(function(t){return t.name+": "+t.ms}).join(", ")},[3,3];case 2:s.kernelMs={error:"WebGL query timers are not supported in this environment."},i.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ot(),endMs:null}},e.prototype.endTimer=function(t){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=ot(),t)},e.prototype.getQueryTime=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return c().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]})})},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var e=this.texData.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var e=this.texData.get(t),n=e.texture,r=e.dtype,o=e.texShape,a=e.usage,i=e.isPacked,s=e.slice,u=s&&s.origDataId||t,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,a,i)));var l=this.texData.get(t);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return c().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Ut.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,e){var n=this;return void 0===e&&(e=128),null!=this.getCPUBackend()&&t.every(function(t){return null==n.texData.get(t.dataId).texture&&N(t.shape)<e})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,e){var n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Ut.keep(t.clone()),imag:Ut.keep(e.clone())},n},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===N(n))return Mn([],n,t.dtype);var r=this.texData.get(t.dataId).isPacked,o=Zo(t.shape,e,n);if(r||!o){var a=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ou(n):new nu(n),i=a.getCustomSetupFunc(e);return this.compileAndRun(a,[t],null,i)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)},e.prototype.shallowSlice=function(t,e,n){var r=this.texData.get(t.dataId),o=this.makeOutput(n,t.dtype),a=this.texData.get(o.dataId);Object.assign(a,r),a.shape=n,a.dtype=t.dtype;var i=ta(e,t.strides);r.slice&&(i+=r.slice.flatOffset),a.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||t.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),o},e.prototype.stridedSlice=function(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);var o=$o(e,n,r);if(o.some(function(t){return 0===t}))return Mn([],o);var a=new au(e,r,o);return this.compileAndRun(a,[t])},e.prototype.reverse=function(t,e){var n=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Js(t.shape,e):new Qs(t.shape,e);return this.compileAndRun(n,[t])},e.prototype.concat=function(t,e){if("complex64"===t[0].dtype){var n=t.map(function(t){return _n(t)}),r=t.map(function(t){return On(t)});return Fn(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>c().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(t.length/2),a=this.concat(t.slice(0,o),e),i=this.concat(t.slice(o),e);return this.concat([a,i],e)}if(c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var s=new Mi(t.map(function(t){return t.shape}),e);return this.compileAndRun(s,t)}var u=Tn(t.map(function(t){return t.shape}),e),l=t.map(function(t){return t.as2D(-1,N(t.shape.slice(e)))}),p=new Oi(l.map(function(t){return t.shape}));return this.compileAndRun(p,l).reshape(u)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,bu,t.dtype);var e=new hu(t.shape,bu);return this.compileAndRun(e,[t])},e.prototype.batchMatMul=function(t,e,n,r){var o=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],i=n?t.shape[1]:t.shape[2],s=t.shape[0];if((1===o||1===a)&&i>1e3){n&&(t=pa(t,[0,2,1])),r&&(e=pa(e,[0,2,1]));var u=1===a?t:t.as3D(s,i,1),c=1===a?2:1,l=1===a?e.as3D(s,1,i):e;return this.multiply(u,l).sum(c,!0)}var p=Ft(t.dtype,e.dtype),h=new Bs(t.shape,[s,o,a],n,r);return this.compileAndRun(h,[t,e],p)},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,o=t.transposeB,a=t.bias,i=t.activation,s=t.preluActivationWeights,u=r?e.shape[2]:e.shape[1],c=o?n.shape[1]:n.shape[2],l=e.shape[0],p=Ft(e.dtype,n.dtype),h=null!=a,d=null!=s,f=i?Uu(i,!0):null,v=new Bs(e.shape,[l,u,c],r,o,h,f,d),m=[e,n];return a&&m.push(a),s&&m.push(s),this.compileAndRun(v,m,p)},e.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),o=new wi(yi,t.shape,e.shape),a=new wi(bi,t.shape,e.shape),i=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ri,t.dtype);var p=new Si(Ri,t.shape,e.shape);return this.compileAndRun(p,[t,e],t.dtype)},e.prototype.batchNormalization=function(t,e,n,r,o,a){var i=[t,e,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;if(null!=o&&(u=o.shape,i.push(o)),c().getBool("WEBGL_PACK_NORMALIZATION")){var l=new xi(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(l,i)}var p=new gi(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(p,i)},e.prototype.localResponseNormalization4D=function(t,e,n,r,o){var a=c().getBool("WEBGL_PACK_NORMALIZATION")?new _s(t.shape,e,n,r,o):new Ds(t.shape,e,n,r,o);return this.compileAndRun(a,[t])},e.prototype.LRNGrad=function(t,e,n,r,o,a,i){var s=new Fs(e.shape,r,o,a,i);return this.compileAndRun(s,[e,n,t])},e.prototype.tile=function(t,e){if("string"===t.dtype){var n=this.readSync(t.dataId).map(function(t){return st(t)});return Ha(or(t.shape,t.dtype,n),e)}var r=new cu(t.shape,e);return this.compileAndRun(r,[t])},e.prototype.pad=function(t,e,n){var r=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Us(t.shape,e,n):new zs(t.shape,e,n);return this.compileAndRun(r,[t])},e.prototype.gather=function(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);var r=new us(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},e.prototype.batchToSpaceND=function(t,e,n){I(t.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),o=gr(t.shape,e,r),a=xr(o.length,e.length),i=yr(t.shape,e,r),s=br(n,e.length),u=wr(i,n,e.length);return pa(t.reshape(o),a).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(t,e,n){I(t.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=e.reduce(function(t,e){return t*e}),o=[[0,0]];o.push.apply(o,n);for(var a=1+e.length;a<t.shape.length;++a)o.push([0,0]);var i=t.pad(o),s=gr(i.shape,e,r,!1),u=xr(s.length,e.length,!1),c=yr(i.shape,e,r,!1);return pa(i.reshape(s),u).reshape(c)},e.prototype.reduce=function(t,e,n){var r=t.shape[0],o=t.shape[1],a=Go(o),i=new Hs({windowSize:a,inSize:o,batchSize:r},e),s=this.compileAndRun(i,[t],n);return 1===s.shape[1]?s:this.reduce(s,e,n)},e.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],o=t.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a=Go(o),i=new Ya({windowSize:a,inSize:o,batchSize:r},e,null==n),s=[t];null!=n&&s.push(n);var u=this.compileAndRun(i,s,"int32");return 1===u.shape[1]?u:this.argReduce(t,e,u)},e.prototype.argReducePacked=function(t,e,n){void 0===n&&(n=null);var r=null!=n?n.shape:t.shape,o=Go(r[r.length-1]),a=new fi(r,o,e,null==n),i=null==n?[t]:[t,n],s=this.compileAndRun(a,i,"int32");return s.rank===t.rank?this.argReducePacked(t,e,s):s},e.prototype.sum=function(t,e){In("sum",e,t.rank);var n=En(t.shape,e),r=n[0],o=N(n[1]),a=t.as2D(-1,o),i=_t(t.dtype);return this.reduce(a,"sum",i).reshape(r)},e.prototype.prod=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);var n=En(t.shape,e),r=n[0],o=N(n[1]),a=t.as2D(-1,o),i=_t(t.dtype);return this.reduce(a,"prod",i).reshape(r)},e.prototype.unsortedSegmentSum=function(t,e,n){var r=0,o=kn([r],t.rank),a=t;null!=o&&(a=pa(t,o),r=An(1,t.rank)[0]);var i=function(t,e,n){for(var r=[],o=t.length,a=0;a<o;a++)a!==e?r.push(t[a]):r.push(n);return r}(a.shape,r,n),s=N([a.shape[r]]),u=a.as2D(-1,s),c=_t(t.dtype),l=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(i);return null!=o&&(l=pa(l,Sn(o))),l},e.prototype.segOpCompute=function(t,e,n,r,o){var a=t.shape[0],i=t.shape[1],s=function(t,e){var n,r=!1;for(t<=Vo?(n=t,r=!0):n=J(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=J(t,n+1);return n}(i,o),u=new tu({windowSize:s,inSize:i,batchSize:a,numSegments:o},e),c=this.compileAndRun(u,[t,n],r);return c.shape[1]===o?c:(n=Yn(0,o).tile([i/s]),this.segOpCompute(c,e,n,r,o))},e.prototype.argMinMaxReduce=function(t,e,n){var r=[e];if(In("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,t.rank),!c().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var o=En(t.shape,r),a=o[0],i=N(o[1]),s=t.as2D(-1,i);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(t,n)},e.prototype.argMin=function(t,e){return this.argMinMaxReduce(t,e,"min")},e.prototype.argMax=function(t,e){return this.argMinMaxReduce(t,e,"max")},e.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var o=new Xi(t.shape,n,r);return this.compileAndRun(o,[t])},e.prototype.equal=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(equal(a, b));\n","bool");var n=new Si("return float(a == b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.notEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Si("return float(a != b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.less=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Si("return float(a < b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.lessEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Si("return float(a <= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greater=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Si("return float(a > b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.greaterEqual=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Si("return float(a >= b);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalNot=function(t){var e=new hu(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},e.prototype.logicalAnd=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Si("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.logicalOr=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Si("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")},e.prototype.select=function(t,e,n){var r=new eu(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],Ft(e.dtype,n.dtype))},e.prototype.where=function(t){mn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return Ka(t.shape,e)},e.prototype.topk=function(t,e,n){return qa(t.dataSync(),t.shape,t.dtype,e)},e.prototype.min=function(t,e){In("min",e,t.rank);var n=En(t.shape,e),r=n[0],o=N(n[1]),a=t.as2D(-1,o);return this.reduce(a,"min",a.dtype).reshape(r)},e.prototype.minimum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Si("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.mod=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Si("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.max=function(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,e);In("max",e,t.rank);var n=En(t.shape,e),r=n[0],o=N(n[1]),a=t.as2D(-1,o);return this.reduce(a,"max",a.dtype).reshape(r)},e.prototype.maximum=function(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Si("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.all=function(t,e){In("all",e,t.rank);var n=En(t.shape,e),r=n[0],o=N(n[1]),a=t.as2D(-1,o);return this.reduce(a,"all",a.dtype).reshape(r)},e.prototype.any=function(t,e){In("any",e,t.rank);var n=En(t.shape,e),r=n[0],o=N(n[1]),a=t.as2D(-1,o);return this.reduce(a,"any",a.dtype).reshape(r)},e.prototype.floorDiv=function(t,e){if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Si("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",t.shape,e.shape);return this.compileAndRun(n,[t,e],"int32")},e.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Ci);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);var n=Ft(t.dtype,e.dtype);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ci,n);var r=new Si(Ci,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.packedUnaryOp=function(t,e,n){var r=new Lu(t.shape,e);return this.compileAndRun(r,[t],n)},e.prototype.packedBinaryOp=function(t,e,n,r,o){void 0===o&&(o=!1);var a=new Ti(n,t.shape,e.shape,o);return this.compileAndRun(a,[t,e],r)},e.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,o=this.texData.get(t.dataId),a=this.texData.get(e.dataId),i=[[o.complexTensors.real,a.complexTensors.real],[o.complexTensors.imag,a.complexTensors.imag]].map(function(o){var a=o[0],i=o[1],s=r.makeComplexComponentTensorInfo(t,a),u=r.makeComplexComponentTensorInfo(e,i),c=new Si(n,t.shape,e.shape);return r.compileAndRun(c,[s,u],Ft(a.dtype,i.dtype))}),s=i[0],u=i[1],c=this.complex(s,u);return s.dispose(),u.dispose(),c},e.prototype.makeComplexComponentTensorInfo=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},e.prototype.addN=function(t){if(1===t.length)return t[0];if(t.length>c().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}var o=t.map(function(t){return t.dtype}).reduce(function(t,e){return Ft(t,e)}),a=t.map(function(t){return t.shape}),i=c().getBool("WEBGL_PACK")?new Xa(t[0].shape,a):new ja(t[0].shape,a);return this.compileAndRun(i,t,o)},e.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Ei);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);var n=Ft(t.dtype,e.dtype);if(c().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ei,t.dtype);var r=new Si(Ei,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)},e.prototype.pow=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Si("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=Ft(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,wu,t.dtype);var e=new hu(t.shape,wu);return this.compileAndRun(e,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Cu,t.dtype);var e=new hu(t.shape,Cu);return this.compileAndRun(e,[t])},e.prototype.sign=function(t){var e=new hu(t.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},e.prototype.isNaN=function(t){var e=new hu(t.shape,"return float(isnan(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isInf=function(t){var e=new hu(t.shape,"return float(isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.isFinite=function(t){var e=new hu(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(e,[t],"bool")},e.prototype.round=function(t){var e=new hu(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Eu,t.dtype);var e=new hu(t.shape,Eu);return this.compileAndRun(e,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Ru,t.dtype);var e=new hu(t.shape,Ru);return this.compileAndRun(e,[t])},e.prototype.softmax=function(t,e){var n=P([e],t.shape),r=this.max(t,n),o=Rn(r.shape,n),a=this.subtract(t,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return Wo(i,s)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",t.dtype);var e=new hu(t.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(e,[t])},e.prototype.log1p=function(t){var e=new hu(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},e.prototype.sqrt=function(t){var e=new hu(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var e=new hu(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},e.prototype.reciprocal=function(t){var e=new hu(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},e.prototype.relu=function(t){var e;return e=c().getBool("WEBGL_PACK")?new Lu(t.shape,Mu):new hu(t.shape,mu),this.compileAndRun(e,[t])},e.prototype.relu6=function(t){var e;return e=c().getBool("WEBGL_PACK")?new Lu(t.shape,Bu):new hu(t.shape,gu),this.compileAndRun(e,[t])},e.prototype.prelu=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti(Ni,t.shape,e.shape):new Si(ki,t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.elu=function(t){if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Pu,t.dtype);var e=new hu(t.shape,xu);return this.compileAndRun(e,[t])},e.prototype.eluDer=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",t.shape,e.shape):new Si("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.selu=function(t){var e=new hu(t.shape,yu);return this.compileAndRun(e,[t])},e.prototype.int=function(t){var e=new hu(t.shape,"return float(int(x));");return this.compileAndRun(e,[t],"int32")},e.prototype.clip=function(t,e,n){var r,o=(r=c().getBool("WEBGL_PACK_CLIP")?new Fi(t.shape):new Di(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,o)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(c().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,vu,t.dtype);var e=new hu(t.shape,vu);return this.compileAndRun(e,[t])},e.prototype.complexAbs=function(t){var e=this.texData.get(t.dataId),n=new _i(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(t){var e=new hu(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},e.prototype.softplus=function(t){var e=new hu(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},e.prototype.sin=function(t){var e=new hu(t.shape,Iu);return this.compileAndRun(e,[t])},e.prototype.cos=function(t){var e=new hu(t.shape,ku);return this.compileAndRun(e,[t])},e.prototype.tan=function(t){var e=new hu(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},e.prototype.asin=function(t){var e=new hu(t.shape,Su);return this.compileAndRun(e,[t])},e.prototype.acos=function(t){var e=new hu(t.shape,Au);return this.compileAndRun(e,[t])},e.prototype.atan=function(t){var e=new hu(t.shape,Nu);return this.compileAndRun(e,[t])},e.prototype.atan2=function(t,e){var n=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",t.shape,e.shape):new Si("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},e.prototype.sinh=function(t){var e=new hu(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.cosh=function(t){var e=new hu(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},e.prototype.tanh=function(t){var e=new hu(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},e.prototype.asinh=function(t){var e=new hu(t.shape,Tu);return this.compileAndRun(e,[t])},e.prototype.acosh=function(t){var e=new hu(t.shape,Du);return this.compileAndRun(e,[t])},e.prototype.atanh=function(t){var e=new hu(t.shape,Fu);return this.compileAndRun(e,[t])},e.prototype.erf=function(t){var e=new hu(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(e,[t])},e.prototype.step=function(t,e){var n=new hu(t.shape,function(t){return void 0===t&&(t=0),du+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},e.prototype.conv2dByMatMul=function(t,e,n,r,o,a){var i=t.shape,s=this.texData.get(t.dataId),u=n.inChannels,l=i[0]*i[1]*i[2],p=n.outChannels,h="channelsLast"===n.dataFormat,d=(1===l||1===p)&&u>1e3,f=i[2]%2!=0&&!!s.isPacked;if(d||!c().getBool("WEBGL_LAZILY_UNPACK")||!c().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!f){var v=h?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],m=this.reshape(t,[1,v,n.inChannels]),g=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),n.outShape)}var x=h?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),y={dataId:t.dataId,shape:[1,x,n.inChannels],dtype:t.dtype},b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,I(Be(s.shape,y.shape),function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"});var w=this.reshape(e,[1,n.inChannels,n.outChannels]),C=this.fusedBatchMatMul({a:y,b:w,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),E=this.texData.get(C.dataId);return I(E.isPacked,function(){return"batchMatMul result is expected to be packed"}),s.shape=b,E.shape=n.outShape,Ut.makeTensorFromDataId(C.dataId,n.outShape,C.dtype)},e.prototype.conv2dWithIm2Row=function(t,e,n,r,o,a){var i=n.filterWidth,s=n.filterHeight,u=n.inChannels,c=n.outWidth,l=n.outHeight,p="channelsLast"===n.dataFormat,h=i*s*u,d=l*c,f=[h,d],v=t.squeeze([0]),m=e.reshape([1,h,-1]),g=new Ts(f,v.shape,n),x=this.compileAndRun(g,[v]).reshape([1,f[0],f[1]]),y=null!=r,b=null!=a,w=o?Uu(o,!0):null,C=new Bs(x.shape,[1,d,n.outChannels],!0,!1,y,w,b),E=[x,m];r&&E.push(r),b&&E.push(a);var R=this.compileAndRun(C,E);return p?R.reshape([1,l,c,n.outChannels]):R.reshape([1,n.outChannels,l,c])},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,a=t.activation,i=t.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(e,n,r,o,a,i);if(c().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,n,r,o,a,i);var s=null!=o,u=null!=i,l=a?Uu(a,!1):null,p=new Gi(r,s,l,u),h=[e,n];return o&&h.push(o),i&&h.push(i),this.compileAndRun(p,h)},e.prototype.conv2d=function(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(c().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);var r=new Gi(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerInput=function(t,e,n){var r=new Li(n);return this.compileAndRun(r,[t,e])},e.prototype.conv2dDerFilter=function(t,e,n){var r=new Pi(n);return this.compileAndRun(r,[t,e])},e.prototype.fusedDepthwiseConv2D=function(t){var e,n=t.input,r=t.filter,o=t.convInfo,a=t.bias,i=t.activation,s=t.preluActivationWeights,u=c().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,l=i?Uu(i,u):null,p=[n,r],h=null!=a,d=null!=s;return h&&p.push(a),d&&p.push(s),u?(e=new Ki(o,h,l,d),this.compileAndRun(e,p)):(e=new qi(o,h,l,d),this.compileAndRun(e,p))},e.prototype.depthwiseConv2D=function(t,e,n){var r;return c().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Ki(n),this.compileAndRun(r,[t,e])):(r=new qi(n),this.compileAndRun(r,[t,e]))},e.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new Vi(n);return this.compileAndRun(r,[t,e])},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new Ui(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3d=function(t,e,n){var r=new Hi(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerInput=function(t,e,n){var r=new zi(n);return this.compileAndRun(r,[t,e])},e.prototype.conv3dDerFilter=function(t,e,n){var r=new Wi(n);return this.compileAndRun(r,[t,e])},e.prototype.maxPool=function(t,e){var n=new Vs(e,"max",!1);return this.compileAndRun(n,[t])},e.prototype.avgPool=function(t,e){var n=new Vs(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPoolBackprop=function(t,e,n,r){var o=new Vs(r,"max",!0),a=this.compileAndRun(o,[e]),i=new Os(r),s=this.compileAndRun(i,[t,a],e.dtype);return a.dispose(),s},e.prototype.avgPoolBackprop=function(t,e,n){var r=new vi(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.cast=function(t,e){return Sa(t,e,this)},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,a=0;a<t.rank;a++)a!==e&&(r[o++]=t.shape[a]);var i=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[e]=a,u[a]=this.slice(t,i,s).reshape(r);return u},e.prototype.avgPool3d=function(t,e){var n=new Gs(e,"avg",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,e,n){var r=new mi(n);return this.compileAndRun(r,[t],e.dtype)},e.prototype.maxPool3d=function(t,e){var n=new Gs(e,"max",!1);return this.compileAndRun(n,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,e,n,r){var o=new Gs(r,"max",!0),a=this.compileAndRun(o,[e]),i=new Ms(r),s=this.compileAndRun(i,[t,a],e.dtype);return a.dispose(),s},e.prototype.reshape=function(t,e){var n=this.texData.get(t.dataId);if(n.isPacked&&!Be(t.shape,e)&&(null===n.texture||!Be(n.shape,e))){var r=this.packedReshape(t,e);return Ut.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return Aa(t,e)},e.prototype.resizeBilinear=function(t,e,n,r){var o=c().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Xs(t.shape,e,n,r):new js(t.shape,e,n,r);return this.compileAndRun(o,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,e,n){var r=new Ks(t,e,n);return this.compileAndRun(r,[t])},e.prototype.resizeNearestNeighbor=function(t,e,n,r){var o=new $s(t.shape,e,n,r);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new Ys(t,e,n);return this.compileAndRun(r,[t])},e.prototype.multinomial=function(t,e,n,r){var o=e?t:ca(t),a=o.shape[0],i=o.shape[1],s=new Ps(a,i,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],"int32",u)},e.prototype.oneHot=function(t,e,n,r){var o=new Ls(t.size,e,n,r);return this.compileAndRun(o,[t])},e.prototype.diag=function(t){var e=new Zi(t.size);return this.compileAndRun(e,[t])},e.prototype.nonMaxSuppression=function(t,e,n,r,o){return mn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Pa(t.dataSync(),e.dataSync(),n,r,o)},e.prototype.cropAndResize=function(t,e,n,r,o,a){var i=new ji(t.shape,e.shape,r,o,a);return this.compileAndRun(i,[t,e,n],"float32")},e.prototype.depthToSpace=function(t,e,n){I(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});var r=t.shape[0],o="NHWC"===n?t.shape[1]:t.shape[2],a="NHWC"===n?t.shape[2]:t.shape[3],i="NHWC"===n?t.shape[3]:t.shape[1],s=o*e,u=a*e,c=i/(e*e),l=new Ji("NHWC"===n?[r,s,u,c]:[r,c,s,u],e,n);return this.compileAndRun(l,[t])},e.prototype.split=function(t,e,n){return Ga(t,e,n)},e.prototype.scatterND=function(t,e,n){var r=Ko(0,t,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,c=[u/i,i],l=t.reshape([a,o]),p=e.reshape([a,i]);if(0===u)return Aa(Mn([]),n);var h=Pn(0),d=new Zs(a,o,l.rank,p.rank,s,c);return this.compileAndRun(d,[p,l,h]).reshape(n)},e.prototype.sparseToDense=function(t,e,n,r){var o=Ko(0,t,n),a=o.sliceRank,i=o.numUpdates,s=o.strides,u=o.outputSize,c=new Zs(i,a,t.rank,e.rank,s,[u,1],!1);return this.compileAndRun(c,[e,t,r]).reshape(n)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,e){var n=this.texData.get(t.dataId),r=new is(os,t.shape,e),o=new is(as,t.shape,e),a=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],i=this.compileAndRun(r,a),s=this.compileAndRun(o,a),u=this.complex(i,s).as2D(t.shape[0],t.shape[1]);return i.dispose(),s.dispose(),u},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=zo(t,e),a=o[0],i=o[1],s=o[2],u=o[3],c=e.reshape([i,r]),l=t.reshape([t.size/s,s]),p=new cs(r,u,[i,s]);return this.compileAndRun(p,[l,c]).reshape(a)},e.prototype.fill=function(t,e,n){if("string"===(n=n||$(e))){var r=z(n,N(t));return r.fill(e),Ut.makeTensor(r,t,n,this)}var o=new ss(t,e),a=o.getCustomSetupFunc(e);return this.compileAndRun(o,[],n,a)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)},e.prototype.linspace=function(t,e,n){return Na(t,e,n)},e.prototype.makeTensorInfo=function(t,e){var n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}},e.prototype.makeOutput=function(t,e){var n=this.makeTensorInfo(t,e).dataId;return Ut.makeTensorFromDataId(n,t,e,this)},e.prototype.unpackTensor=function(t){var e=new Wu(t.shape);return this.runWebGLProgram(e,[t],t.dtype)},e.prototype.packTensor=function(t){var e=new Ws(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,e){var n=[De(t.shape)].concat(Fe(t.shape)),r={dtype:t.dtype,shape:n,dataId:t.dataId},o=[De(e)].concat(Fe(e)),a=new qs(o,n),i=this.runWebGLProgram(a,[r],t.dtype,null,!0);return{dataId:i.dataId,shape:e,dtype:i.dtype}},e.prototype.decode=function(t){var e,n=this.texData.get(t),r=n.isPacked,o=n.shape,a=n.dtype,i=_e(o);return e=r?new Qi(i):new $i(i),{dtype:a,shape:o,dataId:this.runWebGLProgram(e,[{shape:i,dtype:a,dataId:t}],a,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,e,n,r,o){var a=this;void 0===o&&(o=!1);var i=this.makeTensorInfo(t.outputShape,n),s=this.texData.get(i.dataId);if(t.packedOutput&&(s.isPacked=!0),t.outPackingScheme===Ht.DENSE){var u=Jt(t.outputShape);s.texShape=u.map(function(t){return 2*t})}if(null!=t.outTexUsage&&(s.usage=t.outTexUsage),0===N(i.shape))return s.values=W(i.dtype,0),i;var l=[],p=e.map(function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&N(e.shape)<=c().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?a.unpackTensor(e):a.packTensor(e),l.push(e),n=a.texData.get(e.dataId);else if(n.isPacked&&!Be(n.shape,e.shape)){var r=e,o=e.shape;e.shape=n.shape,e=a.packedReshape(e,o),l.push(e),n=a.texData.get(e.dataId),r.shape=o}return a.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(i.dataId);var h,d={shape:i.shape,texData:s,isUniform:!1},f=function(t,e,n){var r="";p.concat(n).forEach(function(t){var e=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0,n=t.isUniform?"uniform":t.texData.texShape;r+=t.shape+"_"+n+"_"+e});var o=t.userCode;return t.constructor.name+"_"+r+"_"+o}(t,0,d),v=this.getAndSaveBinary(f,function(){return function(t,e,n,r){var o=e.userCode,a=n.map(function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),i=a.map(function(t){return t.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=ni(a,s,o,e.packedInputs),l=t.createProgram(u),p=null,h=t.getUniformLocation(l,"NAN",!1);1===c().getNumber("WEBGL_VERSION")&&(p=t.getUniformLocation(l,"INFINITY",!1));for(var d={},f=0;f<e.variableNames.length;f++){var v=e.variableNames[f];d[v]=t.getUniformLocation(l,v,!1),d["offset"+v]=t.getUniformLocation(l,"offset"+v,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:d,inShapeInfos:i,outShapeInfo:s,infLoc:p,nanLoc:h}}(a.gpgpu,t,p,d)}),m=null!=this.activeTimers;if(m&&(h=this.startTimer()),function(t,e,n,r,o){Ns(e.inShapeInfos,n),Ns([e.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a,i[0],i[1]):t.setOutputMatrixTexture(a,i[0],i[1]),t.setProgram(e.webGLProgram),1===c().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach(function(n,r){var o=e.program.variableNames[r],a=e.uniformLocations[o],i=e.uniformLocations["offset"+o];if(null!=a)if(n.isUniform)if(N(n.shape)<2)t.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),t.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=i&&t.gl.uniform1i(i,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,a,r)}),null!=o&&o(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,v,p,d,r),l.forEach(function(t){return a.disposeData(t.dataId)}),m&&(h=this.endTimer(h),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(h)})),!c().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var g=this.unpackTensor(i);return this.disposeData(i.dataId),g}return i},e.prototype.compileAndRun=function(t,e,n,r,o){void 0===o&&(o=!1),n=n||e[0].dtype;var a=this.runWebGLProgram(t,e,n,r,o);return Ut.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},e.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(c().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(e){t.gpgpu.deleteProgram(t.binaryCache[e].webGLProgram),delete t.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=nn(function(){if(!c().get("WEBGL_RENDER_FLOAT32_ENABLED")){var e=c().getBool("DEBUG");c().set("DEBUG",!1);var n=t.abs(Pn(1e-8)).dataSync()[0];if(c().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var e,n=this.texData.get(t),r=n.shape,o=n.dtype,a=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var c,l=null!=this.activeTimers;l&&(c=ot());var p=n.texShape;if(null==p&&(p=Oe(r,u),n.texShape=p),null!=a){var h=_e(r),d=void 0,f=p[1],v=p[0],m=a instanceof Uint8Array;u?(f=(e=Zt(p[0],p[1]))[0],v=e[1],d=new rs(h,[v,f],m)):d=new ns(h,[v,f],m);var g=this.makeTensorInfo([v,f],o);this.texData.get(g.dataId).usage=m?qt.PIXELS:qt.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),f,v,a);var x=this.runWebGLProgram(d,[g],o,null,!0),y=this.texData.get(x.dataId);n.texture=y.texture,n.texShape=y.texShape,n.isPacked=y.isPacked,n.usage=y.usage,this.disposeData(g.dataId),this.texData.delete(x.dataId),n.values=null,l&&(this.uploadWaitMs+=ot()-c)}else{var b=this.acquireTexture(p,s,o,u);n.texture=b}}},e.prototype.convertAndCacheOnCPU=function(t,e){var n=this.texData.get(t),r=n.dtype;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,r)),n.values},e.prototype.acquireTexture=function(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)},e.prototype.computeBytes=function(t,e){return t[0]*t[1]*q(e)},e}(da);function Hu(t,e){return t(e={exports:{}},e.exports),e.exports}Vt()&&Ut.registerBackend("webgl",function(){return new Gu},2),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var qu=Hu(function(t){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function o(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new r(t),a=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.alea=a}(0,t)}),Ku=Hu(function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xor128=a}(0,t)}),ju=Hu(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function o(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xorwow=a}(0,t)}),Xu=Hu(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function o(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&(a.x&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xorshift7=a}(0,t)}),Yu=Hu(function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,a=e.i;return e.w=r=r+1640531527|0,n=o[a+34&127],t=o[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,o,a,i,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;t.w=i,t.X=s,t.i=o}(e,t)}function o(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&(a.X&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.xor4096=a}(0,t)}),$u=Hu(function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function o(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new r(t),a=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}e&&e.exports?e.exports=a:this.tychei=a}(0,t)}),Qu=Hu(function(t){!function(e,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),c=n.pow(2,52),l=2*c,p=a-1;function h(t,p,h){var g=[],x=v(function t(e,n){var r,o=[],a=typeof e;if(n&&"object"==a)for(r in e)try{o.push(t(e[r],n-1))}catch(t){}return o.length?o:"string"==a?e:e+"\0"}((p=1==p?{entropy:!0}:p||{}).entropy?[t,m(e)]:null==t?function(){try{var t;return r&&(t=r.randomBytes)?t=t(a):(t=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(t)),m(t)}catch(t){var n=o.navigator,i=n&&n.plugins;return[+new Date,o,i,o.screen,m(e)]}}():t,3),g),y=new d(g),b=function(){for(var t=y.g(i),e=u,n=0;t<c;)t=(t+n)*a,e*=a,n=y.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,v(m(y.S),e),(p.pass||h||function(t,e,r,o){return o&&(o.S&&f(o,y),t.state=function(){return f(y,{})}),r?(n[s]=t,e):t})(b,x,"global"in p?p.global:this==n,p.state)}function d(t){var e,n=t.length,r=this,o=0,i=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);o<a;)s[o]=o++;for(o=0;o<a;o++)s[o]=s[i=p&i+t[o%n]+(e=s[o])],s[i]=e;(r.g=function(t){for(var e,n=0,o=r.i,i=r.j,s=r.S;t--;)e=s[o=p&o+1],n=n*a+s[p&(s[o]=s[i=p&i+e])+(s[i]=e)];return r.i=o,r.j=i,n})(a)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){for(var n,r=t+"",o=0;o<r.length;)e[p&o]=p&(n^=19*e[p&o])+r.charCodeAt(o++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(n["seed"+s]=h,v(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch(t){}}}([],Math)});Qu.alea=qu,Qu.xor128=Ku,Qu.xorwow=ju,Qu.xorshift7=Xu,Qu.xor4096=Yu,Qu.tychei=$u;var Ju=Qu.alea,Zu=Dn({addN_:function(t){I(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),I(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(t,e){return yn(t,"tensors"+e,"addN")}),n=e[0];e.forEach(function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(t){if(!T(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return Ut.runKernelFunc(function(t,n){return t.addN(e)},r,null,"AddN")}});function tc(){Qe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}function ec(t){return 0===t.rank||1===t.rank?t.as4D(1,1,1,t.size):2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function nc(t,e,n,r,o,a){null==a&&(a=.001);var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(c.rank===l.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),I(null==s||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),I(null==i||c.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."});var p={x:u,scale:i,offset:s,mean:c,variance:l},h={varianceEpsilon:a};return Ut.runKernelFunc(function(t,e){var n=ec(u),r=t.batchNormalization(n,rc(c),rc(l),a,rc(i),rc(s));return e([u,c,l,i]),r},p,null,"FusedBatchNorm",h).reshape(u.shape)}function rc(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}exports.addN=Zu;var oc=Dn({batchNormalization_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),tc(),nc(t,e,n,a,o,r)}}),ac=Dn({batchNorm_:nc});function ic(t,e,n,r,o,a){var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");return null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(2===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),I(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),I(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=i&&I(2===i.rank||1===i.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),null!=s&&I(2===s.rank||1===s.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),ac(u,c,l,s,i,a)}exports.batchNorm=ac,exports.batchNormalization=oc;var sc=Dn({batchNormalization2d_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),tc(),ic(t,e,n,a,o,r)}}),uc=Dn({batchNorm2d_:ic});function cc(t,e,n,r,o,a){var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");return null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(3===u.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),I(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),I(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=i&&I(3===i.rank||1===i.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),null!=s&&I(3===s.rank||1===s.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),ac(u,c,l,s,i,a)}exports.batchNorm2d=uc,exports.batchNormalization2d=sc;var lc=Dn({batchNormalization3d_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),tc(),cc(t,e,n,a,o,r)}}),pc=Dn({batchNorm3d_:cc});function hc(t,e,n,r,o,a){var i,s,u=yn(t,"x","batchNorm"),c=yn(e,"mean","batchNorm"),l=yn(n,"variance","batchNorm");return null!=o&&(i=yn(o,"scale","batchNorm")),null!=r&&(s=yn(r,"offset","batchNorm")),I(4===u.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),I(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),I(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=i&&I(4===i.rank||1===i.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),null!=s&&I(4===s.rank||1===s.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),ac(u,c,l,s,i,a)}exports.batchNorm3d=pc,exports.batchNormalization3d=lc;var dc=Dn({batchNormalization4d_:function(t,e,n,r,o,a){return void 0===r&&(r=.001),tc(),hc(t,e,n,a,o,r)}}),fc=Dn({batchNorm4d_:hc});exports.batchNorm4d=fc,exports.batchNormalization4d=dc;var vc=Dn({broadcastTo_:function(t,e){var n=yn(t,"broadcastTo","x"),r=n.shape;if(e.some(function(t){return!(t>0)||t%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var o=n.shape.slice();o.length<e.length;)o.unshift(1);n=n.reshape(o)}for(var a=n.shape,i=Array.from(e),s=e.length-1;s>=0;s--)if(a[s]===e[s])i[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var u=i.map(function(t,e){return t>1?e:-1}).filter(function(t){return t>=0});if(0===u.length)return n.clone();var c={x:n},l={shape:e,inputShape:a};return Ut.runKernelFunc(function(t){return t.tile(n,i)},c,function(t){return{x:function(){return t.sum(u,!0)}}},Tr,l)}});exports.broadcastTo=vc;var mc=Dn({clone_:function(t){var e=yn(t,"x","clone",null);return Ut.runKernelFunc(function(){return Ut.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{x:e},null,Fr)}});exports.clone=mc;var gc=Dn({logicalAnd_:function(t,e){var n=yn(t,"a","logicalAnd","bool"),r=yn(e,"b","logicalAnd","bool");return zr(n.shape,r.shape),Ut.runKernelFunc(function(t){return t.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),xc=Dn({logicalNot_:function(t){var e=yn(t,"x","logicalNot","bool");return Ut.runKernelFunc(function(t){return t.logicalNot(e)},{$x:e})}}),yc=Dn({logicalOr_:function(t,e){var n=yn(t,"a","logicalOr","bool"),r=yn(e,"b","logicalOr","bool");return zr(n.shape,r.shape),Ut.runKernelFunc(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})}}),bc=Dn({logicalXor_:function(t,e){var n=yn(t,"a","logicalXor","bool"),r=yn(e,"b","logicalXor","bool");return zr(n.shape,r.shape),yc(t,e).logicalAnd(gc(t,e).logicalNot())}}),wc=Dn({where_:function(t,e,n){var r=yn(e,"a","where"),o=yn(n,"b","where"),a=yn(t,"condition","where","bool");return k(r.shape,o.shape,"Error in where: "),1===a.rank?I(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):k(a.shape,o.shape,"Error in where: "),Ut.runKernelFunc(function(t,e){var n=t.select(a,r,o);return e([a]),n},{$condition:a,$a:r,$b:o},function(t,e){var n=e[0];return{$condition:function(){return Qn(n).toFloat()},$a:function(){return t.mul(n.cast(t.dtype))},$b:function(){return t.mul(n.logicalNot().cast(t.dtype))}}})}}),Cc=function(t){return a(this,void 0,void 0,function(){var e,n,r;return i(this,function(o){switch(o.label){case 0:return[4,(e=yn(t,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Ka(e.shape,n),t!==e&&e.dispose(),[2,r]}})})};exports.whereAsync=Cc,exports.where=wc,exports.logicalXor=bc,exports.logicalOr=yc,exports.logicalNot=xc,exports.logicalAnd=gc;var Ec=Dn({divNoNan_:function(t,e){var n,r=yn(t,"a","div"),o=yn(e,"b","div");r=(n=Ot(r,o))[0],o=n[1];var a=Wo(r,o),i=Qn(a),s=o.equal(i);return wc(s,i,a)}});exports.divNoNan=Ec;var Rc=Dn({tile_:function(t,e){var n=yn(t,"x","tile",null);I(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],o={x:n},a={reps:e};return Ut.runKernelFunc(function(t,r){var o=t.tile(n,e);return r([n]),o},o,null,_r,a,r)}});exports.tile=Rc;var Ic=Dn({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var o=or([t,e],r),a=t<=e?t:e,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(t,e);if(null==n)return s;if(1===n.length)return Rc(lr(s,0),[n[0],1,1]);if(2===n.length)return Rc(lr(lr(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Rc(lr(lr(lr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}});exports.eye=Ic;var kc=Dn({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var o=yn(t,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?o.as2D(1,-1):o,u=Ut.runKernelFunc(function(t){return t.multinomial(s,r,e,n)},{logits2D:s});return 1===i?u.as1D():u}});exports.multinomial=kc;var Sc=Dn({oneHot_:function(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var o=yn(t,"indices","oneHot","int32"),a=o.shape.concat([e]),i={indices:o=o.flatten()},s={depth:e,onValue:n,offValue:r};return Ut.runKernelFunc(function(t,a){return a([o]),t.oneHot(o,e,n,r)},i,null,Dr,s).reshape(a)}});exports.oneHot=Sc;var Ac=Dn({pad_:function(t,e,n){void 0===n&&(n=0);var r=yn(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:e,constantValue:n},a={x:r};return Ut.runKernelFunc(function(t,o){return o([r]),t.pad(r,e,n)},a,null,Or,o)}});exports.pad=Ac;var Nc=Dn({pad1d_:function(t,e,n){return void 0===n&&(n=0),I(2===e.length,function(){return"Invalid number of paddings. Must be length of 2."}),Ac(t,[e],n)}});exports.pad1d=Nc;var Tc=Dn({pad2d_:function(t,e,n){return void 0===n&&(n=0),I(2===e.length&&2===e[0].length&&2===e[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ac(t,e,n)}});exports.pad2d=Tc;var Dc=Dn({pad3d_:function(t,e,n){return void 0===n&&(n=0),I(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ac(t,e,n)}});exports.pad3d=Dc;var Fc=Dn({pad4d_:function(t,e,n){return void 0===n&&(n=0),I(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ac(t,e,n)}});exports.pad4d=Fc;var _c=Dn({rand_:function(t,e,n){var r=N(t),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=e();return Ut.makeTensor(o,t,n)}}),Oc=.001,Mc=.1;function Bc(){return 32===Ut.backend.floatPrecision()?Oc:Mc}function Pc(t,e,n){var r=!0;if((H(t)||H(e))&&(r=!1),H(t)&&H(e)&&(r=!0),r){var o=t.constructor.name,a=e.constructor.name;if(o!==a)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+a)}if(Array.isArray(t)&&Array.isArray(e)){var i=gn(t),s=gn(e);if(!T(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=H(t)?t:A(t),c=H(e)?e:A(e);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+".\nActual:   "+u+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var p=u[l],h=c[l];if(!n(p,h))throw new Error("Arrays differ: actual["+l+"] = "+p+", expected["+l+"] = "+h+".\nActual:   "+u+".\nExpected: "+c+".")}}function Lc(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}exports.rand=_c;var Wc=Object.freeze({TEST_EPSILON_FLOAT16:Mc,expectArraysClose:function(t,e,n){return null==n&&(n=Bc()),Pc(t,e,function(t,e){return Lc(t,e,n)})},testEpsilon:Bc,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return j(t)||j(t[0])||j(e)||j(e[0])?Pc(t,n,function(t,e){return t==e}):Pc(t,e,function(t,e){return Lc(t,e,0)})},expectNumbersClose:function(t,e,n){if(null==n&&(n=Bc()),!Lc(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),zc=function(){function t(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Ju(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}(),Uc=function(){function t(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;var o=r||Math.random();this.randu=Ju(o.toString()),this.randn=new zc(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var t,e,n,r,o,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-a+Math.log(a)),(o=this.randu())<e||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(t){return"float32"===this.dtype?t:Math.round(t)},t}(),Vc=function(){function t(t,e,n,r){var o=this;if(void 0===t&&(t=0),void 0===e&&(e=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=Ju(r)}return t.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();exports.test_util=Wc;var Gc=Dn({randomGamma_:function(t,e,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new Uc(e,n,r,o),i=or(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});exports.randomGamma=Gc;var Hc=Dn({randomNormal_:function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new zc(e,n,r,!1,o),i=or(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});exports.randomNormal=Hc;var qc=Dn({randomUniform_:function(t,e,n,r,o){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=or(t,r),i=new Vc(e,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}});exports.randomUniform=qc;var Kc=Dn({square_:function(t){var e=yn(t,"x","square"),n=[e];return Ut.runKernelFunc(function(t,n){return n([e]),t.square(e)},{x:e},null,"Square",{},n,[])}});exports.square=Kc;var jc=Dn({squaredDifference_:function(t,e){var n,r=yn(t,"a","squaredDifference"),o=yn(e,"b","squaredDifference");n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return Ut.runKernelFunc(function(t,e){var n=t.squaredDifference(r,o);return e([r,o]),n},a,function(t,e){var n=e[0],r=e[1],o=Pn(2);return{a:function(){return t.mul(n.sub(r).mul(o))},b:function(){return t.mul(r.sub(n).mul(o))}}},kr,{},i,[])}});exports.squaredDifference=jc;var Xc=Dn({truncatedNormal_:function(t,e,n,r,o){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var a=new zc(e,n,r,!0,o),i=or(t,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}});exports.truncatedNormal=Xc;var Yc=Dn({equal_:function(t,e){var n,r=yn(t,"a","equal"),o=yn(e,"b","equal");return n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.equal(r,o)},{$a:r,$b:o})}}),$c=Dn({equalStrict_:function(t,e){var n=yn(t,"a","equalStrict"),r=yn(e,"b","equalStrict");return k(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Qc=Dn({greater_:function(t,e){var n,r=yn(t,"a","greater"),o=yn(e,"b","greater");return n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.greater(r,o)},{a:r,b:o},null,"Greater")}}),Jc=Dn({greaterEqual_:function(t,e){var n,r=yn(t,"a","greaterEqual"),o=yn(e,"b","greaterEqual");return n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.greaterEqual(r,o);return e([r,o]),n},{a:r,b:o},function(t,e){var n=e[0],r=e[1];return{a:function(){return Qn(n)},b:function(){return Qn(r)}}},"GreaterEqual")}}),Zc=Dn({greaterEqualStrict_:function(t,e){var n=yn(t,"a","greaterEqualStrict"),r=yn(e,"b","greaterEqualStrict");return k(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),tl=Dn({greaterStrict_:function(t,e){var n=yn(t,"a","greaterStrict"),r=yn(e,"b","greaterStrict");return k(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),el=Dn({less_:function(t,e){var n,r=yn(t,"a","less"),o=yn(e,"b","less");return n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.less(r,o)},{a:r,b:o},null,"Less")}}),nl=Dn({lessEqual_:function(t,e){var n,r=yn(t,"a","lessEqual"),o=yn(e,"b","lessEqual");return n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape),Ut.runKernelFunc(function(t,e){var n=t.lessEqual(r,o);return e([r,o]),n},{a:r,b:o},null,"LessEqual")}}),rl=Dn({lessEqualStrict_:function(t,e){var n=yn(t,"a","lessEqualStrict"),r=yn(e,"b","lessEqualStrict");return k(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),ol=Dn({lessStrict_:function(t,e){var n=yn(t,"a","lessStrict"),r=yn(e,"b","lessStrict");return k(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),al=Dn({notEqual_:function(t,e){var n,r=yn(t,"a","notEqual"),o=yn(e,"b","notEqual");return n=Ot(r,o),r=n[0],o=n[1],zr(r.shape,o.shape),Ut.runKernelFunc(function(t){return t.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),il=Dn({notEqualStrict_:function(t,e){var n=yn(t,"a","notEqualStrict"),r=yn(e,"b","notEqualStrict");return k(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function sl(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function ul(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}exports.notEqualStrict=il,exports.notEqual=al,exports.lessStrict=ol,exports.lessEqualStrict=rl,exports.lessEqual=nl,exports.less=el,exports.greaterStrict=tl,exports.greaterEqualStrict=Zc,exports.greaterEqual=Jc,exports.greater=Qc,exports.equalStrict=$c,exports.equal=Yc;var cl=Dn({gather_:function(t,e,n){void 0===n&&(n=0);var r=yn(t,"x","gather"),o=yn(e,"indices","gather","int32");n=P(n,r.shape)[0];var a=function(t,e,n){for(var r=t.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(t.shape[s]),a*=t.shape[s];for(s=0;s<e.rank;s++)o.push(e.shape[s]);for(s=n+1;s<t.rank;s++)o.push(t.shape[s]),i*=t.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}(r,o,n);return Ut.runKernelFunc(function(t,e){var a=t.gather(r,o.flatten(),n);return e([o]),a},{x:r,indices:o},function(t,e){var o=e[0];return{x:function(){var e=r.shape,a=o.size,i=e.slice(0,n),s=i.length,u=e.slice(n,e.length).slice(1),c=u.length,l=sl(0,s),p=sl(s+1,s+1+c),h=ul([i,[a],u]),d=t.reshape(h),f=o.reshape([a]),v=ul([[s],l,p]),m=d.transpose(v),g=ll(m,f,r.shape[n]),x=Sn(v);return g.transpose(x)},indices:function(){return o}}},"Gather",{axis:n}).reshape(a.outputShape)}}),ll=Dn({unsortedSegmentSum_:function(t,e,n){var r=yn(t,"x","unsortedSegmentSum"),o=yn(e,"segmentIds","unsortedSegmentSum","int32");return I(D(n),function(){return"numSegments must be of dtype int"}),Ut.runKernelFunc(function(t,e){var a=t.unsortedSegmentSum(r,o,n);return e([o]),a},{$x:r},function(t,e){var n=e[0];return{$x:function(){return function(t,e){for(var n=ko(e,Qn(e)),r=cl(t,n),o=Jc(e,Pn(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=lr(o,i+1);o=gc(o,qn(r.shape,"bool"));var s=Qn(r);return wc(o,r,s)}(t,n)}}})}});exports.unsortedSegmentSum=ll,exports.gather=cl;var pl=function(t,e,n){return a(this,void 0,void 0,function(){var r,o,a,s,u,c,l,p,h,d,f,v,m;return i(this,function(i){switch(i.label){case 0:for(r=yn(t,"tensor","boolMask"),o=yn(e,"mask","boolMask","bool"),a=null==n?0:n,s=o.rank,u=r.shape,I(s>0,function(){return"mask cannot be scalar"}),k(u.slice(a,a+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=a;l<a+s;l++)c*=u[l];return p=u.slice(0,a).concat([c],u.slice(a+s)),h=r.reshape(p),d=o.reshape([-1]),[4,Cc(d)];case 1:return f=i.sent(),v=f.squeeze([1]),m=cl(h,v,a),t!==r&&r.dispose(),e!==o&&o.dispose(),v.dispose(),h.dispose(),d.dispose(),f.dispose(),[2,m]}})})};function hl(t,e,n,r,o,a,i){void 0===a&&(a="NHWC"),I(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,c=!1;3===e.rank&&(c=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),I(4===s.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),I(4===u.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),I(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var l="NHWC"===a?s[3]:s[1],p="NHWC"===a?u.shape[3]:u.shape[1];I(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),I(p===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+n.shape[3]+"."}),null!=i&&I(D(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var h=ka(a),d=ga(s,n.shape,r,1,o,i,!1,h),f=Ut.runKernelFunc(function(t,e){var r=t.conv2dDerInput(u,n,d);return e([n,u]),r},{dy4D:u,filter:n},function(t,e){var n=e[0],s=e[1];return{dy4D:function(){return ml(t,n,r,o,a,1,i)},filter:function(){return xl(t,s,n.shape,r,o,a,i)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function dl(t){var e=function(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}(t),n=e[0],r=e[1],o=e[2];return 1===n&&1===r&&1===o}function fl(t,e,n,r,o){I(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,i=e,s=!1;4===e.rank&&(s=!0,i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),a=[1,t[0],t[1],t[2],t[3]]);var u=a[4],c=i.shape[4];I(5===a.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),I(5===i.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),I(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),I(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),I(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var l=xa(a,n.shape,r,1,o),p=Ut.runKernelFunc(function(t){return t.conv3dDerInput(i,n,l)},{dy5D:i});return s?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}exports.booleanMaskAsync=pl;var vl=Dn({conv1d_:function(t,e,n,r,o,a,i){void 0===o&&(o="NWC"),void 0===a&&(a=1);var s=yn(t,"x","conv1d"),u=yn(e,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),I(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),I(3===u.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),null!=i&&I(D(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),I(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),I(Ia(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),I("NWC"===o,function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=ml(h,p,[1,n],r,"NHWC",[1,a],i);return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),ml=Dn({conv2d_:function(t,e,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=yn(t,"x","conv2d"),u=yn(e,"filter","conv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),I(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),I(4===u.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),null!=i&&I(D(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var p="NHWC"===o?c.shape[3]:c.shape[1];I(p===u.shape[2],function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+u.shape[2]+"."}),I(Ia(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var h=ka(o),d=ga(c.shape,u.shape,n,a,r,i,!1,h),f=[u,c],v=Ut.runKernelFunc(function(t,e){var n=t.conv2d(c,u,d);return e([u,c]),n},{x:c,filter:u},function(t,e){var i=e,s=i[0],u=i[1];return I(Ra(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return yl(u.shape,t,s,n,r,o)},filter:function(){return xl(u,t,s.shape,n,r,o)}}},"Conv2D",d,f);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),gl=Dn({conv3d_:function(t,e,n,r,o,a){void 0===o&&(o="NDHWC"),void 0===a&&(a=[1,1,1]);var i=yn(t,"x","conv3d"),s=yn(e,"filter","conv3d"),u=i,c=!1;4===i.rank&&(c=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),I(5===u.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),I(5===s.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),I(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),I(function(t,e){return dl(n)||dl(e)}(0,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),I("NDHWC"===o,function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var l=xa(u.shape,s.shape,n,a,r),p=Ut.runKernelFunc(function(t,e){var n=t.conv3d(u,s,l);return e([u,s]),n},{x:u,$filter:s},function(t,e){I(dl(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var o=e[0],i=e[1];return{x:function(){return fl(o.shape,t,i,n,r)},$filter:function(){return function(t,e,n,r,o){var a=t;4===t.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]));var i=e;4===i.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3])),I(5===a.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."}),I(5===i.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."}),I(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),I(a.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."}),I(i.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."});var s=xa(a.shape,n,r,1,o);return Ut.runKernelFunc(function(t){return t.conv3dDerFilter(a,i,s)},{x5D:a,dy5D:i})}(o,t,i.shape,n,r)}}});return c?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),xl=Dn({conv2dDerFilter_:function(t,e,n,r,o,a,i){void 0===a&&(a="NHWC");var s=t;3===t.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;3===u.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),I(4===s.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),I(4===u.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),I(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===a?s.shape[3]:s.shape[1],l="NHWC"===a?u.shape[3]:u.shape[1];I(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),I(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),null!=i&&I(D(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var p=ka(a),h=ga(s.shape,n,r,1,o,i,!1,p);return Ut.runKernelFunc(function(t){return t.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),yl=Dn({conv2dDerInput_:hl}),bl=Dn({depthwiseConv2d_:function(t,e,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=yn(t,"x","depthwiseConv2d"),u=yn(e,"filter","depthwiseConv2d"),c=s,l=!1;3===s.rank&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),I(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),I(4===u.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),I(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),null==a&&(a=[1,1]),I(Ia(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=i&&I(D(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var p=ga(c.shape,u.shape,n,a,r,i,!0),h=[c,u],d=Ut.runKernelFunc(function(t,e){var n=t.depthwiseConv2D(c,u,p);return e([c,u]),n},{x:c,filter:u},function(t,e){I(Ra(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var n=e[0],r=e[1];return{x:function(){return wl(n.shape,t,r,p)},filter:function(){return Cl(n,t,r.shape,p)}}},"DepthwiseConv2dNative",p,h);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),wl=Dn({depthwiseConv2dDerInput_:function(t,e,n,r){var o=e,a=!1;3===e.rank&&(a=!0,o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=Ut.runKernelFunc(function(t){return t.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),Cl=Dn({depthwiseConv2dDerFilter_:function(t,e,n,r){var o=t;3===t.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return 3===a.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),Ut.runKernelFunc(function(t){return t.depthwiseConv2DDerFilter(o,a,r)},{x4D:o,dy4D:a})}}),El=Dn({separableConv2d_:function(t,e,n,r,o,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var s=yn(t,"x","separableConv2d"),u=yn(e,"depthwiseFilter","separableConv2d"),c=yn(n,"pointwiseFilter","separableConv2d"),l=s,p=!1;if(3===s.rank&&(p=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");I(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),I(4===u.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),I(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),I(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),I(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var h=u.shape[2],d=u.shape[3];I(c.shape[2]===h*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+c.shape[2]+"."});var f=bl(l,u,r,o,i,a),v=ml(f,c,1,"valid",i);return p?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Rl=Dn({conv2dTranspose_:function(t,e,n,r,o,a){return hl(n,yn(t,"x","conv2dTranspose"),yn(e,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),Il=Dn({conv3dTranspose_:function(t,e,n,r,o){return fl(n,yn(t,"x","conv3dTranspose"),yn(e,"filter","conv3dTranspose"),r,o)}});exports.conv3dTranspose=Il,exports.conv2dTranspose=Rl,exports.separableConv2d=El,exports.depthwiseConv2d=bl,exports.conv3d=gl,exports.conv2d=ml,exports.conv1d=vl;var kl=Dn({matMul_:function(t,e,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=yn(t,"a","matMul"),i=yn(e,"b","matMul");o=Ot(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=n?a.shape[a.rank-1]:a.shape[a.rank-2],l=r?i.shape[i.rank-2]:i.shape[i.rank-1],p=a.shape.slice(0,-2),h=i.shape.slice(0,-2),d=N(p),f=N(h);I(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),I(T(p,h),function(){return"Error in matMul: outer dimensions ("+p+") and ("+h+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),I(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=a.shape.slice(0,-2).concat([c,l]),m=n?a.as3D(d,s,c):a.as3D(d,c,s),g=r?i.as3D(f,l,u):i.as3D(f,u,l),x={transposeA:n,transposeB:r};return Ut.runKernelFunc(function(t,e){var o=t.batchMatMul(m,g,n,r);return e([m,g]),o},{a:m,b:g},function(t,e){var o=e,a=o[0],i=o[1];return n||r?!n&&r?{a:function(){return t.matMul(i,!1,!1)},b:function(){return t.matMul(a,!0,!1)}}:n&&!r?{a:function(){return i.matMul(t,!1,!0)},b:function(){return a.matMul(t,!1,!1)}}:{a:function(){return i.matMul(t,!0,!0)},b:function(){return t.matMul(a,!0,!0)}}:{a:function(){return t.matMul(i,!1,!0)},b:function(){return a.matMul(t,!0,!1)}}},"BatchMatMul",x).reshape(v)}}),Sl=Dn({dot_:function(t,e){var n=yn(t,"t1","dot"),r=yn(e,"t2","dot");I(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return I(o===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Al=Dn({outerProduct_:function(t,e){var n=yn(t,"v1","outerProduct"),r=yn(e,"v2","outerProduct");return I(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}});exports.outerProduct=Al,exports.dot=Sl,exports.matMul=kl;var Nl=Dn({reverse_:function(t,e){var n=yn(t,"x","reverse");if(0===n.rank)return n.clone();var r=P(e,n.shape);return Ut.runKernelFunc(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)}}),Tl=Dn({reverse1d_:function(t){var e=yn(t,"x","reverse");return I(1===e.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Nl(e,0)}}),Dl=Dn({reverse2d_:function(t,e){var n=yn(t,"x","reverse");return I(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Nl(n,e)}}),Fl=Dn({reverse3d_:function(t,e){var n=yn(t,"x","reverse");return I(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Nl(n,e)}}),_l=Dn({reverse4d_:function(t,e){var n=yn(t,"x","reverse");return I(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Nl(n,e)}});function Ol(t,e,n,r,o,a){var i=yn(t,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),I(4===s.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),I(Ia(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=a&&I(D(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=va(s.shape,e,n,r,o,a);if(1===c.filterWidth&&1===c.filterHeight&&T(c.inShape,c.outShape))return i.clone();var l=[s],p=Ut.runKernelFunc(function(t,e){var n=t.maxPool(s,c);return e([s,n]),n},{x:s},function(t,a){var i=a[0],s=a[1];return{x:function(){return function(t,e,n,r,o,a,i,s){var u=yn(t,"dy","maxPoolBackprop"),c=yn(e,"input","maxPoolBackprop"),l=yn(n,"output","maxPoolBackprop");I(c.rank===u.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+u.rank+")"}),null==a&&(a=[1,1]),I(Ia(o,a),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}),I(4===u.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."}),I(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var p=va(c.shape,r,o,a,i,s);return Ut.runKernelFunc(function(t){return t.maxPoolBackprop(u,c,l,p)},{$dy:u,$input:c})}(t,i,s,e,n,r,o)}}},"MaxPool",c,l);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Ml(t,e,n,r,o,a){var i=yn(t,"x","avgPool","float32");null==r&&(r=[1,1]),I(Ia(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(4===s.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),null!=a&&I(D(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=va(s.shape,e,n,r,o,a);if(1===c.filterWidth&&1===c.filterHeight&&T(c.inShape,c.outShape))return i.clone();var l=Ut.runKernelFunc(function(t){return t.avgPool(s,c)},{x:s},function(t){return{x:function(){return function(t,e,n,r,o,a){var i=yn(t,"dy","avgPoolBackprop"),s=yn(e,"input","avgPoolBackprop");I(s.rank===i.rank,function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"}),null==o&&(o=[1,1]),I(Ia(r,o),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"});var u=s,c=i,l=!1;3===s.rank&&(l=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),c=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),I(4===u.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."});var p=va(u.shape,n,r,o,a),h=Ut.runKernelFunc(function(t){return t.avgPoolBackprop(c,u,p)},{dy4D:c,input4D:u});return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(t,s,e,n,r,o)}}},"AvgPool",c);return l=l.cast(i.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}exports.reverse4d=_l,exports.reverse3d=Fl,exports.reverse2d=Dl,exports.reverse1d=Tl,exports.reverse=Nl;var Bl=Dn({maxPool_:function(t,e,n,r,o){return Ol(t,e,n,1,r,o)}}),Pl=Dn({avgPool_:function(t,e,n,r,o){return Ml(t,e,n,1,r,o)}}),Ll=Dn({pool_:function(t,e,n,r,o,a){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");var i=yn(t,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(Ia(a,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"});var c,l=va(s.shape,e,a,o,r),p=[l.dilationHeight,l.dilationWidth];c="same"===r?function(t,e){var n=t.map(function(t,n){return t+(t-1)*(e[n]-1)}).map(function(t){return t-1}),r=n.map(function(t){return Math.floor(t/2)}),o=n.map(function(t,e){return t-r[e]});return n.map(function(t,e){return[r[e],o[e]]})}([l.filterHeight,l.filterWidth],p):[[0,0],[0,0]];var h=1===p[0]&&1===p[1],d=function(t,e,n){var r=n.map(function(t){return t[0]}),o=n.map(function(t){return t[1]}),a=t.concat(r,o),i=e.map(function(t,e){return(t-a[e]%t)%t}),s=o.map(function(t,e){return t+i[e]});return[e.map(function(t,e){return[r[e],s[e]]}),e.map(function(t,e){return[0,i[e]]})]}([l.inHeight,l.inWidth],p,c),f=d[0],v=d[1],m=h?r:"valid",g=h?s:hr(s,p,f),x=("avg"===n?function(){return Ml(g,e,a,1,m)}:function(){return Ol(g,e,a,1,m)})(),y=h?x:ir(x,p,v);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),Wl=Dn({maxPool3d_:function(t,e,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=yn(t,"x","maxPool3d"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),I(5===u.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),I("NDHWC"===a,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),I(Ia(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=o&&I(D(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=ma(u.shape,e,n,i,r,o,a),p=Ut.runKernelFunc(function(t,e){var n=t.maxPool3d(u,l);return e([u,n]),n},{x:u},function(t,a){var s=a[0],u=a[1];return{x:function(){return function(t,e,n,r,o,a,i,s){var u=yn(t,"dy","maxPool3dBackprop"),c=yn(e,"input","maxPool3dBackprop"),l=yn(n,"output","maxPool3dBackprop"),p=u,h=c,d=l,f=!1;4===c.rank&&(f=!0,p=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),h=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),I(5===p.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+p.rank+"."}),I(5===h.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."}),I(5===d.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."}),null==a&&(a=[1,1,1]),I(Ia(o,a),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}),null!=s&&I(D(i),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var v=ma(h.shape,r,o,a,i,s),m=Ut.runKernelFunc(function(t){return t.maxPool3dBackprop(p,h,d,v)},{dy5D:p,input5D:h});return f?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(t,s,u,e,n,i,r,o)}}});return c?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),zl=Dn({avgPool3d_:function(t,e,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=yn(t,"x","avgPool3d","float32"),u=s,c=!1;4===s.rank&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),I(5===u.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),I("NDHWC"===a,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),I(Ia(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=o&&I(D(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=ma(u.shape,e,n,i,r,o,a),p=Ut.runKernelFunc(function(t){return t.avgPool3d(u,l)},{x:u},function(t){return{x:function(){return function(t,e,n,r,o,a,i){var s=yn(t,"dy","avgPool3dBackprop"),u=yn(e,"input","avgPool3dBackprop"),c=s,l=u,p=!1;4===u.rank&&(p=!0,c=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),l=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),I(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),I(5===l.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."}),null==o&&(o=[1,1,1]),I(Ia(r,o),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),null!=i&&I(D(a),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."});var h=ma(l.shape,n,r,o,a,i),d=Ut.runKernelFunc(function(t){return t.avgPool3dBackprop(c,l,h)},{dy5D:c,input5D:l});return p?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(t,u,e,n,i,r,o)}}});return p=p.cast(u.dtype),c?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}}),Ul=Dn({maxPoolWithArgmax_:function(t,e,n,r,o){void 0===o&&(o=!1);var a=yn(t,"x","maxPoolWithArgmax"),i={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},s=Ut.runKernel("MaxPoolWithArgmax",{x:a},i);return{result:s[0],indexes:s[1]}}});exports.maxPoolWithArgmax=Ul,exports.avgPool3d=zl,exports.maxPool3d=Wl,exports.pool=Ll,exports.avgPool=Pl,exports.maxPool=Bl;var Vl=Dn({slice_:function(t,e,n){var r,o,a=yn(t,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof e?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice()).forEach(function(t){I(-1!==t,function(){return"slice() does not support negative begin indexing."})}),o=(o=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(I(-1===t,function(){return"Negative size values should be exactly -1 but got "+t+" for the slice() size at index "+e+"."}),a.shape[e]-r[e])}),Xo(a,r,o);var i=a.shape,s={begin:r,size:o};return Ut.runKernelFunc(function(t){return t.slice(a,r,o)},{x:a},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],i[n]-r[n]-o[n]]);return{x:function(){return Ac(t,e)}}},"Slice",s)}}),Gl=Dn({slice1d_:function(t,e,n){var r=yn(t,"x","slice1d");return I(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Vl(r,[e],[n])}}),Hl=Dn({slice2d_:function(t,e,n){var r=yn(t,"x","slice2d");return I(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Vl(r,e,n)}}),ql=Dn({slice3d_:function(t,e,n){var r=yn(t,"x","slice3d");return I(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Vl(r,e,n)}}),Kl=Dn({slice4d_:function(t,e,n){var r=yn(t,"x","slice4d");return I(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Vl(r,e,n)}});function jl(t,e,n,r,o){return e.rank<n.rank&&(e=e.reshape(Rn(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Rn(t.shape,r))),{x:function(){var r=t.mul(n.equal(e).cast(t.dtype));return null==o?r:r.transpose(o)}}}exports.slice4d=Kl,exports.slice3d=ql,exports.slice2d=Hl,exports.slice1d=Gl,exports.slice=Vl;var Xl=Dn({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","all","bool"),o=P(e,r.shape),a=o,i=kn(a,r.rank);null!=i&&(r=r.transpose(i),a=An(a.length,r.rank));var s=Ut.runKernelFunc(function(t){return t.all(r,a)},{$x:r});if(n){var u=Rn(s.shape,o);return s.reshape(u)}return s}}),Yl=Dn({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","any","bool"),o=P(e,r.shape),a=o,i=kn(a,r.rank);null!=i&&(r=r.transpose(i),a=An(a.length,r.rank));var s=Ut.runKernelFunc(function(t){return t.any(r,a)},{$x:r});if(n){var u=Rn(s.shape,o);return s.reshape(u)}return s}}),$l=Dn({argMax_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","argMax");null==e&&(e=0);var r=P(e,n.shape),o=kn(r,n.rank);null!=o&&(n=n.transpose(o),r=An(r.length,n.rank));var a={axis:r[0]},i=[n];return Ut.runKernelFunc(function(t,e){var o=t.argMax(n,r[0]);return e([n]),o},{x:n},function(t,e){var n=e[0];return{x:function(){return Qn(n)}}},"ArgMax",a,i)}}),Ql=Dn({argMin_:function(t,e){void 0===e&&(e=0);var n=yn(t,"x","argMin");null==e&&(e=0);var r=P(e,n.shape),o=kn(r,n.rank);return null!=o&&(n=n.transpose(o),r=An(r.length,n.rank)),Ut.runKernelFunc(function(t,e){var o=t.argMin(n,r[0]);return e([n]),o},{$x:n},function(t,e){var n=e[0];return{$x:function(){return Qn(n)}}})}}),Jl=Dn({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","logSumExp"),o=P(e,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=Rn(s.shape,o);return s.reshape(u)}return s}}),Zl=Dn({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","max"),o=r,a=P(e,r.shape),i=a,s=kn(i,r.rank);null!=s&&(r=r.transpose(s),i=An(i.length,r.rank));var u=[r],c=Ut.runKernelFunc(function(t,e){var n=t.max(r,i);return e([o,n]),n},{x:r},function(t,e){return jl(t,e[1],e[0],a,s)},"Max",{axes:i},u,[!0]);if(n){var l=Rn(c.shape,a);c=c.reshape(l)}return c}}),tp=Dn({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","mean"),o=P(e,r.shape),a=N(En(r.shape,o)[1]);return sa(function(t){var r=Pn(a);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul(qn(t.shape,"float32")).div(a)}}})(r)}}),ep=Dn({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","min"),o=r,a=P(e,r.shape),i=a,s=kn(i,r.rank);null!=s&&(r=r.transpose(s),i=An(i.length,r.rank));var u=[r],c=Ut.runKernelFunc(function(t,e){var n=t.min(r,i);return e([o,n]),n},{x:r},function(t,e){return jl(t,e[1],e[0],a,s)},"Min",{axes:i},u,[!0]);if(n){var l=Rn(c.shape,a);c=c.reshape(l)}return c}}),np=Dn({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=P(e,(t=yn(t,"x","moments")).shape),o=t.mean(r,n),a=o.shape;n||(a=Rn(o.shape,r));var i=t.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),rp=Dn({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=P(e,r.shape);return sa(function(t){var e=kn(o,t.rank),r=o,a=t;null!=e&&(a=t.transpose(e),r=An(r.length,t.rank));var i=function(e){var n=t.shape.slice();return o.forEach(function(t){n[t]=1}),e.reshape(n).mul(qn(t.shape,"float32"))},s={axes:r},u=Ut.runKernelFunc(function(t){return t.sum(a,r)},{x:a},function(t){return{x:function(){return i(t)}}},"Sum",s);if(n){var c=Rn(u.shape,o);u=u.reshape(c)}return{value:u,gradFunc:i}})(r)}}),op=Dn({prod_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=yn(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=P(e,r.shape),a=kn(o,r.rank),i=o,s=r;null!=a&&(s=r.transpose(a),i=An(i.length,r.rank));var u=Ut.runKernelFunc(function(t){return t.prod(s,i)},{permutedX:s});if(n){var c=Rn(u.shape,o);u=u.reshape(c)}return u}});exports.prod=op,exports.sum=rp,exports.moments=np,exports.min=ep,exports.mean=tp,exports.max=Zl,exports.logSumExp=Jl,exports.argMin=Ql,exports.argMax=$l,exports.any=Yl,exports.all=Xl;var ap=Dn({elu_:function(t){var e=yn(t,"x","elu");return Ut.runKernelFunc(function(t,n){var r=t.elu(e);return n([r]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){return Ut.runKernelFunc(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})}}),ip=Dn({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=yn(t,"x","leakyRelu");return ko(Pn(e).mul(n),n)}}),sp=Dn({prelu_:function(t,e){var n=yn(t,"x","prelu"),r=yn(e,"alpha","prelu");return Ut.runKernelFunc(function(t,e){var o=t.prelu(n,r);return e([n,r]),o},{x:n,alpha:r},function(t,e){var n=e[0],r=e[1],o=n.greater(0);return{x:function(){return wc(o,t,t.mul(r))},alpha:function(){var e=wc(o,Qn(t),t.mul(n)),a=Wr(r.shape,t.shape);return a.length>0&&(e=e.sum(a)),e.reshape(r.shape)}}},"Prelu")}}),up=Dn({relu_:function(t){var e=yn(t,"x","relu");return"bool"===e.dtype?e.toInt():Ut.runKernelFunc(function(t,n){var r=t.relu(e);return n([e]),r},{x:e},function(t,e){var n=e[0];return{x:function(){return t.mulStrict(n.step().toFloat())}}},"Relu")}}),cp=Dn({relu6_:function(t){var e=yn(t,"x","relu6");return"bool"===e.dtype?e.toInt():Ut.runKernelFunc(function(t,n){var r=t.relu6(e);return n([e]),r},{x:e},function(t,e){var n=e[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return t.mulStrict(r.toFloat())}}},"Relu6")}}),lp=Dn({selu_:function(t){var e=yn(t,"x","selu");return Ut.runKernelFunc(function(t,n){var r=t.selu(e);return n([e]),r},{$x:e},function(t,e){var n=e[0];return{$x:function(){var e=n.greater(Pn(0)),r=Pn(lu),o=Pn(pu),a=t.mul(o),i=t.mul(r).mul(n.toFloat().exp());return wc(e,a,i)}}})}});exports.selu=lp,exports.relu6=cp,exports.relu=up,exports.prelu=sp,exports.leakyRelu=ip,exports.elu=ap;var pp=Dn({localResponseNormalization_:function(t,e,n,r,o){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var a=yn(t,"x","localResponseNormalization");I(4===a.rank||3===a.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."}),I(D(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var i=a,s=!1;3===a.rank&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Ut.runKernelFunc(function(t,a){var s=t.localResponseNormalization4D(i,e,n,r,o);return a([i,s]),s},{x4D:i},function(t,a){var i=a[0],s=a[1];return{x4D:function(){return Ut.runKernelFunc(function(a){return a.LRNGrad(t,i,s,e,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}});exports.localResponseNormalization=pp;var hp=Dn({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Pn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=yn(t,"x","norm"),e,n),a=o.shape;if(r){var i=P(n,t.shape);a=Rn(o.shape,i)}return o.reshape(a)}});exports.norm=hp;var dp=Dn({basicLSTMCell_:function(t,e,n,r,o,a){var i=yn(t,"forgetBias","basicLSTMCell"),s=yn(e,"lstmKernel","basicLSTMCell"),u=yn(n,"lstmBias","basicLSTMCell"),c=yn(r,"data","basicLSTMCell"),l=yn(o,"c","basicLSTMCell"),p=yn(a,"h","basicLSTMCell"),h=c.concat(p,1).matMul(s).add(u),d=h.shape[0],f=h.shape[1]/4,v=[d,f],m=h.slice([0,0],v),g=h.slice([0,f],v),x=h.slice([0,2*f],v),y=h.slice([0,3*f],v),b=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(i.add(x).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),fp=Dn({multiRNNCell_:function(t,e,n,r){for(var o=yn(e,"data","multiRNNCell"),a=bn(n,"c","multiRNNCell"),i=bn(r,"h","multiRNNCell"),s=o,u=[],c=0;c<t.length;c++){var l=t[c](s,a[c],i[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var p=[],h=[];for(c=0;c<u.length;c+=2)p.push(u[c]),h.push(u[c+1]);return[p,h]}});exports.multiRNNCell=fp,exports.basicLSTMCell=dp;var vp=Dn({movingAverage_:function(t,e,n,r,o){void 0===o&&(o=!0);var a=yn(t,"v","movingAverage"),i=yn(e,"x","movingAverage"),s=yn(n,"decay","movingAverage");Mt(a,i),I(T(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=Pn(1),c=u.sub(s),l=i.sub(a).mul(c);if(o){I(null!=r,function(){return"When using zeroDebias: true, step is required."});var p=yn(r,"step","movingAverage");l=l.div(u.sub(Oo(s,p)))}return a.add(l)}});exports.movingAverage=vp;var mp=Dn({stridedSlice_:function(t,e,n,r,o,a,i,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(e.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var c=yn(t,"x","stridedSlice"),l=Yo(s),p=c.shape.slice();l.forEach(function(t){e[t]=0,n[t]=1,p.splice(t,0,1)}),c=c.reshape(p);for(var h=0;h<c.rank;h++)e[h]=Qo(o,e,r,c.shape,h),n[h]=Jo(a,n,r,c.shape,h),r[h]=r[h]||1;var d=Yo(u);d.forEach(function(t){n[t]=e[t]+1,r[t]=1});var f=$o(e,n,r),v=f.filter(function(t,e){return-1===d.indexOf(e)});return r.every(function(t){return 1===t})?Vl(c,e,f).reshape(v):Ut.runKernelFunc(function(t){return t.stridedSlice(c,e,n,r)},{$x:c}).reshape(v)}});exports.stridedSlice=mp;var gp=Dn({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=yn(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(e>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+e);var a=Ut.runKernelFunc(function(t){return t.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}});exports.topk=gp;var xp=Dn({scatterND_:function(t,e,n){var r=yn(t,"indices","scatterND","int32"),o=yn(e,"updates","scatterND");return qo(o,r,n),Ut.runKernelFunc(function(t){return t.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}});exports.scatterND=xp;var yp=Dn({fft_:function(t){I("complex64"===t.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Ut.runKernelFunc(function(t){return t.fft(r)},{input:t}).reshape(t.shape)}}),bp=Dn({ifft_:function(t){I("complex64"===t.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return Ut.runKernelFunc(function(t){return t.ifft(r)},{input:t}).reshape(t.shape)}}),wp=Dn({rfft_:function(t,e){I("float32"===t.dtype,function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],o=t.size/r;if(null!=e&&e<r){var a=t.shape.map(function(t){return 0}),i=t.shape.map(function(t){return t});i[t.shape.length-1]=e,n=t.slice(a,i),r=e}else if(null!=e&&e>r){var s=t.shape.map(function(t){return t});s[t.shape.length-1]=e-r,n=t.concat(Kn(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),c=Fn(n,u).as2D(o,r),l=yp(c),p=Math.floor(r/2)+1,h=_n(l),d=On(l),f=h.split([p,r-p],h.shape.length-1),v=d.split([p,r-p],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=p,Fn(f[0],v[0]).reshape(m)}}),Cp=Dn({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),o=bp(r);return _n(o)}var a=[n,2*(e-1)],i=_n(t).as2D(n,e),s=On(t).as2D(n,e),u=i.slice([0,1],[n,e-2]).reverse(1),c=s.slice([0,1],[n,e-2]).reverse(1).mul(Pn(-1)),l=i.concat(u,1),p=s.concat(c,1);return r=Fn(l,p).as2D(a[0],a[1]),o=bp(r),_n(o)}}),Ep=Object.freeze({fft:yp,ifft:bp,rfft:wp,irfft:Cp});exports.spectral=Ep,exports.irfft=Cp,exports.rfft=wp,exports.ifft=bp,exports.fft=yp;var Rp=Dn({sparseToDense_:function(t,e,n,r){void 0===r&&(r=0);var o=yn(t,"sparseIndices","sparseToDense","int32"),a=yn(e,"sparseValues","sparseToDense"),i=yn(r,"defaultValue","sparseToDense",a.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+t.shape+".");var o=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=e.size;if(0!==e.rank&&(1!==e.rank||i!==o))throw new Error("sparseValues has incorrect shape "+e.shape+", should be [] or ["+o+"]");if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i),Ut.runKernelFunc(function(t){return t.sparseToDense(o,a,n,i)},{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}});exports.sparseToDense=Rp;var Ip=Dn({gatherND_:function(t,e){var n=yn(e,"indices","gatherND","int32"),r=yn(t,"x","gatherND");return Ut.runKernelFunc(function(t){return t.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}});exports.gatherND=Ip;var kp=Dn({diag_:function(t){var e=yn(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return Ut.runKernelFunc(function(t){return t.diag(e)},{$x:e}).reshape(n)}});exports.diag=kp;var Sp=Dn({dropout_:function(t,e,n,r){var o=yn(t,"x","dropout");if(I("float32"===o.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),I(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),0===e)return t instanceof Rt?o.clone():o;var a=function(t,e){if(null==e)return t.shape.slice();if(T(t.shape,e))return e;if(t.shape.length===e.length){for(var n=[],r=0;r<t.shape.length;r++)null==e[r]&&null!=t.shape[r]?n.push(t.shape[r]):n.push(e[r]);return n}return e}(o,n),i=1-e,s=qc(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function Ap(t,e,n){for(var r=1-t%2,o=new Float32Array(t),a=0;a<t;++a){var i=2*Math.PI*a/(t+r-1);o[a]=e-n*Math.cos(i)}return Ln(o,"float32")}exports.dropout=Sp;var Np=Dn({hannWindow_:function(t){return Ap(t,.5,.5)}}),Tp=Dn({hammingWindow_:function(t){return Ap(t,.54,.46)}}),Dp=Dn({frame_:function(t,e,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var a=0,i=[];a+e<=t.size;)i.push(Vl(t,a,e)),a+=n;if(r)for(;a<t.size;){var s=a+e-t.size,u=Jn([Vl(t,a,e-s),jn([s],o)]);i.push(u),a+=n}return 0===i.length?Wn([],[0,e]):Jn(i).as2D(i.length,e)}}),Fp=Dn({stft_:function(t,e,n,r,o){var a;void 0===o&&(o=Np),null==r&&(a=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=Dp(t,e,n),s=Fo(i,o(e)),u=[],c=0;c<i.shape[0];c++)u.push(wp(s.slice([c,0],[1,e]),r));return Jn(u)}}),_p=Object.freeze({hannWindow:Np,hammingWindow:Tp,frame:Dp,stft:Fp});exports.signal=_p,exports.stft=Fp,exports.frame=Dp,exports.hammingWindow=Tp,exports.hannWindow=Np;var Op,Mp=function(t,e,n){return void 0===n&&(n=1),a(this,void 0,void 0,function(){var r,o,a,s,u,c,l,p,h,d,f,v,m,g;return i(this,function(i){switch(i.label){case 0:return r=yn(t,"predictions","inTopK"),o=yn(e,"targets","inTopK"),I(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),I(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),k(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],I(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return s=i.sent(),[4,o.data()];case 2:for(u=i.sent(),c=[s.length/a,a],p=c[1],h=W("bool",l=c[0]),d=0;d<l;d++){for(f=d*p,v=s.subarray(f,f+p),m=[],g=0;g<v.length;g++)m.push({value:v[g],index:g});for(m.sort(function(t,e){return e.value-t.value}),h[d]=0,g=0;g<n;g++)if(m[g].index===u[d]){h[d]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),[2,Mn(h,o.shape,"bool")]}})})};exports.inTopKAsync=Mp,exports.Reduction=Op,function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Op||(exports.Reduction=Op={}));var Bp=Dn({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=Op.SUM_BY_NONZERO_WEIGHTS);var o=yn(t,"labels","absoluteDifference"),a=yn(e,"predictions","absoluteDifference"),i=null;null!=n&&(i=yn(n,"weights","absoluteDifference")),k(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Pp(s,i,r)}}),Pp=Dn({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=Op.SUM_BY_NONZERO_WEIGHTS);var r=yn(t,"losses","computeWeightedLoss"),o=null;null!=e&&(o=yn(e,"weights","computeWeightedLoss"));var a=null==o?r:r.mul(o);if(n===Op.NONE)return a;if(n===Op.SUM)return a.sum();if(n===Op.MEAN){if(null==o)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(Pn(i)):s}if(n===Op.SUM_BY_NONZERO_WEIGHTS){if(null==o)return a.sum().div(Pn(r.size));var u=o.mul(qn(r.shape)).notEqual(Pn(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Lp=Dn({cosineDistance_:function(t,e,n,r,o){void 0===o&&(o=Op.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"labels","cosineDistance"),i=yn(e,"predictions","cosineDistance"),s=null;null!=r&&(s=yn(r,"weights","cosineDistance")),k(a.shape,i.shape,"Error in cosineDistance: ");var u=Pn(1).sub(a.mul(i).sum(n,!0));return Pp(u,s,o)}}),Wp=Dn({hingeLoss_:function(t,e,n,r){void 0===r&&(r=Op.SUM_BY_NONZERO_WEIGHTS);var o=yn(t,"labels","hingeLoss"),a=yn(e,"predictions","hingeLoss"),i=null;null!=n&&(i=yn(n,"weights","hingeLoss")),k(o.shape,a.shape,"Error in hingeLoss: ");var s=Pn(1);o=Pn(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Pp(u,i,r)}}),zp=Dn({huberLoss_:function(t,e,n,r,o){void 0===r&&(r=1),void 0===o&&(o=Op.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"labels","huberLoss"),i=yn(e,"predictions","huberLoss"),s=null;null!=n&&(s=yn(n,"weights","huberLoss")),k(a.shape,i.shape,"Error in huberLoss: ");var u=Pn(r),c=i.sub(a).abs(),l=Ao(c,u),p=c.sub(l),h=Pn(.5).mul(l.square()).add(u.mul(p));return Pp(h,s,o)}}),Up=Dn({logLoss_:function(t,e,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=Op.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"labels","logLoss"),i=yn(e,"predictions","logLoss"),s=null;null!=n&&(s=yn(n,"weights","logLoss")),k(a.shape,i.shape,"Error in logLoss: ");var u=Pn(1),c=Pn(r),l=a.mul(i.add(c).log()).neg().sub(u.sub(a).mul(u.sub(i).add(c).log()));return Pp(l,s,o)}}),Vp=Dn({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=Op.SUM_BY_NONZERO_WEIGHTS);var o=yn(t,"labels","meanSquaredError"),a=yn(e,"predictions","meanSquaredError"),i=null;null!=n&&(i=yn(n,"weights","meanSquaredError")),k(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Pp(s,i,r)}}),Gp=Dn({sigmoidCrossEntropy_:function(t,e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Op.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"multiClassLabels","sigmoidCrossEntropy"),i=yn(e,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=yn(n,"weights","sigmoidCrossEntropy")),k(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Pn(r),c=Pn(1),l=Pn(.5);a=a.mul(c.sub(u)).add(l.mul(u))}var p=function(t,e){var n=yn(t,"labels","sigmoidCrossEntropyWithLogits"),r=yn(e,"logits","sigmoidCrossEntropyWithLogits");k(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}(a,i);return Pp(p,s,o)}}),Hp=Dn({softmaxCrossEntropy_:function(t,e,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Op.SUM_BY_NONZERO_WEIGHTS);var a=yn(t,"onehotLabels","softmaxCrossEntropy"),i=yn(e,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=yn(n,"weights","softmaxCrossEntropy")),k(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Pn(r),c=Pn(1),l=Pn(a.shape[1]);a=a.mul(c.sub(u)).add(u.div(l))}var p=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return sa(function(t,e,r){var o=e.logSumExp([n],!0),a=e.toFloat().sub(o);return r([t,a]),{value:a.mul(t).neg().sum([n]),gradFunc:function(t,e){var r=e[0],o=e[1],a=Rn(t.shape,[n]);return[t.reshape(a).mul(r.toFloat().sub(o.exp())),t.reshape(a).mul(o.exp().sub(r.toFloat()))]}}})(t,e)}(a,i);return Pp(p,s,o)}}),qp=Object.freeze({get Reduction(){return Op},absoluteDifference:Bp,computeWeightedLoss:Pp,cosineDistance:Lp,hingeLoss:Wp,huberLoss:zp,logLoss:Up,meanSquaredError:Vp,sigmoidCrossEntropy:Gp,softmaxCrossEntropy:Hp});function Kp(t,e){return void 0===e&&(e=!1),Ut.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],o=Ic(n),a=t.clone(),i=Wn([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,c=function(t){var e,u=a,c=s,l=o;e=Ut.tidy(function(){var e=a.slice([t,t],[n-t,1]),u=e.norm(),c=a.slice([t,t],[1,1]),l=Wn([[-1]]).where(c.greater(0),Wn([[1]])),p=c.sub(l.mul(u)),h=e.div(p);s=1===h.shape[0]?i.clone():i.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var d=l.matMul(p).div(u).neg(),f=a.slice([t,0],[n-t,r]),v=d.mul(s),m=s.transpose();if(0===t)a=f.sub(v.matMul(m.matMul(f)));else{var g=f.sub(v.matMul(m.matMul(f)));a=a.slice([0,0],[t,r]).concat(g,0)}var x=v.transpose(),y=o.slice([0,t],[n,o.shape[1]-t]);if(0===t)o=y.sub(y.matMul(s).matMul(x));else{var b=y.sub(y.matMul(s).matMul(x));o=o.slice([0,0],[n,t]).concat(b,1)}return[s,a,o]}),s=e[0],a=e[1],o=e[2],rn([u,c,l])},l=0;l<u;++l)c(l);return!e&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]})}exports.losses=qp;var jp=Dn({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=yn(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(e<=i))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=i),n<0&&(n=s);var u=Yn(0,i,1,"int32").reshape([-1,1]),c=Yn(0,s,1,"int32"),l=Po(u,c),p=gc(l.lessEqual(Pn(+e,"int32")),l.greaterEqual(Pn(-n,"int32"))),h=Kn([i,s],r.dtype);return fr(vr(r.reshape([-1,i,s])).map(function(t){return wc(p,t,h)})).reshape(o)}}),Xp=Dn({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,I(null!=t&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(e){I(t[e].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[e].shape[0]+" vs. "+n+")"})},o=1;o<t.length;++o)r(o)}else e=!0,t=rr(t,t.shape[0],0).map(function(t){return dr(t,[0])});I(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var a=[],i=t,s=function(t){a.push(Ut.tidy(function(){var e=i[t];if(t>0)for(var n=0;n<t;++n){var r=rp(a[n].mulStrict(e)).mul(a[n]);e=e.sub(r)}return e.div(hp(e,"euclidean"))}))};for(o=0;o<t.length;++o)s(o);return e?fr(a,0):a}}),Yp=Dn({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return Kp(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=vr(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],a=[];return r.forEach(function(t){var n=Kp(t,e),r=n[0],i=n[1];o.push(r),a.push(i)}),[fr(o,0).reshape(t.shape),fr(a,0).reshape(t.shape)]}}),$p=Object.freeze({bandPart:jp,gramSchmidt:Xp,qr:Yp});function Qp(t,e,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);var i=t.shape[0];return n=Math.min(n,i),I(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),I(2===t.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),I(4===t.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),I(1===e.rank,function(){return"scores must be a 1D tensor"}),I(e.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+e.shape[0]}),I(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}exports.linalg=$p;var Jp=Dn({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=yn(t,"images","resizeBilinear");I(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),I(2===e.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Ut.runKernelFunc(function(t,e){return e([o]),t.resizeBilinear(o,i,s,n)},{x:o},function(t,e){return{x:function(){return Ut.runKernelFunc(function(r){return r.resizeBilinearBackprop(t,e[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Zp=Dn({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=yn(t,"images","resizeNearestNeighbor");I(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),I(2===e.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),I("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=e[0],s=e[1],u=Ut.runKernelFunc(function(t,e){return e([o]),t.resizeNearestNeighbor(o,i,s,n)},{batchImages:o},function(t,e){return{batchImages:function(){return Ut.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(t,e[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),th=Dn({nonMaxSuppression_:function(t,e,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var a=yn(t,"boxes","nonMaxSuppression"),i=yn(e,"scores","nonMaxSuppression"),s=Qp(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return Ut.runKernelFunc(function(t){return t.nonMaxSuppression(a,i,n,r,o)},{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),eh=function(t,e,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),a(this,void 0,void 0,function(){var a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return a=yn(t,"boxes","nonMaxSuppressionAsync"),s=yn(e,"scores","nonMaxSuppressionAsync"),u=Qp(a,s,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,Promise.all([a.data(),s.data()])];case 1:return c=i.sent(),l=c[0],p=c[1],h=Pa(l,p,n,r,o),a!==t&&a.dispose(),s!==e&&s.dispose(),[2,h]}})})},nh=Dn({nonMaxSuppressionWithScore_:function(t,e,n,r,o,a){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var i=yn(t,"boxes","nonMaxSuppression"),s=yn(e,"scores","nonMaxSuppression"),u=Qp(i,s,n,r,o,a),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},l=Ut.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),rh=function(t,e,n,r,o,s){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===s&&(s=0),a(this,void 0,void 0,function(){var a,u,c,l,p,h,d;return i(this,function(i){switch(i.label){case 0:return a=yn(t,"boxes","nonMaxSuppressionAsync"),u=yn(e,"scores","nonMaxSuppressionAsync"),c=Qp(a,u,n,r,o,s),n=c.maxOutputSize,r=c.iouThreshold,o=c.scoreThreshold,s=c.softNmsSigma,[4,Promise.all([a.data(),u.data()])];case 1:return l=i.sent(),p=l[0],h=l[1],d=La(p,h,n,r,o,s),a!==t&&a.dispose(),u!==e&&u.dispose(),[2,d]}})})},oh=Dn({cropAndResize_:function(t,e,n,r,o,a){var i=yn(t,"image","cropAndResize"),s=yn(e,"boxes","cropAndResize","float32"),u=yn(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var c=s.shape[0];return I(4===i.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),I(2===s.rank&&4===s.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),I(1===u.rank&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),I(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),I(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),I("bilinear"===o||"nearest"===o,function(){return"method must be bilinear or nearest, but was "+o}),Ut.runKernelFunc(function(t,e){return t.cropAndResize(i,s,u,r,o,a)},{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),ah=Object.freeze({resizeBilinear:Jp,resizeNearestNeighbor:Zp,nonMaxSuppression:th,nonMaxSuppressionAsync:eh,nonMaxSuppressionWithScore:nh,nonMaxSuppressionWithScoreAsync:rh,cropAndResize:oh}),ih=function(t,e){return!(t>0)||"linear"===e},sh=function(t,e,n){if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},uh=function(t,e){var n=e,r=Wr(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},ch=function(t,e,n){if("linear"===e)return t;if("relu"===e)return up(t);if("elu"===e)return ap(t);if("relu6"===e)return cp(t);if("prelu"===e)return sp(t,n);throw new Error("Unknown fused activation "+e+".")};exports.image=ah;var lh=Dn({fusedMatMul_:function(t){var e,n=t.a,r=t.b,o=t.transposeA,a=void 0!==o&&o,i=t.transposeB,s=void 0!==i&&i,u=t.bias,c=t.activation,l=void 0===c?"linear":c,p=t.preluActivationWeights;if(!1===ih(Ut.state.gradientDepth,l)){var h=kl(n,r,a,s);return null!=u&&(h=Pr(h,u)),ch(h,l,p)}var d=yn(n,"a","fused matMul"),f=yn(r,"b","fused matMul");e=Ot(d,f),d=e[0],f=e[1];var v=a?d.shape[d.rank-2]:d.shape[d.rank-1],m=s?f.shape[f.rank-1]:f.shape[f.rank-2],g=a?d.shape[d.rank-1]:d.shape[d.rank-2],x=s?f.shape[f.rank-2]:f.shape[f.rank-1],y=d.shape.slice(0,-2),b=f.shape.slice(0,-2),w=N(y),C=N(b);I(d.rank>=2&&f.rank>=2&&d.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+f.rank+"."}),I(T(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+d.shape+" and "+f.shape+" must match."}),I(v===m,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+d.shape+" and "+f.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,R,k=d.shape.slice(0,-2).concat([g,x]),S=a?d.as3D(w,v,g):d.as3D(w,g,v),A=s?f.as3D(C,x,m):f.as3D(C,m,x);null!=u&&zr(k,(E=Ot(E=yn(u,"bias","fused matMul"),d)[0]).shape),null!=p&&(R=yn(p,"prelu weights","fused matMul"));var D={a:S,b:A};null!=u&&(D.bias=E),null!=p&&(D.preluActivationWeights=R);var F=[S,A];return Ut.runKernelFunc(function(t,e){var n=t.fusedBatchMatMul({a:S,b:A,transposeA:a,transposeB:s,bias:E,activation:l,preluActivationWeights:R});return e([S,A,n]),n},D,function(t,e){var n=e[0],r=e[1],o=e[2],i=sh(t,o,l),c={};return null!=u&&(c={bias:function(){return uh(E,i)}}),a||s?!a&&s?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},c):a&&!s?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},c):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},c):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},c)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:l},F,[!0]).reshape(k)}}),ph=Dn({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=void 0===a?"NHWC":a,s=t.dilations,u=void 0===s?[1,1]:s,c=t.dimRoundingMode,l=t.bias,p=t.activation,h=void 0===p?"linear":p,d=t.preluActivationWeights;if(h=h||"linear",!1===ih(Ut.state.gradientDepth,h)){var f=ml(e,n,r,o,i,u,c);return null!=l&&(f=Pr(f,l)),ch(f,h,d)}var v=yn(e,"x","conv2d"),m=yn(n,"filter","conv2d"),g=v,x=!1;3===v.rank&&(x=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),I(4===g.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),I(4===m.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),null!=c&&I(D(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."}),I(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),I(Ia(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),I("NHWC"===i,function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var y,b,w=ga(g.shape,m.shape,r,u,o,c);null!=l&&(y=Ot(y=yn(l,"bias","fused conv2d"),v)[0],zr(w.outShape,y.shape)),null!=d&&(b=yn(d,"prelu weights","fused conv2d"));var C={x:g,filter:m};null!=l&&(C.bias=y),null!=d&&(C.preluActivationWeights=b);var E=[m,g],R=Ut.runKernelFunc(function(t,e){var n=t.fusedConv2d({input:g,filter:m,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return e([m,g,n]),n},C,function(t,e){var n=e,a=n[0],i=n[1],s=n[2],c=sh(t,s,h);I(Ra(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var p={};return null!=l&&(p={bias:function(){return uh(y,c)}}),Object.assign({x:function(){return yl(i.shape,c,a,r,o)},filter:function(){return xl(i,c,a.shape,r,o)}},p)},"FusedConv2D",{convInfo:w,activation:h},E,[!0]);return x?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),hh=Dn({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,o=t.pad,a=t.dataFormat,i=void 0===a?"NHWC":a,s=t.dilations,u=void 0===s?[1,1]:s,c=t.dimRoundingMode,l=t.bias,p=t.activation,h=void 0===p?"linear":p,d=t.preluActivationWeights;if(!1===ih(Ut.state.gradientDepth,h)){var f=bl(e,n,r,o,i,u,c);return null!=l&&(f=Pr(f,l)),ch(f,h,d)}var v=yn(e,"x","depthwiseConv2d"),m=yn(n,"filter","depthwiseConv2d"),g=v,x=!1;3===v.rank&&(x=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),I(4===g.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),I(4===m.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),I(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),null==u&&(u=[1,1]),I(Ia(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),null!=c&&I(D(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."});var y,b,w=ga(g.shape,m.shape,r,u,o,c,!0);null!=l&&(y=Ot(y=yn(l,"bias","fused conv2d"),v)[0],zr(w.outShape,y.shape)),null!=d&&(b=yn(d,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:m};null!=l&&(C.bias=y),null!=d&&(C.preluActivationWeights=b);var E=[m,g],R=Ut.runKernelFunc(function(t,e){var n=t.fusedDepthwiseConv2D({input:g,filter:m,convInfo:w,bias:y,activation:h,preluActivationWeights:b});return e([m,g,n]),n},C,function(t,e){I(Ra(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var n=e[0],r=e[1],o=e[2],a=sh(t,o,h),i={};return null!=l&&(i={bias:function(){return uh(y,a)}}),Object.assign({x:function(){return wl(r.shape,a,n,w)},filter:function(){return Cl(r,a,n.shape,w)}},i)},"FusedDepthwiseConv2D",{convInfo:w,activation:h},E,[!0]);return x?R.as3D(R.shape[1],R.shape[2],R.shape[3]):R}}),dh=Object.freeze({matMul:lh,conv2d:ph,depthwiseConv2d:hh}),fh=Object.freeze({image:ah,linalg:$p,losses:qp,spectral:Ep,fused:dh,signal:_p,add:Pr,addN:Zu,batchNorm:ac,batchNormalization:oc,batchNorm2d:uc,batchNormalization2d:sc,batchNorm3d:pc,batchNormalization3d:lc,batchNorm4d:fc,batchNormalization4d:dc,broadcastTo:vc,clone:mc,div:Wo,divNoNan:Ec,eye:Ic,multinomial:kc,oneHot:Sc,pad:Ac,pad1d:Nc,pad2d:Tc,pad3d:Dc,pad4d:Fc,rand:_c,randomGamma:Gc,randomNormal:Hc,randomUniform:qc,square:Kc,squaredDifference:jc,tile:Rc,truncatedNormal:Xc,conv1d:vl,conv2d:ml,conv3d:gl,depthwiseConv2d:bl,separableConv2d:El,conv2dTranspose:Rl,conv3dTranspose:Il,op:Dn,booleanMaskAsync:pl,complex:Fn,real:_n,imag:On,concat:Jn,concat1d:Zn,concat2d:tr,concat3d:er,concat4d:nr,split:rr,matMul:kl,dot:Sl,outerProduct:Al,reverse:Nl,reverse1d:Tl,reverse2d:Dl,reverse3d:Fl,reverse4d:_l,maxPool:Bl,avgPool:Pl,pool:Ll,maxPool3d:Wl,avgPool3d:zl,maxPoolWithArgmax:Ul,slice:Vl,slice1d:Gl,slice2d:Hl,slice3d:ql,slice4d:Kl,abs:Ur,acos:Vr,acosh:Gr,asin:Hr,asinh:qr,atan:Kr,atanh:jr,ceil:Xr,clipByValue:Yr,cos:$r,cosh:Qr,erf:Jr,exp:Zr,expm1:to,floor:eo,log:no,log1p:ro,logSigmoid:oo,neg:ao,reciprocal:io,round:so,rsqrt:uo,sigmoid:co,sign:lo,isNaN:po,isInf:ho,isFinite:fo,sin:vo,sinh:mo,softplus:go,sqrt:xo,step:yo,tan:bo,tanh:wo,all:Xl,any:Yl,argMax:$l,argMin:Ql,logSumExp:Jl,max:Zl,mean:tp,min:ep,moments:np,sum:rp,prod:op,equal:Yc,equalStrict:$c,greater:Qc,greaterEqual:Jc,greaterEqualStrict:Zc,greaterStrict:tl,less:el,lessEqual:nl,lessEqualStrict:rl,lessStrict:ol,notEqual:al,notEqualStrict:il,addStrict:Co,atan2:Eo,divStrict:Ro,floorDiv:Io,maximum:ko,maximumStrict:So,minimum:Ao,minimumStrict:No,mod:To,modStrict:Do,mul:Fo,mulStrict:_o,pow:Oo,powStrict:Mo,squaredDifferenceStrict:Bo,sub:Po,subStrict:Lo,elu:ap,leakyRelu:ip,prelu:sp,relu:up,relu6:cp,selu:lp,logicalAnd:gc,logicalNot:xc,logicalOr:yc,logicalXor:bc,where:wc,whereAsync:Cc,buffer:or,print:ar,batchToSpaceND:ir,cast:sr,cumsum:ur,depthToSpace:cr,expandDims:lr,reshape:pr,spaceToBatchND:hr,squeeze:dr,stack:fr,unstack:vr,setdiff1dAsync:mr,fill:jn,linspace:Xn,ones:qn,range:Yn,scalar:Pn,tensor:Mn,tensor1d:Ln,tensor2d:Wn,tensor3d:zn,tensor4d:Un,tensor5d:Vn,tensor6d:Gn,variable:Hn,zeros:Kn,onesLike:$n,zerosLike:Qn,transpose:pa,softmax:ca,logSoftmax:la,localResponseNormalization:pp,norm:hp,gather:cl,unsortedSegmentSum:ll,basicLSTMCell:dp,multiRNNCell:fp,movingAverage:vp,stridedSlice:mp,topk:gp,scatterND:xp,fft:yp,ifft:bp,rfft:wp,irfft:Cp,sparseToDense:Rp,gatherND:Ip,diag:kp,dropout:Sp,hannWindow:Np,hammingWindow:Tp,frame:Dp,stft:Fp,inTopKAsync:Mp});function vh(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){null!=t&&I("complex64"!==t.dtype,function(){return e+" does not support complex64 tensors."})})}function mh(t,e,n,r,o,a){for(var i=o.strideHeight,s=o.strideWidth,u=o.dilationHeight,c=o.dilationWidth,l=o.effectiveFilterHeight,p=o.effectiveFilterWidth,h=o.padInfo.top,d=o.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=or(o.outShape,n),m=v.values,g=o.outShape[1]*o.outShape[2]*o.outShape[3],x=o.outShape[2]*o.outShape[3],y=o.outShape[3],b=0;b<o.batchSize;++b)for(var w=b*g,C=b*r[0],E=0;E<o.inChannels;++E)for(var R=0;R<o.outHeight;++R)for(var I=R*i-h,k=Math.max(0,I),S=Math.min(o.inHeight,l+I),A=w+R*x,N=0;N<o.outWidth;++N){for(var T=N*s-d,D=Math.max(0,T),F=Math.min(o.inWidth,p+T),_=f,O=0,M=0,B=k;B<S;B+=u){for(var P=C+B*r[1],L=D;L<F;L+=c){var W=t[P+L*r[2]+E];"max"===a&&W>_?_=W:"avg"===a&&(O+=W,M++)}if(isNaN(_))break}m[A+N*y+E]="avg"===a?O/M:_}return v}function gh(t,e,n,r,o,a){void 0===o&&(o=!1),void 0===a&&(a=!1);for(var i=or(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,p=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,v=or(e,n,t),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var x=0;x<r.outHeight;++x){for(var y=x*s-d,b=y;b<0;)b+=c;for(var w=Math.min(r.inHeight,p+y),C=0;C<r.outWidth;++C){for(var E=C*u-f,R=E;R<0;)R+=l;for(var I=Math.min(r.inWidth,h+E),k=Number.NEGATIVE_INFINITY,S=-1,A=b;A<w;A+=c)for(var N=A-y,T=R;T<I;T+=l){var D=T-E,F=v.get(m,A,T,g);F>k&&(k=F,S=o?a?((m*r.inHeight+A)*r.inWidth+T)*r.inChannels+g:(A*r.inWidth+T)*r.inChannels+g:N*h+D)}i.set(S,m,x,C,g)}}return i}function xh(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}exports.fused=dh;var yh=function(t){function e(){var e=t.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new ha(e,Ut),e}return o(e,t),e.prototype.write=function(t,e,n){this.firstUse&&(this.firstUse=!1,c().get("IS_NODE")&&mn("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:t,dtype:n}),r},e.prototype.move=function(t,e,n,r){this.data.set(t,{values:e,dtype:r})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.readSync(t)]})})},e.prototype.readSync=function(t){var e=this.data.get(t),n=e.dtype,r=e.complexTensors;return"complex64"===n?Da(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var e=this.readSync(t.dataId),n=e;if("string"===t.dtype)try{n=e.map(function(t){return st(t)})}catch(t){throw new Error("Failed to decode encoded string bytes into utf-8")}return or(t.shape,t.dtype,n)},e.prototype.makeOutput=function(t,e,n){var r=this.write(t,e,n);return Ut.makeTensorFromDataId(r,e,n,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return e=ot(),t(),[2,{kernelMs:ot()-e}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,e){var n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Ut.keep(t.clone()),imag:Ut.keep(e.clone())},n},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,e,n){if(vh(t,"slice"),Zo(t.shape,e,n)){var r=ta(e,t.strides),o=N(n);return Mn(this.readSync(t.dataId).subarray(r,r+o),n,t.dtype)}for(var a=or(n,t.dtype),i=this.bufferSync(t),s=0;s<a.size;++s){var u=a.indexToLoc(s).map(function(t,n){return t+e[n]});a.values[s]=i.get.apply(i,u)}return a.toTensor()},e.prototype.stridedSlice=function(t,e,n,r){vh(t,"stridedSlice");var o=$o(e,n,r);if(o.some(function(t){return 0===t}))return Mn([],o);for(var a=or(o,t.dtype),i=this.bufferSync(t),s=0;s<a.size;s++){for(var u=a.indexToLoc(s),c=new Array(u.length),l=0;l<c.length;l++)c[l]=u[l]*r[l]+e[l];a.set.apply(a,[i.get.apply(i,c)].concat(u))}return a.toTensor()},e.prototype.diag=function(t){for(var e=this.readSync(t.dataId),n=or([t.size,t.size],t.dtype),r=n.values,o=0;o<e.length;o++)r[o*t.size+o]=e[o];return n.toTensor()},e.prototype.unstack=function(t,e){for(var n=t.shape[e],r=new Array(t.rank-1),o=0,a=0;a<t.rank;a++)a!==e&&(r[o++]=t.shape[a]);var i=new Array(t.rank).fill(0),s=t.shape.slice();s[e]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[e]=a,u[a]=this.slice(t,i,s).reshape(r);return u},e.prototype.reverse=function(t,e){vh(t,"reverse");for(var n=or(t.shape,t.dtype),r=this.bufferSync(t),o=function(o){var a=n.indexToLoc(o),i=a.slice();e.forEach(function(e){return i[e]=t.shape[e]-1-i[e]}),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)o(a);return n.toTensor()},e.prototype.concat=function(t,e){var n=this;if("complex64"===t[0].dtype){var r=t.map(function(t){return _n(t)}),o=t.map(function(t){return On(t)});return Fn(this.concat(r,e),this.concat(o,e))}var a=t.map(function(t){var n=N(t.shape.slice(e));return t.as2D(-1,n)}),i=Tn(a.map(function(t){return t.shape}),1),s=or(i,t[0].dtype).values;if(1===a[0].shape[0]){var u=0;a.forEach(function(t){s.set(n.readSync(t.dataId),u),u+=t.size})}else{var c=0;a.forEach(function(t){for(var e=n.readSync(t.dataId),r=0,o=0;o<t.shape[0];++o)for(var a=o*i[1]+c,u=0;u<t.shape[1];++u)s[a+u]=e[r++];c+=t.shape[1]})}var l=Tn(t.map(function(t){return t.shape}),e);return Mn(s,l,t[0].dtype)},e.prototype.neg=function(t){return vh(t,"neg"),this.multiply(Pn(-1),t)},e.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t+n,imag:e+r}}):this.broadcastedBinaryOp(t,e,Ft(t.dtype,e.dtype),function(t,e){return t+e})},e.prototype.addN=function(t){var e=this;vh(t,"addN");for(var n=t.map(function(t){return e.readSync(t.dataId)}),r=or(t[0].shape,t[0].dtype),o=r.values,a=0;a<t.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},e.prototype.softmax=function(t,e){var n=P([e],t.shape),r=this.max(t,n),o=Rn(r.shape,n),a=this.subtract(t,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return Wo(i,s)},e.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t-n,imag:e-r}}):this.broadcastedBinaryOp(t,e,Ft(t.dtype,e.dtype),function(t,e){return t-e})},e.prototype.pow=function(t,e){return vh([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},e.prototype.batchMatMul=function(t,e,n,r){vh([t,e],"matMul");for(var o=n?t.shape[1]:t.shape[2],a=n?t.shape[2]:t.shape[1],i=r?e.shape[1]:e.shape[2],s=t.shape[0],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],p=l[0],h=l[1],d=l[2],f=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],v=f[0],m=f[1],g=f[2],x=a*i,y=or([s,a,i],t.dtype),b=y.values,w=this.blockSize,C=0;C<s;C++)for(var E=0;E<a;E+=w)for(var R=0;R<i;R+=w)for(var I=0;I<o;I+=w)for(var k=Math.min(E+w,a),S=Math.min(R+w,i),A=Math.min(I+w,o),N=E;N<k;N++)for(var T=R;T<S;T++){for(var D=0,F=I;F<A;F++)D+=u[C*p+N*h+F*d]*c[F*v+T*m+C*g];b[C*x+(N*i+T)]+=D}return y.toTensor()},e.prototype.fusedBatchMatMul=function(t){var e=t.a,n=t.b,r=t.transposeA,o=t.transposeB,a=t.bias,i=t.activation,s=t.preluActivationWeights,u=this.batchMatMul(e,n,r,o);return a&&(u=this.add(u,a)),i&&(u=xh(this,u,i,s)),u},e.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}}):this.broadcastedBinaryOp(t,e,Ft(t.dtype,e.dtype),function(t,e){return t*e})},e.prototype.floorDiv=function(t,e){return vh([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},e.prototype.sum=function(t,e){vh(t,"sum"),In("sum",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,Ft(t.dtype,"int32")),i=N(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=0,h=0;h<i;++h)p+=u[l+h];s[c]=p}return a},e.prototype.prod=function(t,e){vh(t,"sum");for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,Ft(t.dtype,"int32")),i=N(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=1,h=0;h<i;++h)p*=u[l+h];s[c]=p}return a},e.prototype.unsortedSegmentSum=function(t,e,n){vh(t,"unsortedSegmentSum");for(var r=[],o=t.rank-e.rank,a=0;a<o;++a)e=e.expandDims(a+1);for(a=0;a<n;++a){var i=Pn(a,"int32"),s=Yc(i,e).asType("float32").mul(t).sum(0);r.push(s)}return fr(r)},e.prototype.argMin=function(t,e){vh(t,"argMin");var n=[e];In("argMin",n,t.rank);for(var r=En(t.shape,n),o=r[0],a=r[1],i=Kn(o,"int32"),s=N(a),u=this.readSync(i.dataId),c=this.readSync(t.dataId),l=0;l<u.length;++l){for(var p=l*s,h=c[p],d=0,f=0;f<s;++f){var v=c[p+f];v<h&&(h=v,d=f)}u[l]=d}return i},e.prototype.argMax=function(t,e){vh(t,"argMax");var n=[e];In("argMax",n,t.rank);for(var r=En(t.shape,n),o=r[0],a=r[1],i=Kn(o,"int32"),s=N(a),u=this.readSync(i.dataId),c=this.readSync(t.dataId),l=0;l<u.length;++l){for(var p=l*s,h=c[p],d=0,f=0;f<s;++f){var v=c[p+f];v>h&&(h=v,d=f)}u[l]=d}return i},e.prototype.cumsum=function(t,e,n,r){if(vh(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var o=Ft(t.dtype,"int32"),a=Kn(t.shape,o),i=this.readSync(a.dataId),s=this.readSync(t.dataId),u=t.shape[t.rank-1],c=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},l=0;l<s.length;l+=u)for(var p=0;p<u;p++){var h=c(l,p);if(0===p)i[h]=n?0:s[h];else{var d=c(l,p-1);i[h]=n?s[d]+i[d]:s[h]+i[d]}}return a},e.prototype.equal=function(t,e){return vh([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},e.prototype.notEqual=function(t,e){return vh([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},e.prototype.less=function(t,e){return vh([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},e.prototype.lessEqual=function(t,e){return vh([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},e.prototype.greater=function(t,e){return vh([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},e.prototype.greaterEqual=function(t,e){return vh([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},e.prototype.logicalNot=function(t){vh(t,"logicalNot");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")},e.prototype.logicalAnd=function(t,e){return vh([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},e.prototype.logicalOr=function(t,e){return vh([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},e.prototype.select=function(t,e,n){vh([t,e,n],"select");for(var r=this.readSync(t.dataId),o=this.readSync(e.dataId),a=this.readSync(n.dataId),i=Kn(e.shape,Ft(e.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,c=0===t.rank||t.rank>1||1===e.rank?1:N(e.shape.slice(1)),l=0;l<r.length;l++)for(var p=0;p<c;p++)1===r[l]?s[u++]=o[l]:s[u++]=a[l];return i},e.prototype.where=function(t){vh([t],"where");var e=this.readSync(t.dataId);return Ka(t.shape,e)},e.prototype.topk=function(t,e,n){return vh(t,"topk"),qa(this.readSync(t.dataId),t.shape,t.dtype,e)},e.prototype.min=function(t,e){vh(t,"min"),In("min",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=N(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];d<p&&(p=d)}s[c]=p}return a},e.prototype.minimum=function(t,e){return vh([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},e.prototype.mod=function(t,e){return vh([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},e.prototype.max=function(t,e){vh(t,"max"),In("max",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=N(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];d>p&&(p=d)}s[c]=p}return a},e.prototype.maximum=function(t,e){return vh([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},e.prototype.all=function(t,e){vh(t,"all"),In("all",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=N(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];p=p&&d}s[c]=p}return a},e.prototype.any=function(t,e){vh(t,"any"),In("any",e,t.rank);for(var n=En(t.shape,e),r=n[0],o=n[1],a=Kn(r,t.dtype),i=N(o),s=this.readSync(a.dataId),u=this.readSync(t.dataId),c=0;c<s.length;++c){for(var l=c*i,p=u[l],h=0;h<i;++h){var d=u[l+h];p=p||d}s[c]=p}return a},e.prototype.squaredDifference=function(t,e){return vh([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},e.prototype.ceil=function(t){vh(t,"ceil");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.floor=function(t){vh(t,"floor");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.sign=function(t){vh(t,"x");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)e[r]<0?n[r]=-1:e[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,t.shape,"float32")},e.prototype.isNaN=function(t){vh(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isInf=function(t){vh(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.isFinite=function(t){vh(t,"x");for(var e=this.readSync(t.dataId),n=new Uint8Array(e.length),r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")},e.prototype.round=function(t){vh(t,"round");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=Math.floor(e[r]);e[r]-o<.5?n[r]=Math.floor(e[r]):e[r]-o>.5?n[r]=Math.ceil(e[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,t.shape,"float32")},e.prototype.exp=function(t){vh(t,"exp");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.expm1=function(t){vh(t,"expm1");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")},e.prototype.log=function(t){vh(t,"log");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.log(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.log1p=function(t){vh(t,"log1p");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.log1p(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.sqrt=function(t){vh(t,"sqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.rsqrt=function(t){vh(t,"rsqrt");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r){var o=e[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,t.shape,"float32")},e.prototype.reciprocal=function(t){vh(t,"reciprocal");for(var e=this.readSync(t.dataId),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){vh(t,"relu");for(var e=Kn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return e},e.prototype.relu6=function(t){vh(t,"relu");for(var e=Kn(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return e},e.prototype.prelu=function(t,e){return vh([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return t<0?e*t:t})},e.prototype.elu=function(t){vh(t,"elu");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=n[r];e[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(e,t.shape,"float32")},e.prototype.eluDer=function(t,e){vh([t,e],"eluDer");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=this.readSync(t.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=i>=1?o[a]:o[a]*(i+1)}return this.makeOutput(n,e.shape,"float32")},e.prototype.selu=function(t){vh(t,"selu");for(var e=lu,n=pu,r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?n*i:e*(Math.exp(i)-1)}return this.makeOutput(r,t.shape,"float32")},e.prototype.clip=function(t,e,n){vh(t,"clip");for(var r=new Float32Array(t.size),o=this.readSync(t.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>n?n:i<e?e:i}return this.makeOutput(r,t.shape,"float32")},e.prototype.abs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<t.size;++r){var o=n[2*r],a=n[2*r+1];e[r]=Math.hypot(o,a)}return this.makeOutput(e,t.shape,"float32")},e.prototype.int=function(t){vh(t,"int");for(var e=new Int32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")},e.prototype.sigmoid=function(t){vh(t,"sigmoid");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")},e.prototype.softplus=function(t){vh(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId),o=0;o<r.length;++o){var a,i=r[o]>-e,s=r[o]<e,u=Math.exp(r[o]);a=s?u:i?r[o]:Math.log(1+u),n[o]=a}return this.makeOutput(n,t.shape,"float32")},e.prototype.sin=function(t){vh(t,"sin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cos=function(t){vh(t,"cos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tan=function(t){vh(t,"tan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asin=function(t){vh(t,"asin");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acos=function(t){vh(t,"acos");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan=function(t){vh(t,"atan");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atan2=function(t,e){return vh([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},e.prototype.sinh=function(t){vh(t,"sinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.cosh=function(t){vh(t,"cosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.tanh=function(t){vh(t,"tanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=F(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.asinh=function(t){vh(t,"asinh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.acosh=function(t){vh(t,"acosh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.atanh=function(t){vh(t,"atanh");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")},e.prototype.erf=function(t){vh(t,"erf");for(var e=new Float32Array(t.size),n=this.readSync(t.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),a=Math.abs(n[r]),i=1/(1+.3275911*a);e[r]=o*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-a*a))}return this.makeOutput(e,t.shape,"float32")},e.prototype.step=function(t,e){void 0===e&&(e=0),vh(t,"step");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=0;o<r.length;++o){var a=r[o];isNaN(a)?n[o]=NaN:n[o]=a>0?1:e}return this.makeOutput(n,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,a=t.activation,i=t.preluActivationWeights,s=this.conv2d(e,n,r);return o&&(s=this.add(s,o)),a&&(s=xh(this,s,a,i)),s},e.prototype.conv2d=function(t,e,n){vh([t,e],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c="channelsLast"===n.dataFormat,l=or(n.outShape,t.dtype),p=t.strides[0],h=c?t.strides[1]:t.strides[2],d=c?t.strides[2]:1,f=c?1:t.strides[1],v=l.strides[0],m=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,x=c?1:l.strides[1],y=this.readSync(t.dataId),b=this.readSync(e.dataId),w=l.values,C=0;C<n.batchSize;++C)for(var E=C*p,R=C*v,I=0;I<n.outHeight;++I)for(var k=R+I*m,S=I*n.strideHeight-u,A=0;A<r;A++){var N=S+A*a;if(!(N<0||N>=n.inHeight))for(var T=A*e.strides[0],D=E+N*h,F=0;F<n.outWidth;++F)for(var _=k+F*g,O=F*n.strideWidth-s,M=0;M<o;M++){var B=O+M*i;if(!(B<0||B>=n.inWidth))for(var P=D+B*d,L=T+M*e.strides[1],W=0;W<n.inChannels;++W){for(var z=y[P+W*f],U=0;U<n.outChannels;++U)w[_+U*x]+=z*b[L+U];L+=n.outChannels}}}return l.toTensor()},e.prototype.conv3d=function(t,e,n){for(var r=n.filterDepth,o=n.filterHeight,a=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,p=n.padInfo.top,h=or(n.outShape,t.dtype),d=this.readSync(t.dataId),f=this.readSync(e.dataId),v=h.values,m=0;m<n.batchSize;++m)for(var g=m*t.strides[0],x=m*h.strides[0],y=0;y<n.outDepth;++y)for(var b=x+y*h.strides[1],w=y*n.strideDepth-c,C=0;C<r;C++){var E=w+C*i;if(!(E<0||E>=n.inDepth))for(var R=C*e.strides[0],I=g+E*t.strides[1],k=0;k<n.outHeight;++k)for(var S=b+k*h.strides[2],A=k*n.strideHeight-p,N=0;N<o;N++){var T=A+N*s;if(!(T<0||T>=n.inHeight))for(var D=R+N*e.strides[1],F=I+T*t.strides[2],_=0;_<n.outWidth;++_)for(var O=S+_*n.outChannels,M=_*n.strideWidth-l,B=0;B<a;B++){var P=M+B*u;if(!(P<0||P>=n.inWidth))for(var L=D+B*e.strides[2],W=F+P*n.inChannels,z=L,U=0;U<n.inChannels;++U){for(var V=d[W+U],G=0;G<n.outChannels;++G)v[O+G]+=V*f[z+G];z+=n.outChannels}}}}return h.toTensor()},e.prototype.conv2dDerInput=function(t,e,n){vh([t,e],"conv2dDerInput");for(var r=or(n.inShape,"float32"),o=r.values,a=this.readSync(t.dataId),i=this.readSync(e.dataId),s=e.strides,u=s[0],c=s[1],l=s[2],p=n.batchSize,h=n.filterHeight,d=n.filterWidth,f=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,x=n.outHeight,y=n.outWidth,b=n.strideHeight,w=n.strideWidth,C=n.dataFormat,E=h-1-n.padInfo.top,R=d-1-n.padInfo.left,I="channelsLast"===C,k=r.strides[0],S=I?r.strides[1]:r.strides[2],A=I?r.strides[2]:1,N=I?1:r.strides[1],T=t.strides[0],D=I?t.strides[1]:t.strides[2],F=I?t.strides[2]:1,_=I?1:t.strides[1],O=0;O<p;++O)for(var M=0;M<f;++M)for(var B=0;B<v;++B)for(var P=B-E,L=Math.max(0,Math.ceil(P/b)),W=Math.min(x,(h+P)/b),z=0;z<m;++z){for(var U=z-R,V=Math.max(0,Math.ceil(U/w)),G=Math.min(y,(d+U)/w),H=0,q=L;q<W;++q)for(var K=q*b-P,j=V;j<G;++j)for(var X=T*O+D*q+F*j,Y=u*(h-1-K)+c*(d-1-(j*w-U))+l*M,$=0;$<g;++$)H+=a[X+_*$]*i[Y+$];o[k*O+S*B+A*z+N*M]=H}return r.toTensor()},e.prototype.conv3dDerInput=function(t,e,n){for(var r=or(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],c=a[3],l=this.readSync(t.dataId),p=t.strides,h=p[0],d=p[1],f=p[2],v=p[3],m=this.readSync(e.dataId),g=e.strides,x=g[0],y=g[1],b=g[2],w=g[3],C=n.batchSize,E=n.filterDepth,R=n.filterHeight,I=n.filterWidth,k=n.inChannels,S=n.inDepth,A=n.inHeight,N=n.inWidth,T=n.outChannels,D=n.outDepth,F=n.outHeight,_=n.outWidth,O=n.strideDepth,M=n.strideHeight,B=n.strideWidth,P=E-1-n.padInfo.front,L=R-1-n.padInfo.top,W=I-1-n.padInfo.left,z=0;z<C;++z)for(var U=0;U<k;++U)for(var V=0;V<S;++V)for(var G=V-P,H=Math.max(0,Math.ceil(G/O)),q=Math.min(D,(E+G)/O),K=0;K<A;++K)for(var j=K-L,X=Math.max(0,Math.ceil(j/M)),Y=Math.min(F,(R+j)/M),$=0;$<N;++$){for(var Q=$-W,J=Math.max(0,Math.ceil(Q/B)),Z=Math.min(_,(I+Q)/B),tt=0,et=H;et<q;++et)for(var nt=et*O-G,rt=X;rt<Y;++rt)for(var ot=rt*M-j,at=J;at<Z;++at)for(var it=h*z+d*et+f*rt+v*at,st=x*(E-1-nt)+y*(R-1-ot)+b*(I-1-(at*B-Q))+w*U,ut=0;ut<T;++ut)tt+=l[it+ut]*m[st+ut];o[i*z+s*V+u*K+c*$+U]=tt}return r.toTensor()},e.prototype.conv2dDerFilter=function(t,e,n){vh([t,e],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s="channelsLast"===n.dataFormat,u=or(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,p=this.bufferSync(t),h=this.bufferSync(e),d=0;d<a;++d)for(var f=Math.max(0,Math.ceil((l-d)/r)),v=Math.min(n.outHeight,(n.inHeight+l-d)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((c-m)/o)),x=Math.min(n.outWidth,(n.inWidth+c-m)/o),y=0;y<n.inChannels;++y)for(var b=0;b<n.outChannels;++b){for(var w=0,C=0;C<n.batchSize;++C)for(var E=f;E<v;++E)for(var R=d+E*r-l,I=g;I<x;++I){var k=m+I*o-c;w+=s?p.get(C,R,k,y)*h.get(C,E,I,b):p.get(C,y,R,k)*h.get(C,b,E,I)}u.set(w,d,m,y,b)}return u.toTensor()},e.prototype.conv3dDerFilter=function(t,e,n){for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=or(n.filterShape,"float32"),l=c.values,p=c.strides,h=p[0],d=p[1],f=p[2],v=p[3],m=this.readSync(e.dataId),g=e.strides,x=g[0],y=g[1],b=g[2],w=g[3],C=this.readSync(t.dataId),E=t.strides,R=E[0],I=E[1],k=E[2],S=E[3],A=n.padInfo.front,N=n.padInfo.left,T=n.padInfo.top,D=0;D<i;++D)for(var F=Math.max(0,Math.ceil((A-D)/r)),_=Math.min(n.outDepth,(n.inDepth+A-D)/r),O=D*h,M=0;M<s;++M)for(var B=Math.max(0,Math.ceil((T-M)/o)),P=Math.min(n.outHeight,(n.inHeight+T-M)/o),L=M*d+O,W=0;W<u;++W)for(var z=Math.max(0,Math.ceil((N-W)/a)),U=Math.min(n.outWidth,(n.inWidth+N-W)/a),V=W*f+L,G=0;G<n.inChannels;++G)for(var H=G*v+V,q=0;q<n.outChannels;++q){for(var K=0,j=0;j<n.batchSize;++j)for(var X=j*R,Y=j*x,$=F;$<_;++$)for(var Q=(D+$*r-A)*I+X,J=$*y+Y,Z=B;Z<P;++Z)for(var tt=(M+Z*o-T)*k+Q,et=Z*b+J,nt=z;nt<U;++nt){var rt=nt*w+et;K+=C[(W+nt*a-N)*S+tt+G]*m[rt+q]}l[H+q]=K}return c.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var e=t.input,n=t.filter,r=t.convInfo,o=t.bias,a=t.activation,i=t.preluActivationWeights,s=this.depthwiseConv2D(e,n,r);return o&&(s=this.add(s,o)),a&&(s=xh(this,s,a,i)),s},e.prototype.depthwiseConv2D=function(t,e,n){vh([t,e],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,l=or(n.outShape,t.dtype),p=this.readSync(t.dataId),h=this.readSync(e.dataId),d=l.values,f=0;f<n.batchSize;++f)for(var v=f*t.strides[0],m=f*l.strides[0],g=0;g<n.outHeight;++g)for(var x=m+g*l.strides[1],y=g*n.strideHeight-s,b=0;b<r;++b){var w=y+b*a;if(!(w<0||w>=n.inHeight))for(var C=b*e.strides[0],E=v+w*t.strides[1],R=0;R<n.outWidth;++R)for(var I=x+R*l.strides[2],k=R*n.strideWidth-u,S=0;S<o;++S){var A=k+S*i;if(!(A<0||A>=n.inWidth))for(var N=C+S*e.strides[1],T=E+A*n.inChannels,D=I,F=N,_=0;_<n.inChannels;++_){for(var O=p[T+_],M=0;M<c;++M)d[D+M]+=O*h[F+M];D+=c,F+=c}}}return l.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,e,n){vh([t,e],"depthwiseConv2DDerInput");for(var r=or(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],c=this.readSync(t.dataId),l=t.strides,p=l[0],h=l[1],d=l[2],f=this.readSync(e.dataId),v=e.strides,m=v[0],g=v[1],x=v[2],y=n.batchSize,b=n.filterHeight,w=n.filterWidth,C=n.inChannels,E=n.inHeight,R=n.inWidth,I=n.outChannels,k=n.outHeight,S=n.outWidth,A=n.strideHeight,N=n.strideWidth,T=b-1-n.padInfo.top,D=w-1-n.padInfo.left,F=I/C,_=0;_<y;++_)for(var O=0;O<C;++O)for(var M=0;M<E;++M)for(var B=M-T,P=Math.max(0,Math.ceil(B/A)),L=Math.min(k,(b+B)/A),W=0;W<R;++W){for(var z=W-D,U=Math.max(0,Math.ceil(z/N)),V=Math.min(S,(w+z)/N),G=0,H=P;H<L;++H)for(var q=H*A-B,K=U;K<V;++K)for(var j=p*_+h*H+d*K,X=m*(b-1-q)+g*(w-1-(K*N-z))+x*O,Y=0;Y<F;++Y)G+=c[j+(O*F+Y)]*f[X+Y];o[i*_+s*M+u*W+O]=G}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,e,n){vh([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=or(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,p=this.bufferSync(t),h=this.bufferSync(e),d=0;d<a;++d)for(var f=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),x=Math.min(n.outWidth,(n.inWidth+u-m)/o),y=0;y<n.outChannels;++y){for(var b=Math.trunc(y/l),w=y%l,C=0,E=0;E<n.batchSize;++E)for(var R=f;R<v;++R)for(var I=d+R*r-c,k=g;k<x;++k){var S=m+k*o-u;C+=p.get(E,I,S,b)*h.get(E,R,k,y)}s.set(C,d,m,b,w)}return s.toTensor()},e.prototype.tile=function(t,e){return vh(t,"tile"),Ha(this.bufferSync(t),e)},e.prototype.pad=function(t,e,n){vh(t,"pad");var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),o=e.map(function(t){return t[0]}),a=this.bufferSync(t),i=or(r,t.dtype);0!==n&&i.values.fill(n);for(var s=0;s<t.size;s++){var u=a.indexToLoc(s),c=u.map(function(t,e){return t+o[e]});i.set.apply(i,[a.get.apply(a,u)].concat(c))}return i.toTensor()},e.prototype.gather=function(t,e,n){vh([t,e],"gather");var r=t.shape.slice(),o=this.readSync(e.dataId);r[n]=o.length;for(var a=or(r,t.dtype),i=this.bufferSync(t),s=0;s<a.size;++s){var u=a.indexToLoc(s),c=u.slice();c[n]=o[u[n]];var l=i.locToIndex(c);a.values[s]=i.values[l]}return a.toTensor()},e.prototype.batchToSpaceND=function(t,e,n){vh([t],"batchToSpaceND");var r=e.reduce(function(t,e){return t*e}),o=gr(t.shape,e,r),a=xr(o.length,e.length),i=yr(t.shape,e,r),s=br(n,e.length),u=wr(i,n,e.length);return pa(t.reshape(o),a).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(t,e,n){vh([t],"spaceToBatchND");var r=e.reduce(function(t,e){return t*e}),o=[[0,0]];o.push.apply(o,n);for(var a=1+e.length;a<t.shape.length;++a)o.push([0,0]);var i=t.pad(o),s=gr(i.shape,e,r,!1),u=xr(s.length,e.length,!1),c=yr(i.shape,e,r,!1);return pa(i.reshape(s),u).reshape(c)},e.prototype.maxPool=function(t,e){return vh(t,"maxPool"),mh(this.readSync(t.dataId),t.shape,t.dtype,t.strides,e,"max").toTensor()},e.prototype.maxPoolBackprop=function(t,e,n,r){vh([e,n],"maxPoolBackprop");for(var o=this.readSync(e.dataId),a=or(r.outShape,e.dtype,gh(o,e.shape,e.dtype,r).values),i=r.strideHeight,s=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,l=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=p-1-r.padInfo.left,d=l-1-r.padInfo.top,f=or(e.shape,"float32"),v=this.bufferSync(t),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var x=0;x<r.inHeight;++x)for(var y=0;y<r.inWidth;++y){for(var b=x-d,w=y-h,C=0,E=0;E<l;E+=u){var R=(b+E)/i;if(!(R<0||R>=r.outHeight||Math.floor(R)!==R))for(var I=0;I<p;I+=c){var k=(w+I)/s;if(!(k<0||k>=r.outWidth||Math.floor(k)!==k)){var S=l*p-1-a.get(m,R,k,g)===E*p+I?1:0;0!==S&&(C+=v.get(m,R,k,g)*S)}}}f.set(C,m,x,y,g)}return f.toTensor()},e.prototype.avgPoolBackprop=function(t,e,n){vh([t,e],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,p=l-1-n.padInfo.left,h=c-1-n.padInfo.top,d=or(e.shape,"float32"),f=1/(a*i),v=this.bufferSync(t),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var x=0;x<n.inHeight;++x)for(var y=0;y<n.inWidth;++y){for(var b=x-h,w=y-p,C=0,E=0;E<c;E+=s){var R=(b+E)/r;if(!(R<0||R>=n.outHeight||Math.floor(R)!==R))for(var I=0;I<l;I+=u){var k=(w+I)/o;k<0||k>=n.outWidth||Math.floor(k)!==k||(C+=v.get(m,R,k,g))}}d.set(C*f,m,x,y,g)}return d.toTensor()},e.prototype.pool3d=function(t,e,n){vh(t,"pool3d");for(var r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,f=e.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(t.dataId),g=or(e.outShape,t.dtype),x=g.values,y=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],b=e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[3]*e.outShape[4],C=e.outShape[4],E=0;E<e.batchSize;++E)for(var R=E*y,I=E*t.strides[0],k=0;k<e.inChannels;++k)for(var S=0;S<e.outDepth;++S){for(var A=S*r-h,N=A;N<0;)N+=i;for(var T=Math.min(e.inDepth,c+A),D=R+S*b,F=0;F<e.outHeight;++F){for(var _=F*o-d,O=_;O<0;)O+=s;for(var M=Math.min(e.inHeight,l+_),B=D+F*w,P=0;P<e.outWidth;++P){for(var L=P*a-f,W=L;W<0;)W+=u;for(var z=Math.min(e.inWidth,p+L),U=B+P*C,V=v,G=0,H=0,q=N;q<T;q+=i){for(var K=I+q*t.strides[1],j=O;j<M;j+=s){for(var X=K+j*t.strides[2],Y=W;Y<z;Y+=u){var $=m[X+Y*t.strides[3]+k];if("max"===n&&$>V?V=$:"avg"===n&&(G+=$,H++),isNaN(V))break}if(isNaN(V))break}if(isNaN(V))break}x[U+k]="avg"===n?G/H:V}}}return g.toTensor()},e.prototype.avgPool3d=function(t,e){return vh(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,e,n){vh([t,e],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,d=n.effectiveFilterHeight,f=n.effectiveFilterWidth,v=h-1-n.padInfo.front,m=f-1-n.padInfo.left,g=d-1-n.padInfo.top,x=or(e.shape,"float32"),y=1/(i*s*u),b=this.bufferSync(t),w=0;w<n.batchSize;++w)for(var C=0;C<n.inChannels;++C)for(var E=0;E<n.inDepth;++E)for(var R=0;R<n.inHeight;++R)for(var I=0;I<n.inWidth;++I){for(var k=E-v,S=R-g,A=I-m,N=0,T=0;T<h;T+=c){var D=(k+T)/r;if(!(D<0||D>=n.outDepth||Math.floor(D)!==D))for(var F=0;F<d;F+=l){var _=(S+F)/o;if(!(_<0||_>=n.outHeight||Math.floor(_)!==_))for(var O=0;O<f;O+=p){var M=(A+O)/a;M<0||M>=n.outWidth||Math.floor(M)!==M||(N+=b.get(w,D,_,M,C))}}}x.set(N*y,w,E,R,I,C)}return x.toTensor()},e.prototype.maxPool3d=function(t,e){return vh(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,e){for(var n=or(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,s=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,l=e.effectiveFilterHeight,p=e.effectiveFilterWidth,h=e.padInfo.front,d=e.padInfo.top,f=e.padInfo.left,v=this.bufferSync(t),m=0;m<e.batchSize;++m)for(var g=0;g<e.inChannels;++g)for(var x=0;x<e.outDepth;++x){for(var y=x*r-h,b=y;b<0;)b+=i;for(var w=Math.min(e.inDepth,c+y),C=0;C<e.outHeight;++C){for(var E=C*o-d,R=E;R<0;)R+=s;for(var I=Math.min(e.inHeight,l+E),k=0;k<e.outWidth;++k){for(var S=k*a-f,A=S;A<0;)A+=u;for(var N=Math.min(e.inWidth,p+S),T=Number.NEGATIVE_INFINITY,D=-1,F=b;F<w;F+=i)for(var _=F-y,O=R;O<I;O+=s)for(var M=O-E,B=A;B<N;B+=u){var P=B-S,L=v.get(m,F,O,B,g);L>=T&&(T=L,D=_*l*p+M*l+P)}n.set(D,m,x,C,k,g)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(t,e,n,r){vh([e,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(e,r),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,p=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,f=p-1-r.padInfo.front,v=d-1-r.padInfo.left,m=h-1-r.padInfo.top,g=or(e.shape,"float32"),x=this.bufferSync(o),y=this.bufferSync(t),b=0;b<r.batchSize;++b)for(var w=0;w<r.inChannels;++w)for(var C=0;C<r.inDepth;++C)for(var E=0;E<r.inHeight;++E)for(var R=0;R<r.inWidth;++R){for(var I=C-f,k=E-m,S=R-v,A=0,N=0;N<p;N+=u){var T=(I+N)/a;if(!(T<0||T>=r.outDepth||Math.floor(T)!==T))for(var D=0;D<h;D+=c){var F=(k+D)/i;if(!(F<0||F>=r.outHeight||Math.floor(F)!==F))for(var _=0;_<d;_+=l){var O=(S+_)/s;if(!(O<0||O>=r.outWidth||Math.floor(O)!==O)){var M=p*h*d-1-x.get(b,T,F,O,w)===N*h*d+D*d+_?1:0;0!==M&&(A+=y.get(b,T,F,O,w)*M)}}}}g.set(A,b,C,E,R,w)}return g.toTensor()},e.prototype.cast=function(t,e){return Sa(t,e,this)},e.prototype.reshape=function(t,e){return Aa(t,e)},e.prototype.avgPool=function(t,e){return vh(t,"avgPool"),vh(t,"maxPool"),mh(this.readSync(t.dataId),t.shape,t.dtype,t.strides,e,"avg").toTensor().toFloat()},e.prototype.resizeBilinear=function(t,e,n,r){vh(t,"resizeBilinear");for(var o=t.shape,a=o[0],i=o[1],s=o[2],u=o[3],c=this.readSync(t.dataId),l=new Float32Array(N([a,e,n,u])),p=[r&&e>1?i-1:i,r&&n>1?s-1:s],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=0,f=p[0]/h[0],v=p[1]/h[1],m=0;m<a;m++)for(var g=0;g<e;g++)for(var x=f*g,y=Math.floor(x),b=x-y,w=Math.min(i-1,Math.ceil(x)),C=m*t.strides[0]+y*t.strides[1],E=m*t.strides[0]+w*t.strides[1],R=0;R<n;R++)for(var I=v*R,k=Math.floor(I),S=I-k,A=Math.min(s-1,Math.ceil(I)),T=C+k*t.strides[2],D=E+k*t.strides[2],F=C+A*t.strides[2],_=E+A*t.strides[2],O=0;O<u;O++){var M=c[T+O],B=c[D+O],P=M+(c[F+O]-M)*S,L=P+(B+(c[_+O]-B)*S-P)*b;l[d++]=L}return Mn(l,[a,e,n,u])},e.prototype.resizeBilinearBackprop=function(t,e,n){vh([t,e],"resizeBilinearBackprop");for(var r=e.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],p=new Float32Array(o*a*i*s),h=[n&&c>1?a-1:a,n&&l>1?i-1:i],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],f=h[0]/d[0],v=h[1]/d[1],m=this.readSync(t.dataId),g=0,x=0;x<o;x++)for(var y=x*e.strides[0],b=0;b<c;b++)for(var w=b*f,C=Math.floor(w),E=Math.min(Math.ceil(w),a-1),R=y+C*e.strides[1],I=y+E*e.strides[1],k=w-C,S=1-k,A=0;A<l;A++)for(var N=A*v,T=Math.floor(N),D=Math.min(Math.ceil(N),i-1),F=N-T,_=1-F,O=R+T*e.strides[2],M=R+D*e.strides[2],B=I+T*e.strides[2],P=I+D*e.strides[2],L=S*_,W=S*F,z=k*_,U=k*F,V=0;V<s;V++){var G=m[g++];p[O+V]+=G*L,p[M+V]+=G*W,p[B+V]+=G*z,p[P+V]+=G*U}return Un(p,[o,i,a,s],e.dtype)},e.prototype.resizeNearestNeighbor=function(t,e,n,r){vh(t,"resizeNearestNeighbor");for(var o=t.shape,a=o[0],i=o[1],s=o[2],u=o[3],c=this.readSync(t.dataId),l=new Float32Array(a*e*n*u),p=[r&&e>1?i-1:i,r&&n>1?s-1:s],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=p[0]/h[0],f=p[1]/h[1],v=0,m=0;m<a;m++)for(var g=m*t.strides[0],x=0;x<e;x++)for(var y=d*x,b=g+Math.min(i-1,r?Math.round(y):Math.floor(y))*t.strides[1],w=0;w<n;w++)for(var C=f*w,E=b+Math.min(s-1,r?Math.round(C):Math.floor(C))*t.strides[2],R=0;R<u;R++){var I=c[E+R];l[v++]=I}return Mn(l,[a,e,n,u],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,e,n){vh([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=t.shape,c=u[1],l=u[2],p=new Float32Array(o*a*i*s),h=this.readSync(t.dataId),d=[n&&c>1?a-1:a,n&&l>1?i-1:i],f=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/f[0],m=d[1]/f[1],g=1/v,x=1/m,y=2*Math.ceil(g)+2,b=2*Math.ceil(x)+2,w=0;w<o;w++)for(var C=w*e.strides[0],E=0;E<a;E++)for(var R=C+E*e.strides[1],I=Math.floor(E*g),k=Math.floor(I-y/2),S=0;S<i;S++)for(var A=R+S*e.strides[2],N=Math.floor(S*x),T=Math.floor(N-b/2),D=0;D<s;D++){for(var F=0,_=0;_<y;_++){var O=_+k;if(!(O<0||O>=c)){var M=C+O*t.strides[1],B=O*v;if(E===Math.min(a-1,n?Math.round(B):Math.floor(B)))for(var P=0;P<b;P++){var L=P+T;if(!(L<0||L>=l)){var W=M+L*t.strides[2],z=L*m;S===Math.min(i-1,n?Math.round(z):Math.floor(z))&&(F+=h[W+D])}}}}p[A+D]=F}return Un(p,e.shape,e.dtype)},e.prototype.batchNormalization=function(t,e,n,r,o,a){vh([t,e,n,o,a],"batchNorm");for(var i=this.readSync(t.dataId),s=this.readSync(e.dataId),u=this.readSync(n.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),l=a?this.readSync(a.dataId):new Float32Array([0]),p=new Float32Array(i.length),h=l.length,d=c.length,f=u.length,v=s.length,m=0,g=0,x=0,y=0,b=0;b<i.length;++b)p[b]=l[m++]+(i[b]-s[g++])*c[x++]/Math.sqrt(u[y++]+r),m>=h&&(m=0),g>=v&&(g=0),x>=d&&(x=0),y>=f&&(y=0);return Un(p,t.shape)},e.prototype.localResponseNormalization4D=function(t,e,n,r,o){vh(t,"localResponseNormalization4D");var a=t.shape[3],i=a-1,s=this.readSync(t.dataId),u=t.size,c=new Float32Array(u);function l(t){for(var n=t%a,r=t-n+Math.max(0,n-e),o=t-n+Math.min(n+e,i),u=0;r<=o;r++){var c=s[r];u+=c*c}return u}for(var p=0;p<u;p++){var h=l(p),d=s[p]*Math.pow(n+r*h,-o);c[p]=d}return Un(c,t.shape)},e.prototype.LRNGrad=function(t,e,n,r,o,a,i){vh(t,"LRNGrad");for(var s=t.shape[3],u=this.readSync(t.dataId),c=this.readSync(e.dataId),l=this.readSync(n.dataId),p=new Float32Array(t.size),h=t.size,d=0;d<h;d++){for(var f=d%s,v=d-f+Math.max(0,f-r),m=d-f+Math.min(s,f+r+1),g=0,x=v;x<m;x++)g+=Math.pow(c[x],2);for(g=a*g+o,x=v;x<m;x++){var y=-2*a*i*c[x]*l[d]/g;d===x&&(y+=Math.pow(g,-i)),y*=u[d],p[x]+=y}}return Un(p,t.shape)},e.prototype.multinomial=function(t,e,n,r){vh(t,"multinomial");for(var o=e?t:ca(t),a=o.shape[0],i=o.shape[1],s=Kn([a,n],"int32"),u=this.readSync(s.dataId),c=this.readSync(o.dataId),l=0;l<a;++l){var p=l*i,h=new Float32Array(i-1);h[0]=c[p];for(var d=1;d<h.length;++d)h[d]=h[d-1]+c[p+d];for(var f=Ju(r.toString()),v=l*n,m=0;m<n;++m){var g=f();u[v+m]=h.length;for(var x=0;x<h.length;x++)if(g<h[x]){u[v+m]=x;break}}}return s},e.prototype.oneHot=function(t,e,n,r){vh(t,"oneHot");var o=new Float32Array(t.size*e);o.fill(r);for(var a=this.readSync(t.dataId),i=0;i<t.size;++i)a[i]>=0&&a[i]<e&&(o[i*e+a[i]]=n);return Wn(o,[t.size,e],"int32")},e.prototype.nonMaxSuppression=function(t,e,n,r,o){return vh(t,"nonMaxSuppression"),Pa(this.readSync(t.dataId),this.readSync(e.dataId),n,r,o)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,e){for(var n=t.shape[0],r=t.shape[1],o=or(t.shape,"float32"),a=or(t.shape,"float32"),i=_n(t).as2D(n,r),s=On(t).as2D(n,r),u=0;u<n;u++)for(var c=i.slice([u,0],[1,r]),l=s.slice([u,0],[1,r]),p=Fn(c,l),h=this.readSync(this.fftImpl(p,e).dataId),d=0;d<r;d++){var f=Fa(h,d);o.values[u*r+d]=f.real,a.values[u*r+d]=f.imag}return Fn(o.toTensor(),a.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(t,e){var n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(o=Fn(_n(o).div(Pn(r)),On(o).div(Pn(r)))),o}var a=this.readSync(t.dataId),i=function(t){for(var e=new Float32Array(t.length/2),n=new Float32Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}(this.fourierTransformByMatmul(a,r,e));return Fn(i.real,i.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return 0==(t&t-1)},e.prototype.fftRadix2=function(t,e,n){if(1===e)return t;var r=this.readSync(t.dataId),o=e/2,a=function(t){for(var e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),i=Fn(a.real,a.imag).as1D(),s=function(t){for(var e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e),o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}(r),u=Fn(s.real,s.imag).as1D();i=this.fftRadix2(i,o,n),u=this.fftRadix2(u,o,n);var c=function(t,e){for(var n=new Float32Array(t/2),r=new Float32Array(t/2),o=0;o<Math.ceil(t/2);o++){var a=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}(e,n),l=Fn(c.real,c.imag).mul(u),p=i.add(l),h=i.sub(l),d=_n(p).concat(_n(h)),f=On(p).concat(On(h));return Fn(d,f).as1D()},e.prototype.fourierTransformByMatmul=function(t,e,n){for(var r=new Float32Array(2*e),o=0;o<e;o++){for(var a=0,i=0,s=0;s<e;s++){var u=Oa(o*s,e,n),c=Fa(t,s);a+=c.real*u.real-c.imag*u.imag,i+=c.real*u.imag+c.imag*u.real}n&&(a/=e,i/=e),_a(r,a,i,o)}return r},e.prototype.depthToSpace=function(t,e,n){I("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),I(e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+e});for(var r=t.shape[0],o=t.shape[1],a=t.shape[2],i=t.shape[3],s=o*e,u=a*e,c=i/(e*e),l=this.readSync(t.dataId),p=new Float32Array(r*s*u*c),h=0,d=0;d<r;++d)for(var f=0;f<s;++f)for(var v=Math.floor(f/e),m=f%e,g=0;g<u;++g)for(var x=Math.floor(g/e),y=(m*e+g%e)*c,b=0;b<c;++b){var w=b+y+i*(x+a*(v+o*d));p[h++]=l[w]}return Un(p,[r,s,u,c])},e.prototype.broadcastedBinaryOp=function(t,e,n,r){var o=zr(t.shape,e.shape),a=or(o,n),i=this.readSync(t.dataId),s=this.readSync(e.dataId),u=Lr(t.shape,o),c=Lr(e.shape,o),l=a.values;if(u.length+c.length===0)for(var p=0;p<l.length;++p)l[p]=r(i[p%i.length],s[p%s.length]);else{var h=this.bufferSync(t),d=this.bufferSync(e),f=function(n){var o=a.indexToLoc(n),p=o.slice(-t.rank);u.forEach(function(t){return p[t]=0});var f=h.locToIndex(p),v=o.slice(-e.rank);c.forEach(function(t){return v[t]=0});var m=d.locToIndex(v);l[n]=r(i[f],s[m])};for(p=0;p<l.length;++p)f(p)}return a.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=zr(t.shape,e.shape),o=or(r,"float32"),a=or(r,"float32"),i=this.readSync(t.dataId),s=this.readSync(e.dataId),u=Lr(t.shape,r),c=Lr(e.shape,r),l=o.values,p=a.values;if(u.length+c.length===0)for(var h=0;h<l.length;h++){var d=h%i.length,f=h%s.length,v=n(i[2*d],i[2*d+1],s[2*f],s[2*f+1]);l[h]=v.real,p[h]=v.imag}else{var m=this.bufferSync(this.data.get(t.dataId).complexTensors.real),g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),x=function(r){var a=o.indexToLoc(r),h=a.slice(-t.rank);u.forEach(function(t){return h[t]=0});var d=m.locToIndex(h),f=a.slice(-e.rank);c.forEach(function(t){return f[t]=0});var v=g.locToIndex(f),x=n(i[2*d],i[2*d+1],s[2*v],s[2*v+1]);l[r]=x.real,p[r]=x.imag};for(h=0;h<l.length;h++)x(h)}return this.complex(o.toTensor(),a.toTensor())},e.prototype.split=function(t,e,n){return Ga(t,e,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,e,n,r,o,a){for(var i=t.shape,s=i[0],u=i[1],c=i[2],l=i[3],p=e.shape[0],h=r[0],d=r[1],f=or([p,h,d,l],"float32"),v=this.readSync(e.dataId),m=this.readSync(n.dataId),g=this.readSync(t.dataId),x=t.strides,y=f.strides,b=0;b<p;b++){var w=4*b,C=v[w],E=v[w+1],R=v[w+2],I=v[w+3],k=m[b];if(!(k>=s))for(var S=h>1?(R-C)*(u-1)/(h-1):0,A=d>1?(I-E)*(c-1)/(d-1):0,N=0;N<h;N++){var T=h>1?C*(u-1)+N*S:.5*(C+R)*(u-1);if(T<0||T>u-1)for(var D=0;D<d;D++)for(var F=0;F<l;F++){var _=F+D*y[2]+N*y[1]+b*y[0];f.values[_]=a}else if("bilinear"===o){var O=Math.floor(T),M=Math.ceil(T),B=T-O;for(D=0;D<d;D++)if((q=d>1?E*(c-1)+D*A:.5*(E+I)*(c-1))<0||q>c-1)for(F=0;F<l;F++)_=F+D*y[2]+N*y[1]+b*y[0],f.values[_]=a;else{var P=Math.floor(q),L=Math.ceil(q),W=q-P;for(F=0;F<l;F++){var z=g[_=F+P*x[2]+O*x[1]+k*x[0]],U=g[_=F+L*x[2]+O*x[1]+k*x[0]],V=g[_=F+P*x[2]+M*x[1]+k*x[0]],G=z+(U-z)*W,H=V+(g[_=F+L*x[2]+M*x[1]+k*x[0]]-V)*W;_=F+D*y[2]+N*y[1]+b*y[0],f.values[_]=G+(H-G)*B}}}else for(D=0;D<d;++D){var q;if((q=d>1?E*(c-1)+D*A:.5*(E+I)*(c-1))<0||q>c-1)for(F=0;F<l;F++)_=F+D*y[2]+N*y[1]+b*y[0],f.values[_]=a;else{var K=Math.round(q),j=Math.round(T);for(F=0;F<l;F++){var X=F+K*x[2]+j*x[1]+k*x[0],Y=F+D*y[2]+N*y[1]+b*y[0];f.values[Y]=g[X]}}}}}return f.toTensor()},e.prototype.sparseToDense=function(t,e,n,r){var o=Ko(0,t,n),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,c=o.outputSize;return this.scatter(t,e,n,c,s,i,a,u,r,!1)},e.prototype.gatherND=function(t,e){var n=e.shape,r=n[n.length-1],o=zo(t,e),a=o[0],i=o[1],s=o[2],u=o[3];if(0===i)return Mn([],a,t.dtype);for(var c=new bt([i,s],t.dtype),l=this.readSync(e.dataId),p=this.readSync(t.dataId),h=0;h<i;h++){for(var d=[],f=0,v=0;v<r;v++){var m=l[h*r+v];f+=m*u[v],d.push(m)}if(f<0||f>=t.size/s)throw new Error("Invalid indices: "+d+" does not index into "+t.shape);for(var g=0;g<s;g++)c.values[h*s+g]=p[f*s+g]}return c.toTensor().reshape(a)},e.prototype.scatterND=function(t,e,n){var r=Ko(0,t,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,c=Pn(0);return this.scatter(t,e,n,u,i,a,o,s,c,!0)},e.prototype.fill=function(t,e,n){var r=z(n=n||$(e),N(t));return r.fill(e),Ut.makeTensor(r,t,n,this)},e.prototype.onesLike=function(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var e=z(t.dtype,N(t.shape));return this.makeOutput(e,t.shape,t.dtype)},e.prototype.linspace=function(t,e,n){return Na(t,e,n)},e.prototype.scatter=function(t,e,n,r,o,a,i,s,u,c){var l=[r/o,o],p=this.readSync(t.dataId),h=this.readSync(e.dataId);if(0===r)return Mn([],n,e.dtype);var d=new bt(l,e.dtype);d.values.fill(this.readSync(u.dataId)[0]);for(var f=0;f<a;f++){for(var v=[],m=0,g=0;g<i;g++){var x=p[f*i+g];v.push(x),m+=x*s[g]}if(m<0||m>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var y=0;y<o;y++)c?d.values[m*o+y]+=h[f*o+y]:d.values[m*o+y]=0===e.rank?h[0]:h[f*o+y]}return d.toTensor().reshape(n)},e}(da);function bh(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:function(n){var r=n.inputs,o=n.backend,a=r,i=a.a,s=a.b,u=o;vh([i,s],t);var c=u.data.get(i.dataId).values,l=u.data.get(s.dataId).values,p=e(i.shape,s.shape,c,l,i.dtype),h=p[0],d=p[1];return{dataId:u.write(h,d,i.dtype),shape:d,dtype:i.dtype}}}}function wh(t){return function(e,n,r,o,a){var i=zr(e,n),s=i.length,u=Z(i),c=W(a,N(i)),l=e.length,p=n.length,h=Z(e),d=Z(n),f=Lr(e,i),v=Lr(n,i);if(f.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=t(r[m%r.length],o[m%o.length]);else{var g=function(e){var n=ct(e,s,u),a=n.slice(-l);f.forEach(function(t){return a[t]=0});var i=ut(a,l,h),m=n.slice(-p);v.forEach(function(t){return m[t]=0});var g=ut(m,p,d);c[e]=t(r[i],o[g])};for(m=0;m<c.length;++m)g(m)}return[c,i]}}Ut.registerBackend("cpu",function(){return new yh},1);var Ch=wh(function(t,e){return t/e}),Eh=bh(Rr,Ch),Rh={kernelName:"MaxPoolWithArgmax",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,c=a.includeBatchInIndex,l=r;vh(o,"MaxPoolWithArgmax");var p=l.data.get(o.dataId).values,h=va(o.shape,i,s,[1,1],u),d=function(t,e,n,r,o){var a=mh(t,0,n,Z(e),o,"max"),i=gh(t,e,n,o,!0,r);return[a.values,i.values]}(p,o.shape,o.dtype,c,h),f=d[0],v=d[1],m=l.write(f,h.outShape,o.dtype),g=l.write(v,h.outShape,o.dtype);return[{dataId:m,shape:h.outShape,dtype:o.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}},Ih={kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,p=s.softNmsSigma,h=n;vh(a,"NonMaxSuppressionWithScore");var d=La(h.data.get(a.dataId).values,h.data.get(i.dataId).values,u,c,l,p);return[d.selectedIndices,d.selectedScores]}},kh={kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n;vh(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},Sh=wh(function(t,e){var n=t-e;return n*n});function Ah(t,e,n,r,o){for(var a=N(e),i=e.length,s=Z(e),u=Z(o),c=W(n,N(o)),l=0;l<a;++l){for(var p=ct(l,i,s),h=new Array(p.length),d=0;d<h.length;d++)h[d]=p[r[d]];c[ut(h,i,u)]=t[l]}return c}for(var Nh=0,Th=[Ih,kh,bh(kr,Sh),Eh,{kernelName:"Transpose",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n.perm,i=r;vh(o,"transpose");for(var s=o.shape.length,u=new Array(s),c=0;c<u.length;c++)u[c]=o.shape[a[c]];var l=Ah(i.data.get(o.dataId).values,o.shape,o.dtype,a,u);return{dataId:i.write(l,u,o.dtype),shape:u,dtype:o.dtype}}},Rh];Nh<Th.length;Nh++)m(Th[Nh]);for(var Dh,Fh=function(t){this.variableNames=["A"];var e=Ja(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},_h=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=Ja(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "},Oh=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var o=pi(this.rank),a=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}(e);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},Mh=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=pi(this.rank),a=$a("rc",this.rank),i=new Array(this.rank);for(r=0;r<e.length;r++)i[e[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+u+") {\n        result[1] = "+c+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+u+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Bh=0,Ph=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,o=e.pixels,a=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],p=u[1],h=[p,l],d=[p,l,a];(s||i)&&(null==Dh&&(Dh=document.createElement("canvas").getContext("2d")),Dh.canvas.width=l,Dh.canvas.height=p,Dh.drawImage(o,0,0,l,p),o=Dh.canvas);var f=n.makeTensorInfo(h,"int32");n.texData.get(f.dataId).usage=qt.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);var v=c().getBool("WEBGL_PACK")?new _h(d):new Fh(d),m=n.runWebGLProgram(v,[f],"int32");return n.disposeData(f.dataId),m}},{kernelName:Rr,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e;return function(t,e,n){var r=new Si(Ii,t.shape,e.shape);return c().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new Ti(Ai,t.shape,e.shape,!0)),n.runWebGLProgram(r,[t,e],"float32")}(r.a,r.b,n)}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;mn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,p=s.softNmsSigma,h=n,d=La(h.readSync(a.dataId),h.readSync(i.dataId),u,c,l,p);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,o=n,a=new hu(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:kr,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,o=r.a,a=r.b,i=n,s=c().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ti("return (a - b) * (a - b);",o.shape,a.shape):new Si("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}},{kernelName:"Transpose",backendName:"webgl",kernelFunc:function(t){for(var e,n=t.inputs,r=t.attrs,o=t.backend,a=n.x,i=r.perm,s=o,u=a.shape.length,l=new Array(u),p=0;p<l.length;p++)l[p]=a.shape[i[p]];if(s.shouldExecuteOnCPU([a])){var h=Ah(s.texData.get(a.dataId).values,a.shape,a.dtype,i,l);e=s.makeTensorInfo(l,a.dtype),s.texData.get(e.dataId).values=h}else e=function(t,e,n){var r=c().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Mh(t.shape,e):new Oh(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}(a,i,s);return e}},{kernelName:"MaxPoolWithArgmax",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.attrs,r=t.backend,o=e.x,a=n,i=a.filterSize,s=a.strides,u=a.pad,c=a.includeBatchInIndex,l=r;I(4===o.shape.length,function(){return"Error in maxPool: input must be rank 4 but got rank "+o.shape.length+"."});var p=[1,1];I(Ia(s,p),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+s+" and dilations '"+p+"'"});var h=va(o.shape,i,s,p,u),d=function(t,e,n,r){var o=new Vs(n,"max",!1),a=r.runWebGLProgram(o,[t],"float32");return o=new Vs(n,"max",!0,!0,e),[a,r.runWebGLProgram(o,[t],"float32")]}(o,c,h,l);return[d[0],d[1]]}}];Bh<Ph.length;Bh++)m(Ph[Bh]);for(var Lh=0,Wh=[{kernelName:Cr,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=zr(n.shape,r.shape);return{a:function(){var e=t,r=Wr(n.shape,o);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},b:function(){var e=t,n=Wr(r.shape,o);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}}},{kernelName:"AddN",saveAllInputs:!0,gradFunc:function(t,e){var n={};return e.forEach(function(e,r){n[r]=function(){return t.clone()}}),n}},{kernelName:Tr,gradFunc:function(t,e,n){for(var r=n,o=r.inputShape,a=r.shape,i=Array.from(a),s=o.length-1;s>=0;s--)if(o[s]===a[s])i[s]=1;else if(1!==o[s])throw new Error("broadcastTo(): ["+o+"] cannot be broadcast to ["+a+"].");var u=[];for(s=0;s<i.length;s++)i[s]>1&&u.push(s);return{x:function(){return t.sum(u,!0)}}}},{kernelName:Rr,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=zr(n.shape,r.shape);return{a:function(){var e=Wo(t,r.toFloat()),a=Wr(n.shape,o);return a.length>0?rp(e,a).reshape(n.shape):e},b:function(){var e=t.mul(n.toFloat()),a=Wr(r.shape,o);a.length>0&&(e=rp(e,a).reshape(r.shape));var i=Kc(r);return ao(Wo(e,i.toFloat()))}}}},{kernelName:"FusedBatchNorm",inputsToSave:["x","mean","variance","scale"],gradFunc:function(t,e,n){var r=n.varianceEpsilon,o=e[0],a=e[1],i=e[2],s=e[3],u=ec(o),c=null==s?Pn(1):s,l=Wr(a.shape,u.shape),p=[];if(1===a.rank){for(var h=0;h<u.shape.length-1;++h)p.push(u.shape[h]);p.push(1)}var d=Po(o,a),f=Fo(t,c),v=uo(Pr(i,Pn(r))),m=Fo(Fo(Fo(v,v),v),Pn(-.5));return{x:function(){return 1===a.rank?pr(Fo(Fo(t,Rc(v.as4D(1,1,1,a.shape[0]),p)),c),o.shape):pr(Fo(Fo(t,v),c),o.shape)},mean:function(){var t=Fo(Fo(v,Pn(-1)),f);return 1===a.rank&&(t=rp(t,l)),pr(t,a.shape)},variance:function(){var t=Fo(Fo(m,d),f);return 1===a.rank&&(t=rp(t,l)),pr(t,a.shape)},scale:function(){var e=Fo(d,v),n=Fo(t,e);return 1===a.rank&&(n=rp(n,l)),pr(n,a.shape)},offset:function(){var e=t;return 1===a.rank&&(e=rp(e,l)),pr(e,a.shape)}}}},{kernelName:Fr,gradFunc:function(t){return{x:function(){return t.toFloat()}}}},{kernelName:Dr,inputsToSave:["indices"],gradFunc:function(t,e){var n=e[0];return{indices:function(){return Kn(n.shape,"float32")}}}},{kernelName:Or,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],o=n.paddings.map(function(t){return t[0]});return{x:function(){return t.slice(o,r.shape)}}}},{kernelName:"Square",inputsToSave:["x"],gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:kr,inputsToSave:["a","b"],gradFunc:function(t,e){var n=e[0],r=e[1],o=Pn(2);return{a:function(){return Fo(t,Fo(o,Po(n,r)))},b:function(){return Fo(t,Fo(o,Po(r,n)))}}}},{kernelName:_r,inputsToSave:["x"],gradFunc:function(t,e,n){var r=e[0],o=n.reps;return{x:function(){var e=Qn(r);if(1===r.rank)for(var n=0;n<o[0];++n)e=e.add(t.slice([n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(n=0;n<o[0];++n)for(var a=0;a<o[1];++a)e=e.add(t.slice([n*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(n=0;n<o[0];++n)for(a=0;a<o[1];++a)for(var i=0;i<o[2];++i)e=e.add(t.slice([n*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(n=0;n<o[0];++n)for(a=0;a<o[1];++a)for(i=0;i<o[2];++i)for(var s=0;s<o[3];++s)e=e.add(t.slice([n*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e}}}},{kernelName:"Transpose",gradFunc:function(t,e,n){var r=Sn(n.perm);return{x:function(){return pa(t,r)}}}}];Lh<Wh.length;Lh++)g(Wh[Lh]);var zh=function(){function t(){}return t.prototype.fetch=function(t,e){return fetch(t,e)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Browser's encoder only supports utf-8, but got "+e);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},t}();c().get("IS_BROWSER")&&c().setPlatform("browser",new zh);var Uh,Vh=function(){return require("node-fetch")},Gh=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(t,e){return null!=c().global.fetch?c().global.fetch(t,e):(null==Uh&&(Uh=Vh()),Uh(t,e))},t.prototype.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6},t.prototype.encode=function(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},t.prototype.decode=function(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)},t}();c().get("IS_NODE")&&c().setPlatform("node",new Gh);var Hh={float32:4,int32:4,uint16:2,uint8:1,bool:1},qh=4;function Kh(t,e){for(var n={},r=0,o=function(e){var o=e.name,a=e.dtype,i=e.shape,s=N(i),u=void 0;if("quantization"in e){var c=e.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=Hh[c.dtype],p=t.slice(r,r+s*l),h="uint8"===c.dtype?new Uint8Array(p):new Uint16Array(p);if("float32"===a)u=Float32Array.from(h,function(t){return t*c.scale+c.min});else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=Int32Array.from(h,function(t){return Math.round(t*c.scale+c.min)})}r+=s*l}else if("string"===a){var d=N(e.shape);u=[];for(var f=0;f<d;f++){var v=new Uint32Array(t.slice(r,r+qh))[0];r+=qh;var m=new Uint8Array(t.slice(r,r+v));u.push(m),r+=v}}else{var g=Hh[a];if(p=t.slice(r,r+s*g),"float32"===a)u=new Float32Array(p);else if("int32"===a)u=new Int32Array(p);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=new Uint8Array(p)}r+=s*g}n[o]=Mn(u,i,a)},a=0,i=e;a<i.length;a++)o(i[a]);return n}function jh(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});var r=new Uint8Array(e),o=0;return n.forEach(function(t){r.set(new Uint8Array(t.buffer),o),o+=t.byteLength}),r.buffer}var Xh=void 0!==n&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Yh(t){return Xh?n.byteLength(t):new Blob([t]).size}function $h(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function Qh(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Jh(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:Yh(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:Yh(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Zh=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var o=[];return("load"===n?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(t){var n=t(e,r);null!==n&&o.push(n)}),o},t}(),td="://",ed=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){I(null!=e,function(){return"scheme must not be undefined or null."}),e.endsWith(td)&&(e=e.slice(0,e.indexOf(td))),I(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();I(null==r.managers[e],function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function nd(t){if(-1===t.indexOf(td))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ed.getSchemes().join(","));return{scheme:t.split(td)[0],path:t.split(td)[1]}}function rd(t,e,n){return void 0===n&&(n=!1),a(this,void 0,void 0,function(){var r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return I(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),I((r=Zh.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),I(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),o=r[0],I((a=Zh.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),I(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),s=a[0],u=nd(t).scheme,c=nd(t).path,l=u===nd(t).scheme,[4,o.load()];case 1:return p=i.sent(),n&&l?[4,ed.getManager(u).removeModel(c)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[4,s.save(p)];case 4:return h=i.sent(),!n||l?[3,6]:[4,ed.getManager(u).removeModel(c)];case 5:i.sent(),i.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var od="models_store",ad="model_info_store";function id(){if(!c().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function sd(t){var e=t.result;e.createObjectStore(od,{keyPath:"modelPath"}),e.createObjectStore(ad,{keyPath:"modelPath"})}var ud=function(){function t(t){if(this.indexedDB=id(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return sd(o)},o.onsuccess=function(){var a=o.result;if(null==e){var i=a.transaction(od,"readonly"),s=i.objectStore(od).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return a.close(),r(s.error)},i.oncomplete=function(){return a.close()}}else{var u,c=Jh(e),l=a.transaction(ad,"readwrite"),p=l.objectStore(ad),h=p.put({modelPath:n.modelPath,modelArtifactsInfo:c});h.onsuccess=function(){var o=(u=a.transaction(od,"readwrite")).objectStore(od).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:c});o.onsuccess=function(){return t({modelArtifactsInfo:c})},o.onerror=function(t){var e=(p=l.objectStore(ad)).delete(n.modelPath);e.onsuccess=function(){return a.close(),r(o.error)},e.onerror=function(t){return a.close(),r(o.error)}}},h.onerror=function(t){return a.close(),r(h.error)},l.oncomplete=function(){null==u?a.close():u.oncomplete=function(){return a.close()}}}},o.onerror=function(t){return r(o.error)}})},t.URL_SCHEME="indexeddb://",t}(),cd=function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ud.URL_SCHEME)?(e=t.slice(ud.URL_SCHEME.length),new ud(e)):null;var e};Zh.registerSaveRouter(cd),Zh.registerLoadRouter(cd);var ld=function(){function t(){this.indexedDB=id()}return t.prototype.listModels=function(){return a(this,void 0,void 0,function(){var t=this;return i(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return sd(r)},r.onsuccess=function(){var t=r.result,o=t.transaction(ad,"readonly"),a=o.objectStore(ad).getAll();a.onsuccess=function(){for(var t={},n=0,r=a.result;n<r.length;n++){var o=r[n];t[o.modelPath]=o.modelArtifactsInfo}e(t)},a.onerror=function(e){return t.close(),n(a.error)},o.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return a(this,void 0,void 0,function(){var e=this;return i(this,function(n){var r;return t=(r=t).startsWith(ud.URL_SCHEME)?r.slice(ud.URL_SCHEME.length):r,[2,new Promise(function(n,r){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return sd(o)},o.onsuccess=function(){var e,a=o.result,i=a.transaction(ad,"readwrite"),s=i.objectStore(ad),u=s.get(t);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var o=s.delete(t),i=function(){var o=(e=a.transaction(od,"readwrite")).objectStore(od).delete(t);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(t){return r(u.error)}};o.onsuccess=i,o.onerror=function(t){return i(),a.close(),r(u.error)}},u.onerror=function(t){return a.close(),r(u.error)},i.oncomplete=function(){null==e?a.close():e.oncomplete=function(){return a.close()}}},o.onerror=function(t){return r(o.error)}})]})})},t}();if(c().getBool("IS_BROWSER"))try{ed.registerManager(ud.URL_SCHEME,new ld)}catch(r){}var pd="/",hd="tensorflowjs_models",dd="info",fd="model_topology",vd="weight_specs",md="weight_data",gd="model_metadata";function xd(t){return{info:[hd,t,dd].join(pd),topology:[hd,t,fd].join(pd),weightSpecs:[hd,t,vd].join(pd),weightData:[hd,t,md].join(pd),modelMetadata:[hd,t,gd].join(pd)}}function yd(t){var e=t.split(pd);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(pd)}var bd=function(){function t(t){if(!c().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=xd(this.modelPath)}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){var e,r,o;return i(this,function(a){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),o=Jh(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(t){if(Xh)return n.from(t).toString("base64");for(var e=new Uint8Array(t),r="",o=0,a=e.length;o<a;o++)r+=String.fromCharCode(e[o]);return btoa(r)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e,r,o,a,s,u;return i(this,function(i){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(r=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,null==(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=o,null!=(a=this.LS.getItem(this.keys.modelMetadata))&&(s=JSON.parse(a),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),null==(u=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(Xh){var e=n.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var r=atob(t),o=new Uint8Array(r.length),a=0;a<r.length;++a)o.set([r.charCodeAt(a)],a);return o.buffer}(u),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),wd=function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(bd.URL_SCHEME)?(e=t.slice(bd.URL_SCHEME.length),new bd(e)):null;var e};Zh.registerSaveRouter(wd),Zh.registerLoadRouter(wd);var Cd=function(){function t(){I(c().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),I("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a;return i(this,function(i){for(t={},e=hd+pd,n=pd+dd,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(e)&&o.endsWith(n)&&(a=yd(o),t[a]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},t.prototype.removeModel=function(t){return a(this,void 0,void 0,function(){var e,n;return i(this,function(r){var o;if(t=(o=t).startsWith(bd.URL_SCHEME)?o.slice(bd.URL_SCHEME.length):o,e=xd(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(c().getBool("IS_BROWSER"))try{ed.registerManager(bd.URL_SCHEME,new Cd)}catch(r){}var Ed="model",Rd=".json",Id=".weights.bin";function kd(t){return new Promise(function(t){return setTimeout(t)}).then(t)}var Sd=function(){function t(e){if(!c().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=Ed),this.modelTopologyFileName=e+Rd,this.weightDataFileName=e+Id}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,kd(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return i.sent(),null==t.weightData?[3,4]:((s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=e,[4,kd(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:i.sent(),i.label=4;case 4:return[2,{modelArtifactsInfo:Jh(t)}]}})})},t.URL_SCHEME="downloads://",t}(),Ad=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e,n=this;return i(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,o){var a=new FileReader;a.onload=function(a){var i=JSON.parse(a.target.result),s=i.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var c;try{c=n.checkManifestAndWeightFiles(u,e)}catch(t){return void o(t)}var l=[],p=[],h=[];u.forEach(function(t){t.paths.forEach(function(t){p.push(t),h.push(null)}),l.push.apply(l,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,o=p.indexOf(t);h[o]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:l,weightData:$h(h),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},e.onerror=function(e){return o("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(c[t])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(e){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return Qh(t.name)}),o={},a=0,i=t;a<i.length;a++)i[a].paths.forEach(function(t){var a=Qh(t);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");o[t]=e[r.indexOf(a)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return o},t}();function Nd(t,e,n,r){!function(t){I(null!=t&&Array.isArray(t)&&t.length>0,function(){return"promises must be a none empty array"})}(t),function(t,e){I(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+t}),I(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+e}),I(e>=t,function(){return"startFraction must be no more than endFraction, but got startFraction "+t+" and endFraction "+e})}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(t.map(function(a){return a.then(function(a){var i=n+ ++o/t.length*(r-n);return e(i),a}),a}))}function Td(t,e){return a(this,void 0,void 0,function(){var n,r,o,a,s,u,l,p,h;return i(this,function(i){switch(i.label){case 0:return null==e&&(e={}),n=null==e.fetchFunc?c().platform.fetch:e.fetchFunc,r=t.map(function(t){return n(t,e.requestInit,{isBinary:!0})}),o=0,a=.5,null!=e.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=i.sent(),[3,4];case 2:return[4,Nd(r,e.onProgress,o,a)];case 3:s=i.sent(),i.label=4;case 4:return u=s.map(function(t){return t.arrayBuffer()}),l=.5,p=1,null!=e.onProgress?[3,6]:[4,Promise.all(u)];case 5:return h=i.sent(),[3,8];case 6:return[4,Nd(u,e.onProgress,l,p)];case 7:h=i.sent(),i.label=8;case 8:return[2,h]}})})}function Dd(t){var e=this;return function(n,r,o){return void 0===r&&(r=""),a(e,void 0,void 0,function(){var e,a,s,u,c,l,p,h,d,f;return i(this,function(i){switch(i.label){case 0:if(e=n.map(function(){return!1}),a={},s=null!=o?o.map(function(){return!1}):[],u=[],n.forEach(function(t,n){var r=0;t.weights.forEach(function(t){var i="quantization"in t?t.quantization.dtype:t.dtype,c=Hh[i]*N(t.shape),l=function(){e[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:t,groupOffset:r,sizeBytes:c})};null!=o?o.forEach(function(e,n){e===t.name&&(l(),s[n]=!0)}):l(),u.push(t.name),r+=c})}),!s.every(function(t){return t}))throw c=o.filter(function(t,e){return!s[e]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return l=e.reduce(function(t,e,n){return e&&t.push(n),t},[]),p=[],l.forEach(function(t){n[t].paths.forEach(function(t){var e=r+(r.endsWith("/")?"":"/")+t;p.push(e)})}),[4,t(p)];case 1:return h=i.sent(),d={},f=0,l.forEach(function(t){for(var e=n[t].paths.length,r=0,o=0;o<e;o++)r+=h[f+o].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<e;c++){var l=new Uint8Array(h[f+c]);s.set(l,u),u+=l.byteLength}a[t].forEach(function(t){var e=Kh(i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)d[n]=e[n]}),f+=e}),[2,d]}})})}}Zh.registerSaveRouter(function(t){return c().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Sd.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new Sd(t)}(t.slice(Sd.URL_SCHEME.length)):null});var Fd=function(){function t(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(I("function"==typeof e.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=c().platform.fetch,I(null!=t&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&I(2===t.length,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){var e,n,r,o;return i(this,function(a){switch(a.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n},e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:Jh(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=i.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.json()];case 3:return e=i.sent(),[3,5];case 4:throw i.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=e.modelTopology,o=e.weightsManifest,a=e.generatedBy,s=e.convertedBy,u=e.format,c=e.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:h=i.sent(),l=h[0],p=h[1],i.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:p,userDefinedMetadata:c,generatedBy:a,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(t){return a(this,void 0,void 0,function(){var e,n,r,o,a,s,u,c,l,p,h;return i(this,function(i){switch(i.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=function(t){var e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),r=n[0],o=n[1],a=this.weightPathPrefix||r,s=[],u=0,c=t;u<c.length;u++)l=c[u],s.push.apply(s,l.weights);return p=[],t.forEach(function(t){t.paths.forEach(function(t){p.push(a+t+o)})}),[4,Td(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=i.sent(),[2,[s,$h(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function _d(t){return null!=t.match(Fd.URL_SCHEME_REGEX)}var Od=function(t,e){return"undefined"==typeof fetch?null:(Array.isArray(t)?t.every(function(t){return _d(t)}):_d(t))?Md(t,{onProgress:e}):null};function Md(t,e){return new Fd(t,e)}Zh.registerSaveRouter(Od),Zh.registerLoadRouter(Od);var Bd=function(){function t(t){this.modelArtifacts=t}return t.prototype.load=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,this.modelArtifacts]})})},t}(),Pd=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.saveHandler(t)]})})},t}(),Ld=Object.freeze({browserFiles:function(t){return new Ad(t)},browserHTTPRequest:function(t,e){return Md(t,e)},concatenateArrayBuffers:$h,decodeWeights:Kh,encodeWeights:function(t,e){return a(this,void 0,void 0,function(){var n,r,o,s,u,c=this;return i(this,function(l){switch(l.label){case 0:for(n=[],r=[],o=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t),s=function(s){var u=o[s],l=Array.isArray(t)?t[s].tensor:t[u];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+u+"': "+l.dtype);var p={name:u,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var h=new Promise(function(t){return a(c,void 0,void 0,function(){var e,n,r,o,a,s,u;return i(this,function(i){switch(i.label){case 0:return[4,l.bytes()];case 1:for(e=i.sent(),n=e.reduce(function(t,e){return t+e.length},0)+qh*e.length,r=new Uint8Array(n),o=0,a=0;a<e.length;a++)s=e[a],u=new Uint8Array(new Uint32Array([s.length]).buffer),r.set(u,o),o+=qh,r.set(s,o),o+=s.length;return t(r),[2]}})})});r.push(h)}else r.push(l.data());null!=e&&(p.group=e),n.push(p)},u=0;u<o.length;++u)s(u);return[4,Promise.all(r)];case 1:return[2,{data:jh(l.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new Bd(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Bd({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Bd({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Zh.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Jh,getSaveHandlers:function(t){return Zh.getSaveHandlers(t)},http:Md,isHTTPScheme:_d,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),a(this,void 0,void 0,function(){return i(this,function(o){return[2,Dd(function(t){return Td(t,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Zh.registerLoadRouter(t)},registerSaveRouter:function(t){return Zh.registerSaveRouter(t)},weightsLoaderFactory:Dd,withSaveHandler:function(t){return new Pd(t)},copyModel:function(t,e){return a(this,void 0,void 0,function(){return i(this,function(n){return[2,rd(t,e,!1)]})})},listModels:function(){return a(this,void 0,void 0,function(){var t,e,n,r,o,a,s;return i(this,function(i){switch(i.label){case 0:t=ed.getSchemes(),e={},n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],[4,ed.getManager(o).listModels()]):[3,4];case 2:for(s in a=i.sent())e[o+td+s]=a[s];i.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return a(this,void 0,void 0,function(){return i(this,function(n){return[2,rd(t,e,!0)]})})},removeModel:function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){return e=nd(t),[2,ed.getManager(e.scheme).removeModel(e.path)]})})}});exports.io=Ld;var Wd,zd=Dn({confusionMatrix_:function(t,e,n){var r=yn(t,"labels","confusionMatrix"),o=yn(e,"predictions","confusionMatrix");I(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),I(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),I(1===o.rank,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),I(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),I(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=Sc(r.asType("int32"),n),i=Sc(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}}),Ud=Object.freeze({confusionMatrix:zd});exports.math=Ud;var Vd=Dn({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)a=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);i=!0}if(o&&o&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=d("FromPixels",Ut.backendName))return Ut.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,c=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],l=c[0],p=c[1];if(i?s=t.getContext("2d").getImageData(0,0,l,p).data:r||n?s=t.data:(a||o)&&(null==Wd&&(Wd=document.createElement("canvas").getContext("2d")),Wd.canvas.width=l,Wd.canvas.height=p,Wd.drawImage(t,0,0,l,p),s=Wd.getImageData(0,0,l,p).data),4===e)u=new Int32Array(s);else{var h=l*p;u=new Int32Array(h*e);for(var f=0;f<h;f++)for(var v=0;v<e;++v)u[f*e+v]=s[4*f+v]}return zn(u,[p,l,e],"int32")}}),Gd=Object.freeze({toPixels:function(t,e){return a(this,void 0,void 0,function(){var n,r,o,a,s,u,c,l,p,h,d,f,v,m,g,x,y,b,w,C,E,R,I;return i(this,function(i){switch(i.label){case 0:if(n=yn(t,"img","toPixels"),t instanceof Rt||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(s=2===n.rank?1:n.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,n.data()];case 1:return u=i.sent(),c=n.min(),l=n.max(),[4,Promise.all([c.data(),l.data()])];case 2:if(p=i.sent(),h=p[0],d=p[1],f=h[0],v=d[0],c.dispose(),l.dispose(),"float32"===n.dtype){if(f<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+v+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+v+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(a*o*4),x=0;x<o*a;++x)y=void 0,b=void 0,w=void 0,C=void 0,1===s?(y=u[x]*m,b=u[x]*m,w=u[x]*m,C=255):3===s?(y=u[3*x]*m,b=u[3*x+1]*m,w=u[3*x+2]*m,C=255):4===s&&(y=u[4*x]*m,b=u[4*x+1]*m,w=u[4*x+2]*m,C=u[4*x+3]*m),g[0+(E=4*x)]=Math.round(y),g[E+1]=Math.round(b),g[E+2]=Math.round(w),g[E+3]=Math.round(C);return null!=e&&(e.width=a,e.height=o,R=e.getContext("2d"),I=new ImageData(g,a,o),R.putImageData(I,0,0)),n!==t&&n.dispose(),[2,g]}})})},fromPixels:Vd}),Hd=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),qd=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Kd(t){I(null!=t.className,function(){return"Class being registered does not have the static className property defined."}),I("string"==typeof t.className,function(){return"className is required to be a string, but got type "+typeof t.className}),I(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),qd.register(t)}exports.browser=Gd;var jd=Object.freeze({Serializable:Hd,SerializationMap:qd,registerClass:Kd}),Xd="1.7.4";exports.version_core=Xd,exports.serialization=jd;var Yd=Object.freeze({gpgpu_util:Ss,webgl_util:Ke,forceHalfFloat:function(){c().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Gu,setWebGLContext:Yt,GPGPUContext:As}),$d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),o=r.value,a=r.grads;if(null!=n){var i=n.map(function(t){return{name:t.name,tensor:a[t.name]}});this.applyGradients(i)}else this.applyGradients(a);return rn(a),e?o:(o.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,e){return ia(t,e)},e.prototype.dispose=function(){null!=this.iterations_&&rn(this.iterations_)},e.prototype.saveIterations=function(){return a(this,void 0,void 0,function(){return i(this,function(t){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Pn(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return e=this,[4,t[0].tensor.data()];case 1:return e.iterations_=n.sent()[0],[2,t.slice(1)]}})})},e}(Hd);exports.Optimizer=$d,exports.webgl=Yd,Object.defineProperty($d,Symbol.hasInstance,{value:function(t){return null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients}});var Qd=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.learningRate=e,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Ut.backend.epsilon()),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:nn(function(){return Qn(o).variable(!1)})}),null==e.accumulatedUpdates[r]&&(e.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:nn(function(){return Qn(o).variable(!1)})});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=e.accumulatedGrads[r].variable,s=e.accumulatedUpdates[r].variable;nn(function(){var t=i.mul(e.rho).add(a.square().mul(1-e.rho)),n=s.add(e.epsilon).sqrt().div(i.add(e.epsilon).sqrt()).mul(a),r=s.mul(e.rho).add(n.square().mul(1-e.rho));i.assign(t),s.assign(r);var u=n.mul(-e.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedUpdates&&(rn(this.accumulatedGrads.map(function(t){return t.variable})),rn(this.accumulatedUpdates.map(function(t){return t.variable})))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),e=t.length/2,this.accumulatedGrads=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedUpdates=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="Adadelta",e}($d);exports.AdadeltaOptimizer=Qd,Kd(Qd);var Jd=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulatedGrads[r]&&(e.accumulatedGrads[r]={originalName:n+"/accumulator",variable:nn(function(){return jn(o.shape,e.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=e.accumulatedGrads[r].variable;nn(function(){var t=i.add(a.square());i.assign(t);var n=a.div(t.add(Ut.backend.epsilon()).sqrt()).mul(-e.learningRate).add(o);o.assign(n)})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedGrads&&rn(this.accumulatedGrads.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulatedGrads=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="Adagrad",e}($d);exports.AdagradOptimizer=Jd,Kd(Jd);var Zd=function(t){function e(e,n,r,o){void 0===o&&(o=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],nn(function(){a.accBeta1=Pn(n).variable(),a.accBeta2=Pn(r).variable()}),null==o&&(a.epsilon=Ut.backend.epsilon()),a}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);nn(function(){var r=Po(1,e.accBeta1),o=Po(1,e.accBeta2);n.forEach(function(n,a){var i=Ut.registeredVariables[n];null==e.accumulatedFirstMoment[a]&&(e.accumulatedFirstMoment[a]={originalName:n+"/m",variable:nn(function(){return Qn(i).variable(!1)})}),null==e.accumulatedSecondMoment[a]&&(e.accumulatedSecondMoment[a]={originalName:n+"/v",variable:nn(function(){return Qn(i).variable(!1)})});var s=Array.isArray(t)?t[a].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[a].variable,c=e.accumulatedSecondMoment[a].variable,l=u.mul(e.beta1).add(s.mul(1-e.beta1)),p=c.mul(e.beta2).add(s.square().mul(1-e.beta2)),h=l.div(r),d=p.div(o);u.assign(l),c.assign(p);var f=h.div(d.sqrt().add(e.epsilon)).mul(-e.learningRate).add(i);i.assign(f)}}),e.accBeta1.assign(e.accBeta1.mul(e.beta1)),e.accBeta2.assign(e.accBeta2.mul(e.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&rn(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedSecondMoment&&rn(this.accumulatedSecondMoment.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){var e,n=this;return i(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),nn(function(){n.accBeta1.assign(Oo(n.beta1,n.iterations_+1)),n.accBeta2.assign(Oo(n.beta2,n.iterations_+1))}),e=t.length/2,this.accumulatedFirstMoment=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedSecondMoment=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="Adam",e}($d);exports.AdamOptimizer=Zd,Kd(Zd);var tf=function(t){function e(e,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=0);var i=t.call(this)||this;return i.learningRate=e,i.beta1=n,i.beta2=r,i.epsilon=o,i.decay=a,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],nn(function(){i.iteration=Pn(0).variable(),i.accBeta1=Pn(n).variable()}),null==o&&(i.epsilon=Ut.backend.epsilon()),i}return o(e,t),e.prototype.applyGradients=function(t){var e=this,n=Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t);nn(function(){var r=Po(1,e.accBeta1),o=Wo(-e.learningRate,e.iteration.mul(e.decay).add(1));n.forEach(function(n,a){var i=Ut.registeredVariables[n];null==e.accumulatedFirstMoment[a]&&(e.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Qn(i).variable(!1)}),null==e.accumulatedWeightedInfNorm[a]&&(e.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Qn(i).variable(!1)});var s=Array.isArray(t)?t[a].tensor:t[n];if(null!=s){var u=e.accumulatedFirstMoment[a].variable,c=e.accumulatedWeightedInfNorm[a].variable,l=u.mul(e.beta1).add(s.mul(1-e.beta1)),p=c.mul(e.beta2),h=s.abs(),d=p.maximum(h);u.assign(l),c.assign(d);var f=o.div(r).mul(l.div(d.add(e.epsilon))).add(i);i.assign(f)}}),e.iteration.assign(e.iteration.add(1)),e.accBeta1.assign(e.accBeta1.mul(e.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&rn(this.accumulatedFirstMoment.map(function(t){return t.variable})),null!=this.accumulatedWeightedInfNorm&&rn(this.accumulatedWeightedInfNorm.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(t){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="Adamax",e}($d);exports.AdamaxOptimizer=tf,Kd(tf);var ef=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Array.isArray(t)?t[r].tensor:t[n];if(null!=o){var a=Ut.registeredVariables[n];nn(function(){var t=e.c.mul(o).add(a);a.assign(t)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=on(Pn(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:if(0!==(t=e.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGD",e}($d);exports.SGDOptimizer=ef,Kd(ef);var nf=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this,e)||this;return o.learningRate=e,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=Pn(o.momentum),o}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulations[r]&&(e.accumulations[r]={originalName:n+"/momentum",variable:nn(function(){return Qn(o).variable(!1)})});var a=e.accumulations[r].variable,i=Array.isArray(t)?t[r].tensor:t[n];null!=i&&nn(function(){var t,n=e.m.mul(a).add(i);t=e.useNesterov?e.c.mul(i.add(n.mul(e.m))).add(o):e.c.mul(n).add(o),a.assign(n),o.assign(t)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&rn(this.accumulations.map(function(t){return t.variable}))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.extractIterations(t)];case 1:return t=e.sent(),this.accumulations=t.map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="Momentum",e}(ef);exports.MomentumOptimizer=nf,Kd(nf);var rf=function(t){function e(e,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===a&&(a=!1);var i=t.call(this)||this;if(i.learningRate=e,i.decay=n,i.momentum=r,i.epsilon=o,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=a,null==o&&(i.epsilon=Ut.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return o(e,t),e.prototype.applyGradients=function(t){var e=this;(Array.isArray(t)?t.map(function(t){return t.name}):Object.keys(t)).forEach(function(n,r){var o=Ut.registeredVariables[n];null==e.accumulatedMeanSquares[r]&&(e.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:nn(function(){return Qn(o).variable(!1)})}),null==e.accumulatedMoments[r]&&(e.accumulatedMoments[r]={originalName:n+"/momentum",variable:nn(function(){return Qn(o).variable(!1)})}),null==e.accumulatedMeanGrads[r]&&e.centered&&(e.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:nn(function(){return Qn(o).variable(!1)})});var a=Array.isArray(t)?t[r].tensor:t[n];if(null!=a){var i=e.accumulatedMeanSquares[r].variable,s=e.accumulatedMoments[r].variable;nn(function(){var t=i.mul(e.decay).add(a.square().mul(1-e.decay));if(e.centered){var n=e.accumulatedMeanGrads[r].variable,u=n.mul(e.decay).add(a.mul(1-e.decay)),c=s.mul(e.momentum).add(a.mul(e.learningRate).div(t.sub(u.square().add(e.epsilon)).sqrt()));i.assign(t),n.assign(u),s.assign(c);var l=o.sub(c);o.assign(l)}else{var p=i.mul(e.decay).add(a.square().mul(1-e.decay));c=s.mul(e.momentum).add(a.mul(e.learningRate).div(p.add(e.epsilon).sqrt())),i.assign(p),s.assign(c),l=o.sub(c),o.assign(l)}})}}),this.incrementIterations()},e.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&rn(this.accumulatedMeanSquares.map(function(t){return t.variable})),null!=this.accumulatedMeanGrads&&this.centered&&rn(this.accumulatedMeanGrads.map(function(t){return t.variable})),null!=this.accumulatedMoments&&rn(this.accumulatedMoments.map(function(t){return t.variable}))},e.prototype.getWeights=function(){return a(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(t.map(function(t){return{name:t.originalName,tensor:t.variable}}))]}})})},e.prototype.setWeights=function(t){return a(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(t)];case 1:return t=n.sent(),e=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.accumulatedMoments=t.slice(e,2*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(function(t){return{originalName:t.name,variable:t.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSProp",e}($d);exports.RMSPropOptimizer=rf,Kd(rf);var of=function(){function t(){}return t.sgd=function(t){return new ef(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new nf(t,e,n)},t.rmsprop=function(t,e,n,r,o){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new rf(t,e,n,r,o)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Zd(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new Qd(t,e,n)},t.adamax=function(t,e,n,r,o){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new tf(t,e,n,r,o)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new Jd(t,e)},t}(),af={sgd:of.sgd,momentum:of.momentum,adadelta:of.adadelta,adagrad:of.adagrad,rmsprop:of.rmsprop,adamax:of.adamax,adam:of.adam},sf="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(t){return t()};function uf(){return new Promise(function(t){return sf(function(){return t()})})}exports.train=af,Rt.prototype.add=function(t){return Pr(this,t)},Rt.prototype.broadcastTo=function(t){return vc(this,t)},Rt.prototype.div=function(t){return Wo(this,t)},Rt.prototype.divNoNan=function(t){return Ec(this,t)},Rt.prototype.squaredDifference=function(t){return jc(this,t)},Rt.prototype.tile=function(t){return Rc(this,t)},Rt.prototype.oneHot=function(t,e,n){return void 0===e&&(e=1),void 0===n&&(n=0),Sc(this,t,e,n)},Rt.prototype.transpose=function(t){return pa(this,t)},Rt.prototype.pad=function(t,e){return Ac(this,t,e)},Rt.prototype.batchNorm=function(t,e,n,r,o){return ac(this,t,e,n,r,o)},Ct=fh;
},{"crypto":"sC8V","node-fetch":"sC8V","util":"sC8V","process":"g5IB","buffer":"aMB2"}],"rGPK":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.GraphModel=void 0,exports.deregisterOp=m,exports.loadGraphModel=Ue,exports.registerOp=i,exports.version_converter=void 0;var t,a,r=require("@tensorflow/tfjs-core"),n=function(){return(n=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t,a,r){return new(a||(a=Promise))(function(n,s){function o(e){try{i(r.next(e))}catch(e){s(e)}}function p(e){try{i(r.throw(e))}catch(e){s(e)}}function i(e){e.done?n(e.value):new a(function(t){t(e.value)}).then(o,p)}i((r=r.apply(e,t||[])).next())})}function o(e,t){var a,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function p(s){return function(p){return function(s){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{a=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,p])}}}!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(t||(t={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(a||(a={}));var p={};function i(e,t){var a={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};p[e]=a}function u(e){return p[e]}function m(e){delete p[e]}function c(e,t,a,r){var n=t.inputParams[e];if(n&&void 0!==n.inputIndexStart){var s=n.inputIndexStart,o=0===n.inputIndexEnd?void 0:void 0===n.inputIndexEnd?s+1:n.inputIndexEnd;if("tensor"===n.type)return d(t.inputNames[n.inputIndexStart],a,r);if("tensors"===n.type)return t.inputNames.slice(s,o).map(function(e){return d(e,a,r)});var p=Array.prototype.slice.call(d(t.inputNames.slice(s)[0],a,r).dataSync());return"number"===n.type?p[0]:p}var i=t.attrParams[e];return i&&i.value}function d(e,t,a){var r=h(e),n=r[0],s=r[1],o=a.currentContextIds.find(function(e){return!!t[f(n,e)]});return void 0!==o?t[f(n,o)][s]:void 0}function y(e,t,a){return t[f(e,a.currentContextId)]}function l(e,t){var a=h(e),r=a[0],n=a[1];return[f(r,t&&t.currentContextId),n]}function f(e,t){return t?e+"-"+t:e}function h(e){var t=e.lastIndexOf(":");return-1===t?[e,0]:[e.substring(0,t),Number(e.substring(t+1))]}function N(e,t){for(var a=[],r=0;r<e.length;r+=t)a.push(e.slice(r,r+t));return a}var g=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],b=Object.freeze({json:g}),x=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],v=Object.freeze({json:x}),T=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],O=Object.freeze({json:T}),S=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],_=Object.freeze({json:S}),w=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],A=Object.freeze({json:w}),D=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],E=Object.freeze({json:D}),I=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],V=Object.freeze({json:I}),M=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],k=Object.freeze({json:M}),C=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],z=Object.freeze({json:C}),F=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],j=Object.freeze({json:F}),P=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],R=Object.freeze({json:P}),L=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],B=Object.freeze({json:L}),q=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],U=Object.freeze({json:q}),G=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],W=Object.freeze({json:G}),H=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Q=Object.freeze({json:H}),K=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],X=Object.freeze({json:K}),Z=function(){function e(){var e=[b,v,O,_,A,E,V,j,z,k,R,B,U,W,Q,X],t=[].concat.apply([],e.map(function(e){return e.json}));this.opMappers=t.reduce(function(e,t){return e[t.tfOpName]=t,e},{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.transformGraph=function(e,t){var a=this;void 0===t&&(t={});var r=[],n=[],s=e.node.reduce(function(e,t){return e[t.name]=a.mapNode(t),t.op.startsWith("Placeholder")&&r.push(e[t.name]),"Const"===t.op&&n.push(e[t.name]),e},{}),o=[],p=[],i={},u={};null!=t&&(i=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));var m=Object.keys(s);return m.forEach(function(e){var t=s[e];t.inputNames.forEach(function(e){var a=l(e)[0];t.inputs.push(s[a]),s[a].children.push(t)})}),0===Object.keys(u).length?m.forEach(function(e){var t=s[e];0===t.children.length&&p.push(t)}):Object.keys(u).forEach(function(e){var t=l(e)[0],a=s[t];null!=a&&(a.signatureKey=u[e],p.push(a))}),Object.keys(i).length>0?Object.keys(i).forEach(function(e){var t=l(e)[0],a=s[t];a&&(a.signatureKey=i[e],o.push(a))}):o=r,{nodes:s,inputs:o,outputs:p,weights:n,placeholders:r,signature:t}},e.prototype.mapSignatureEntries=function(e){return Object.keys(e||{}).reduce(function(t,a){return t[e[a].name]=a,t},{})},e.prototype.mapNode=function(e){var t=u(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var a={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(function(e){return e.startsWith("^")?e.substr(1):e}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(a.inputParams=t.inputs.reduce(function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e},{})),null!=t.attrs&&(a.attrParams=t.attrs.reduce(function(t,a){var r=a.type,n=void 0;switch(a.type){case"string":void 0===(n=$(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=$(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":void 0===(n=ie(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=ie(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(n=te(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(n=te(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(n=pe(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=pe(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(n=ee(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=ee(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":void 0===(n=me(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=me(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(n=oe(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=oe(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":void 0===(n=ue(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=ue(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(n=re(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=re(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":void 0===(n=ne(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(n=ne(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+a.type+" for op: "+e.op)}return t[a.name]={value:n,type:r},t},{})),a},e}();function Y(t){var a=(0,r.env)().global;if(void 0!==a.atob)return a.atob(t);if(void 0!==e)return new e(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function J(e,t){var a=Array.isArray(e)?String.fromCharCode.apply(null,e):Y(e);return t?a:a.toLowerCase()}function $(e,t,a,r){void 0===r&&(r=!1);var n=e[t];return null!=n?J(n.s,r):a}function ee(e,t,a){var r=e[t];return r?r.b:a}function te(e,t,a){var r=e[t]||{},n=null!=r.i?r.i:null!=r.f?r.f:a;return"number"==typeof n?n:parseInt(n,10)}function ae(e){switch("string"==typeof e&&(e=t[e]),e){case t.DT_FLOAT:return"float32";case t.DT_INT32:case t.DT_INT64:case t.DT_INT8:case t.DT_UINT8:return"int32";case t.DT_BOOL:return"bool";case t.DT_DOUBLE:return"float32";case t.DT_STRING:return"string";default:return null}}function re(e,t,a){var r=e[t];return r&&r.type?ae(r.type):a}function ne(e,t,a){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map(function(e){return ae(e)}):a}function se(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)}):[]}function oe(e,t,a){var r=e[t];return r&&r.shape?se(r.shape):a}function pe(e,t,a){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(e){return"number"==typeof e?e:parseInt(e,10)}):a}function ie(e,t,a,r){void 0===r&&(r=!1);var n=e[t];return n&&n.list&&n.list.s?n.list.s.map(function(e){return J(e,r)}):a}function ue(e,t,a){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(function(e){return se(e)}):a}function me(e,t,a){var r=e[t];return r&&r.list&&r.list.b?r.list.b:a}var ce=function(){function e(e,t,a){var r=this;this.node=e,this.tensorMap=t,this.context=a,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(function(e){return r.getInput(e)}),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(function(e,t){return e[t]=r.getAttr(t),e},{}))}return e.prototype.getInput=function(e){return d(e,this.tensorMap,this.context)},e.prototype.getAttr=function(e,t){var a=this.node.rawAttrs[e];if(null!=a.tensor)return d(e,this.tensorMap,this.context);if(null!=a.i||null!=a.f)return te(this.node.rawAttrs,e,t);if(null!=a.s)return $(this.node.rawAttrs,e,t);if(null!=a.b)return ee(this.node.rawAttrs,e,t);if(null!=a.shape)return oe(this.node.rawAttrs,e,t);if(null!=a.type)return re(this.node.rawAttrs,e,t);if(null!=a.list){if(null!=a.list.i||null!=a.list.f)return pe(this.node.rawAttrs,e,t);if(null!=a.list.s)return ie(this.node.rawAttrs,e,t);if(null!=a.list.shape)return ue(this.node.rawAttrs,e,t);if(null!=a.list.b)return me(this.node.rawAttrs,e,t);if(null!=a.list.type)return ne(this.node.rawAttrs,e,t)}return t},e}(),de=function(e,t,a){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[(0,r.add)(c("a",e,t,a),c("b",e,t,a))];case"AddN":return[(0,r.addN)(c("tensors",e,t,a))];case"FloorMod":case"Mod":return[(0,r.mod)(c("a",e,t,a),c("b",e,t,a))];case"Mul":return[(0,r.mul)(c("a",e,t,a),c("b",e,t,a))];case"RealDiv":case"Div":return[(0,r.div)(c("a",e,t,a),c("b",e,t,a))];case"DivNoNan":return[(0,r.divNoNan)(c("a",e,t,a),c("b",e,t,a))];case"FloorDiv":return[(0,r.floorDiv)(c("a",e,t,a),c("b",e,t,a))];case"Sub":return[(0,r.sub)(c("a",e,t,a),c("b",e,t,a))];case"Minimum":return[(0,r.minimum)(c("a",e,t,a),c("b",e,t,a))];case"Maximum":return[(0,r.maximum)(c("a",e,t,a),c("b",e,t,a))];case"Pow":return[(0,r.pow)(c("a",e,t,a),c("b",e,t,a))];case"SquaredDifference":return[(0,r.squaredDifference)(c("a",e,t,a),c("b",e,t,a))];default:throw TypeError("Node type "+e.op+" is not implemented")}},ye=function(e,t,a){switch(e.op){case"Abs":case"ComplexAbs":return[(0,r.abs)(c("x",e,t,a))];case"Acos":return[(0,r.acos)(c("x",e,t,a))];case"Acosh":return[(0,r.acosh)(c("x",e,t,a))];case"Asin":return[(0,r.asin)(c("x",e,t,a))];case"Asinh":return[(0,r.asinh)(c("x",e,t,a))];case"Atan":return[(0,r.atan)(c("x",e,t,a))];case"Atan2":return[(0,r.atan2)(c("x",e,t,a),c("y",e,t,a))];case"Atanh":return[(0,r.atanh)(c("x",e,t,a))];case"Ceil":return[(0,r.ceil)(c("x",e,t,a))];case"Complex":return[(0,r.complex)(c("real",e,t,a),c("imag",e,t,a))];case"Cos":return[(0,r.cos)(c("x",e,t,a))];case"Cosh":return[(0,r.cosh)(c("x",e,t,a))];case"Elu":return[(0,r.elu)(c("x",e,t,a))];case"Erf":return[(0,r.erf)(c("x",e,t,a))];case"Exp":return[(0,r.exp)(c("x",e,t,a))];case"Expm1":return[(0,r.expm1)(c("x",e,t,a))];case"Floor":return[(0,r.floor)(c("x",e,t,a))];case"Log":return[(0,r.log)(c("x",e,t,a))];case"Log1p":return[(0,r.log1p)(c("x",e,t,a))];case"Imag":return[(0,r.imag)(c("x",e,t,a))];case"Neg":return[(0,r.neg)(c("x",e,t,a))];case"Reciprocal":return[(0,r.reciprocal)(c("x",e,t,a))];case"Real":return[(0,r.real)(c("x",e,t,a))];case"Relu":return[(0,r.relu)(c("x",e,t,a))];case"Round":return[(0,r.round)(c("x",e,t,a))];case"Selu":return[(0,r.selu)(c("x",e,t,a))];case"Sigmoid":return[(0,r.sigmoid)(c("x",e,t,a))];case"Sin":return[(0,r.sin)(c("x",e,t,a))];case"Sign":return[(0,r.sign)(c("x",e,t,a))];case"Sinh":return[(0,r.sinh)(c("x",e,t,a))];case"Softplus":return[(0,r.softplus)(c("x",e,t,a))];case"Sqrt":return[(0,r.sqrt)(c("x",e,t,a))];case"Square":return[(0,r.square)(c("x",e,t,a))];case"Tanh":return[(0,r.tanh)(c("x",e,t,a))];case"Tan":return[(0,r.tan)(c("x",e,t,a))];case"Relu6":case"ClipByValue":return[(0,r.clipByValue)(c("x",e,t,a),c("clipValueMin",e,t,a),c("clipValueMax",e,t,a))];case"Rsqrt":return[(0,r.rsqrt)(d(e.inputNames[0],t,a))];case"Prod":return[(0,r.prod)(c("x",e,t,a),c("axes",e,t,a))];case"LeakyRelu":return[(0,r.leakyRelu)(c("x",e,t,a),c("alpha",e,t,a))];case"Prelu":return[(0,r.prelu)(c("x",e,t,a),c("alpha",e,t,a))];default:throw TypeError("Node type "+e.op+" is not implemented")}},le=function(){function e(t,a,r,n,s,o,p){this.name=t,this.dtype=a,this.maxSize=r,this.elementShape=n,this.identicalElementShapes=s,this.dynamicSize=o,this.clearAfterRead=p,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach(function(e){return e.tensor.dispose()}),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map(function(e){return t.read(e)})},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var a=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),a&&a.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(a&&a.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");a.tensor=t,a.written=!0,this.tensors[e]=a},e.prototype.writeMany=function(e,t){var a=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach(function(e,r){return a.write(e,t[r])})},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var a=0;a<this.size();a++)e.push(a)}if(0===e.length)return(0,r.tensor)([],[0].concat(this.elementShape));var n=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,r.stack)(n,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return(0,r.tensor)([],[0].concat(this.elementShape));for(var t=[],a=0;a<this.size();a++)t.push(a);var n=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+n[0].shape+")"),(0,r.concat)(n,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var a=Math.max.apply(Math,e);if(!this.dynamicSize&&a>=this.maxSize)throw new Error("Max index must be < array size ("+a+"  vs. "+this.maxSize+")");this.writeMany(e,(0,r.unstack)(t,0))},e.prototype.split=function(e,t){var a=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var n=0,s=e.map(function(e){return n+=e});if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+n+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var o=0===n?0:t.size/n,p=[];(0,r.tidy)(function(){t=t.reshape([1,n,o]);for(var i=0;i<e.length;++i){var u=[0,0===i?0:s[i-1],0],m=[1,e[i],o];p[i]=(0,r.slice)(t,u,m).reshape(a.elementShape)}return p});for(var i=[],u=0;u<e.length;u++)i[u]=u;this.writeMany(i,p)},e.prototype.assertShapesMatchAllowUndefinedSize=function(e,t,a){void 0===a&&(a=""),r.util.assert(this.shapesEqualAllowUndefinedSize(e,t),function(){return a+" Shapes "+e+" and "+t+" must match"})},e.prototype.shapesEqualAllowUndefinedSize=function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(-1!==e[a]&&-1!==t[a]&&e[a]!==t[a])return!1;return!0},e.nextId=0,e}(),fe=void 0,he=function(e,t,a){return s(fe,void 0,void 0,function(){var n,s,p,i,u,m,y,l,f,h,N,g,b,x,v,T,O,S,_,w,A,D,E,I,V,M,k,C,z,F,j,P,R,L,B;return o(this,function(o){switch(o.label){case 0:switch(e.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[c("pred",e,t,a).clone()]];case 2:return n=c("pred",e,t,a),s=c("data",e,t,a),[4,n.data()];case 3:return[2,o.sent()[0]?[void 0,s.clone()]:[s.clone(),void 0]];case 4:return[2,(p=e.inputNames.find(function(e){return void 0!==d(e,t,a)}))?[d(p,t,a).clone()]:void 0];case 5:return i=c("frameName",e,t,a),u=c("tensor",e,t,a),a.enterFrame(i),[2,[u.clone()]];case 6:return m=c("tensor",e,t,a),a.exitFrame(),[2,[m.clone()]];case 7:return y=c("tensor",e,t,a),a.nextIteration(),[2,[y.clone()]];case 8:return l=c("size",e,t,a),f=c("dtype",e,t,a),h=c("elementShape",e,t,a),N=c("dynamicSize",e,t,a),g=c("clearAfterRead",e,t,a),b=c("identicalElementShapes",e,t,a),x=c("name",e,t,a),v=new le(x,f,l,h,b,N,g),a.addTensorArray(v),[2,[(0,r.scalar)(v.id),(0,r.scalar)(1)]];case 9:return T=c("tensorArrayId",e,t,a),O=c("index",e,t,a),S=c("tensor",e,t,a),a.getTensorArray(T).write(O,S),[2,[(0,r.scalar)(1)]];case 10:return _=c("tensorArrayId",e,t,a),w=c("index",e,t,a),[2,[a.getTensorArray(_).read(w)]];case 11:return A=c("tensorArrayId",e,t,a),D=c("indices",e,t,a),E=c("dtype",e,t,a),[2,[a.getTensorArray(A).gather(D,E)]];case 12:return I=c("tensorArrayId",e,t,a),V=c("indices",e,t,a),M=c("tensor",e,t,a),a.getTensorArray(I).scatter(V,M),[2,[(0,r.scalar)(1)]];case 13:return k=c("tensorArrayId",e,t,a),C=a.getTensorArray(k),z=c("dtype",e,t,a),[2,[C.concat(z)]];case 14:return F=c("tensorArrayId",e,t,a),j=c("tensor",e,t,a),P=c("lengths",e,t,a),a.getTensorArray(F).split(P,j),[2,[(0,r.scalar)(1)]];case 15:return R=c("tensorArrayId",e,t,a),L=a.getTensorArray(R),[2,[(0,r.scalar)(L.size(),"int32")]];case 16:return B=c("tensorArrayId",e,t,a),a.getTensorArray(B).clearAndClose(),[2,[(0,r.scalar)(0)]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}})})},Ne=function(e,t,a){switch(e.op){case"Conv1D":var n=c("stride",e,t,a),s=c("pad",e,t,a),o=c("dataFormat",e,t,a).toUpperCase(),p=c("dilation",e,t,a);return[(0,r.conv1d)(c("x",e,t,a),c("filter",e,t,a),n,s,o,p)];case"Conv2D":n=c("strides",e,t,a),s=c("pad",e,t,a),o=c("dataFormat",e,t,a).toUpperCase();var i=c("dilations",e,t,a);return[(0,r.conv2d)(c("x",e,t,a),c("filter",e,t,a),[n[1],n[2]],s,o,[i[1],i[2]])];case"_FusedConv2D":case"FusedDepthwiseConv2dNative":var u=c("fusedOps",e,t,a),m=u[0],d=u[1],y="biasadd"===m,l="prelu"===d,f="fusedbatchnorm"===m,h=c("numArgs",e,t,a);if(y){if(l&&2!==h)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&1!==h)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(f)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");n=c("strides",e,t,a),s=c("pad",e,t,a),o=c("dataFormat",e,t,a).toUpperCase(),i=c("dilations",e,t,a);var N=c("args",e,t,a),g=N[0],b=N[1];return[("_FusedConv2D"===e.op?r.fused.conv2d:r.fused.depthwiseConv2d)({x:c("x",e,t,a),filter:c("filter",e,t,a),strides:[n[1],n[2]],pad:s,dataFormat:o,dilations:[i[1],i[2]],bias:g,activation:d,preluActivationWeights:b})];case"Conv2DBackpropInput":case"Conv2dTranspose":var x=c("outputShape",e,t,a);return n=c("strides",e,t,a),s=c("pad",e,t,a),[(0,r.conv2dTranspose)(c("x",e,t,a),c("filter",e,t,a),x,[n[1],n[2]],s)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return n=c("strides",e,t,a),s=c("pad",e,t,a),i=c("dilations",e,t,a),o=c("dataFormat",e,t,a).toUpperCase(),[(0,r.depthwiseConv2d)(c("input",e,t,a),c("filter",e,t,a),[n[1],n[2]],s,o,[i[1],i[2]])];case"Conv3D":return n=c("strides",e,t,a),s=c("pad",e,t,a),o=c("dataFormat",e,t,a).toUpperCase(),i=c("dilations",e,t,a),[(0,r.conv3d)(c("x",e,t,a),c("filter",e,t,a),[n[1],n[2],n[3]],s,o,[i[1],i[2],i[3]])];case"AvgPool":n=c("strides",e,t,a),s=c("pad",e,t,a);var v=c("kernelSize",e,t,a);return[(0,r.avgPool)(c("x",e,t,a),[v[1],v[2]],[n[1],n[2]],s)];case"MaxPool":return n=c("strides",e,t,a),s=c("pad",e,t,a),v=c("kernelSize",e,t,a),[(0,r.maxPool)(c("x",e,t,a),[v[1],v[2]],[n[1],n[2]],s)];case"MaxPoolWithArgmax":n=c("strides",e,t,a),s=c("pad",e,t,a),v=c("kernelSize",e,t,a);var T=c("includeBatchInIndex",e,t,a),O=(0,r.maxPoolWithArgmax)(c("x",e,t,a),[v[1],v[2]],[n[1],n[2]],s,T);return[O.result,O.indexes];case"AvgPool3D":return n=c("strides",e,t,a),s=c("pad",e,t,a),v=c("kernelSize",e,t,a),[(0,r.avgPool3d)(c("x",e,t,a),[v[1],v[2],v[3]],[n[1],n[2],n[3]],s)];case"MaxPool3D":return n=c("strides",e,t,a),s=c("pad",e,t,a),v=c("kernelSize",e,t,a),[(0,r.maxPool3d)(c("x",e,t,a),[v[1],v[2],v[3]],[n[1],n[2],n[3]],s)];default:throw TypeError("Node type "+e.op+" is not implemented")}},ge=function(e,t,a){switch(e.op){case"Fill":var n=c("shape",e,t,a),s=c("dtype",e,t,a),o=c("value",e,t,a);return[(0,r.fill)(n,o,s)];case"LinSpace":var p=c("start",e,t,a),i=c("stop",e,t,a),u=c("num",e,t,a);return[(0,r.linspace)(p,i,u)];case"Multinomial":var m=c("logits",e,t,a),d=c("numSamples",e,t,a),y=c("seed",e,t,a);return[(0,r.multinomial)(m,d,y)];case"OneHot":var l=c("indices",e,t,a),f=c("depth",e,t,a),h=c("onValue",e,t,a),N=c("offValue",e,t,a);return[(0,r.oneHot)(l,f,h,N)];case"Ones":return[(0,r.ones)(c("shape",e,t,a),c("dtype",e,t,a))];case"OnesLike":return[(0,r.onesLike)(c("x",e,t,a))];case"RandomUniform":return[(0,r.randomUniform)(c("shape",e,t,a),c("minval",e,t,a),c("maxval",e,t,a),c("dtype",e,t,a))];case"Range":p=c("start",e,t,a);var g=c("stop",e,t,a),b=c("step",e,t,a);return[(0,r.range)(p,g,b,c("dtype",e,t,a))];case"TruncatedNormal":n=c("shape",e,t,a);var x=c("mean",e,t,a),v=c("stdDev",e,t,a);return y=c("seed",e,t,a),[(0,r.truncatedNormal)(n,x,v,c("dtype",e,t,a),y)];case"Zeros":return[(0,r.zeros)(c("shape",e,t,a),c("dtype",e,t,a))];case"ZerosLike":return[(0,r.zerosLike)(c("x",e,t,a))];default:throw TypeError("Node type "+e.op+" is not implemented")}},be=void 0,xe=function(e,t,a){return s(be,void 0,void 0,function(){var n,s,p,i,u,m,d,y;return o(this,function(o){switch(o.label){case 0:switch(e.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,5];case"ListDiff":return[3,7]}return[3,8];case 1:return n=c("boxes",e,t,a),s=c("scores",e,t,a),p=c("maxOutputSize",e,t,a),i=c("iouThreshold",e,t,a),u=c("scoreThreshold",e,t,a),"NonMaxSuppressionV5"!==e.op?[3,3]:(m=c("softNmsSigma",e,t,a),[4,r.image.nonMaxSuppressionWithScoreAsync(n,s,p,i,u,m)]);case 2:return[2,[(y=o.sent()).selectedIndices,y.selectedScores]];case 3:return[4,r.image.nonMaxSuppressionAsync(n,s,p,i,u)];case 4:return[2,[o.sent()]];case 5:return d=c("condition",e,t,a).asType("bool"),[4,(0,r.whereAsync)(d)];case 6:return y=[o.sent()],d.dispose(),[2,y];case 7:return[2,(0,r.setdiff1dAsync)(c("x",e,t,a),c("y",e,t,a))];case 8:throw TypeError("Node type "+e.op+" is not implemented")}})})},ve=function(e,t,a){switch(e.op){case"TopKV2":var n=c("x",e,t,a),s=c("k",e,t,a),o=c("sorted",e,t,a),p=(0,r.topk)(n,s,o);return[p.values,p.indices];default:throw TypeError("Node type "+e.op+" is not implemented")}},Te=function(e,t,a){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var n=c("default",e,t,a);return[d(e.name,t,a)||n];case"Placeholder":return[d(e.name,t,a)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[c("x",e,t,a).clone()];case"IdentityN":return c("x",e,t,a).map(function(e){return e.clone()});case"Snapshot":return[c("x",e,t,a).clone()];case"Shape":return[(0,r.tensor1d)(c("x",e,t,a).shape,"int32")];case"ShapeN":return c("x",e,t,a).map(function(e){return(0,r.tensor1d)(e.shape)});case"Size":return[(0,r.scalar)(c("x",e,t,a).size,"int32")];case"Rank":return[(0,r.scalar)(c("x",e,t,a).rank,"int32")];case"NoOp":return[(0,r.scalar)(1)];case"Print":var s=c("x",e,t,a),o=c("data",e,t,a),p=c("message",e,t,a),i=c("summarize",e,t,a);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(p);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,i));return[s];default:throw TypeError("Node type "+e.op+" is not implemented")}},Oe=function(e,t,a){switch(e.op){case"ResizeBilinear":var n=c("images",e,t,a),s=c("size",e,t,a),o=c("alignCorners",e,t,a);return[r.image.resizeBilinear(n,[s[0],s[1]],o)];case"ResizeNearestNeighbor":return n=c("images",e,t,a),s=c("size",e,t,a),o=c("alignCorners",e,t,a),[r.image.resizeNearestNeighbor(n,[s[0],s[1]],o)];case"CropAndResize":var p=c("image",e,t,a),i=c("boxes",e,t,a),u=c("boxInd",e,t,a),m=c("cropSize",e,t,a),d=c("method",e,t,a),y=c("extrapolationValue",e,t,a);return[r.image.cropAndResize(p,i,u,m,d,y)];default:throw TypeError("Node type "+e.op+" is not implemented")}},Se=function(e,t,a){switch(e.op){case"Equal":return[(0,r.equal)(c("a",e,t,a),c("b",e,t,a))];case"NotEqual":return[(0,r.notEqual)(c("a",e,t,a),c("b",e,t,a))];case"Greater":return[(0,r.greater)(c("a",e,t,a),c("b",e,t,a))];case"GreaterEqual":return[(0,r.greaterEqual)(c("a",e,t,a),c("b",e,t,a))];case"Less":return[(0,r.less)(c("a",e,t,a),c("b",e,t,a))];case"LessEqual":return[(0,r.lessEqual)(c("a",e,t,a),c("b",e,t,a))];case"LogicalAnd":return[(0,r.logicalAnd)(c("a",e,t,a),c("b",e,t,a))];case"LogicalNot":return[(0,r.logicalNot)(c("a",e,t,a))];case"LogicalOr":return[(0,r.logicalOr)(c("a",e,t,a),c("b",e,t,a))];case"Select":case"SelectV2":return[(0,r.where)(c("condition",e,t,a),c("a",e,t,a),c("b",e,t,a))];default:throw TypeError("Node type "+e.op+" is not implemented")}},_e=function(e,t,a){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[(0,r.matMul)(c("a",e,t,a),c("b",e,t,a),c("transposeA",e,t,a),c("transposeB",e,t,a))];case"Transpose":return[(0,r.transpose)(c("x",e,t,a),c("perm",e,t,a))];case"_FusedMatMul":var n=c("fusedOps",e,t,a),s=n[0],o=n[1],p="biasadd"===s,i="prelu"===o,u=c("numArgs",e,t,a);if(p){if(i&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var m=c("args",e,t,a),d=m[0],y=m[1];return[r.fused.matMul({a:c("a",e,t,a),b:c("b",e,t,a),transposeA:c("transposeA",e,t,a),transposeB:c("transposeB",e,t,a),bias:d,activation:o,preluActivationWeights:y})];default:throw TypeError("Node type "+e.op+" is not implemented")}},we=function(e,t,a){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[(0,r.batchNorm)(c("x",e,t,a),c("mean",e,t,a),c("variance",e,t,a),c("offset",e,t,a),c("scale",e,t,a),c("epsilon",e,t,a))];case"LRN":return[(0,r.localResponseNormalization)(c("x",e,t,a),c("radius",e,t,a),c("bias",e,t,a),c("alpha",e,t,a),c("beta",e,t,a))];case"Softmax":return[(0,r.softmax)(c("x",e,t,a))];case"LogSoftmax":return[(0,r.logSoftmax)(c("x",e,t,a))];case"SparseToDense":return[(0,r.sparseToDense)(c("sparseIndices",e,t,a),c("outputShape",e,t,a),c("sparseValues",e,t,a),c("defaultValue",e,t,a))];default:throw TypeError("Node type "+e.op+" is not implemented")}},Ae=function(e,t,a){switch(e.op){case"Max":var n=c("axis",e,t,a),s=c("keepDims",e,t,a);return[(0,r.max)(c("x",e,t,a),n,s)];case"Mean":return n=c("axis",e,t,a),s=c("keepDims",e,t,a),[(0,r.mean)(c("x",e,t,a),n,s)];case"Min":return n=c("axis",e,t,a),s=c("keepDims",e,t,a),[(0,r.min)(c("x",e,t,a),n,s)];case"Sum":return n=c("axis",e,t,a),s=c("keepDims",e,t,a),[(0,r.sum)(c("x",e,t,a),n,s)];case"All":return n=c("axis",e,t,a),s=c("keepDims",e,t,a),[(0,r.all)(c("x",e,t,a),n,s)];case"Any":return n=c("axis",e,t,a),s=c("keepDims",e,t,a),[(0,r.any)(c("x",e,t,a),n,s)];case"ArgMax":return n=c("axis",e,t,a),[(0,r.argMax)(c("x",e,t,a),n)];case"ArgMin":return n=c("axis",e,t,a),[(0,r.argMin)(c("x",e,t,a),n)];case"Prod":return n=c("axis",e,t,a),s=c("keepDims",e,t,a),[(0,r.prod)(c("x",e,t,a),n,s)];default:throw TypeError("Node type "+e.op+" is not implemented")}},De=function(e,t,a){switch(e.op){case"ConcatV2":case"Concat":var n=c("n",e,t,a),s=c("axis",e,t,a),o=c("tensors",e,t,a);return o=o.slice(0,n),[(0,r.concat)(o,s)];case"GatherV2":case"Gather":s=c("axis",e,t,a);var p=c("x",e,t,a),i=c("indices",e,t,a);return[(0,r.gather)(p,i.asType("int32"),s)];case"ReverseV2":case"Reverse":return s=c("axis",e,t,a),p=c("x",e,t,a),[(0,r.reverse)(p,s)];case"Slice":var u=c("begin",e,t,a),m=c("size",e,t,a);return[(0,r.slice)(c("x",e,t,a),u,m)];case"StridedSlice":u=c("begin",e,t,a);var d=c("end",e,t,a),y=c("strides",e,t,a),l=c("beginMask",e,t,a),f=c("endMask",e,t,a),h=c("ellipsisMask",e,t,a),N=c("newAxisMask",e,t,a),g=c("shrinkAxisMask",e,t,a),b=c("x",e,t,a);if(1===u.length&&b.shape.length>1)for(var x=1;x<b.shape.length;x++)u.push(0),d.push(b.shape[x]),y.push(y[0]);return[(0,r.stridedSlice)(b,u,d,y,l,f,h,N,g)];case"Pack":return(0,r.tidy)(function(){var n=c("axis",e,t,a),s=c("tensors",e,t,a),o=s[0].shape,p=s[0].squeeze().shape,i=s.map(function(e){var t=r.util.arraysEqual(e.shape,o);if(!t&&!r.util.arraysEqual(e.squeeze().shape,p))throw new Error("the input tensors shape does not match");return t?e:e.reshape(o)});return[(0,r.stack)(i,n)]});case"Unpack":return(0,r.tidy)(function(){var n=c("axis",e,t,a),s=c("tensor",e,t,a);return(0,r.unstack)(s,n)});case"Tile":var v=c("reps",e,t,a);return[(0,r.tile)(c("x",e,t,a),v)];case"Split":case"SplitV":s=c("axis",e,t,a);var T=c("numOrSizeSplits",e,t,a);return(0,r.split)(c("x",e,t,a),T,s);case"ScatterNd":i=c("indices",e,t,a);var O=c("values",e,t,a),S=c("shape",e,t,a);return[(0,r.scatterND)(i,O,S)];case"GatherNd":var _=c("x",e,t,a);return i=c("indices",e,t,a),[(0,r.gatherND)(_,i)];case"SparseToDense":i=c("sparseIndices",e,t,a),S=c("outputShape",e,t,a);var w=c("sparseValues",e,t,a),A=c("defaultValue",e,t,a);return[(0,r.sparseToDense)(i,w,S,w.dtype===A.dtype?A:A.asType(w.dtype))];default:throw TypeError("Node type "+e.op+" is not implemented")}},Ee=function(e,t,a){switch(e.op){case"FFT":return[(0,r.fft)(c("x",e,t,a))];case"IFFT":return[(0,r.ifft)(c("x",e,t,a))];case"RFFT":return[(0,r.rfft)(c("x",e,t,a))];case"IRFFT":return[(0,r.irfft)(c("x",e,t,a))];default:throw TypeError("Node type "+e.op+" is not implemented")}},Ie=function(e,t,a){switch(e.op){case"Cast":return[(0,r.cast)(c("x",e,t,a),c("dtype",e,t,a))];case"ExpandDims":var n=c("axis",e,t,a);return[(0,r.expandDims)(c("x",e,t,a),n)];case"Squeeze":return n=c("axis",e,t,a),[(0,r.squeeze)(c("x",e,t,a),n)];case"Reshape":return[(0,r.reshape)(c("x",e,t,a),c("shape",e,t,a))];case"PadV2":case"Pad":return[(0,r.pad)(c("x",e,t,a),N(c("padding",e,t,a),2),c("constantValue",e,t,a))];case"SpaceToBatchND":var s=c("blockShape",e,t,a),o=N(c("paddings",e,t,a),2);return[(0,r.spaceToBatchND)(c("x",e,t,a),s,o)];case"BatchToSpaceND":s=c("blockShape",e,t,a);var p=N(c("crops",e,t,a),2);return[(0,r.batchToSpaceND)(c("x",e,t,a),s,p)];case"DepthToSpace":var i=c("blockSize",e,t,a),u=c("dataFormat",e,t,a).toUpperCase();return[(0,r.depthToSpace)(c("x",e,t,a),i,u)];default:throw TypeError("Node type "+e.op+" is not implemented")}};function Ve(e,t,a){var n=function(e,t,a){switch(e.category){case"arithmetic":return(0,r.tidy)(function(){return de(e,t,a)});case"basic_math":return(0,r.tidy)(function(){return ye(e,t,a)});case"control":return he(e,t,a);case"convolution":return(0,r.tidy)(function(){return Ne(e,t,a)});case"creation":return(0,r.tidy)(function(){return ge(e,t,a)});case"dynamic":return xe(e,t,a);case"evaluation":return(0,r.tidy)(function(){return ve(e,t,a)});case"image":return(0,r.tidy)(function(){return Oe(e,t,a)});case"graph":return(0,r.tidy)(function(){return Te(e,t,a)});case"logical":return(0,r.tidy)(function(){return Se(e,t,a)});case"matrices":return(0,r.tidy)(function(){return _e(e,t,a)});case"normalization":return(0,r.tidy)(function(){return we(e,t,a)});case"reduction":return(0,r.tidy)(function(){return Ae(e,t,a)});case"slice_join":return(0,r.tidy)(function(){return De(e,t,a)});case"spectral":return(0,r.tidy)(function(){return Ee(e,t,a)});case"transformation":return(0,r.tidy)(function(){return Ie(e,t,a)});case"custom":var n=u(e.op);if(n&&n.customExecutor)return n.customExecutor(new ce(e,t,a));throw TypeError("Custom op "+e.op+" is not registered.");default:throw TypeError("Unknown op '"+e.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,a);return n instanceof Promise?n.then(function(e){return[].concat(e)}):[].concat(n)}var Me=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var a=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(a))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map(function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId}).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}();function ke(e,t,a){for(var r=new Set,n=[],s=null,o=null,p=new Set,i=Object.keys(e).map(function(e){return h(e)[0]}),u=t.slice();u.length>0;){var m=u.pop();(je(m)||Pe(m))&&null==s&&(o=(s=m).children.map(function(e){return e.name}).filter(function(e){return r.has(e)})),r.add(m.name),null==a[m.name]&&-1===i.indexOf(m.name)&&(0!==m.inputs.length?m.inputs.forEach(function(e){p.has(e.name)||(p.add(e.name),u.push(e))}):n.push(m.name))}return{inputs:e,outputs:t,usedNodes:r,missingInputs:n,dynamicNode:s,syncInputs:o}}function Ce(e,t,a){var r=a.usedNodes,n=a.inputs,s=[];Object.keys(n).map(function(e){return h(e)[0]}).map(function(t){return e.nodes[t]}).forEach(function(e){r.has(e.name)&&s.push(e)}),e.weights.forEach(function(e){r.has(e.name)&&s.push(e)});for(var o=new Set,p=[];s.length>0;){var i=s.pop();o.add(i.name),t[i.name]||p.push(i),i.children.forEach(function(e){!o.has(e.name)&&r.has(e.name)&&e.inputs.every(function(e){return o.has(e.name)})&&s.push(e)})}return p}var ze=["Switch","Merge","Enter","Exit","NextIteration"],Fe=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function je(e){return ze.indexOf(e.op)>=0}function Pe(e){return Fe.indexOf(e.op)>=0}var Re=function(){function e(e){this.graph=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._outputs=e.outputs,this._inputs=e.inputs,this._signature=e.signature}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})});this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this._inputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this._inputs.map(function(e){return e.signatureKey||e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this._outputs.map(function(e){return e.signatureKey||e.name})},enumerable:!0,configurable:!0}),e.prototype.getCompilationKey=function(e,t){var a=e.map(function(e){return e.name}).sort(),r=t.map(function(e){return e.name}).sort();return a.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)},e.prototype.compile=function(e,t){var a=ke(e,t,this.weightMap),r=a.missingInputs,n=a.dynamicNode,s=a.syncInputs;if(null!=n)throw new Error("This execution contains the node '"+n.name+"', which has the dynamic op '"+n.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+s+"]");if(r.length>0){var o=t.map(function(e){return e.name}),p=Object.keys(e);throw new Error("Cannot compute the outputs ["+o+"] from the provided inputs ["+p+"]. Missing the following inputs: ["+r+"]")}return Ce(this.graph,this.weightMap,a)},e.prototype.execute=function(e,t){var a=this;e=this.mapInputs(e);var s=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var o=s.map(function(e){return a.graph.nodes[h(e)[0]]}),p=t.map(function(e){return a.graph.nodes[h(e)[0]]}),i=this.getCompilationKey(o,p),u=this.compiledMap.get(i);null==u&&(u=this.compile(e,p),this.compiledMap.set(i,u));var m={};return(0,r.tidy)(function(){var r=new Me(a._weightMap,m),s=n({},a.weightMap);Object.keys(e).forEach(function(t){var a=h(t),r=a[0],n=[];n[a[1]]=e[t],s[r]=n});for(var o=a.getFrozenTensorIds(s),p={},i=0;i<u.length;i++){var c=u[i];if(!s[c.name]){var y=Ve(c,s,r);if(y instanceof Promise)throw new Error("The execution of the op '"+c.op+"' returned a promise. Please use model.executeAsync() instead.");s[c.name]=y,a.checkTensorForDisposal(c.name,c,s,r,o,t,p)}}return t.map(function(e){return d(e,s,r)})})},e.prototype.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map(function(t){return e[t]}).map(function(e){return e.map(function(e){return e.id})}));return new Set(t)},e.prototype.checkTensorForDisposal=function(e,t,a,r,n,s,o){"control"!==t.category&&-1===s.indexOf(e)&&(a[e].forEach(function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)}),t.inputs.forEach(function(e){if("control"!==e.category){var t=y(e.name,a,r);null!=t&&t.forEach(function(e){if(e&&!n.has(e.id)){var t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}})}}))},e.prototype.executeAsync=function(e,t){return s(this,void 0,void 0,function(){var a,r,n,s,p,i,u=this;return o(this,function(o){switch(o.label){case 0:return e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t),a={},r=new Me(this._weightMap,a),[4,this.executeWithControlFlow(e,r,t)];case 1:return n=o.sent(),s=t.map(function(e){return d(e,n,r)}),p=new Set(s.map(function(e){return e.id})),i=new Set(Object.keys(e).map(function(t){return e[t].id})),Object.keys(n).forEach(function(e){n[e].forEach(function(e){!e||e.isDisposed||p.has(e.id)||i.has(e.id)||-1!==u.weightIds.indexOf(e.id)||e.dispose()})}),[2,s]}})})},e.prototype.executeWithControlFlow=function(e,t,a){return s(this,void 0,void 0,function(){var r,s,p,i,u,m,c,y,l,f,N,g,b,x,v,T,O=this;return o(this,function(o){switch(o.label){case 0:r=Object.keys(e),s=r.map(function(e){return O.graph.nodes[h(e)[0]]}),p=a.map(function(e){return O.graph.nodes[h(e)[0]]}),i=ke(e,p,this.weightMap),u=i.usedNodes,m=i.missingInputs,c=i.dynamicNode,y=i.syncInputs,l=s.concat(this.graph.weights).map(function(e){return{node:e,contexts:t.currentContext}}),f=n({},this.weightMap),Object.keys(e).forEach(function(t){var a=h(t),r=a[0],n=[];n[a[1]]=e[t],f[r]=n}),N={},g=this.getFrozenTensorIds(f),b={},o.label=1;case 1:return l.length>0?(x=this.processStack(s,l,t,f,b,g,a,N,u),[4,Promise.all(x)]):[3,3];case 2:return o.sent(),[3,1];case 3:if(null==c&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(v=p.filter(function(e){return!je(e)&&!d(e.name,f,t)}).map(function(e){return e.name})).length>0)throw T="",null!=c&&(T="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+y+"]"),new Error("Cannot compute the outputs ["+v+"] from the provided inputs ["+r+"]. Consider providing the following inputs: ["+m+"]. "+T);return[2,f]}})})},e.prototype.processStack=function(e,t,a,r,n,s,o,p,i){for(var u=this,m=[],d=function(){var d=t.pop();a.currentContext=d.contexts;var f="";if("Enter"===d.node.op&&c("isConstant",d.node,r,a)&&(f=l(d.node.name,a)[0]),-1===e.indexOf(d.node)){var h=Ve(d.node,r,a);f||(f=l(d.node.name,a)[0]);var N=a.currentContext;h instanceof Promise?m.push(h.then(function(e){return r[f]=e,a.currentContext=N,u.checkTensorForDisposal(f,d.node,r,a,s,o,p),u.processChildNodes(d.node,t,a,r,n,i),e})):(r[f]=h,y.checkTensorForDisposal(f,d.node,r,a,s,o,p),y.processChildNodes(d.node,t,a,r,n,i))}else y.processChildNodes(d.node,t,a,r,n,i)},y=this;t.length>0;)d();return m},e.prototype.processChildNodes=function(e,t,a,r,n,s){e.children.forEach(function(e){var o=l(e.name,a)[0];!n[o]&&s.has(e.name)&&("Merge"===e.op?e.inputNames.some(function(e){return!!d(e,r,a)})&&(n[o]=!0,t.push({contexts:a.currentContext,node:e})):e.inputNames.every(function(e){return!!d(e,r,a)})&&(n[o]=!0,t.push({contexts:a.currentContext,node:e})))})},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(t){return e.weightMap[t].forEach(function(e){return e.dispose()})})},e.prototype.checkInputShapeAndType=function(e){var t=this;Object.keys(e).forEach(function(a){var n=e[a],s=h(a)[0],o=t.graph.nodes[s];if(o.attrParams.shape&&o.attrParams.shape.value){var p=o.attrParams.shape.value,i=p.length===n.shape.length&&n.shape.every(function(e,t){return-1===p[t]||p[t]===e});r.util.assert(i,function(){return"The shape of dict['"+o.name+"'] provided in model.execute(dict) must be ["+p+"], but was ["+n.shape+"]"})}o.attrParams.dtype&&o.attrParams.dtype.value&&r.util.assert(n.dtype===o.attrParams.dtype.value,function(){return"The dtype of dict['"+o.name+"'] provided in model.execute(dict) must be "+o.attrParams.dtype.value+", but was "+n.dtype})})},e.prototype.mapInputs=function(e){var t={};for(var a in e)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[a]?t[this._signature.inputs[a].name]=e[a]:t[a]=e[a];return t},e.prototype.checkInputs=function(e){var t=this,a=Object.keys(e).filter(function(e){var a=h(e)[0];return null==t.graph.nodes[a]});if(a.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+a+"] that are not part of graph")},e.prototype.mapOutputs=function(e){var t=this;return e.map(function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e},{})},e.prototype.checkOutputs=function(e){var t=this;e.forEach(function(e){var a=h(e)[0];if(!t.graph.nodes[a])throw new Error("The output '"+e+"' is not found in the graph")})},e}(),Le="?tfjs-format=file",Be="model.json",qe=function(){function e(e,t){void 0===t&&(t={}),this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={})}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=r.io.browserHTTPRequest(e,this.loadOptions);else{var t=r.io.getLoadHandlers(e,this.loadOptions.onProgress);if(0===t.length)t.push(r.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return s(this,void 0,void 0,function(){var e,t,a,n;return o(this,function(s){switch(s.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return e=this,[4,this.handler.load()];case 1:return e.artifacts=s.sent(),t=this.artifacts.modelTopology,a={},null!=this.artifacts.userDefinedMetadata&&(a=this.artifacts.userDefinedMetadata.signature),this.version=t.versions.producer+"."+t.versions.minConsumer,n=r.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs),this.executor=new Re(Z.Instance.transformGraph(t,a)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),[2,!0]}})})},e.prototype.save=function(e,t){return s(this,void 0,void 0,function(){var t;return o(this,function(a){if("string"==typeof e){if(0===(t=r.io.getSaveHandlers(e)).length)throw new Error("Cannot find any save handlers for URL '"+e+"'");if(t.length>1)throw new Error("Found more than one ("+t.length+") save handlers for URL '"+e+"'");e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[2,e.save(this.artifacts)]})})},e.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},e.prototype.normalizeInputs=function(e){if(!(e instanceof r.Tensor||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce(function(t,a,r){return t[a]=e[r],t},{})},e.prototype.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},e.prototype.execute=function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var a=this.executor.execute(e,t);return a.length>1?a:a[0]},e.prototype.executeAsync=function(e,t){return s(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:return e=this.normalizeInputs(e),t=this.normalizeOutputs(t),[4,this.executor.executeAsync(e,t)];case 1:return[2,(a=r.sent()).length>1?a:a[0]]}})})},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(t,a){return t[a]=[e[a]],t},{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function Ue(e,t){return void 0===t&&(t={}),s(this,void 0,void 0,function(){var a;return o(this,function(r){switch(r.label){case 0:if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e=""+e+Be+Le),[4,(a=new qe(e,t)).load()];case 1:return r.sent(),[2,a]}})})}exports.GraphModel=qe;var Ge="1.7.4";exports.version_converter=Ge;
},{"@tensorflow/tfjs-core":"PqBP","buffer":"aMB2"}],"yqJr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PoseNet=exports.MobileNet=void 0,exports.decodeMultiplePoses=T,exports.decodeSinglePose=z,exports.getAdjacentKeyPoints=Z,exports.getBoundingBox=et,exports.getBoundingBoxPoints=rt,exports.load=Nt,exports.poseChain=exports.partNames=exports.partIds=exports.partChannels=void 0,exports.scaleAndFlipPoses=gt,exports.scalePose=ot,exports.version=void 0;var t=n(require("@tensorflow/tfjs-core")),e=require("@tensorflow/tfjs-converter");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(r=function(t){return t?n:e})(t)}function n(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r(e);if(n&&n.has(t))return n.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var s=i?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=t[u]}return o.default=t,n&&n.set(t,o),o}var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e,r,n){return new(r||(r=Promise))(function(o,i){function u(t){try{a(n.next(t))}catch(t){i(t)}}function s(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(u,s)}a((n=n.apply(t,e||[])).next())})}function a(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var l=function(){function e(e,r){this.model=e,this.outputStride=r;var n=this.model.inputs[0].shape;t.util.assert(-1===n[1]&&-1===n[2],function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"})}return e.prototype.predict=function(e){var r=this;return(0,t.tidy)(function(){var n=r.preprocessInput((0,t.cast)(e,"float32")),o=(0,t.expandDims)(n,0),i=r.model.predict(o).map(function(e){return(0,t.squeeze)(e,[0])}),u=r.nameOutputResults(i);return{heatmapScores:(0,t.sigmoid)(u.heatmap),offsets:u.offsets,displacementFwd:u.displacementFwd,displacementBwd:u.displacementBwd}})},e.prototype.dispose=function(){this.model.dispose()},e}(),f=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r.prototype.preprocessInput=function(e){return(0,t.tidy)(function(){return(0,t.sub)((0,t.div)(e,127.5),1)})},r.prototype.nameOutputResults=function(t){return{offsets:t[0],heatmap:t[1],displacementFwd:t[2],displacementBwd:t[3]}},r}(l);function p(t){return Math.floor(t/2)}exports.MobileNet=f;var c=function(){function t(t,e){this.priorityQueue=new Array(t),this.numberOfElements=-1,this.getElementValue=e}return t.prototype.enqueue=function(t){this.priorityQueue[++this.numberOfElements]=t,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var t=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,t},t.prototype.empty=function(){return-1===this.numberOfElements},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(t){for(;t>0&&this.less(p(t),t);)this.exchange(t,p(t)),t=p(t)},t.prototype.sink=function(t){for(;2*t<=this.numberOfElements;){var e=2*t;if(e<this.numberOfElements&&this.less(e,e+1)&&e++,!this.less(t,e))break;this.exchange(t,e),t=e}},t.prototype.getValueAt=function(t){return this.getElementValue(this.priorityQueue[t])},t.prototype.less=function(t,e){return this.getValueAt(t)<this.getValueAt(e)},t.prototype.exchange=function(t,e){var r=this.priorityQueue[t];this.priorityQueue[t]=this.priorityQueue[e],this.priorityQueue[e]=r},t}();function h(t,e,r,n,o,i){for(var u=i.shape,s=u[0],a=u[1],l=!0,f=Math.max(r-o,0),p=Math.min(r+o+1,s),c=f;c<p;++c){for(var h=Math.max(n-o,0),d=Math.min(n+o+1,a),m=h;m<d;++m)if(i.get(c,m,t)>e){l=!1;break}if(!l)break}return l}function d(t,e,r){for(var n=r.shape,o=n[0],i=n[1],u=n[2],s=new c(o*i*u,function(t){return t.score}),a=0;a<o;++a)for(var l=0;l<i;++l)for(var f=0;f<u;++f){var p=r.get(a,l,f);p<t||h(f,p,a,l,e,r)&&s.enqueue({score:p,part:{heatmapY:a,heatmapX:l,id:f}})}return s}var m=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],y=m.length,v=m.reduce(function(t,e,r){return t[e]=r,t},{}),g=[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]],b=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]],w=g.map(function(t){var e=t[0],r=t[1];return[v[e],v[r]]}),x=["left_face","right_face","right_upper_leg_front","right_lower_leg_back","right_upper_leg_back","left_lower_leg_front","left_upper_leg_front","left_upper_leg_back","left_lower_leg_back","right_feet","right_lower_leg_front","left_feet","torso_front","torso_back","right_upper_arm_front","right_upper_arm_back","right_lower_arm_back","left_lower_arm_front","left_upper_arm_front","left_upper_arm_back","left_lower_arm_back","right_hand","right_lower_arm_front","left_hand"];function _(t,e,r,n){return{y:n.get(t,e,r),x:n.get(t,e,r+y)}}function S(t,e,r){var n=_(t.heatmapY,t.heatmapX,t.id,r),o=n.y,i=n.x;return{x:t.heatmapX*e+i,y:t.heatmapY*e+o}}function E(t,e,r){return t<e?e:t>r?r:t}function M(t,e,r,n){var o=r-t,i=n-e;return o*o+i*i}function O(t,e){return{x:t.x+e.x,y:t.y+e.y}}exports.partChannels=x,exports.poseChain=b,exports.partIds=v,exports.partNames=m;var k=b.map(function(t){var e=t[0],r=t[1];return[v[e],v[r]]}),P=k.map(function(t){return t[1]}),j=k.map(function(t){return t[0]});function I(t,e,r){var n=r.shape[2]/2;return{y:r.get(e.y,e.x,t),x:r.get(e.y,e.x,n+t)}}function N(t,e,r,n){return{y:E(Math.round(t.y/e),0,r-1),x:E(Math.round(t.x/e),0,n-1)}}function R(t,e,r,n,o,i,u,s){void 0===s&&(s=2);for(var a=n.shape,l=a[0],f=a[1],p=I(t,N(e.position,i,l,f),u),c=O(e.position,p),h=0;h<s;h++){var d=N(c,i,l,f),y=_(d.y,d.x,r,o);c=O({x:d.x*i,y:d.y*i},{x:y.x,y:y.y})}var v=N(c,i,l,f),g=n.get(v.y,v.x,r);return{position:c,part:m[r],score:g}}function B(t,e,r,n,o,i){var u=e.shape[2],s=P.length,a=new Array(u),l=t.part,f=t.score,p=S(l,n,r);a[l.id]={score:f,part:m[l.id],position:p};for(var c=s-1;c>=0;--c){var h=P[c],d=j[c];a[h]&&!a[d]&&(a[d]=R(c,a[h],d,e,r,n,i))}for(c=0;c<s;++c)h=j[c],d=P[c],a[h]&&!a[d]&&(a[d]=R(c,a[h],d,e,r,n,o));return a}function q(t,e,r,n){var o=r.x,i=r.y;return t.some(function(t){var r=t.keypoints[n].position;return M(i,o,r.y,r.x)<=e})}function A(t,e,r){return r.reduce(function(r,n,o){var i=n.position,u=n.score;return q(t,e,i,o)||(r+=u),r},0)/r.length}var H=1;function T(t,e,r,n,o,i,u,s){void 0===u&&(u=.5),void 0===s&&(s=20);for(var a=[],l=d(u,H,t),f=s*s;a.length<i&&!l.empty();){var p=l.dequeue();if(!q(a,f,S(p.part,o,e),p.part.id)){var c=B(p,t,e,o,r,n),h=A(a,f,c);a.push({keypoints:c,score:h})}}return a}function V(e,r){return(0,t.tidy)(function(){var n=(0,t.div)(e,(0,t.scalar)(r,"int32"));return(0,t.sub)(e,(0,t.mul)(n,(0,t.scalar)(r,"int32")))})}function Y(e){var r=e.shape,n=r[0],o=r[1],i=r[2];return(0,t.tidy)(function(){var r=(0,t.reshape)(e,[n*o,i]),u=(0,t.argMax)(r,0),s=(0,t.expandDims)((0,t.div)(u,(0,t.scalar)(o,"int32")),1),a=(0,t.expandDims)(V(u,o),1);return(0,t.concat)([s,a],1)})}function F(t,e){for(var r=e.shape[0],n=new Float32Array(r),o=0;o<r;o++){var i=e.get(o,0),u=e.get(o,1);n[o]=t.get(i,u,o)}return n}function K(t,e,r,n){return{y:n.get(t,e,r),x:n.get(t,e,r+y)}}function Q(e,r){for(var n=[],o=0;o<y;o++){var i=K(e.get(o,0).valueOf(),e.get(o,1).valueOf(),o,r),u=i.x,s=i.y;n.push(s),n.push(u)}return(0,t.tensor2d)(n,[y,2])}function X(e,r,n){return(0,t.tidy)(function(){var o=Q(e,n);return(0,t.add)((0,t.cast)((0,t.mul)(e.toTensor(),(0,t.scalar)(r,"int32")),"float32"),o)})}function z(t,e,r){return s(this,void 0,void 0,function(){var n,o,i,u,s,l,f,p,c,h;return a(this,function(a){switch(a.label){case 0:return n=0,o=Y(t),[4,Promise.all([t.buffer(),e.buffer(),o.buffer()])];case 1:return i=a.sent(),u=i[0],s=i[1],l=i[2],[4,(f=X(l,r,s)).buffer()];case 2:return p=a.sent(),c=Array.from(F(u,l)),h=c.map(function(t,e){return n+=t,{position:{y:p.get(e,0),x:p.get(e,1)},part:m[e],score:t}}),o.dispose(),f.dispose(),[2,{keypoints:h,score:n/h.length}]}})})}var W="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",D="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function C(t,e){var r="model-stride"+t+".json";return 4===e?D+"float/"+r:D+"quant"+e+"/"+r}function G(t,e,r){var n={1:"100",.75:"075",.5:"050"},o="model-stride"+t+".json";return 4===r?W+"float/"+n[e]+"/"+o:W+"quant"+r+"/"+n[e]+"/"+o}var U=[-123.15,-115.9,-103.06],J=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return i(r,e),r.prototype.preprocessInput=function(e){return(0,t.add)(e,U)},r.prototype.nameOutputResults=function(t){var e=t[0],r=t[1];return{offsets:t[2],heatmap:t[3],displacementFwd:e,displacementBwd:r}},r}(l);function L(t,e,r){return t<r||e<r}function Z(t,e){return w.reduce(function(r,n){var o=n[0],i=n[1];return L(t[o].score,t[i].score,e)?r:(r.push([t[o],t[i]]),r)},[])}var $=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;function et(t){return t.reduce(function(t,e){var r=t.maxX,n=t.maxY,o=t.minX,i=t.minY,u=e.position,s=u.x,a=u.y;return{maxX:Math.max(r,s),maxY:Math.max(n,a),minX:Math.min(o,s),minY:Math.min(i,a)}},{maxX:$,maxY:$,minX:tt,minY:tt})}function rt(t){var e=et(t),r=e.minX,n=e.minY,o=e.maxX,i=e.maxY;return[{x:r,y:n},{x:o,y:n},{x:o,y:i},{x:r,y:i}]}function nt(t){return s(this,void 0,void 0,function(){return a(this,function(e){return[2,Promise.all(t.map(function(t){return t.buffer()}))]})})}function ot(t,e,r,n,o){return void 0===n&&(n=0),void 0===o&&(o=0),{score:t.score,keypoints:t.keypoints.map(function(t){var i=t.score,u=t.part,s=t.position;return{score:i,part:u,position:{x:s.x*r+o,y:s.y*e+n}}})}}function it(t,e,r,n,o){return void 0===n&&(n=0),void 0===o&&(o=0),1===r&&1===e&&0===n&&0===o?t:t.map(function(t){return ot(t,e,r,n,o)})}function ut(t,e){return{score:t.score,keypoints:t.keypoints.map(function(t){var r=t.score,n=t.part,o=t.position;return{score:r,part:n,position:{x:e-1-o.x,y:o.y}}})}}function st(t,e){return e<=0?t:t.map(function(t){return ut(t,e)})}function at(t,e){return ht(t,e)?t:Math.floor(t/e)*e+1}function lt(e){t.util.assert("number"==typeof e||"object"==typeof e,function(){return"Invalid inputResolution "+e+". Should be a number or an object with width and height"}),"object"==typeof e&&(t.util.assert("number"==typeof e.width,function(){return"inputResolution.width has a value of "+e.width+" which is invalid; it must be a number"}),t.util.assert("number"==typeof e.height,function(){return"inputResolution.height has a value of "+e.height+" which is invalid; it must be a number"}))}function ft(t,e){return lt(t),"object"==typeof t?[at(t.height,e),at(t.width,e)]:[at(t,e),at(t,e)]}var pt=[8,16,32];function ct(e){t.util.assert("number"==typeof e,function(){return"outputStride is not a number"}),t.util.assert(pt.indexOf(e)>=0,function(){return"outputStride of "+e+" is invalid. It must be either 8, 16, or 32"})}function ht(t,e){return(t-1)%e==0}function dt(e,r){t.util.assert("number"==typeof e[0]&&"number"==typeof e[1],function(){return"both resolution values must be a number but had values "+e}),t.util.assert(ht(e[0],r),function(){return"height of "+e[0]+" is invalid for output stride "+r+"."}),t.util.assert(ht(e[1],r),function(){return"width of "+e[1]+" is invalid for output stride "+r+"."})}function mt(e){return e instanceof t.Tensor?[e.shape[0],e.shape[1]]:[e.height,e.width]}function yt(e){return e instanceof t.Tensor?e:t.browser.fromPixels(e)}function vt(e,r){var n=r[0],o=r[1],i=mt(e),u=i[0],s=i[1],a=o/n,l=[0,0,0,0],f=l[0],p=l[1],c=l[2],h=l[3];return s/u<a?(f=0,p=0,c=Math.round(.5*(a*u-s)),h=Math.round(.5*(a*u-s))):(f=Math.round(.5*(1/a*s-u)),p=Math.round(.5*(1/a*s-u)),c=0,h=0),{resized:(0,t.tidy)(function(){var r=yt(e);return r=(0,t.pad3d)(r,[[f,p],[c,h],[0,0]]),t.image.resizeBilinear(r,[n,o])}),padding:{top:f,left:c,right:h,bottom:p}}}function gt(t,e,r,n,o){var i=e[0],u=e[1],s=r[0],a=r[1],l=it(t,(i+n.top+n.bottom)/s,(u+n.left+n.right)/a,-n.top,-n.left);return o?st(l,u):l}var bt={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:257},wt=["MobileNetV1","ResNet50"],xt={MobileNetV1:[8,16,32],ResNet50:[32,16]},_t={MobileNetV1:[.5,.75,1],ResNet50:[1]},St=[1,2,4];function Et(t){if(null==(t=t||bt).architecture&&(t.architecture="MobileNetV1"),wt.indexOf(t.architecture)<0)throw new Error("Invalid architecture "+t.architecture+". Should be one of "+wt);if(null==t.inputResolution&&(t.inputResolution=257),lt(t.inputResolution),null==t.outputStride&&(t.outputStride=16),xt[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride "+t.outputStride+". Should be one of "+xt[t.architecture]+" for architecture "+t.architecture+".");if(null==t.multiplier&&(t.multiplier=1),_t[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier "+t.multiplier+". Should be one of "+_t[t.architecture]+" for architecture "+t.architecture+".");if(null==t.quantBytes&&(t.quantBytes=4),St.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes "+t.quantBytes+". Should be one of "+St+" for architecture "+t.architecture+".");if("MobileNetV1"===t.architecture&&32===t.outputStride&&1!==t.multiplier)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return t}var Mt={flipHorizontal:!1},Ot={flipHorizontal:!1,maxDetections:5,scoreThreshold:.5,nmsRadius:20};function kt(t){var e=t.maxDetections,r=t.scoreThreshold,n=t.nmsRadius;if(e<=0)throw new Error("Invalid maxDetections "+e+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid nmsRadius "+n+".")}var Pt=function(){function t(t,e){ct(t.outputStride),dt(e,t.outputStride),this.baseModel=t,this.inputResolution=e}return t.prototype.estimateMultiplePoses=function(t,e){return void 0===e&&(e=Ot),s(this,void 0,void 0,function(){var r,n,o,i,s,l,f,p,c,h,d,m,y,v,g,b,w,x,_,S,E;return a(this,function(a){switch(a.label){case 0:return r=u({},Ot,e),kt(e),n=this.baseModel.outputStride,o=this.inputResolution,i=mt(t),s=i[0],l=i[1],f=vt(t,o),p=f.resized,c=f.padding,h=this.baseModel.predict(p),d=h.heatmapScores,m=h.offsets,y=h.displacementFwd,v=h.displacementBwd,[4,nt([d,m,y,v])];case 1:return g=a.sent(),b=g[0],w=g[1],x=g[2],_=g[3],[4,T(b,w,x,_,n,r.maxDetections,r.scoreThreshold,r.nmsRadius)];case 2:return S=a.sent(),E=gt(S,[s,l],o,c,r.flipHorizontal),d.dispose(),m.dispose(),y.dispose(),v.dispose(),p.dispose(),[2,E]}})})},t.prototype.estimateSinglePose=function(t,e){return void 0===e&&(e=Mt),s(this,void 0,void 0,function(){var r,n,o,i,s,l,f,p,c,h,d,m,y,v,g,b;return a(this,function(a){switch(a.label){case 0:return r=u({},Mt,e),n=this.baseModel.outputStride,o=this.inputResolution,i=mt(t),s=i[0],l=i[1],f=vt(t,o),p=f.resized,c=f.padding,h=this.baseModel.predict(p),d=h.heatmapScores,m=h.offsets,y=h.displacementFwd,v=h.displacementBwd,[4,z(d,m,n)];case 1:return g=a.sent(),b=gt([g],[s,l],o,c,r.flipHorizontal),d.dispose(),m.dispose(),y.dispose(),v.dispose(),p.dispose(),[2,b[0]]}})})},t.prototype.estimatePoses=function(t,e){return s(this,void 0,void 0,function(){return a(this,function(r){switch(r.label){case 0:return"single-person"!==e.decodingMethod?[3,2]:[4,this.estimateSinglePose(t,e)];case 1:return[2,[r.sent()]];case 2:return[2,this.estimateMultiplePoses(t,e)]}})})},t.prototype.dispose=function(){this.baseModel.dispose()},t}();function jt(r){return s(this,void 0,void 0,function(){var n,o,i,u,s,l,p;return a(this,function(a){switch(a.label){case 0:if(n=r.outputStride,o=r.quantBytes,i=r.multiplier,null==t)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\n        model.");return u=G(n,i,o),[4,(0,e.loadGraphModel)(r.modelUrl||u)];case 1:return s=a.sent(),l=new f(s,n),p=ft(r.inputResolution,l.outputStride),[2,new Pt(l,p)]}})})}function It(r){return s(this,void 0,void 0,function(){var n,o,i,u,s,l;return a(this,function(a){switch(a.label){case 0:if(n=r.outputStride,o=r.quantBytes,null==t)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\n        model.");return i=C(n,o),[4,(0,e.loadGraphModel)(r.modelUrl||i)];case 1:return u=a.sent(),s=new J(u,n),l=ft(r.inputResolution,s.outputStride),[2,new Pt(s,l)]}})})}function Nt(t){return void 0===t&&(t=bt),s(this,void 0,void 0,function(){return a(this,function(e){return"ResNet50"===(t=Et(t)).architecture?[2,It(t)]:"MobileNetV1"===t.architecture?[2,jt(t)]:[2,null]})})}exports.PoseNet=Pt;var Rt="2.2.2";exports.version=Rt;
},{"@tensorflow/tfjs-core":"PqBP","@tensorflow/tfjs-converter":"rGPK"}],"nF9o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceMesh=void 0,exports.load=F;var t=require("@tensorflow/tfjs-core"),e=require("@tensorflow/tfjs-converter");const s=t=>{t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()},n=e=>({startEndTensor:e,startPoint:(0,t.slice)(e,[0,0],[-1,2]),endPoint:(0,t.slice)(e,[0,2],[-1,2])}),o=(e,s)=>{const o=(0,t.mul)(e.startPoint,s),i=(0,t.mul)(e.endPoint,s),r=(0,t.concat2d)([o,i],1);return n(r)},i={strides:[8,16],anchors:[2,6]},r=6;function a(t,e,s){const n=[];for(let o=0;o<s.strides.length;o++){const i=s.strides[o],r=Math.floor((e+i-1)/i),a=Math.floor((t+i-1)/i),c=s.anchors[o];for(let t=0;t<r;t++){const e=i*(t+.5);for(let t=0;t<a;t++){const s=i*(t+.5);for(let t=0;t<c;t++)n.push([s,e])}}}return n}function c(e,s,n){const o=(0,t.slice)(e,[0,1],[-1,2]),i=(0,t.add)(o,s),r=(0,t.slice)(e,[0,3],[-1,2]),a=(0,t.div)(r,n),c=(0,t.div)(i,n),l=(0,t.div)(a,2),h=(0,t.sub)(c,l),d=(0,t.add)(c,l),u=(0,t.mul)(h,n),p=(0,t.mul)(d,n);return(0,t.concat2d)([u,p],1)}function l(e){return e instanceof t.Tensor?[e.shape[0],e.shape[1]]:[e.height,e.width]}function h(e,s){let n,o,i;if(e.topLeft instanceof t.Tensor&&e.bottomRight instanceof t.Tensor){const[r,a]=(0,t.tidy)(()=>[(0,t.concat)([(0,t.sub)(s-1,e.topLeft.slice(0,1)),e.topLeft.slice(1,1)]),(0,t.concat)([(0,t.sub)(s-1,e.bottomRight.slice(0,1)),e.bottomRight.slice(1,1)])]);n=r,o=a,null!=e.landmarks&&(i=(0,t.tidy)(()=>{const n=(0,t.sub)((0,t.tensor1d)([s-1,0]),e.landmarks),o=(0,t.tensor1d)([1,-1]);return(0,t.mul)(n,o)}))}else{const[t,r]=e.topLeft,[a,c]=e.bottomRight;n=[s-1-t,r],o=[s-1-a,c],null!=e.landmarks&&(i=e.landmarks.map(t=>[s-1-t[0],t[1]]))}const r={topLeft:n,bottomRight:o};return null!=i&&(r.landmarks=i),null!=e.probability&&(r.probability=e.probability instanceof t.Tensor?e.probability.clone():e.probability),r}function d(e,s){return(0,t.tidy)(()=>{let t;return t=e.hasOwnProperty("box")?e.box:e,o(t,s).startEndTensor.squeeze()})}class u{constructor(e,s,n,o,r,c){this.blazeFaceModel=e,this.width=s,this.height=n,this.maxFaces=o,this.anchorsData=a(s,n,i),this.anchors=(0,t.tensor2d)(this.anchorsData),this.inputSizeData=[s,n],this.inputSize=(0,t.tensor1d)([s,n]),this.iouThreshold=r,this.scoreThreshold=c}async getBoundingBoxes(e,s,o=!0){const[i,a,l]=(0,t.tidy)(()=>{const s=e.resizeBilinear([this.width,this.height]),n=(0,t.mul)((0,t.sub)(s.div(255),.5),2),o=this.blazeFaceModel.predict(n).squeeze(),i=c(o,this.anchors,this.inputSize),r=(0,t.slice)(o,[0,0],[-1,1]);return[o,i,(0,t.sigmoid)(r).squeeze()]}),h=console.warn;console.warn=(()=>{});const d=t.image.nonMaxSuppression(a,l,this.maxFaces,this.iouThreshold,this.scoreThreshold);console.warn=h;const u=await d.array();d.dispose();let p=u.map(e=>(0,t.slice)(a,[e,0],[1,-1]));s||(p=await Promise.all(p.map(async t=>{const e=await t.array();return t.dispose(),e})));const f=e.shape[1],m=e.shape[2];let g;g=s?(0,t.div)([m,f],this.inputSize):[m/this.inputSizeData[0],f/this.inputSizeData[1]];const b=[];for(let c=0;c<p.length;c++){const e=p[c],a=(0,t.tidy)(()=>{const a=n(e instanceof t.Tensor?e:(0,t.tensor2d)(e));if(!o)return a;const h=u[c];let d;return d=s?this.anchors.slice([h,0],[1,2]):this.anchorsData[h],{box:a,landmarks:(0,t.slice)(i,[h,r-1],[1,-1]).squeeze().reshape([r,-1]),probability:(0,t.slice)(l,[h],[1]),anchor:d}});b.push(a)}return a.dispose(),l.dispose(),i.dispose(),{boxes:b,scaleFactor:g}}async estimateFaces(e,n=!1,o=!1,i=!0){const[,r]=l(e),a=(0,t.tidy)(()=>(e instanceof t.Tensor||(e=t.browser.fromPixels(e)),e.toFloat().expandDims(0))),{boxes:c,scaleFactor:u}=await this.getBoundingBoxes(a,n,i);return a.dispose(),n?c.map(t=>{const e=d(t,u);let s={topLeft:e.slice([0],[2]),bottomRight:e.slice([2],[2])};if(i){const{landmarks:e,probability:n,anchor:o}=t,i=e.add(o).mul(u);s.landmarks=i,s.probability=n}return o&&(s=h(s,r)),s}):Promise.all(c.map(async t=>{const e=d(t,u);let n;if(i){const[o,i,r]=await Promise.all([t.landmarks,e,t.probability].map(async t=>t.array())),a=t.anchor,[c,l]=u,h=o.map(t=>[(t[0]+a[0])*c,(t[1]+a[1])*l]);n={topLeft:i.slice(0,2),bottomRight:i.slice(2),landmarks:h,probability:r},s(t.box),t.landmarks.dispose(),t.probability.dispose()}else{const t=await e.array();n={topLeft:t.slice(0,2),bottomRight:t.slice(2)}}return e.dispose(),o&&(n=h(n,r)),n}))}}const p="https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1";async function f({maxFaces:t=10,inputWidth:s=128,inputHeight:n=128,iouThreshold:o=.3,scoreThreshold:i=.75}={}){const r=await(0,e.loadGraphModel)(p,{fromTFHub:!0});return new u(r,s,n,t,o,i)}const m={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function g(t){null!=t&&null!=t.startPoint&&(t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose())}function b(e,s,n){return{startEndTensor:e,startPoint:null!=s?s:(0,t.slice)(e,[0,0],[-1,2]),endPoint:null!=n?n:(0,t.slice)(e,[0,2],[-1,2])}}function y(e,s){const n=(0,t.mul)(e.startPoint,s),o=(0,t.mul)(e.endPoint,s);return b((0,t.concat2d)([n,o],1))}function x(e){return(0,t.tidy)(()=>{const s=(0,t.sub)(e.endPoint,e.startPoint);return(0,t.abs)(s)})}function w(e){return(0,t.tidy)(()=>{const s=(0,t.div)((0,t.sub)(e.endPoint,e.startPoint),2);return(0,t.add)(e.startPoint,s)})}function P(e,s,n){const o=s.shape[1],i=s.shape[2],r=e.startEndTensor;return(0,t.tidy)(()=>{const e=(0,t.concat2d)([r.slice([0,1],[-1,1]),r.slice([0,0],[-1,1]),r.slice([0,3],[-1,1]),r.slice([0,2],[-1,1])],0),a=(0,t.div)(e.transpose(),[o,i,o,i]);return t.image.cropAndResize(s,a,[0],n)})}function E(e,s=1.5){return(0,t.tidy)(()=>{const n=w(e),o=x(e),i=(0,t.mul)((0,t.div)(o,2),s),r=(0,t.sub)(n,i),a=(0,t.add)(n,i);return b((0,t.concat2d)([r,a],1),r,a)})}const O=468,I=.25;class L{constructor(t,e,s,n,o,i){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=t,this.meshDetector=e,this.meshWidth=s,this.meshHeight=n,this.maxContinuousChecks=o,this.maxFaces=i}async predict(e){if(this.shouldUpdateRegionsOfInterest()){const t=!0,s=!1,{boxes:n,scaleFactor:o}=await this.boundingBoxDetector.getBoundingBoxes(e,t,s);if(0===n.length)return o.dispose(),this.clearAllRegionsOfInterest(),null;const i=n.map(t=>E(y(t,o)));n.forEach(g),this.updateRegionsOfInterest(i),this.runsWithoutFaceDetector=0}else this.runsWithoutFaceDetector++;return(0,t.tidy)(()=>this.regionsOfInterest.map((s,n)=>{const o=P(s,e,[this.meshHeight,this.meshWidth]).div(255),[,i,r]=this.meshDetector.predict(o),a=(0,t.reshape)(r,[-1,3]),c=(0,t.div)(x(s),[this.meshWidth,this.meshHeight]),l=(0,t.mul)(a,c.concat((0,t.tensor2d)([1],[1,1]),1)).add(s.startPoint.concat((0,t.tensor2d)([0],[1,1]),1)),h=this.calculateLandmarksBoundingBox(l);return g(this.regionsOfInterest[n]),this.regionsOfInterest[n]=h,{coords:a,scaledCoords:l,box:h,flag:i.squeeze()}}))}updateRegionsOfInterest(t){for(let e=0;e<t.length;e++){const s=t[e],n=this.regionsOfInterest[e];let o=0;if(n&&n.startPoint){const[t,e,i,r]=s.startEndTensor.arraySync()[0],[a,c,l,h]=n.startEndTensor.arraySync()[0],d=Math.max(t,a),u=Math.max(e,c),p=(Math.min(i,l)-d)*(Math.min(r,h)-u);o=p/((i-t)*(r-e)+(l-a)*(h-e)-p)}o>I?g(s):(this.regionsOfInterest[e]=s,g(n))}for(let e=t.length;e<this.regionsOfInterest.length;e++)g(this.regionsOfInterest[e]);this.regionsOfInterest=this.regionsOfInterest.slice(0,t.length)}clearRegionOfInterest(t){null!=this.regionsOfInterest[t]&&(g(this.regionsOfInterest[t]),this.regionsOfInterest=[...this.regionsOfInterest.slice(0,t),...this.regionsOfInterest.slice(t+1)])}clearAllRegionsOfInterest(){for(let t=0;t<this.regionsOfInterest.length;t++)g(this.regionsOfInterest[t]);this.regionsOfInterest=[]}shouldUpdateRegionsOfInterest(){const t=this.regionsOfInterest.length,e=0===t;return 1===this.maxFaces||e?e:t!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks}calculateLandmarksBoundingBox(e){const s=e.slice([0,0],[O,1]),n=e.slice([0,1],[O,1]);return E(b((0,t.stack)([s.min(),n.min(),s.max(),n.max()]).expandDims(0)))}}const T="https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",B=192,R=192;async function F({maxContinuousChecks:t=5,detectionConfidence:e=.9,maxFaces:s=10,iouThreshold:n=.3,scoreThreshold:o=.75}={}){const[i,r]=await Promise.all([C(s,n,o),M()]);return new v(i,r,t,e,s)}async function C(t,e,s){return f({maxFaces:t,iouThreshold:e,scoreThreshold:s})}async function M(){return(0,e.loadGraphModel)(T,{fromTFHub:!0})}function D(e){return e instanceof t.Tensor?[e.shape[0],e.shape[1]]:[e.height,e.width]}function k(e,s){if(e.mesh instanceof t.Tensor){const[n,o,i,r]=(0,t.tidy)(()=>{const n=(0,t.tensor1d)([s-1,0,0]),o=(0,t.tensor1d)([1,-1,1]);return(0,t.tidy)(()=>[(0,t.concat)([(0,t.sub)(s-1,e.boundingBox.topLeft.slice(0,1)),e.boundingBox.topLeft.slice(1,1)]),(0,t.concat)([(0,t.sub)(s-1,e.boundingBox.bottomRight.slice(0,1)),e.boundingBox.bottomRight.slice(1,1)]),(0,t.sub)(n,e.mesh).mul(o),(0,t.sub)(n,e.scaledMesh).mul(o)])});return Object.assign({},e,{boundingBox:{topLeft:n,bottomRight:o},mesh:i,scaledMesh:r})}return Object.assign({},e,{boundingBox:{topLeft:[s-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[s-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map(t=>{const e=t.slice(0);return e[0]=s-1-t[0],e}),scaledMesh:e.scaledMesh.map(t=>{const e=t.slice(0);return e[0]=s-1-t[0],e})})}class v{constructor(t,e,s,n,o){this.pipeline=new L(t,e,B,R,s,o),this.detectionConfidence=n}static getAnnotations(){return m}async estimateFaces(e,s=!1,n=!1){const[,o]=D(e),i=(0,t.tidy)(()=>(e instanceof t.Tensor||(e=t.browser.fromPixels(e)),e.toFloat().expandDims(0))),r=(0,t.env)().get("WEBGL_PACK_DEPTHWISECONV");(0,t.env)().set("WEBGL_PACK_DEPTHWISECONV",!0);const a=await this.pipeline.predict(i);return(0,t.env)().set("WEBGL_PACK_DEPTHWISECONV",r),i.dispose(),null!=a&&a.length>0?Promise.all(a.map(async(t,e)=>{const{coords:i,scaledCoords:r,box:a,flag:c}=t;let l=[c];s||(l=l.concat([i,r,a.startPoint,a.endPoint]));const h=await Promise.all(l.map(async t=>t.array())),d=h[0];if(c.dispose(),d<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(e),s){const t={faceInViewConfidence:d,mesh:i,scaledMesh:r,boundingBox:{topLeft:a.startPoint.squeeze(),bottomRight:a.endPoint.squeeze()}};return n?k(t,o):t}const[u,p,f,g]=h.slice(1);r.dispose(),i.dispose();let b={faceInViewConfidence:d,boundingBox:{topLeft:f,bottomRight:g},mesh:u,scaledMesh:p};n&&(b=k(b,o));const y={};for(const s in m)y[s]=m[s].map(t=>b.scaledMesh[t]);return b.annotations=y,b})):[]}}exports.FaceMesh=v;
},{"@tensorflow/tfjs-core":"PqBP","@tensorflow/tfjs-converter":"rGPK"}],"KLDv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initializers=exports.constraints=exports.callbacks=exports.SymbolicTensor=exports.Sequential=exports.RNN=exports.LayersModel=exports.LayerVariable=exports.InputSpec=exports.History=exports.EarlyStopping=exports.CustomCallback=exports.CallbackList=exports.Callback=void 0,exports.input=oi,exports.layers=void 0,exports.loadLayersModel=si,exports.metrics=void 0,exports.model=ii,exports.models=void 0,exports.registerCallbackConstructor=ui,exports.regularizers=void 0,exports.sequential=ai,exports.version_layers=void 0;var t=require("@tensorflow/tfjs-core"),e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)};function n(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))(function(i,a){function s(t){try{u(r.next(t))}catch(t){a(t)}}function o(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,o)}u((r=r.apply(t,e||[])).next())})}function s(t,e){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}function o(){return null==r&&(r=(0,t.backend)().epsilon()),r}function u(){return"channelsLast"}var l=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),c=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),h=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),p=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),f=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error),d=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return n(e,t),e}(Error);function g(t,e){if(Array.isArray(t)){for(var n=[],r=0;r<e;r++)n=n.concat(t);return n}return(n=new Array(e)).fill(t),n}function m(t,e){if(!t)throw new f(e)}function y(t,e){for(var n=0,r=0,i=t;r<i.length;r++)i[r]===e&&n++;return n}function v(t){return 1===t.length?t[0]:t}function b(t){return Array.isArray(t)?t:[t]}function w(t){var e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function z(t){return t.length<=1?t:-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,function(t,e){return e.toUpperCase()})}var k={};function S(t){if(null==t)return null;var e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function N(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach(function(t){return N(t)});else for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e],i=t[r];null!=i&&"object"==typeof i&&(Array.isArray(i)||"ndarray"!==i.type||"number"!=typeof i.value?N(i):t[r]=i.value)}}function C(t,e,n,r,a){var s,o,u;if(void 0===e&&(e={}),void 0===n&&(n={}),void 0===r&&(r="object"),void 0===a&&(a=!1),"string"==typeof t){var l=t,c=void 0;if(l in n)c=n[l];else if(l in k)c=k[l];else if(null==(c=e[l]))throw new h("Unknown "+r+": "+t+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return c}var p=t;if(null==p.className||null==p.config)throw new h(r+": Improper config format: "+JSON.stringify(p)+".\n'className' and 'config' must set.");var f=p.className,d=void 0,g=void 0;if(f in n?(d=(s=n[f])[0],g=s[1]):f in k?(d=(o=k.className)[0],g=o[1]):f in e&&(d=(u=e[f])[0],g=u[1]),null==d)throw new h("Unknown "+r+": "+f+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=g){for(var m={},y=0,v=Object.keys(k);y<v.length;y++)m[A=v[y]]=k[A];for(var b=0,w=Object.keys(n);b<w.length;b++)m[A=w[b]]=n[A];p.config.customObjects=m;for(var z=i({},k),S=0,C=Object.keys(n);S<C.length;S++){var A=C[S];k[A]=n[A]}N(p.config);var I=g(d,p.config,n,a);return k=i({},z),I}z=i({},k);for(var x=0,T=Object.keys(n);x<T.length;x++)A=T[x],k[A]=n[A];return I=new d(p.config),k=i({},z),I}function A(t,e){return t<e?-1:t>e?1:0}function I(t,e){return-1*A(t,e)}function x(t){if(null==t)return t;for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];-1===e.indexOf(i)&&e.push(i)}return e}function T(t){if(null==t)throw new h("Invalid value in obj: "+JSON.stringify(t));for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function L(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new h(n+" is not a valid "+e+".  Valid values are "+t+" or null/undefined.")}function E(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),m(n>=0),m(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(function(t){return typeof t===e})}function O(e,n){Array.isArray(e)?(t.util.assert(e.length>0,function(){return n+" is unexpectedly an empty array."}),e.forEach(function(t,e){return O(t,"element "+(e+1)+" of "+n)})):t.util.assert(Number.isInteger(e)&&e>0,function(){return"Expected "+n+" to be a positive integer, but got "+D(e)+"."})}function D(t){return null===t?"null":Array.isArray(t)?"["+t.map(function(t){return D(t)}).join(",")+"]":"string"==typeof t?'"'+t+'"':""+t}function R(e,n){var r,i=t.util.now();return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=t.util.now();return o-i<n?r:(i=o,r=e.apply(void 0,a))}}function F(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}function _(e,n){return(0,t.tidy)(function(){return(0,t.sqrt)((0,t.sum)((0,t.mulStrict)(e,e),n,!0))})}var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getConfig=function(){return{}},e}(t.serialization.Serializable),B=function(e){function r(t){var n=e.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return n(r,e),r.prototype.apply=function(e){var n=this;return(0,t.tidy)(function(){var r=_(e,n.axis),i=(0,t.clipByValue)(r,0,n.maxValue);return(0,t.mul)(e,(0,t.div)(i,(0,t.add)(o(),r)))})},r.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},r.className="MaxNorm",r}(M);t.serialization.registerClass(B);var P=function(e){function r(t){var n=e.call(this)||this;return n.defaultAxis=0,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return n(r,e),r.prototype.apply=function(e){var n=this;return(0,t.tidy)(function(){return(0,t.div)(e,(0,t.add)(o(),_(e,n.axis)))})},r.prototype.getConfig=function(){return{axis:this.axis}},r.className="UnitNorm",r}(M);t.serialization.registerClass(P);var j=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.relu)(e)},r.className="NonNeg",r}(M);t.serialization.registerClass(j);var W=function(e){function r(t){var n=e.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=t.minValue?t.minValue:n.defaultMinValue,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.rate=null!=t.rate?t.rate:n.defaultRate,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return n(r,e),r.prototype.apply=function(e){var n=this;return(0,t.tidy)(function(){var r=_(e,n.axis),i=(0,t.add)((0,t.mul)(n.rate,(0,t.clipByValue)(r,n.minValue,n.maxValue)),(0,t.mul)(1-n.rate,r));return(0,t.mul)(e,(0,t.div)(i,(0,t.add)(o(),r)))})},r.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},r.className="MinMaxNorm",r}(M);t.serialization.registerClass(W);var U={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function V(t){return S(t)}function q(e,n){return void 0===n&&(n={}),C(e,t.serialization.SerializationMap.getMap().classNameMap,n,"constraint")}function J(t){return null==t?null:"string"==typeof t?q({className:t in U?U[t]:t,config:{}}):t instanceof M?t:q(t)}function H(t){return new B(t)}function Z(t){return new P(t)}function K(){return new j}function G(t){return new W(t)}var Y=Object.freeze({maxNorm:H,unitNorm:Z,nonNeg:K,minMaxNorm:G}),X=["channelsFirst","channelsLast"],$=["valid","same","causal"],Q=["max","avg"],tt=["sum","mul","concat","ave"],et=new Map;function nt(t){L(X,"DataFormat",t)}function rt(t){L($,"PaddingMode",t)}function it(t){L(Q,"PoolMode",t)}exports.constraints=Y;var at=[],st="/";function ot(t,e){at.push(t);try{var n=e();return at.pop(),n}catch(t){throw at.pop(),t}}function ut(){return 0===at.length?"":at.join(st)+st}function lt(t){if(!pt(t))throw new Error("Not a valid tensor name: '"+t+"'");return ut()+t}function ct(t){if(!pt(t))throw new Error("Not a valid tensor name: '"+t+"'");et.has(t)||et.set(t,0);var e=et.get(t);if(et.set(t,et.get(t)+1),e>0){var n=t+"_"+e;return et.set(n,1),n}return t}var ht=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function pt(t){return!!t.match(ht)}function ft(t){return t===parseInt(t.toString(),10)}function dt(t,e,n){null==e&&(e=0),null==n&&(n=t.length);for(var r=1,i=e;i<n;++i)r*=t[i];return r}function gt(e){return e=Array.isArray(e)?new Float32Array(e):e,(0,t.tensor1d)(e)}function mt(e){return(0,t.min)(gt(e)).dataSync()[0]}function yt(e){return(0,t.max)(gt(e)).dataSync()[0]}function vt(t,e){if(e<t)throw new h("end ("+e+") < begin ("+t+") is forbidden.");for(var n=[],r=t;r<e;++r)n.push(r);return n}function bt(t,e){return t.asType(e)}function wt(t,e){void 0===e&&(e=-1);var n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function zt(e,n){return(0,t.tidy)(function(){if(2!==e.shape.length)throw new h("repeat() expects a rank-2 tensor, but received a rank-"+e.shape.length+" tensor.");return Tt(wt(e,1),[1,n,1])})}function kt(t){var e=[dt(t.shape)];return t.reshape(e)}function St(t){if(t.rank<=1)throw new h("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var e=[t.shape[0],dt(t.shape,1)];return t.reshape(e)}function Nt(e,n,r){return(0,t.tidy)(function(){switch(e.rank){case 1:return(0,t.slice1d)(e,n,r);case 2:return(0,t.slice2d)(e,[n,0],[r,e.shape[1]]);case 3:return(0,t.slice3d)(e,[n,0,0],[r,e.shape[1],e.shape[2]]);case 4:return(0,t.slice4d)(e,[n,0,0,0],[r,e.shape[1],e.shape[2],e.shape[3]]);case 5:return(0,t.slice)(e,[n,0,0,0,0],[r,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return(0,t.slice)(e,[n,0,0,0,0,0],[r,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new h("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}})}function Ct(e,n,r){return(0,t.tidy)(function(){switch(e.rank){case 1:return(0,t.slice1d)(e,n,r);case 2:return(0,t.slice2d)(e,[0,n],[e.shape[0],r]);case 3:return(0,t.slice3d)(e,[0,0,n],[e.shape[0],e.shape[1],r]);case 4:return(0,t.slice4d)(e,[0,0,0,n],[e.shape[0],e.shape[1],e.shape[2],r]);default:throw new h("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function At(e,n,r,i){return(0,t.tidy)(function(){switch(e.rank){case 1:return(0,t.slice1d)(e,n,r);case 2:switch(i){case 1:return Nt(e,n,r);case 2:return Ct(e,n,r);default:throw new h("The axis is not within the rank of the tensor "+i)}case 3:switch(i){case 1:return Nt(e,n,r);case 2:return(0,t.slice3d)(e,[0,n,0],[e.shape[0],r,e.shape[2]]);case 3:return Ct(e,n,r);default:throw new h("The axis is not within the rank of the tensor "+i)}case 4:switch(i){case 1:return Nt(e,n,r);case 2:return(0,t.slice4d)(e,[0,n,0,0],[e.shape[0],r,e.shape[2],e.shape[3]]);case 3:return(0,t.slice4d)(e,[0,0,n,0],[e.shape[0],e.shape[1],r,e.shape[3]]);case 4:return Ct(e,n,r);default:throw new h("The axis is not within the rank of the tensor "+i)}default:throw new h("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function It(e,n){var r;return void 0===n&&(n=-1),n<0&&(n=0!==(r=e[0].rank)?r:0),n===e[0].rank&&(n=-1),(0,t.concat)(e,n)}function xt(e,n){switch(e.rank){case 1:return(0,t.concat1d)([e,n]);case 2:return(0,t.concat2d)([e,n],0);case 3:return(0,t.concat3d)([e,n],0);case 4:return(0,t.concat4d)([e,n],0);default:throw new h("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function Tt(e,n){if(Array.isArray(n)||(n=[n]),e.rank!==n.length)throw new h("The length of input n ("+n.length+") does not match the number of dimensions in input x ("+e.rank+")");return(0,t.tile)(e,n)}function Lt(e,n,r,i,a){return void 0===n&&(n=0),void 0===r&&(r=1),(0,t.randomNormal)(e,n,r,i,a)}function Et(e,n,r,i){if(e.rank<2||n.rank<2)throw new p("dot requires both inputs to be rank >= 2 but got x shape = "+e.shape+" and y shape = "+n.shape);if(n.rank>=3&&e.shape.slice(-1)[0]!==(f=n.shape.slice(-2)[0]))throw new p("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+e.shape+" and  y shape = "+n.shape);if(2===e.rank&&2===n.rank){var a=!1,s=!1;return t.fused.matMul({a:e,b:n,transposeA:a,transposeB:s,bias:i?Rt(e.rank,i,u()):null,activation:r})}var o=e.shape.slice(),l=o.pop();e=e.reshape([-1,l]);var c=n.shape.slice(),h=c.pop(),f=c.pop(),d=c.concat([h]),g=Array.from({length:n.rank},function(t,e){return 0===e?n.rank-2:e<=n.rank-2?e-1:e});n=n.transpose(g).reshape([f,-1]);var m=o.concat(d);return a=!1,s=!1,t.fused.matMul({a:e,b:n,transposeA:a,transposeB:s,bias:i?Rt(e.rank,i,u()):null,activation:r}).reshape(m)}function Ot(e,n,r){return(0,t.tidy)(function(){return n=Array.isArray(n)?(0,t.tensor1d)(n,"int32"):n.toInt(),(0,t.gather)(e,n,r)})}function Dt(e){return(0,t.mulStrict)(e,e)}function Rt(t,e,n){var r=e.shape;if(1!==e.rank&&e.rank!==t)throw new h("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t);if(5===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1,1,1]):e.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,1,1,r[0]]):e.reshape([1].concat(r))}else if(4===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1,1]):e.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,1,r[0]]):e.reshape([1].concat(r))}else if(3===t){if("channelsFirst"===n)return 1===r.length?e.reshape([1,r[0],1]):e.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?e.reshape([1,1,r[0]]):e.reshape([1].concat(r))}else if(t<3)return e;throw new h("Unsupported input rank by biasAdd: "+e.rank)}function Ft(e,n,r){return(0,t.tidy)(function(){return null==r&&(r=u()),nt(r),e.add(Rt(e.rank,n,r))})}function _t(e,n){if(void 0===n&&(n=1),1!==n)throw new p("Support for alpha values other than 1 ("+n+") is not implemented yet.");return(0,t.elu)(e)}function Mt(e){return(0,t.tidy)(function(){return(0,t.div)(e,(0,t.abs)(e).add(1))})}function Bt(e,n,r,i){return(0,t.tidy)(function(){return(0,t.dropout)(e,n,r,i)})}function Pt(e){return(0,t.tidy)(function(){var n=(0,t.add)(.5,(0,t.mul)(.2,e));return(0,t.clipByValue)(n,0,1)})}function jt(t,e,n){return void 0===n&&(n=!1),n?t():e()}var Wt=["fanIn","fanOut","fanAvg"],Ut=["normal","uniform","truncatedNormal"];function Vt(t){L(Wt,"FanMode",t)}function qt(t){L(Ut,"Distribution",t)}var Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.fromConfigUsesCustomObjects=function(){return!1},e.prototype.getConfig=function(){return{}},e}(t.serialization.Serializable),Ht=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e,n){return(0,t.zeros)(e,n)},r.className="Zeros",r}(Jt);t.serialization.registerClass(Ht);var Zt=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e,n){return(0,t.ones)(e,n)},r.className="Ones",r}(Jt);t.serialization.registerClass(Zt);var Kt=function(e){function r(t){var n=e.call(this)||this;if("object"!=typeof t)throw new h("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new h("config must have value set but got "+t);return n.value=t.value,n}return n(r,e),r.prototype.apply=function(e,n){var r=this;return(0,t.tidy)(function(){return(0,t.mul)((0,t.scalar)(r.value),(0,t.ones)(e,n))})},r.prototype.getConfig=function(){return{value:this.value}},r.className="Constant",r}(Jt);t.serialization.registerClass(Kt);var Gt=function(e){function r(t){var n=e.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=t.minval||n.DEFAULT_MINVAL,n.maxval=t.maxval||n.DEFAULT_MAXVAL,n.seed=t.seed,n}return n(r,e),r.prototype.apply=function(e,n){return(0,t.randomUniform)(e,this.minval,this.maxval,n)},r.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},r.className="RandomUniform",r}(Jt);t.serialization.registerClass(Gt);var Yt=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return n(e,t),e.prototype.apply=function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new p("randomNormal does not support dType "+e+".");return Lt(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="RandomNormal",e}(Jt);t.serialization.registerClass(Yt);var Xt=function(e){function r(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return n(r,e),r.prototype.apply=function(e,n){if("float32"!==(n=n||"float32")&&"int32"!==n)throw new p("truncatedNormal does not support dType "+n+".");return(0,t.truncatedNormal)(e,this.mean,this.stddev,n,this.seed)},r.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},r.className="TruncatedNormal",r}(Jt);t.serialization.registerClass(Xt);var $t=function(e){function r(t){var n=e.call(this)||this;return n.gain=null!=t.gain?t.gain:1,n}return n(r,e),r.prototype.apply=function(e,n){var r=this;return(0,t.tidy)(function(){if(2!==e.length||e[0]!==e[1])throw new h("Identity matrix initializer can only be used for 2D square matrices.");return(0,t.mul)(r.gain,(0,t.eye)(e[0]))})},r.prototype.getConfig=function(){return{gain:this.gain}},r.className="Identity",r}(Jt);function Qt(t,e){var n,r;if(void 0===e&&(e="channelsLast"),nt(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length))if("channelsFirst"===e){var i=dt(t,2);n=t[1]*i,r=t[0]*i}else"channelsLast"===e&&(i=dt(t,0,t.length-2),n=t[t.length-2]*i,r=t[t.length-1]*i);else{var a=dt(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}t.serialization.registerClass($t);var te=function(e){function r(t){var n=e.call(this)||this;if(t.scale<0)throw new h("scale must be a positive float. Got: "+t.scale);return n.scale=null==t.scale?1:t.scale,n.mode=null==t.mode?"fanIn":t.mode,Vt(n.mode),n.distribution=null==t.distribution?"normal":t.distribution,qt(n.distribution),n.seed=t.seed,n}return n(r,e),r.prototype.apply=function(e,n){var r=Qt(e),i=r[0],a=r[1],s=this.scale;if("fanIn"===this.mode?s/=Math.max(1,i):"fanOut"===this.mode?s/=Math.max(1,a):s/=Math.max(1,(i+a)/2),"normal"===this.distribution){var o=Math.sqrt(s);if("float32"!==(n=n||"float32")&&"int32"!==n)throw new p(this.getClassName()+" does not support dType "+n+".");return(0,t.truncatedNormal)(e,0,o,n,this.seed)}var u=Math.sqrt(3*s);return(0,t.randomUniform)(e,-u,u,n)},r.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},r.className="VarianceScaling",r}(Jt);t.serialization.registerClass(te);var ee=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})||this}return n(e,t),e.prototype.getClassName=function(){return te.className},e.className="GlorotUniform",e}(te);t.serialization.registerClass(ee);var ne=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})||this}return n(e,t),e.prototype.getClassName=function(){return te.className},e.className="GlorotNormal",e}(te);t.serialization.registerClass(ne);var re=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return n(e,t),e.prototype.getClassName=function(){return te.className},e.className="HeNormal",e}(te);t.serialization.registerClass(re);var ie=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})||this}return n(e,t),e.prototype.getClassName=function(){return te.className},e.className="HeUniform",e}(te);t.serialization.registerClass(ie);var ae=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return n(e,t),e.prototype.getClassName=function(){return te.className},e.className="LeCunNormal",e}(te);t.serialization.registerClass(ae);var se=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})||this}return n(e,t),e.prototype.getClassName=function(){return te.className},e.className="LeCunNormal",e}(te);t.serialization.registerClass(se);var oe=function(e){function r(t){var n=e.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==t.gain?n.DEFAULT_GAIN:t.gain,n.seed=t.seed,null!=n.seed)throw new p("Random seed is not implemented for Orthogonal Initializer yet.");return n}return n(r,e),r.prototype.apply=function(e,n){var r=this;return(0,t.tidy)(function(){if(2!==e.length)throw new p("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var n=Lt(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),i=t.linalg.gramSchmidt(n);return e[0]>e[1]&&(i=i.transpose()),(0,t.mul)(r.gain,i)})},r.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},r.className="Orthogonal",r}(Jt);t.serialization.registerClass(oe);var ue={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function le(e,n){return void 0===n&&(n={}),C(e,t.serialization.SerializationMap.getMap().classNameMap,n,"initializer")}function ce(t){return S(t)}function he(t){if("string"==typeof t){var e=t in ue?ue[t]:t;if("GlorotNormal"===e)return new ne;if("GlorotUniform"===e)return new ee;if("HeNormal"===e)return new re;if("HeUniform"===e)return new ie;if("LeCunNormal"===e)return new ae;if("LeCunUniform"===e)return new se;var n={};return n.className=e,n.config={},le(n)}return t instanceof Jt?t:le(t)}function pe(){return new Ht}function fe(){return new Zt}function de(t){return new Kt(t)}function ge(t){return new Gt(t)}function me(t){return new Yt(t)}function ye(t){return new Xt(t)}function ve(t){return new $t(t)}function be(t){return new te(t)}function we(t){return new ee(t)}function ze(t){return new ne(t)}function ke(t){return new re(t)}function Se(t){return new ie(t)}function Ne(t){return new ae(t)}function Ce(t){return new se(t)}function Ae(t){return new oe(t)}var Ie=Object.freeze({zeros:pe,ones:fe,constant:de,randomUniform:ge,randomNormal:me,truncatedNormal:ye,identity:ve,varianceScaling:be,glorotUniform:we,glorotNormal:ze,heNormal:ke,heUniform:Se,leCunNormal:Ne,leCunUniform:Ce,orthogonal:Ae}),xe=0;function Te(){return xe++}exports.initializers=Ie;var Le={};function Ee(t){return void 0===t&&(t=""),t in Le||(Le[t]=0),Le[t]+=1,t+Le[t].toString()}function Oe(t){return Array.isArray(t)&&Array.isArray(t[0])}function De(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Re(t){var e;if(Array.isArray(t)){if(1!==t.length)throw new h("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function Fe(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new h("Expected exactly 1 Shape; got "+t.length)}return t}function _e(t){for(var e=0,n=0,r=t;n<r.length;n++){var i=r[n];0===i.shape.length?e+=1:e+=i.shape.reduce(function(t,e){return t*e})}return e}var Me="Variable",Be=function(){function e(e,n,r,i,a){void 0===n&&(n="float32"),void 0===r&&(r=Me),void 0===i&&(i=!0),void 0===a&&(a=null),this.dtype=null==n?"float32":n,this.shape=e.shape,this.id=Te(),r=null==r?Me:r,this.originalName=lt(r),this.name=ct(this.originalName),this.trainable_=i,this.constraint=a,this.val=(0,t.variable)(e,this.trainable_,this.name,this.dtype)}return e.prototype.read=function(){return this.assertNotDisposed(),this.val},e.prototype.write=function(t){return this.assertNotDisposed(),Pe(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},e.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},e.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Object.defineProperty(e.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this.trainable_=t,this.val.trainable=t},enumerable:!0,configurable:!0}),e}();function Pe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function je(t){return t.map(function(t){return t.read()})}function We(t){t.forEach(function(t){t[0].write(t[1])})}exports.LayerVariable=Be;var Ue=function(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},Ve=function(t,e,n,r,i,a,s){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=s,this.id=Te(),null!=a&&(this.originalName=lt(a),this.name=ct(this.originalName)),this.rank=e.length},qe=0,Je=function(){function t(t,e){this.callArgs=e,this.id=qe++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(var n=0,r=t.inboundLayers;n<r.length;n++){var i=r[n];null!=i&&i.outboundNodes.push(this)}t.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var t=[],e=0,n=this.inboundLayers;e<n.length;e++){var r=n[e];null!=r?t.push(r.name):t.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),He=0,Ze=function(e){function r(t){var n=e.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=He++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=t.name;if(!r){var i=n.getClassName();r=w(i)+"_"+Ee(i)}if(n.name=r,n.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){var a=void 0;if(null!=t.batchInputShape)a=t.batchInputShape;else if(null!=t.inputShape){var s=null;null!=t.batchSize&&(s=t.batchSize),a=[s].concat(t.inputShape)}n.batchInputShape=a;var o=t.dtype;null==o&&(o=t.inputDType),null==o&&(o="float32"),n.dtype=o}return null!=t.weights?n.initialWeights=t.weights:n.initialWeights=null,n._refCount=null,n.fastWeightInitDuringBuild=!1,n}return n(r,e),r.nodeKey=function(t,e){return t.name+"_ib-"+e.toString()},r.prototype.getNodeAtIndex=function(t,e){if(0===this.inboundNodes.length)throw new c("The layer has never been called and thus has no defined "+e+".");if(this.inboundNodes.length<=t)throw new h("Asked to get "+e+" at node "+t+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[t]},r.prototype.getInputAt=function(t){return v(this.getNodeAtIndex(t,"input").inputTensors)},r.prototype.getOutputAt=function(t){return v(this.getNodeAtIndex(t,"output").outputTensors)},Object.defineProperty(r.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new l("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new l("Layer "+this.name+" is not connected, no input to return.");return v(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new l("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new l("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return v(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),r.prototype.calculateLosses=function(){return this.losses.map(function(t){return t()})},Object.defineProperty(r.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"built",{get:function(){return this._built},set:function(t){this._built=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this._trainableWeights.forEach(function(e){return e.trainable=t}),this.trainable_=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"trainableWeights",{get:function(){return this.trainable_?this._trainableWeights.filter(function(t){return t.trainable}):[]},set:function(t){this._trainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._trainableWeights.filter(function(t){return!t.trainable}).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),r.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},r.prototype.assertInputCompatibility=function(t){if(t=b(t),null!=this.inputSpec&&0!==this.inputSpec.length){var e=b(this.inputSpec);if(t.length!==e.length)throw new h("Layer "+this.name+" expects "+e.length+" inputs, but it received "+t.length+" input tensors. Input received: "+t);for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(null!=i){var a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new h("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+i.ndim+", found ndim="+a);if(null!=i.maxNDim&&a>i.maxNDim)throw new h("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+i.maxNDim+", found ndim="+a);if(null!=i.minNDim&&a<i.minNDim)throw new h("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+i.minNDim+", found ndim="+a+".");if(null!=i.dtype&&r.dtype!==i.dtype)throw new h("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+i.dtype+", found dtype="+r.dtype+".");if(i.axes){var s=r.shape;for(var o in i.axes){var u=Number(o),l=i.axes[o],c=u>=0?s[u]:s[s.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new h("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+s+".")}}if(null!=i.shape)for(var p=0;p<i.shape.length;++p){var f=i.shape[p],d=r.shape[p];if(null!=f&&null!=d&&f!==d)throw new h("Input "+n+" is incompatible with layer "+this.name+": expected shape="+i.shape+", found shape="+r.shape+".")}}}}},r.prototype.call=function(t,e){return t},r.prototype.invokeCallHook=function(t,e){null!=this._callHook&&this._callHook(t,e)},r.prototype.setCallHook=function(t){this._callHook=t},r.prototype.clearCallHook=function(){this._callHook=null},r.prototype.apply=function(t,e){var n=this;e=e||{},this.assertNotDisposed();for(var r=b(t),i=!0,a=0,s=r;a<s.length;a++)if(!(s[a]instanceof Ve)){i=!1;break}for(var o=!0,u=0,l=r;u<l.length;u++)if(l[u]instanceof Ve){o=!1;break}if(i===o)throw new h("Arguments to apply() must be all SymbolicTensors or all Tensors");return ot(this.name,function(){if(!n.built){n.assertInputCompatibility(t);for(var i=[],a=0,s=b(t);a<s.length;a++){var u=s[a];i.push(u.shape)}n.build(v(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&o&&(n._refCount=1)}if(n.assertInputCompatibility(t),o){for(var l=[],c=0,h=b(m=n.call(t,e));c<h.length;c++){var f=h[c];-1!==r.indexOf(f)&&(f=f.clone()),l.push(f)}if(m=v(l),null!=n.activityRegularizer)throw new p("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}var d=Ke(t),g=n.computeOutputShape(d),m=void 0,y=Ge(t);if(n.warnOnIncompatibleInputShape(Array.isArray(t)?d[0]:d),m=null!=g&&g.length>0&&Array.isArray(g[0])?g.map(function(r,i){return new Ve(y,r,n,b(t),e,n.name,i)}):new Ve(y,g,n,b(t),e,n.name),n.addInboundNode(t,m,null,null,d,g,e),n._refCount++,null!=n.activityRegularizer)throw new p("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m})},r.prototype.warnOnIncompatibleInputShape=function(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var e=!1;this.batchInputShape.forEach(function(n,r){null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor ("+JSON.stringify(t)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(r.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new l("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var t=[],e=0,n=this.inboundNodes;e<n.length;e++){var r=n[e],i=JSON.stringify(r.outputShapes);-1===t.indexOf(i)&&t.push(i)}if(1===t.length){var a=this.inboundNodes[0].outputShapes;return Array.isArray(a)&&Array.isArray(a[0])&&1===a.length?a[0]:a}throw new l("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),r.prototype.countParams=function(){if(!this.built)throw new c("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return _e(this.weights)},r.prototype.build=function(t){this.built=!0},r.prototype.getWeights=function(t){return void 0===t&&(t=!1),je(t?this.trainableWeights:this.weights)},r.prototype.setWeights=function(e){var n=this;(0,t.tidy)(function(){var r=n.weights;if(r.length!==e.length)throw new h('You called setWeights(weights) on layer "'+n.name+'" with a weight list of length '+e.length+", but the layer was expecting "+r.length+" weights. Provided weights: "+e+"...");if(0!==r.length){for(var i=[],a=je(r),s=0;s<a.length;++s){var o=a[s],u=r[s],l=e[s];if(!t.util.arraysEqual(o.shape,l.shape))throw new h("Layer weight shape "+o.shape+" not compatible with provided weight shape "+l.shape);i.push([u,l])}We(i)}})},r.prototype.addWeight=function(t,e,n,r,i,a,s){if(-1!==this._addedWeightNames.indexOf(t))throw new h("Duplicate weight name "+t+" for layer "+this.name);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=he("zeros"));var o=r.apply(e,n),u=new Be(o,n,t,a,s);return o.dispose(),null!=i&&this.addLoss(function(){return i.apply(u.read())}),null==a&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u},r.prototype.setFastWeightInitDuringBuild=function(t){this.fastWeightInitDuringBuild=t},r.prototype.addLoss=function(t){var e;null==t||Array.isArray(t)&&0===t.length||(t=b(t),void 0!==this._losses&&null!==this._losses&&(e=this.losses).push.apply(e,t))},r.prototype.computeOutputShape=function(t){return t},r.prototype.computeMask=function(t,e){var n=this;if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");e.forEach(function(t){if(null!=t)throw new TypeError("Layer "+n.name+" does not support masking, but was passed an inputMask.")})}return null}return e},r.prototype.addInboundNode=function(t,e,n,r,i,a,s){void 0===s&&(s=null);var o=b(t);e=b(e),n=b(n),r=b(r),i=De(i),a=De(a);for(var u=[],l=[],c=[],h=0,p=o;h<p.length;h++){var f=p[h];u.push(f.sourceLayer),l.push(f.nodeIndex),c.push(f.tensorIndex)}new Je({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:o,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},s);for(var d=0;d<e.length;d++)e[d].sourceLayer=this,e[d].nodeIndex=this.inboundNodes.length-1,e[d].tensorIndex=d},r.prototype.getConfig=function(){var t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t},r.prototype.disposeWeights=function(){return this.weights.forEach(function(t){return t.dispose()}),this.weights.length},r.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},r.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}},r}(t.serialization.Serializable);function Ke(t){for(var e=[],n=0,r=t=b(t);n<r.length;n++){var i=r[n];e.push(i.shape)}return v(e)}function Ge(t){return"float32"}function Ye(t,e,n){if((null==e||null!=n&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),0===e.inboundNodes.length)return[t];var r=e.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var i=[],a=0;a<r.inboundLayers.length;a++)for(var s=0,o=Ye(r.inputTensors[a],r.inboundLayers[a],r.nodeIndices[a]);s<o.length;s++){var u=o[s];-1===i.indexOf(u)&&i.push(u)}return i}exports.SymbolicTensor=Ve,exports.InputSpec=Ue;var Xe,$e=function(t){function e(e){var n=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Ee("input").toString()})||this;if(null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new h("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=e.batchInputShape;if(null==r){if(null==e.inputShape)throw new h("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new h("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";n.batchInputShape=r,n.dtype=i,n.inputSpec=[{shape:r}];var a=new Ve(n.dtype,n.batchInputShape,n,[],{},n.name);return a.nodeIndex=0,a.tensorIndex=0,new Je({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return n(e,t),e.prototype.apply=function(t,e){throw new h("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},e.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},e.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},e.className="InputLayer",e}(Ze);function Qe(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new h("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));var n=t.dtype;return null==n&&(n="float32"),new $e({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function tn(e){return a(this,void 0,void 0,function(){var n,r,i,a,o,u,l,c;return s(this,function(s){switch(s.label){case 0:if(null==e)return[2];for(a in n=[],r=[],i=[],e)"number"!=typeof(o=e[a])&&(u=o,n.push(u.data()),r.push(a),i.push(u));return n.length>0?[4,Promise.all(n)]:[3,2];case 1:for(l=s.sent(),c=0;c<l.length;++c)e[r[c]]=l[c][0];(0,t.dispose)(i),s.label=2;case 2:return[2]}})})}function en(t){if(null!=t)for(var e in t){var n=t[e];"number"!=typeof n&&n.dispose()}}t.serialization.registerClass($e),function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(Xe||(Xe={}));var nn=125,rn=function(){function t(){this.validationData=null}return t.prototype.setParams=function(t){this.params=t},t.prototype.onEpochBegin=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(t){return[2]})})},t.prototype.onEpochEnd=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(t){return[2]})})},t.prototype.onBatchBegin=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(t){return[2]})})},t.prototype.onBatchEnd=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(t){return[2]})})},t.prototype.onTrainBegin=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return[2]})})},t.prototype.onTrainEnd=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return[2]})})},t.prototype.setModel=function(t){},t}(),an=function(){function t(t,e){void 0===e&&(e=10),null==t&&(t=[]),this.callbacks=t,this.queueLength=e}return t.prototype.append=function(t){this.callbacks.push(t)},t.prototype.setParams=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setParams(t)},t.prototype.setModel=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setModel(t)},t.prototype.onEpochBegin=function(t,e){return a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onEpochEnd=function(t,e){return a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchBegin=function(t,e){return a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchEnd=function(t,e){return a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onTrainBegin=function(t){return a(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainBegin(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t.prototype.onTrainEnd=function(t){return a(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainEnd(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t}(),sn=function(e){function r(){return e.call(this)||this}return n(r,e),r.prototype.onEpochBegin=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return this.seen=0,this.totals={},[2]})})},r.prototype.onBatchEnd=function(e,n){return a(this,void 0,void 0,function(){var e,r,i,a,o=this;return s(this,function(s){for(a in null==n&&(n={}),e=null==n.size?0:n.size,this.seen+=e,r=function(r){var a=n[r];if("number"==typeof a)i.totals.hasOwnProperty(r)||(i.totals[r]=0),i.totals[r]=i.totals[r]+a*e;else{var s=void 0;r in i.totals?s=i.totals[r]:i.totals[r]=0;var u=(0,t.tidy)(function(){return(0,t.add)(o.totals[r],(0,t.mul)(a,e))});i.totals[r]=u,null!=s&&s.dispose()}},i=this,n)r(a);return[2]})})},r.prototype.onEpochEnd=function(e,n){return a(this,void 0,void 0,function(){var e,r,i,a,o,u=this;return s(this,function(s){if(null!=n)for(e=function(e){if(null==r.totals[e])return"continue";"number"==typeof r.totals[e]?n[e]=r.totals[e]/r.seen:(0,t.tidy)(function(){var r=(0,t.mul)((0,t.div)(1,u.seen),u.totals[e]);n[e]=r,u.totals[e].dispose(),(0,t.keep)(n[e])})},r=this,i=0,a=this.params.metrics;i<a.length;i++)o=a[i],e(o);return[2]})})},r}(rn),on=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onTrainBegin=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return this.epoch=[],this.history={},[2]})})},e.prototype.onEpochEnd=function(t,e){return a(this,void 0,void 0,function(){var n;return s(this,function(r){for(n in null==e&&(e={}),this.epoch.push(t),e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n]);return[2]})})},e.prototype.syncData=function(){return a(this,void 0,void 0,function(){var t,e,n,r,i,a,o,u,l;return s(this,function(s){switch(s.label){case 0:for(r in t=[],e=[],n=[],this.history)for(i=this.history[r],a=0;a<i.length;++a)"number"!=typeof i[a]&&(o=i[a],t.push(o.data()),e.push(r),n.push(a));return[4,Promise.all(t)];case 1:for(u=s.sent(),l=0;l<u.length;++l)this.history[e[l]][n[l]].dispose(),this.history[e[l]][n[l]]=u[l][0];return[2]}})})},e}(rn),un=function(e){function r(n,r){var i=e.call(this)||this;if(i.currentEpoch=0,i.yieldEvery=r||"auto","auto"===i.yieldEvery&&(i.yieldEvery=nn),"never"===i.yieldEvery&&null!=n.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return t.util.isNumber(i.yieldEvery)&&(i.maybeWait=R(i.maybeWait.bind(i),i.yieldEvery)),i.trainBegin=n.onTrainBegin,i.trainEnd=n.onTrainEnd,i.epochBegin=n.onEpochBegin,i.epochEnd=n.onEpochEnd,i.batchBegin=n.onBatchBegin,i.batchEnd=n.onBatchEnd,i.yield=n.onYield,i}return n(r,e),r.prototype.maybeWait=function(e,n,r){return a(this,void 0,void 0,function(){var i;return s(this,function(a){switch(a.label){case 0:return i=[],null==this.yield?[3,2]:[4,tn(r)];case 1:a.sent(),i.push(this.yield(e,n,r)),a.label=2;case 2:return i.push((0,t.nextFrame)()),[4,Promise.all(i)];case 3:return a.sent(),[2]}})})},r.prototype.onEpochBegin=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return this.currentEpoch=t,null==this.epochBegin?[3,3]:[4,tn(e)];case 1:return n.sent(),[4,this.epochBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},r.prototype.onEpochEnd=function(e,n){return a(this,void 0,void 0,function(){var r;return s(this,function(i){switch(i.label){case 0:return r=[],null==this.epochEnd?[3,2]:[4,tn(n)];case 1:i.sent(),r.push(this.epochEnd(e,n)),i.label=2;case 2:return"epoch"===this.yieldEvery&&r.push((0,t.nextFrame)()),[4,Promise.all(r)];case 3:return i.sent(),[2]}})})},r.prototype.onBatchBegin=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,tn(e)];case 1:return n.sent(),[4,this.batchBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},r.prototype.onBatchEnd=function(e,n){return a(this,void 0,void 0,function(){var r;return s(this,function(i){switch(i.label){case 0:return r=[],null==this.batchEnd?[3,2]:[4,tn(n)];case 1:i.sent(),r.push(this.batchEnd(e,n)),i.label=2;case 2:return"batch"===this.yieldEvery?r.push((0,t.nextFrame)()):t.util.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),[4,Promise.all(r)];case 3:return i.sent(),[2]}})})},r.prototype.onTrainBegin=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return null==this.trainBegin?[3,3]:[4,tn(t)];case 1:return e.sent(),[4,this.trainBegin(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},r.prototype.onTrainEnd=function(t){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return null==this.trainEnd?[3,3]:[4,tn(t)];case 1:return e.sent(),[4,this.trainEnd(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},r}(rn);function ln(t,e){return null==t&&(t={}),t instanceof rn?[t]:Array.isArray(t)&&t[0]instanceof rn?t:b(t).map(function(t){return new un(t,e)})}exports.CustomCallback=un,exports.History=on,exports.CallbackList=an;var cn=function(){function e(){}return e.registerCallbackConstructor=function(n,r){t.util.assert(n>=0&&Number.isInteger(n),function(){return"Verbosity level is expected to be an integer >= 0, but got "+n}),e.checkForDuplicate(r),null==e.constructors[n]&&(e.constructors[n]=[]),e.constructors[n].push(r)},e.checkForDuplicate=function(t){for(var n in e.constructors)e.constructors[+n].forEach(function(e){if(e===t)throw new h("Duplicate callback constructor.")})},e.clear=function(){e.constructors={}},e.createCallbacks=function(t){var n=[];for(var r in e.constructors){var i=+r;t>=i&&n.push.apply(n,e.constructors[i])}return n.map(function(t){return new t})},e.constructors={},e}();function hn(t,e,n,r,i,a,s,o,u){var l=new on,c=[new sn].concat(cn.createCallbacks(e));null!=t&&c.push.apply(c,t),c.push(l);var h=new an(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:s,verbose:e,doValidation:o,metrics:u}),{callbackList:h,history:l}}function pn(e,n,r){return void 0===n&&(n={}),void 0===r&&(r=!1),C(e,t.serialization.SerializationMap.getMap().classNameMap,n,"layer",r)}function fn(e,n){return(0,t.tidy)(function(){"float32"!==e.dtype&&(e=e.asType("float32"));var r=(0,t.sum)(Dt(e),n,!0),i=(0,t.fill)(r.shape,o()),a=(0,t.sqrt)((0,t.maximum)(r,i));return(0,t.div)(e,a)})}function dn(e,n){return(0,t.tidy)(function(){return(0,t.mean)(Dt((0,t.sub)(n,e)),-1)})}function gn(e,n){return(0,t.tidy)(function(){return(0,t.mean)((0,t.abs)((0,t.sub)(n,e)),-1)})}function mn(e,n){return(0,t.tidy)(function(){var r=(0,t.sub)(e,n),i=(0,t.clipByValue)((0,t.abs)(e),o(),Number.MAX_VALUE),a=(0,t.abs)((0,t.div)(r,i));return(0,t.mul)(100,(0,t.mean)(a,-1))})}function yn(e,n){return(0,t.tidy)(function(){var r=(0,t.clipByValue)(n,o(),Number.MAX_VALUE),i=(0,t.log)((0,t.add)(1,r)),a=(0,t.clipByValue)(e,o(),Number.MAX_VALUE),s=(0,t.log)((0,t.add)(1,a));return(0,t.mean)(Dt((0,t.sub)(i,s)),-1)})}function vn(e,n){return(0,t.tidy)(function(){var r=(0,t.maximum)(0,(0,t.sub)(1,(0,t.mul)(e,n)));return(0,t.mean)(Dt(r),-1)})}function bn(e,n){return(0,t.tidy)(function(){var r=(0,t.maximum)(0,(0,t.sub)(1,(0,t.mul)(e,n)));return(0,t.mean)(r,-1)})}function wn(e,n){return(0,t.tidy)(function(){var r=(0,t.sum)((0,t.mul)(e,n),-1),i=(0,t.max)((0,t.mul)((0,t.sub)(1,e),n),-1);return(0,t.maximum)(0,(0,t.add)(1,(0,t.sub)(i,r)))})}function zn(e,n){return(0,t.tidy)(function(){var r=Math.log(2),i=(0,t.sub)(n,e),a=(0,t.sub)((0,t.add)(i,(0,t.softplus)((0,t.mul)(-2,i))),r);return(0,t.mean)(a,-1)})}function kn(e,n,r){return void 0===r&&(r=!1),(0,t.tidy)(function(){if(r)n=(0,t.softmax)(n);else{var i=(0,t.sum)(n,n.shape.length-1,!0);n=(0,t.div)(n,i)}return n=(0,t.clipByValue)(n,o(),1-o()),(0,t.neg)((0,t.sum)((0,t.mul)(e.toFloat(),(0,t.log)(n)),n.shape.length-1))})}function Sn(e,n){return(0,t.tidy)(function(){var r=(0,t.floor)(kt(e)).toInt(),i=(n=(0,t.clipByValue)(n,o(),1-o())).shape;return kn((0,t.oneHot)(r,i[i.length-1]).reshape(i),n,!1)})}function Nn(e,n){if(!t.util.arraysEqual(e.shape,n.shape))throw new h("logits and labels must have the same shape, but got shapes "+JSON.stringify(e.shape)+" and "+JSON.stringify(n.shape));return(0,t.tidy)(function(){var t=n.relu(),r=n.abs().neg();return t.sub(n.mul(e)).add(r.exp().log1p())})}function Cn(e,n){return(0,t.tidy)(function(){var r;return r=(0,t.clipByValue)(n,o(),1-o()),r=(0,t.log)((0,t.div)(r,(0,t.sub)(1,r))),(0,t.mean)(Nn(e,r),-1)})}function An(e,n){return(0,t.tidy)(function(){var r=(0,t.clipByValue)(e,o(),1),i=(0,t.clipByValue)(n,o(),1);return(0,t.sum)((0,t.mul)(e,(0,t.log)((0,t.div)(r,i))),-1)})}function In(e,n){return(0,t.tidy)(function(){var r=(0,t.log)((0,t.add)(o(),n));return(0,t.mean)((0,t.sub)(n,(0,t.mul)(e,r)),-1)})}function xn(e,n){return(0,t.tidy)(function(){var r=fn(e,-1),i=fn(n,-1),a=(0,t.mul)(r,i);return(0,t.neg)((0,t.sum)(a,-1))})}var Tn={meanSquaredError:dn,meanAbsoluteError:gn,meanAbsolutePercentageError:mn,meanSquaredLogarithmicError:yn,squaredHinge:vn,hinge:bn,categoricalHinge:wn,logcosh:zn,categoricalCrossentropy:kn,sparseCategoricalCrossentropy:Sn,binaryCrossentropy:Cn,kullbackLeiblerDivergence:An,poisson:In,cosineProximity:xn};function Ln(t){if("string"==typeof t){if(t in Tn)return Tn[t];var e="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e="Unknown loss "+t+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new h(e)}return t}function En(e,n){return(0,t.tidy)(function(){var r=(0,t.mul)(.5,(0,t.onesLike)(n)),i=bt((0,t.greater)(n,r),e.dtype);return(0,t.mean)((0,t.equal)(e,i),-1)})}function On(e,n){return(0,t.tidy)(function(){return bt((0,t.equal)((0,t.argMax)(e,-1),(0,t.argMax)(n,-1)),"float32")})}function Dn(e,n){return(0,t.tidy)(function(){return(0,t.logicalAnd)(e.equal(1),n.equal(1)).sum().cast("float32")})}function Rn(e,n){return(0,t.tidy)(function(){return(0,t.logicalAnd)(e.equal(1),n.equal(0)).sum().cast("float32")})}function Fn(e,n){return(0,t.tidy)(function(){return(0,t.logicalAnd)(e.equal(0),n.equal(1)).sum().cast("float32")})}function _n(e,n){return(0,t.tidy)(function(){var r=Dn(e,n),i=Fn(e,n),a=r.add(i);return(0,t.where)((0,t.greater)(a,0),r.div(a),0).cast("float32")})}function Mn(e,n){return(0,t.tidy)(function(){var r=Dn(e,n),i=Rn(e,n),a=r.add(i);return(0,t.where)((0,t.greater)(a,0),r.div(a),0).cast("float32")})}function Bn(t,e){return Cn(t,e)}function Pn(e,n){return e.rank===n.rank&&(e=e.squeeze([e.rank-1])),(n=n.argMax(-1)).dtype!==e.dtype&&(n=n.asType(e.dtype)),(0,t.equal)(e,n).asType("float32")}var jn=dn,Wn=dn,Un=gn,Vn=gn,qn=mn,Jn=mn,Hn=kn,Zn=xn,Kn=Sn,Gn={binaryAccuracy:En,categoricalAccuracy:On,precision:_n,categoricalCrossentropy:Hn,sparseCategoricalCrossentropy:Kn,mse:jn,MSE:Wn,mae:Un,MAE:Vn,mape:qn,MAPE:Jn,cosine:Zn};function Yn(t){if("string"==typeof t&&t in Gn)return Gn[t];if("string"!=typeof t&&null!=t)return t;throw new h("Unknown metric "+t)}function Xn(t){if(m(null!==t,"Unknown LossOrMetricFn "+t),"string"==typeof t)return t;for(var e=void 0,n=0,r=Object.keys(Tn);n<r.length;n++){var i=r[n];if(Tn[i]===t){e=i;break}}if(void 0!==e)return e;for(var a=0,s=Object.keys(Gn);a<s.length;a++)if(i=s[a],Gn[i]===t){e=i;break}return void 0!==e?e:t.name}function $n(e){var n={Adagrad:function(){return t.train.adagrad(.01)},Adadelta:function(){return t.train.adadelta(1,.95,o())},Adam:function(){return t.train.adam(.001,.9,.999,o())},Adamax:function(){return t.train.adamax(.002,.9,.999,o(),0)},RMSProp:function(){return t.train.rmsprop(.001,.9,0,o())},SGD:function(){return t.train.sgd(.01)}};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,e in n)return n[e]();throw new h("Unknown Optimizer "+e)}var Qn=1048576;function tr(t,e,n){if(void 0===n&&(n=!1),null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!er(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(t);r.length>Qn&&console.warn('User-defined metadata of model "'+e+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+Qn+".")}}function er(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];if("string"!=typeof r)return!1;if(!er(t[r]))return!1}return!0}if(Array.isArray(t)){for(var i=0,a=t;i<a.length;i++)if(!er(a[i]))return!1;return!0}return!1}var s=typeof t;return"string"===s||"number"===s||"boolean"===s}function nr(t,e,n,r){void 0===r&&(r=console.log);var i,a=ir(t),s=["Layer (type)","Output shape","Param #"];if(a?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(function(t){return Math.floor(e*t)})),!a)for(var o in s.push("Receives inputs"),i=[],t.nodesByDepth)i.push.apply(i,t.nodesByDepth[o]);r("_".repeat(e)),ar(s,n,r),r("=".repeat(e));for(var u=t.layers,l=0;l<u.length;++l)a?sr(u[l],n,r):or(u[l],n,i,r),r((l===u.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();var c=rr(t),h=_e(t.nonTrainableWeights);r("Total params: "+(c+h)),r("Trainable params: "+c),r("Non-trainable params: "+h),r("_".repeat(e))}function rr(t){return null!=t.collectedTrainableWeights?_e(t.collectedTrainableWeights):_e(t.trainableWeights)}function ir(t){var e=!0,n=[],r=[];for(var i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(var a=0,s=n;a<s.length;a++){var o=s[a];if(o.length>1||1===o.length&&o[0].inboundLayers.length>1){e=!1;break}r.push.apply(r,o)}if(e)for(var u=0,l=t.layers;u<l.length;u++){for(var c=!1,h=0,p=l[u].inboundNodes;h<p.length;h++){var f=p[h];if(-1!==r.indexOf(f)){if(c){e=!1;break}c=!0}}if(!e)break}return e}function ar(t,e,n){void 0===n&&(n=console.log);for(var r="",i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[i]).slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function sr(t,e,n){var r;try{r=JSON.stringify(t.outputShape)}catch(t){r="multiple"}ar([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],e,n)}function or(t,e,n,r){var i;try{i=JSON.stringify(t.outputShape)}catch(t){i="multiple"}for(var a=[],s=0,o=t.inboundNodes;s<o.length;s++){var u=o[s];if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,h=u.nodeIndices[l],p=u.tensorIndices[l];a.push(c+"["+h+"]["+p+"]")}}var f=t.name,d=t.getClassName(),g=0===a.length?"":a[0];for(ar([f+" ("+d+")",i,t.countParams().toString(),g],e,r),l=1;l<a.length;++l)ar(["","","",a[l]],e,r)}function ur(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}function lr(t,e){if(null===t)return null;if("string"==typeof t)return z(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var n=[],r=t.length,i=0;i<r;++i){var a=t[i];ur(e,i,a)?n.push(a):n.push(lr(a,e))}return n}for(var s={},o=0,u=Object.keys(t);o<u.length;o++){var l=u[o],c=t[l];if("name"===l&&"string"==typeof c)s[l]=c;else{var h=z(l);s[h]=lr(c,h)}}return s}function cr(t,e){if(null==t)return null;if("string"==typeof t)return w(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){for(var n=[],r=t.length,i=0;i<r;++i){var a=t[i];ur(e,i,a)?n.push(a):n.push(cr(a,e))}return n}for(var s={},o=0,u=Object.keys(t);o<u.length;o++){var l=u[o],c=t[l];s[w(l)]="name"!==l&&"className"!==l||"string"!=typeof c?cr(c,l):c}return s}var hr="1.7.4";function pr(e,n){if(null==e.dtype||e.dtype===n.dtype)return n;try{return(0,t.cast)(n,e.dtype)}catch(r){throw new h("The dtype of the feed ("+n.dtype+") can not be cast to the dtype of the key '"+e.name+"' ("+e.dtype+").")}}exports.version_layers=hr;var fr=function(){function e(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;for(var r=0,i=t;r<i.length;r++){var a=i[r];this.add(a.key,a.value)}}}return e.prototype.add=function(t,e,n){if(null!=this.id2Value[t.id])throw new h("Duplicate key: name="+t.name+", id="+t.id);return this.id2Value[t.id]=pr(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this},e.prototype.addFeed=function(t){this.add(t.key,t.value)},e.prototype.hasKey=function(t){return null!=this.id2Value[t.id]},e.prototype.names=function(){return Object.keys(this.name2Id)},e.prototype.getValue=function(t){if(t instanceof Ve){if(null==this.id2Value[t.id])throw new h("Nonexistent key: "+t.name);return this.id2Value[t.id]}var e=this.name2Id[t];if(null==e)throw new h("Feed dict has no SymbolicTensor name: "+t);return this.id2Value[e]},e.prototype.getMask=function(t){if(t instanceof Ve){if(null==this.id2Value[t.id])throw new h("Nonexistent key: "+t.name);return this.id2Mask[t.id]}var e=this.name2Id[t];if(null==e)throw new h("Feed dict has no SymbolicTensor name: "+t);return this.id2Mask[e]},e.prototype.disposeMasks=function(){null!=this.id2Mask&&(0,t.dispose)(this.id2Mask)},e}(),dr={},gr={};function mr(e,n,r,i){for(var a=null!=r&&r.training,s=Array.isArray(e),o=s?e:[e],u=o.map(function(t){return t.name}),l=[],c=n.names(),h=0,p=u;h<p.length;h++){var f=p[h];-1!==c.indexOf(f)?l.push(n.getValue(f)):l.push(null)}null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);var d,g,m=u.join(",")+"|"+n.names().join(",");if(null==dr[m]){var y=yr(o,n);d=y.sorted,g=y.recipientCounts,dr[m]=d,gr[m]=g}d=dr[m],g={},a||Object.assign(g,gr[m]);for(var v=new fr(n),w=0;w<d.length;++w){if(null!=i){var z=(0,t.memory)().numTensors;z>i.maxNumTensors&&(i.maxNumTensors=z),z<i.minNumTensors&&(i.minNumTensors=z)}var k=d[w],S=k.sourceLayer;if(!(S instanceof $e)){for(var N=[],C=[],A=[],I=!1,x=0,T=k.inputs;x<T.length;x++){var L=T[x],E=v.getValue(L),O=v.getMask(L);N.push(E),C.push(O),null!=O&&(I=!0),a||(g[L.name]--,0!==g[L.name]||n.hasKey(L)||-1!==u.indexOf(L.name)||E.isDisposed||!0===L.sourceLayer.stateful||A.push(E))}I&&((r=r||{}).mask=C[0]);var D=b(S.apply(N,r)),R=null;S.supportsMasking&&(R=S.computeMask(N,C));for(var F=wr(k),_=Array.isArray(F)?F:[F],M=0;M<_.length;++M){v.hasKey(_[M])||v.add(_[M],D[M],Array.isArray(R)?R[0]:R);var B=u.indexOf(_[M].name);-1!==B&&(l[B]=D[M])}a||(0,t.dispose)(A)}}return v.disposeMasks(),s?l:l[0]}function yr(e,n){t.util.assert(null!=e&&e.length>0,function(){return"Expected at least one fetch, got none"});var r=[],i={};if(1===e.length){var a=br(e[0],n);r=a.sorted,i=a.recipientMap}else for(var s=new Set,o=0,u=e;o<u.length;o++){for(var l=br(u[o],n),c=l.sorted,h=l.recipientMap,p=0,f=c;p<f.length;p++){var d=f[p];s.has(d.name)||(r.push(d),s.add(d.name))}var g=function(t){null==i[t]&&(i[t]=new Set),h[t].forEach(function(e){return i[t].add(e)})};for(var m in h)g(m)}return{sorted:r,recipientCounts:vr(i)}}function vr(t){var e={};for(var n in t)e[n]=t[n].size;return e}function br(t,e){for(var n=new Set,r=[],i={},a=0,s=e.names();a<s.length;a++){var o=s[a];n.add(o)}var u=[],l=[];for(u.push(t);u.length>0;){var c=u[u.length-1];if(n.has(c.name))u.pop();else{var h=l[l.length-1]===u.length-1;if(0===c.inputs.length||h)u.pop(),r.push(c),n.add(c.name),h&&l.pop();else{l.push(u.length-1);for(var p=0,f=c.inputs;p<f.length;p++){var d=f[p];null==i[d.name]&&(i[d.name]=new Set),i[d.name].add(c.name),n.has(d.name)||u.push(d)}}}}return{sorted:r,recipientMap:i}}function wr(t){var e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{for(var n=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var i=0,a=t.sourceLayer.inboundNodes[r].outputTensors;i<a.length;i++)if(a[i].id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}var zr=function(e){function r(t){var n=e.call(this,{})||this;if(n.containerNodes=new Set,n.name=t.name,null==n.name){var i=n.getClassName().toLowerCase();n.name=Ee(i)}if(n.supportsMasking=!1,n.trainable_=!0,Array.isArray(t.inputs)?n.inputs=t.inputs.slice():n.inputs=[t.inputs],Array.isArray(t.outputs)?n.outputs=t.outputs.slice():n.outputs=[t.outputs],x(n.inputs).length!==n.inputs.length)throw new h("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+n.inputs.map(function(t){return t.name}));x(n.outputs).length!==n.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+n.outputs.map(function(t){return t.name})),n.inputLayers=[],n.inputLayersNodeIndices=[],n.inputLayersTensorIndices=[],n.outputLayers=[],n.outputLayersNodeIndices=[],n.outputLayersTensorIndices=[],n.layers=[],n.internalContainerRefs=[];for(var a=0,s=n.outputs;a<s.length;a++){var o=(E=s[a]).sourceLayer,u=E.nodeIndex,l=E.tensorIndex;n.outputLayers.push(o),n.outputLayersNodeIndices.push(u),n.outputLayersTensorIndices.push(l)}for(var p=0,f=n.inputs;p<f.length;p++)o=(E=f[p]).sourceLayer,u=E.nodeIndex,l=E.tensorIndex,m(0===u,"input layer has >1 nodes"),m(0===l,"input layer has >1 tensors"),n.inputLayers.push(o),n.inputLayersNodeIndices.push(u),n.inputLayersTensorIndices.push(l);n.inputNames=[],n.outputNames=[],n.feedInputShapes=[],n.feedInputNames=[],n.feedOutputNames=[];for(var d=0;d<n.inputLayers.length;d++){if(!((o=n.inputLayers[d])instanceof $e))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+t.inputs+". Input "+d+" (0-based) originates from layer type "+o.getClassName()+".");n.inputNames.push(o.name),n.feedInputShapes.push(o.batchInputShape),n.feedInputNames.push(o.name)}for(var g=0,y=n.outputLayers;g<y.length;g++)o=y[g],n.outputNames.push(o.name);n.internalInputShapes=n.inputs.map(function(t){return t.shape}),n.internalOutputShapes=n.outputs.map(function(t){return t.shape});for(var v={},b={},w={},z={},k={},S=[],N=function(t,e,i,a,s,o){null!=a&&null!=s&&null!=o||(a=t.sourceLayer,s=t.nodeIndex,o=t.tensorIndex);var u=a.inboundNodes[s];if(-1!==i.indexOf(u))throw new c("The tensor "+t.name+' at layer "'+a.name+'" is part of a cycle.');if(-1===e.indexOf(u)){n.containerNodes.add(r.nodeKey(a,s)),a.id in k||(k[a.id]=Object.keys(k).length),-1===i.indexOf(u)&&i.push(u);for(var l=u.inboundLayers.length,h=0;h<l;h++){var p=u.inputTensors[h],f=u.inboundLayers[h],d=u.nodeIndices[h],g=u.tensorIndices[h];N(p,e,i,f,d,g)}for(e.push(u);i.indexOf(u)>=0;)i.splice(i.indexOf(u),1);S.push(u)}},C=[],A=[],T=0,L=n.outputs;T<L.length;T++){var E=L[T];N(E,C,A)}for(var O=0,D=S.slice().reverse();O<D.length;O++){b[(et=D[O]).id]=et,et.id in v||(v[et.id]=0);var R=v[et.id],F=null==w[et.outboundLayer.id]?0:w[et.outboundLayer.id];for(R=Math.max(R,F),w[et.outboundLayer.id]=R,z[et.outboundLayer.id]=et.outboundLayer,v[et.id]=R,d=0;d<et.inboundLayers.length;d++){var _=et.inboundLayers[d],M=(u=et.nodeIndices[d],_.inboundNodes[u]),B=null==v[M.id]?0:v[M.id];v[M.id]=Math.max(R+1,B),b[M.id]=M}}var P={};for(var j in v)(R=v[j])in P||(P[R]=[]),P[R].push(b[j]);var W={};for(var U in w)(R=w[U])in W||(W[R]=[]),W[R].push(z[U]);var V=Object.keys(W).map(function(t){return parseInt(t,10)}).sort(I);n.layers=[];for(var q=0,J=V;q<J.length;q++){var H=W[R=J[q]];H.sort(function(t,e){var n=k[t.id],r=k[e.id];return n<r?-1:n>r?1:0});for(var Z=0,K=H;Z<K.length;Z++)(o=K[Z])instanceof r&&n.internalContainerRefs.push(o),n.layers.push(o)}n.layersByDepth=W,V=Object.keys(P).map(function(t){return parseInt(t,10)}).sort(I);for(var G=n.inputs.slice(),Y=[],X=0,$=V;X<$.length;X++)for(var Q=0,tt=P[R=$[X]];Q<tt.length;Q++){var et;if(null!=(o=(et=tt[Q]).outboundLayer)){for(var nt=0,rt=et.inputTensors;nt<rt.length;nt++)if(E=rt[nt],-1===G.indexOf(E))throw new c("Graph disconnected: cannot obtain value for tensor "+E+' at layer "'+o.name+'". The following previous layers were accessed without issue: '+Y);for(var it=0,at=et.outputTensors;it<at.length;it++)E=at[it],G.push(E);Y.push(o.name)}}n.nodesByDepth=P;for(var st=n.layers.map(function(t){return t.name}),ot=function(t){var e=st.filter(function(e){return e===t}).length;if(1!==e)throw new c('The name "'+t+'" is used '+e+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(st))},ut=0,lt=st;ut<lt.length;ut++)ot(lt[ut]);return n.outboundNodes=[],n.inboundNodes=[],new Je({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:n.inputs,outputTensors:n.outputs,inputMasks:n.inputs.map(function(t){return null}),outputMasks:n.outputs.map(function(t){return null}),inputShapes:n.inputs.map(function(t){return t.shape}),outputShapes:n.outputs.map(function(t){return t.shape})}),n.built=!0,n._refCount=1,n}return n(r,e),r.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},r.prototype.dispose=function(){this.assertNotDisposed();var t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(var e=0,n=this.layers;e<n.length;e++){var r=n[e];t.numDisposedVariables+=r.dispose().numDisposedVariables}for(var i=0,a=this.internalContainerRefs;i<a.length;i++){var s=a[i];t.numDisposedVariables+=s.dispose().numDisposedVariables}}return t.refCountAfterDispose=this._refCount,t},Object.defineProperty(r.prototype,"trainable",{get:function(){return this.trainable_},set:function(t){this.layers.forEach(function(e){e._trainableWeights.forEach(function(e){return e.trainable=t})}),this.trainable_=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new h("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t=t.concat(r.trainableWeights)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,s=this.layers;a<s.length;a++)r=s[a],i.push.apply(i,r.trainableWeights);return i.concat(t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),r.prototype.loadWeights=function(t,e){void 0===e&&(e=!0);for(var n={},r=0,i=0,a=this.layers;i<a.length;i++)for(var s=0,o=a[i].weights;s<o.length;s++){var u=o[s];if(null!=n[u.originalName])throw new h("Duplicate weight name: "+u.originalName);n[u.originalName]=u,r++}var l=[];for(var c in t){if(null!=n[c])l.push([n[c],t[c]]);else if(e)throw new h("Provided weight data has no target variable: "+c);delete n[c]}if(e){var p=[];for(var f in n)p.push(f);if(p.length>0)throw new h(p.length+" of "+r+" weights are not set: "+p)}We(l)},r.prototype.updatedConfig=function(){var t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion="tfjs-layers "+hr,e.backend="TensorFlow.js",e},r.prototype.toJSON=function(t,e){void 0===e&&(e=!0);var n=cr(this.updatedConfig());return e?JSON.stringify(n):n},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){e=b(e);for(var t=new fr,i=0;i<r.inputs.length;++i)t.add(r.inputs[i],e[i]);return mr(r.outputs,t,n)})},r.prototype.computeMask=function(e,n){var r=this;return(0,t.tidy)(function(){var t;return e=b(e),t=null==n?g(null,e.length):b(n),r.runInternalGraph(e,t)[1]})},r.prototype.computeOutputShape=function(t){var e=De(t);if(e.length!==this.inputLayers.length)throw new h("Invalid inputShape argument "+t+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<e.length;r++){var i=this.inputLayers[r],a=e[r];n[A=i.name+"_0_0"]=a}var s=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(I);if(s.length>1)for(var o=0,u=s;o<u.length;o++)for(var l=u[o],c=0,p=this.nodesByDepth[l];c<p.length;c++){var f=p[c];if(i=f.outboundLayer,-1===this.inputLayers.map(function(t){return t.id}).indexOf(i.id)){for(var d=[],g=0;g<f.inboundLayers.length;g++){var y=f.inboundLayers[g],b=f.nodeIndices[g],w=f.tensorIndices[g],z=n[A=y.name+"_"+b+"_"+w];d.push(z)}var k=De(i.computeOutputShape(v(d))),S=i.inboundNodes.indexOf(f);for(g=0;g<k.length;g++)n[A=i.name+"_"+S+"_"+g]=k[g]}}var N=[],C=[];for(r=0;r<this.outputLayers.length;r++){i=this.outputLayers[r],S=this.outputLayersNodeIndices[r],w=this.outputLayersTensorIndices[r];var A=i.name+"_"+S+"_"+w;C.push(A)}for(r=0;r<C.length;r++){var x=C[r];m(x in n),N.push(n[x])}return v(N)},r.prototype.runInternalGraph=function(t,e){null==e&&(e=g(null,t.length));for(var n={},r=0;r<this.inputs.length;++r){var i=this.inputs[r],a=t[r],s=e[r];n[i.id]=[a,s]}for(var o=0,u=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(I);o<u.length;o++)for(var l=u[o],c=0,h=this.nodesByDepth[l];c<h.length;c++){for(var f=h[c],d=f.outboundLayer,y=f.inputTensors,v=f.outputTensors,w=new Array,z=0,k=y;z<k.length;z++)(i=k[z]).id in n&&w.push(n[i.id]);if(w.length===y.length){var S={},N=void 0,C=void 0,A=void 0,x=void 0;if(null!=f.callArgs&&(S=f.callArgs),1===w.length){var T=w[0],L=T[0],E=T[1];null==S.mask&&(S.mask=E),A=b(d.call(L,S)),x=b(d.computeMask(L,E)),N=[L],C=[E]}else N=w.map(function(t){return t[0]}),C=w.map(function(t){return t[1]}),null==S.mask&&(S.mask=C),A=b(d.call(N,S)),x=b(d.computeMask(N,C));if(d.activityRegularizer)throw new p("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<v.length;++r)i=v[r],a=A[r],s=x[r],n[i.id]=[a,s]}}for(var O=[],D=[],R=[],F=0,_=this.outputs;F<_.length;F++){m((i=_[F]).id in n,"Could not compute output "+i.name+" : "+i.id);var M=n[i.id],B=M[0];s=M[1],R.push(B.shape),O.push(B),D.push(s)}return[O,D,R]},r.prototype.buildNodeConversionMap=function(t){for(var e,n={},i=0,a=this.layers;i<a.length;i++){var s=a[i];e=s instanceof r?1:0;for(var o=0;o<s.inboundNodes.length;o++){var u=r.nodeKey(s,o);this.containerNodes.has(u)&&(n[u]=e,e+=1)}}return n},r.prototype.getLayer=function(t,e){if(null!=e){if(this.layers.length<=e)throw new h("Was asked to retrieve layer at index "+e+", but model only has "+this.layers.length+" layer(s).");return this.layers[e]}if(null==t)throw new h("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var i=r[n];if(i.name===t)return i}throw new h("No such layer: "+t)},r.prototype.calculateLosses=function(){var e=this;return(0,t.tidy)(function(){for(var t=[],n=0,i=e.layers;n<i.length;n++)for(var a=i[n],s=0;s<a.inboundNodes.length;++s){var o=r.nodeKey(a,s);e.containerNodes.has(o)&&t.push.apply(t,a.calculateLosses())}return t})},r.prototype.getConfig=function(){for(var t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[],i=0,a=this.layers;i<a.length;i++){for(var s=(w=a[i]).getClassName(),o=w.getConfig(),u=[],l=0;l<w.inboundNodes.length;l++){var c=w.inboundNodes[l],h=r.nodeKey(w,l),p={};if(this.containerNodes.has(h)){if(c.callArgs)try{JSON.stringify(c.callArgs),p=c.callArgs}catch(t){console.warn("Layer "+w.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),p={}}if(c.inboundLayers.length>0){for(var f=[],d=0;d<c.inboundLayers.length;d++){var g=c.inboundLayers[d],m=c.nodeIndices[d],y=c.tensorIndices[d];null==(k=e[r.nodeKey(g,m)])&&(k=0),f.push([g.name,k,y,p])}u.push(f)}}}var v={};v.name=w.name,v.className=s,v.config=o,v.inboundNodes=u,n.push(v)}t.layers=n;var b=[];for(d=0;d<this.inputLayers.length;d++){var w=this.inputLayers[d];m=this.inputLayersNodeIndices[d],h=r.nodeKey(w,m),this.containerNodes.has(h)&&(null!==(k=e[h])&&void 0!==k||(k=0),y=this.inputLayersTensorIndices[d],b.push([w.name,k,y]))}t.inputLayers=b;var z=[];for(d=0;d<this.outputLayers.length;d++){var k;if(w=this.outputLayers[d],m=this.outputLayersNodeIndices[d],h=r.nodeKey(w,m),this.containerNodes.has(h))null!==(k=e[h])&&void 0!==k||(k=0),y=this.outputLayersTensorIndices[d],z.push([w.name,k,y])}return t.outputLayers=z,t},r.fromConfig=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var i={},a={};function s(t,e){t.name in a?a[t.name].push(e):a[t.name]=[e]}function o(t,e){for(var n,r=[],a=0,o=e;a<o.length;a++){var u=o[a],l=u[0],c=u[1],h=u[2];if(n=null==u[3]?{}:u[3],!(l in i))return void s(t,e);var p=i[l];if(p.inboundNodes.length<=c)return void s(t,e);var f=p.inboundNodes[c];r.push(f.outputTensors[h])}r.length>0&&t.apply(v(r),n)}function u(t){var n=t.name,a=pn(t,null!=e.customObjects?e.customObjects:{});a.setFastWeightInitDuringBuild(r),i[n]=a,t.inboundNodes.forEach(function(t){if(!(t instanceof Array))throw new h("Corrupted configuration, expected array for nodeData: "+t);s(a,t)})}for(var l=e.name,c=e.layers,p=0,f=c;p<f.length;p++)u(y=f[p]);for(;!T(a);)for(var d=0,g=c;d<g.length;d++){var y=g[d];if((D=i[y.name]).name in a){var b=a[D.name];delete a[D.name];for(var w=0,z=b;w<z.length;w++)o(D,z[w])}}for(var k=[],S=[],N=0,C=e.inputLayers;N<C.length;N++){var A=(y=C[N])[0],I=y[1],x=y[2];m(A in i);var L=(D=i[A]).inboundNodes[I].outputTensors;k.push(L[x])}for(var E=0,O=e.outputLayers;E<O.length;E++){var D;A=(y=O[E])[0],I=y[1],x=y[2],m(A in i),L=(D=i[A]).inboundNodes[I].outputTensors,S.push(L[x])}return new t({inputs:k,outputs:S,name:l})},Object.defineProperty(r.prototype,"stateful",{get:function(){if(this._stateful)throw new h("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var t=0,e=this.layers;t<e.length;t++)if(e[t].stateful)return!0;return!1},enumerable:!0,configurable:!0}),r.prototype.resetStates=function(){var e=this;(0,t.tidy)(function(){e.layers.forEach(function(t){t.stateful&&t.resetStates()})})},r}(Ze);function kr(t,e,n){var r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(function(t){return null});if(1===r)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error("Provided "+n+" is an array of "+t.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){var i=[];return e.forEach(function(e){e in t?i.push(t[e]):i.push(null)}),i}throw new Error("The model has multiple ("+r+") outputs, so "+n+" must be either an array with "+r+" elements or an object with "+e+" keys. Provided "+n+" not understood: "+JSON.stringify(t))}function Sr(t,e){return kr(t,e,"classWeight")}function Nr(e,n,r,i){return a(this,void 0,void 0,function(){var a,o,u,l,c;return s(this,function(s){switch(s.label){case 0:if(null!=n||null!=i)throw new Error("Support sampleWeight is not implemented yet");return null==r?[3,2]:(a=(0,t.tidy)(function(){if(1===e.shape.length)return e.clone();if(2===e.shape.length){if(e.shape[1]>1)return e.argMax(1);if(1===e.shape[1])return e.reshape([e.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+e.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+e.rank+") during handling of class weights. The rank is expected to be 1 or 2.")}),l=(u=Array).from,[4,a.data()]);case 1:return o=l.apply(u,[s.sent()]),(0,t.dispose)(a),c=[],o.forEach(function(t){if(null==r[t])throw new Error("classWeight must contain all classes in the training data. The class "+t+" exists in the data but not in classWeight");c.push(r[t])}),[2,(0,t.tensor1d)(c,"float32")];case 2:return[2,null]}})})}function Cr(e,n){return(0,t.mul)(e,n)}var Ar=32;function Ir(e,n){var r,i,a=n;r=a.xs,i=a.ys,t.util.assert(null!=r&&null!=i,function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+n});var s=xr("input",e.inputNames,r),o=xr("output",e.outputNames,i),u=s[0].shape[0];t.util.assert(s.length===e.inputs.length,function(){return"LayersModel has "+e.inputs.length+" inputs, but the dataset provides "+s.length+" inputs.  (Expected input keys: "+JSON.stringify(e.inputNames)+")"}),t.util.assert(o.length===e.outputs.length,function(){return"LayersModel has "+e.outputs.length+" outputs, but the dataset provides "+o.length+" outputs.  (Expected output keys: "+JSON.stringify(e.outputNames)+")"});for(var l=function(n){t.util.assert(s[n].shape[0]===u,function(){return"Batch size mismatch: input "+e.inputNames[n]+" has "+s[n].shape[0]+"; expected  "+u+" based on input "+e.inputNames[0]+"."})},c=0;c<s.length;c++)l(c);for(var h=function(n){t.util.assert(o[n].shape[0]===u,function(){return"Batch size mismatch: output "+e.outputNames[n]+" has "+o[n].shape[0]+"; expected  "+u+" based on input "+e.inputNames[0]+"."})},p=0;p<o.length;p++)h(p);return{xs:s,ys:o}}function xr(e,n,r){if(r instanceof t.Tensor)return[r];if(Array.isArray(r))return t.util.assert(r.length===n.length,function(){return"Received an array of "+r.length+" Tensors, but expected "+n.length+" to match the "+e+" keys "+n+"."}),r;for(var i=[],a=0,s=n;a<s.length;a++){var o=s[a];if(null==r[o])throw new h("The feature data generated by the dataset lacks the required "+e+" key '"+o+"'.");i.push(r[o])}return i}function Tr(t){if(3===t.length)throw new p("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function Lr(e,n,r){return a(this,void 0,void 0,function(){var i,a,o,u,l,c,h,p,f,d,g,m,y,v,w,z,k,S,N,C,A,I,x,T,L,E,O,D,R,F,_,M,B,P;return s(this,function(s){switch(s.label){case 0:if(i=null!=r.batchesPerEpoch,t.util.assert(null!=e.optimizer,function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."}),t.util.assert(null!=r,function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."}),t.util.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+r.epochs}),t.util.assert(!i||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+r.batchesPerEpoch}),t.util.assert(null==r.validationSplit,function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."}),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0,s.label=1;case 1:return s.trys.push([1,,26,27]),a=null!=r.validationData,o=void 0,u=void 0,a&&(Or(r.validationData)?t.util.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+r.validationBatches}):(l=Tr(r.validationData),o=l.xs,u=l.ys)),c=e.makeTrainFunction(),h=e.getDedupedMetricsNames(),void 0,p=a?h.slice().concat(h.map(function(t){return"val_"+t})):h.slice(),f=ln(r.callbacks,r.yieldEvery),d=null==r.verbose?1:r.verbose,g=hn(f,d,r.epochs,null,null,Er(n,r),null,a,p),m=g.callbackList,y=g.history,m.setModel(e),e.history=y,[4,m.onTrainBegin()];case 2:return s.sent(),e.stopTraining_=!1,v=null==r.initialEpoch?0:r.initialEpoch,[4,n.iterator()];case 3:w=s.sent(),s.label=4;case 4:return v<r.epochs?(z={},[4,m.onEpochBegin(v)]):[3,23];case 5:return s.sent(),k=0,S=0,i?[3,7]:[4,n.iterator()];case 6:w=s.sent(),s.label=7;case 7:return!i||k<r.batchesPerEpoch?[4,w.next()]:[3,21];case 8:return N=s.sent(),i&&N.done?(console.warn("You provided `batchesPerEpoch` as "+r.batchesPerEpoch+", but your dataset iterator ran out of data after "+k+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+r.batchesPerEpoch*r.epochs+" batches). You may need to use the repeat() function when building your dataset."),[3,21]):null==N.value?[3,15]:(C=Ir(e,N.value),A=C.xs,I=C.ys,(x={}).batch=S,x.size=A[0].shape[0],[4,m.onBatchBegin(S,x)]);case 9:if(s.sent(),T=[],null==r.classWeight)return[3,13];L=Sr(r.classWeight,e.outputNames),P=0,s.label=10;case 10:return P<L.length?(O=(E=T).push,[4,Nr(I[P],null,L[P])]):[3,13];case 11:O.apply(E,[s.sent()]),s.label=12;case 12:return++P,[3,10];case 13:for(D=A.concat(I).concat(T),R=c(D),(0,t.dispose)(D),P=0;P<h.length;++P)F=h[P],_=R[P],x[F]=_,(0,t.keep)(_);return[4,m.onBatchEnd(S,x)];case 14:s.sent(),en(x),S++,k++,s.label=15;case 15:return(i?k>=r.batchesPerEpoch:N.done)?a?(M=void 0,Or(r.validationData)?(B=b,[4,e.evaluateDataset(r.validationData,{batches:r.validationBatches})]):[3,17]):[3,19]:[3,20];case 16:return M=B.apply(void 0,[s.sent()]),[3,18];case 17:M=b(e.evaluate(o,u,{batchSize:null==r.validationBatchSize?Ar:r.validationBatchSize,verbose:0})),s.label=18;case 18:for(P=0;P<e.metricsNames.length;++P)z["val_"+e.metricsNames[P]]=M[P];s.label=19;case 19:return[3,21];case 20:return e.stopTraining_?[3,21]:[3,7];case 21:return[4,m.onEpochEnd(v,z)];case 22:return s.sent(),v++,e.stopTraining_?[3,23]:[3,4];case 23:return[4,m.onTrainEnd()];case 24:return s.sent(),[4,e.history.syncData()];case 25:return s.sent(),[2,e.history];case 26:return e.isTraining=!1,[7];case 27:return[2]}})})}function Er(t,e){var n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Or(t){return"function"==typeof t.iterator}function Dr(t){return"function"==typeof t.next}function Rr(e,n,r){return a(this,void 0,void 0,function(){var i,a,o,u,l,c,h,f,d,g;return s(this,function(m){switch(m.label){case 0:if(i=null!=(r=r||{}).batches,a=e.testFunction,o=[],r.verbose>0)throw new p("Verbose mode is not implemented yet.");return t.util.assert(!i||r.batches>0&&Number.isInteger(r.batches),function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(r.batches)}),Dr(n)?(l=n,[3,3]):[3,1];case 1:return[4,n.iterator()];case 2:l=m.sent(),m.label=3;case 3:u=l,c=0,h=0,f=function(){var n;return s(this,function(s){switch(s.label){case 0:return[4,u.next()];case 1:return n=s.sent(),o=(0,t.tidy)(function(){if(n.value){var r=Ir(e,n.value),i=r.xs,s=r.ys,u=i.concat(s),l=(0,t.tidy)(function(){return a(u)});if((0,t.dispose)(u),0===h)for(var p=0;p<l.length;++p)o.push((0,t.scalar)(0));var f=u[0].shape[0],d=function(e){var n=l[e],r=o[e];o[e]=(0,t.tidy)(function(){return(0,t.add)(o[e],(0,t.mul)(f,n))}),h>0&&(0,t.dispose)(r)};for(p=0;p<l.length;++p)d(p);(0,t.dispose)(l),c+=f,++h}return o}),n.done?(i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+r.batches+" batches). You may need to use the repeat() function when building your dataset."),[2,"break"]):[2]}})},m.label=4;case 4:return!i||h<r.batches?[5,f()]:[3,6];case 5:return"break"===m.sent()?[3,6]:[3,4];case 6:for(d=0;d<o.length;++d)g=o[d],o[d]=(0,t.div)(o[d],c),(0,t.dispose)(g);return[2,v(o)]}})})}function Fr(e){t.util.assert(e>0&&Number.isInteger(e),function(){return"batchSize is required to be a positive integer, but got "+e})}function _r(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(function(t){return Nt(t,e,n-e)}):Nt(t,e,n-e)}function Mr(e,n){return(0,t.tidy)(function(){return null==e?null:Array.isArray(e)?e.map(function(t){return Mr(t,n)}):Ot(e,"int32"===n.dtype?n:n.toInt())})}function Br(t,e){for(var n=[],r=0,i=null;r<t;)(i=r+e)>=t&&(i=t),n.push([r,i]),r=i;return n}function Pr(e,n,r,i,o,u,l,c,f,d,g,m,y,v,b){return a(this,void 0,void 0,function(){var a,w,z,k,S,N,C,A;return s(this,function(I){switch(I.label){case 0:if(null==o&&(o=32),null==u&&(u=1),null==g&&(g=!0),null==y&&(y=0),a=!1,null!=f&&null!=d&&(a=!0),null!=b&&(a=!0,null==v))throw new h("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return null!=(w=e.checkNumSamples(r,o,v,"steps_per_epoch"))&&(z=vt(0,w)),null==l&&(l=1),k=hn(c,l,u,y,w,v,o,a,m),S=k.callbackList,N=k.history,S.setModel(e),e.history=N,[4,S.onTrainBegin()];case 1:I.sent(),e.stopTraining_=!1,C=function(u){var l,c,h,m,y;return s(this,function(b){switch(b.label){case 0:return[4,S.onEpochBegin(u)];case 1:if(b.sent(),l={},null==v)return[3,2];throw new p("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===g)throw new p("batch shuffling is not implemneted yet");g&&t.util.shuffle(z),c=(0,t.tensor1d)(z),h=Br(w,o),m=function(u){var p;return s(this,function(s){switch(s.label){case 0:return p={},[4,S.onBatchBegin(u,p)];case 1:return s.sent(),(0,t.tidy)(function(){var s=h[u][0],g=h[u][1],m=Nt(c,s,g-s);p.batch=u,p.size=g-s;for(var y=Mr(r,m),v=n(y),b=0;b<i.length;++b){var w=i[b],z=v[b];p[w]=z,(0,t.keep)(z)}if(u===h.length-1&&a){var k=e.testLoop(f,d,o);for(b=0;b<i.length;++b)w=i[b],z=k[b],(0,t.keep)(z),l["val_"+w]=z}}),[4,S.onBatchEnd(u,p)];case 2:return s.sent(),en(p),e.stopTraining_?[2,"break"]:[2]}})},y=0,b.label=3;case 3:return y<h.length?[5,m(y)]:[3,6];case 4:if("break"===b.sent())return[3,6];b.label=5;case 5:return++y,[3,3];case 6:c.dispose(),b.label=7;case 7:return[4,S.onEpochEnd(u,l)];case 8:return b.sent(),e.stopTraining_?[2,"break"]:[2]}})},A=y,I.label=2;case 2:return A<u?[5,C(A)]:[3,5];case 3:if("break"===I.sent())return[3,5];I.label=4;case 4:return++A,[3,2];case 5:return[4,S.onTrainEnd()];case 6:return I.sent(),[4,e.history.syncData()];case 7:return I.sent(),[2,e.history]}})})}function jr(e,n,r,i){return void 0===i&&(i={}),a(this,void 0,void 0,function(){var a,o,u,l,c,f,d,g,m,y,v,b,w,z,k,S,N,C,A,I;return s(this,function(s){switch(s.label){case 0:if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0,s.label=1;case 1:return s.trys.push([1,,7,8]),Fr(g=null==i.batchSize?32:i.batchSize),!1,[4,e.standardizeUserData(n,r,i.sampleWeight,i.classWeight,!1,g)];case 2:if(m=s.sent(),a=m[0],o=m[1],d=m[2],y=!1,v=void 0,!(null!=i.validationData&&i.validationData.length>0))return[3,4];if(y=!0,2!==i.validationData.length)throw 3===i.validationData.length?new p("validationData including sample weights is not supported yet."):new h("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+i.validationData+" is invalid.");return u=i.validationData[0],l=i.validationData[1],!0,[4,e.standardizeUserData(u,l,null,null,!0,g)];case 3:return b=s.sent(),c=b[0],f=b[1],v=c.concat(f),[3,5];case 4:null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1?(y=!0,w=Math.floor(a[0].shape[0]*(1-i.validationSplit)),z=a[0].shape[0],c=_r(a,w,z),a=_r(a,0,w),f=_r(o,w,z),o=_r(o,0,w),v=c.concat(f)):null!=i.validationSteps&&(y=!0),s.label=5;case 5:return k=a.concat(o).concat(d),e.checkTrainableWeightsConsistency(),S=e.makeTrainFunction(),N=e.getDedupedMetricsNames(),C=void 0,A=void 0,y?(e.makeTestFunction(),C=e.testFunction,A=N.slice().concat(N.map(function(t){return"val_"+t}))):(C=null,v=[],A=N.slice()),I=ln(i.callbacks,i.yieldEvery),[4,Pr(e,S,k,N,g,i.epochs,i.verbose,I,C,v,i.shuffle,A,i.initialEpoch,null,null)];case 6:return[2,s.sent()];case 7:return e.isTraining=!1,Ur(a,n),Ur(o,r),Ur(c,u),Ur(f,l),null!=d&&(0,t.dispose)(d),[7];case 8:return[2]}})})}function Wr(e){var n=[];e instanceof t.Tensor&&(e=[e]);for(var r=0;r<e.length;++r){var i=e[r];if(1===i.rank)n.push(wt(i,1));else{if(0===i.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(i)}}return n}function Ur(e,n){if(null!=e){var r=[];if(n instanceof t.Tensor)r.push(n.id);else if(Array.isArray(n))n.forEach(function(t){return r.push(t.id)});else if(null!=n)for(var i in n){var a=n[i];r.push(a.id)}var s=[];if(e instanceof t.Tensor)-1===r.indexOf(e.id)&&s.push(e);else if(Array.isArray(e))e.forEach(function(t){-1===r.indexOf(t.id)&&s.push(t)});else if(null!=e)for(var o in e){var u=e[o];-1===r.indexOf(u.id)&&s.push(u)}s.forEach(function(t){t.isDisposed||t.dispose()})}}function Vr(e){return e instanceof t.Tensor}function qr(t){return Array.isArray(t)}function Jr(t){return!Vr(t)&&!qr(t)}function Hr(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=""),null==e||0===e.length){if(null!=t){var a=!1;if(qr(t)&&t.length>0)a=!0;else if(Jr(t)){for(var s in t)if(t.hasOwnProperty(s)){a=!0;break}}else a=!0;if(a)throw new h("Error when checking model "+i+" expected no data, but got "+t)}return[]}if(null==t)return e.map(function(t){return null});var o;if(Jr(t)){t=t,o=[];for(var u=0,l=e;u<l.length;u++){var c=l[u];if(null==t[c])throw new h('No data provided for "'+c+'". Need data for each key in: '+e);o.push(t[c])}}else if(qr(t)){if((t=t).length!==e.length)throw new h("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+e.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);o=t}else{if(t=t,e.length>1)throw new h("The model "+i+" expects "+e.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);o=[t]}if(o=Wr(o),null!=n)for(var p=0;p<e.length;++p)if(null!=n[p]){var f=o[p];if(f.shape.length!==n[p].length)throw new h("Error when checking "+i+": expected "+e[p]+" to have "+n[p].length+" dimension(s). but got array with shape "+f.shape);for(var d=0;d<n[p].length;++d)if(0!==d||r){var g=f.shape[d],m=n[p][d];if(null!=m&&m>=0&&g!==m)throw new h("Error when checking "+i+": expected "+e[p]+" to have shape ["+n[p]+"], but got array with shape ["+f.shape+"].")}}return o}function Zr(e,n,r){var i=x(e.map(function(t){return t.shape[0]}));i.sort();var a=x(n.map(function(t){return t.shape[0]}));if(a.sort(),i.length>1)throw new h("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(t){return t.shape})));if(a.length>1)throw new h("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(n.map(function(t){return t.shape})));if(i.length>0&&a.length>0&&!t.util.arraysEqual(i,a))throw new h("Input Tensors should have the same number of samples as target Tensors. Found "+i[0]+" input sample(s) and "+a[0]+" target sample(s).")}function Kr(t,e,n){for(var r=[dn,Cn,kn],i=0;i<t.length;++i){var a=t[i],s=e[i],o=n[i];if(null!=s){if(s===kn&&1===a.shape[a.shape.length-1])throw new h("You are passing a target array of shape "+a.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(s))for(var u=a.shape.slice(1),l=o.slice(1),c=0;c<u.length;++c){var p=u[c],f=l[c];if(null!=f&&p!==f)throw new h("A target Tensor with shape "+a.shape+" was passed for an output of shape "+o+", while using a loss function that expects targets to have the same shape as the output.")}}}}function Gr(t,e,n,r,i){var a;if(void 0===r&&(r=!0),void 0===i&&(i=""),Array.isArray(t)){if(t.length!==e.length)throw new h("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+e.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");a=t}else{if(e.length>1)throw new h("The model expects "+e.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");a=[t]}if(null!=n)for(var s=0;s<e.length;++s)if(null!=n[s]){var o=a[s];if(o.shape.length!==n[s].length)throw new h("Error when checking "+i+": expected "+e[s]+" to have "+n[s].length+" dimension(s), but got array with shape "+JSON.stringify(o.shape));for(var u=0;u<n[s].length;++u)if(0!==u||r){var l=o.shape[u],c=n[s][u];if(null!=c&&c!==l)throw new h("Error when checking "+i+": expected "+e[s]+" to have shape "+JSON.stringify(n[s])+" but got array with shape "+JSON.stringify(o.shape)+".")}}}function Yr(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(function(t){return[]});var n;if("string"==typeof t||"function"==typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+t);n=t}if(Array.isArray(n))return e.map(function(t){return n});for(var r=[],i=0,a=e;i<a.length;i++){var s=a[i],o=n.hasOwnProperty(s)?n[s]:[];Array.isArray(o)||(o=[o]),r.push(o)}return r}var Xr="layers-model",$r=function(e){function r(t){var n=e.call(this,t)||this;return n.isTraining=!1,n}return n(r,e),r.prototype.summary=function(t,e,n){if(void 0===n&&(n=console.log),!this.built)throw new h("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");nr(this,t,e,n)},r.prototype.compile=function(e){var n=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=$n(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof t.Optimizer))throw new h("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var r=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new h("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");var i=e.loss;r=i.map(function(t){return Ln(t)})}else{var a=Ln(e.loss);this.outputs.forEach(function(t){r.push(a)})}else{for(var s in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(s))throw new h('Unknown entry in loss dictionary: "'+s+'". Only expected the following keys: '+this.outputNames);for(var o=0,u=this.outputNames;o<u.length;o++){var l=u[o];null==e.loss[l]&&console.warn('Output "'+l+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+l+" during training"),r.push(Ln(e.loss[l]))}}this.lossFunctions=r,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var p=this.internalOutputShapes[c],f=this.outputNames[c];this.feedOutputNames.push(f),this.feedOutputShapes.push(p),this.feedLossFns.push(this.lossFunctions[c])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ot("loss",function(){for(var t=0;t<n.outputs.length;++t)if(-1===d.indexOf(t)){var e=n.lossFunctions[t];n.outputs.length>1&&(n.metricsTensors.push([e,t]),n.metricsNames.push(n.outputNames[t]+"_loss"))}});var g=Yr(e.metrics,this.outputNames);ot("metric",function(){for(var t=function(t){if(-1!==d.indexOf(t))return"continue";!function(e){for(var r,i,a,s=function(e){if("string"==typeof e&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(e)){var s=n.internalOutputShapes[t];1===s[s.length-1]||n.lossFunctions[t]===Cn?-1!==["accuracy","acc"].indexOf(e)?i=En:-1!==["crossentropy","ce"].indexOf(e)&&(i=Bn):n.lossFunctions[t]===Sn?-1!==["accuracy","acc"].indexOf(e)?i=Pn:-1!==["crossentropy","ce"].indexOf(e)&&(i=Kn):-1!==["accuracy","acc"].indexOf(e)?i=On:-1!==["crossentropy","ce"].indexOf(e)&&(i=Hn);var o=void 0;-1!==["accuracy","acc"].indexOf(e)?o="acc":-1!==["crossentropy","ce"].indexOf(e)&&(o="ce"),a=i,r=""+o}else{var u=Yn(e);a=u,r=""+Xn(e)}var l;ot(r,function(){l=a}),function(t,e,r){n.outputNames.length>1&&(e=n.outputNames[t]+"_"+e),n.metricsNames.push(e),n.metricsTensors.push([r,t])}(t,r,l)},o=0,u=g[t];o<u.length;o++)s(u[o])}()},e=0;e<n.outputs.length;++e)t(e)}),this.collectedTrainableWeights=this.trainableWeights},r.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},r.prototype.evaluate=function(t,e,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;Fr(r);var i=this.standardizeUserDataXY(t,e,!0,r);try{var a=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction;return v(this.testLoop(s,a,r,n.verbose,n.steps))}finally{Ur(i[0],t),Ur(i[1],e)}},r.prototype.evaluateDataset=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){return this.makeTestFunction(),[2,Rr(this,t,e)]})})},r.prototype.checkNumSamples=function(t,e,n,r){var i;if(void 0===r&&(r="steps"),null!=n){if(i=null,null!=e)throw new h("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+e)}else{if(null==t)throw new h("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i},r.prototype.execute=function(e,n){if(Array.isArray(n)&&0===n.length)throw new h("`outputs` is an empty Array, which is not allowed.");var r=Array.isArray(n),i=r?n:[n],a=this.retrieveSymbolicTensors(i),s=new fr;if(e instanceof t.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new h("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var o=0;o<this.inputs.length;++o)s.add(this.inputs[o],e[o])}else for(var u=0,l=this.inputs;u<l.length;u++){var c=l[u],p=e[c.name];if(null==p)throw new h("No value is provided for the model's input "+c.name);s.add(c,p)}var f=mr(a,s);return r?f:f[0]},r.prototype.retrieveSymbolicTensors=function(t){for(var e=g(null,t.length),n=t.length,r=0,i=this.layers;r<i.length;r++){for(var a=i[r],s=Array.isArray(a.output)?a.output:[a.output],o=s.map(function(t){return t.name}),u=0;u<t.length;++u){var l=o.indexOf(t[u]);if(-1!==l&&(e[u]=s[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw e.forEach(function(e,n){null==e&&c.push(t[n])}),new h("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return e},r.prototype.predictLoop=function(e,n,r){var i=this;return void 0===n&&(n=32),void 0===r&&(r=!1),(0,t.tidy)(function(){var a=i.checkNumSamples(e);if(r)throw new p("Verbose predictLoop() is not implemented yet.");for(var s=Br(a,n),o=i.outputs.map(function(t){return[]}),u=function(n){(0,t.tidy)(function(){var t=s[n][0],r=s[n][1],a=_r(e,t,r),o=[];if(Array.isArray(a))for(var u=0;u<a.length;++u)o.push({key:i.inputs[u],value:a[u]});else o.push({key:i.inputs[0],value:a});var l=new fr(o);return mr(i.outputs,l)}).forEach(function(t,e){return o[e].push(t)})},l=0;l<s.length;++l)u(l);return v(o.map(function(e){return(0,t.concat)(e,0)}))})},r.prototype.predict=function(t,e){void 0===e&&(e={});var n=Wr(t);Gr(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==e.batchSize?32:e.batchSize;return Fr(r),this.predictLoop(n,r)}finally{Ur(n,t)}},r.prototype.predictOnBatch=function(t){Gr(t,this.inputNames,this.feedInputShapes,!0);var e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)},r.prototype.standardizeUserDataXY=function(t,e,n,r){if(void 0===n&&(n=!0),null==this.optimizer_)throw new c("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var i=[],a=0;a<this.feedOutputShapes.length;++a){var s=this.feedOutputShapes[a];this.feedLossFns[a]===Sn?i.push(s.slice(0,s.length-1).concat([1])):i.push(s)}if(Zr(t=Hr(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=Hr(e,this.feedOutputNames,i,!1,"target"),null),Kr(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&t[0].shape[0]%r!=0)throw new h("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+t[0].shape[0]+" sample(s).");return[t,e]},r.prototype.standardizeUserData=function(t,e,n,r,i,o){return void 0===i&&(i=!0),a(this,void 0,void 0,function(){var a,u,l,c,h,p,f,d;return s(this,function(s){switch(s.label){case 0:if(a=this.standardizeUserDataXY(t,e,i,o),u=a[0],l=a[1],null!=n)throw new Error("sample weight is not supported yet.");if(c=null,null==r)return[3,4];h=Sr(r,this.outputNames),c=[],p=0,s.label=1;case 1:return p<h.length?(d=(f=c).push,[4,Nr(l[p],null,h[p])]):[3,4];case 2:d.apply(f,[s.sent()]),s.label=3;case 3:return++p,[3,1];case 4:return[2,[u,l,c]]}})})},r.prototype.testLoop=function(e,n,r,i,a){var s=this;return void 0===i&&(i=0),(0,t.tidy)(function(){var o=s.checkNumSamples(n,r,a,"steps"),u=[];if(i>0)throw new p("Verbose mode is not implemented yet.");if(null!=a)throw new p("steps mode in testLoop() is not implemented yet");for(var l=Br(o,r),c=(0,t.tensor1d)(vt(0,o)),h=0;h<l.length;++h){var f=l[h][0],d=l[h][1],g=Nt(c,f,d-f),m=Mr(n,g),y=e(m);if(0===h)for(var v=0;v<y.length;++v)u.push((0,t.scalar)(0));for(v=0;v<y.length;++v){var b=y[v];u[v]=(0,t.add)(u[v],(0,t.mul)(d-f,b))}}for(v=0;v<u.length;++v)u[v]=(0,t.div)(u[v],o);return u})},r.prototype.getDedupedMetricsNames=function(){for(var t=this.metricsNames,e=[],n=0;n<t.length;++n){var r=t[n],i=r;y(t,r)>1&&(i+="_"+y(t.slice(0,n),r)),e.push(i)}return e},r.prototype.makeTrainFunction=function(){var e=this;return function(n){var r=[],i=n.slice(0,e.inputs.length),a=n.slice(e.inputs.length,e.inputs.length+e.outputs.length),s=n.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],u=e.collectedTrainableWeights.map(function(t){return t.read()});return[e.optimizer_.minimize(function(){for(var n=[],u=0;u<e.inputs.length;++u)n.push({key:e.inputs[u],value:i[u]});var l,c=new fr(n),h=mr(e.outputs,c,{training:!0});for(u=0;u<e.lossFunctions.length;++u){var p=(0,e.lossFunctions[u])(a[u],h[u]);null!=s[u]&&(p=Cr(p,s[u]));var f=(0,t.mean)(p);r.push(f),l=0===u?p:(0,t.add)(l,p)}for(u=0;u<e.metricsTensors.length;++u){var d=void 0;if(e.outputs.length>1&&u<e.outputs.length)d=r[u];else{var g=e.metricsTensors[u][0],m=e.metricsTensors[u][1];d=(0,t.mean)(g(a[m],h[m]))}(0,t.keep)(d),o.push(d)}return l=(0,t.mean)(l),e.calculateLosses().forEach(function(e){l=(0,t.add)(l,e)}),l},!0,u)].concat(o)}},r.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(n){return(0,t.tidy)(function(){for(var r,i=[],a=n.slice(0,e.inputs.length),s=n.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],u=0;u<e.inputs.length;++u)o.push({key:e.inputs[u],value:a[u]});var l=new fr(o),c=mr(e.outputs,l);for(u=0;u<e.lossFunctions.length;++u){var h=e.lossFunctions[u],p=(0,t.mean)(h(s[u],c[u]));r=0===u?p:(0,t.add)(r,p),i.push(r)}for(u=0;u<e.metricsTensors.length;++u){var f=e.metricsTensors[u][0],d=e.metricsTensors[u][1],g=(0,t.mean)(f(s[d],c[d]));i.push(g)}return i})}},r.prototype.fit=function(t,e,n){return void 0===n&&(n={}),a(this,void 0,void 0,function(){return s(this,function(r){return[2,jr(this,t,e,n)]})})},r.prototype.fitDataset=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){return[2,Lr(this,t,e)]})})},r.prototype.trainOnBatch=function(e,n){return a(this,void 0,void 0,function(){var r,i,a,o,u,l,c,h,p;return s(this,function(s){switch(s.label){case 0:return[4,this.standardizeUserData(e,n)];case 1:r=s.sent(),i=r[0],a=r[1],o=this.makeTrainFunction(),u=o(i.concat(a)),l=[],c=0,h=u,s.label=2;case 2:return c<h.length?[4,h[c].data()]:[3,5];case 3:p=s.sent(),l.push(p[0]),s.label=4;case 4:return c++,[3,2];case 5:return(0,t.dispose)(u),[2,v(l)]}})})},r.prototype.getNamedWeights=function(t){for(var e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n),a=0;a<r.length;++a)n&&!r[a].trainable||e.push({name:r[a].originalName,tensor:i[a]});return e},Object.defineProperty(r.prototype,"stopTraining",{get:function(){return this.stopTraining_},set:function(t){this.stopTraining_=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"optimizer",{get:function(){return this.optimizer_},set:function(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){var n=e.prototype.dispose.call(this);if(0===n.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var r=(0,t.memory)().numTensors;this.optimizer_.dispose(),n.numDisposedVariables+=r-(0,t.memory)().numTensors}return n},r.prototype.getLossIdentifiers=function(){var t;if("string"==typeof this.loss)t=w(this.loss);else if(Array.isArray(this.loss)){for(var e=0,n=this.loss;e<n.length;e++)if("string"!=typeof n[e])throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(function(t){return w(t)})}else{var r=Object.keys(this.loss);t={};for(var i=this.loss,a=0,s=r;a<s.length;a++){var o=s[a];if("string"!=typeof i[o])throw new Error("Serialization of non-string loss is not supported.");t[o]=w(i[o])}}return t},r.prototype.getMetricIdentifiers=function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[w(Xn(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(function(t){return w(Xn(t))});var t={};for(var e in this.metrics)t[e]=w(Xn(this.metrics[e]));return t},r.prototype.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},r.prototype.loadTrainingConfig=function(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var e,n,r=pn(lr(t.optimizer_config));if("string"==typeof t.loss)e=z(t.loss);else if(Array.isArray(t.loss))e=t.loss.map(function(t){return z(t)});else if(null!=t.loss)for(var i in e={},t.loss)e[i]=z(t.loss[i]);if(Array.isArray(t.metrics))n=t.metrics.map(function(t){return z(t)});else if(null!=t.metrics)for(var i in n={},t.metrics)n[i]=z(t.metrics[i]);this.compile({loss:e,metrics:n,optimizer:r})},r.prototype.save=function(e,n){return a(this,void 0,void 0,function(){var r,i,a,o,u,l,c,p,f,d,g;return s(this,function(s){switch(s.label){case 0:if("string"==typeof e){if(0===(r=t.io.getSaveHandlers(e)).length)throw new h("Cannot find any save handlers for URL '"+e+"'");if(r.length>1)throw new h("Found more than one ("+r.length+") save handlers for URL '"+e+"'");e=r[0]}if(null==e.save)throw new h("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,t.io.encodeWeights(this.getNamedWeights(n))];case 1:return i=s.sent(),!1,null,a=this.toJSON(null,!1),o={modelTopology:a,format:Xr,generatedBy:"TensorFlow.js tfjs-layers v"+hr,convertedBy:null},null!=n&&n.includeOptimizer&&null!=this.optimizer?(o.trainingConfig=this.getTrainingConfig(),u="optimizer",d=(f=t.io).encodeWeights,[4,this.optimizer.getWeights()]):[3,4];case 2:return[4,d.apply(f,[s.sent(),u])];case 3:l=s.sent(),c=l.data,p=l.specs,(g=i.specs).push.apply(g,p),i.data=t.io.concatenateArrayBuffers([i.data,c]),s.label=4;case 4:return null!=this.userDefinedMetadata&&(!0,tr(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=i.data,o.weightSpecs=i.specs,[2,e.save(o)]}})})},r.prototype.setUserDefinedMetadata=function(t){tr(t,this.name),this.userDefinedMetadata=t},r.prototype.getUserDefinedMetadata=function(){return this.userDefinedMetadata},r.className="Model",r}(zr);function Qr(e,n){return a(this,void 0,void 0,function(){var r,i,a,o,u,l,c,h;return s(this,function(s){switch(s.label){case 0:return"modelTopology"in e||(e={modelTopology:e}),null!=(r=(e=e).modelTopology).model_config&&(r=r.model_config),i=lr(r),a=pn(i,n),null==e.weightsManifest?[3,2]:[4,t.io.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map(function(t){return t.originalName}))];case 1:for(o=s.sent(),u={},l=0,c=a.weights;l<c.length;l++)h=c[l],u[h.originalName]=o[h.originalName];a.loadWeights(u),(0,t.dispose)(o),s.label=2;case 2:return[2,a]}})})}function ti(e,n){return a(this,void 0,void 0,function(){var r;return s(this,function(i){if(null==n&&(n={}),"string"==typeof e){if(0===(r=t.io.getLoadHandlers(e,n.onProgress)).length)r.push(t.io.browserHTTPRequest(e,n));else if(r.length>1)throw new h("Found more than one ("+r.length+") load handlers for URL '"+e+"'");e=r[0]}return[2,ei(e,void 0,n)]})})}function ei(e,n,r){return a(this,void 0,void 0,function(){var i,a,o,u,l,c,p,f,d;return s(this,function(s){switch(s.label){case 0:if(null==r&&(r={}),null==e.load)throw new h("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,e.load()];case 1:if(i=s.sent(),null!=(a=i.modelTopology).model_config&&(a=a.model_config),o=null==r.strict||r.strict,u=null!=i.weightData&&null!=i.weightSpecs&&o,l=pn(lr(a),n,u),null!=(c=i.trainingConfig)&&l.loadTrainingConfig(c),null!=i.userDefinedMetadata&&l.setUserDefinedMetadata(i.userDefinedMetadata),null==i.weightData)return[3,4];if(null==i.weightSpecs)throw new h("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");return p=ni(i.weightData,i.weightSpecs),f=p.modelWeights,d=p.optimizerWeights,l.loadWeights(f,o),null!=l.optimizer&&d.length>0?[4,l.optimizer.setWeights(d)]:[3,3];case 2:s.sent(),s.label=3;case 3:(0,t.dispose)(f),(0,t.dispose)(d.map(function(t){return t.tensor})),s.label=4;case 4:return[2,l]}})})}function ni(e,n){var r=t.io.decodeWeights(e,n),i={},a=[];return n.forEach(function(t){"optimizer"===t.group?a.push({name:t.name,tensor:r[t.name]}):i[t.name]=r[t.name]}),{modelWeights:i,optimizerWeights:a}}exports.LayersModel=$r,t.serialization.registerClass($r);var ri=function(e){function r(t){var n=e.call(this,{inputs:[],outputs:[]})||this;if(t=t||{},n.trainable=!0,n.built=!1,n.name=null!=t.name?t.name:Ee("sequential_"),null!=t.layers)for(var r=0,i=t.layers;r<i.length;r++){var a=i[r];n.add(a)}return n}return n(r,e),r.prototype.checkShape=function(t){if(t.inboundNodes[0].outputTensors[0].shape.some(function(t){return t<0}))throw new h("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")},r.prototype.add=function(t){var e,n=t instanceof r||t instanceof $r;if(n){if(1!==(e=t).outputs.length)throw new h("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==e.inputs.length)throw new h("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new h("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var i=Qe({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(n)this.outputs=e.outputs,this.inputs=e.inputs;else{if(1!==t.inboundNodes.length)throw new h("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+t.name+" which has "+t.inboundNodes.length+" pre-existing inbound connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new h("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=Ye(this.outputs[0])}this.inboundNodes=[],new Je({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:g(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(t){return t.shape}),outputShapes:this.outputs[0].shape})}else{var a=t.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1},r.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},r.prototype.call=function(t,e){return null==this.model&&this.build(),this.model.call(t,e)},r.prototype.build=function(t){if(Fe(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new $r({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},r.prototype.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},r.prototype.summary=function(t,n,r){void 0===r&&(r=console.log),this.built||this.build(),e.prototype.summary.call(this,t,n,r)},r.prototype.setWeights=function(t){null==this.model&&this.build(),this.model.setWeights(t)},r.prototype.evaluate=function(t,e,n){if(void 0===n&&(n={}),!this.built)throw new c("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)},r.prototype.evaluateDataset=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){if(!this.built)throw new c("The model needs to be compiled before being used.");return[2,this.model.evaluateDataset(t,e)]})})},r.prototype.predict=function(t,e){return void 0===e&&(e={}),null==this.model&&this.build(),this.model.predict(t,e)},r.prototype.predictOnBatch=function(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)},r.prototype.compile=function(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},Object.defineProperty(r.prototype,"optimizer",{get:function(){return null==this.model?void 0:this.model.optimizer},set:function(t){this.model.optimizer=t},enumerable:!0,configurable:!0}),r.prototype.fit=function(t,e,n){return void 0===n&&(n={}),a(this,void 0,void 0,function(){return s(this,function(r){if(!this.built)throw new c("The model needs to be compiled before being used.");return[2,this.model.fit(t,e,n)]})})},r.prototype.fitDataset=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){if(!this.built)throw new c("The model needs to be compiled before being used.");return[2,this.model.fitDataset(t,e)]})})},r.prototype.trainOnBatch=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){return[2,this.model.trainOnBatch(t,e)]})})},r.fromConfig=function(e,n,i,a){var s;void 0===i&&(i={}),void 0===a&&(a=!1);var o={};if(n instanceof Array){if(null==n[0].className||"Merge"===n[0].className)throw new h("Legacy serialization format not supported yet.");s=n}else t.util.assert(null!=n.layers,function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."}),s=n.layers,delete n.layers,o=n;var u=new e(o);if(!(u instanceof r))throw new p("Sequential.fromConfig called on non-Sequential input: "+u);for(var l=0,c=s;l<c.length;l++){var f=pn(c[l],void 0,a);a&&f.setFastWeightInitDuringBuild(!0),u.add(f)}return u},Object.defineProperty(r.prototype,"stopTraining",{get:function(){if(null==this.model)throw new h("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(t){if(null==this.model)throw new h("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t},enumerable:!0,configurable:!0}),r.prototype.getConfig=function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e],i={};i.className=r.getClassName(),i.config=r.getConfig(),t.push(i)}return{name:this.name,layers:t}},r.className="Sequential",r}($r);function ii(t){return new $r(t)}function ai(t){return new ri(t)}function si(t,e){return null==e&&(e={}),ti(t,e)}function oi(t){return Qe(t)}function ui(t,e){cn.registerCallbackConstructor(t,e)}exports.Sequential=ri,t.serialization.registerClass(ri);var li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getConfig=function(){return{}},e}(t.serialization.Serializable),ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=1),_t(t,e)},e.className="elu",e}(li);t.serialization.registerClass(ci);var hi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.selu)(e)},r.className="selu",r}(li);t.serialization.registerClass(hi);var pi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.relu)(e)},r.className="relu",r}(li);t.serialization.registerClass(pi);var fi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.tidy)(function(){return(0,t.minimum)(6,(0,t.relu)(e))})},r.className="relu6",r}(li);t.serialization.registerClass(fi);var di=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.apply=function(t){return t},e.className="linear",e}(li);t.serialization.registerClass(di);var gi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.sigmoid)(e)},r.className="sigmoid",r}(li);t.serialization.registerClass(gi);var mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.apply=function(t){return Pt(t)},e.className="hardSigmoid",e}(li);t.serialization.registerClass(mi);var yi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.softplus)(e)},r.className="softplus",r}(li);t.serialization.registerClass(yi);var vi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.apply=function(t){return Mt(t)},e.className="softsign",e}(li);t.serialization.registerClass(vi);var bi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e){return(0,t.tanh)(e)},r.className="tanh",r}(li);t.serialization.registerClass(bi);var wi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e,n){return void 0===n&&(n=-1),(0,t.softmax)(e,n)},r.className="softmax",r}(li);t.serialization.registerClass(wi);var zi=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.apply=function(e,n){return void 0===n&&(n=-1),(0,t.logSoftmax)(e,n)},r.className="logSoftmax",r}(li);function ki(t){return t.getClassName()}function Si(e,n){return void 0===n&&(n={}),C(e,t.serialization.SerializationMap.getMap().classNameMap,n,"activation")}function Ni(t){var e;return null==t?Si(e={className:"linear",config:{}}):"string"==typeof t?((e={}).className=t,e.config={},Si(e)):t instanceof li?t:Si(t)}function Ci(t){if(null!=t&&"object"!=typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+t)}t.serialization.registerClass(zi);var Ai=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t.serialization.Serializable),Ii=function(e){function r(t){var n=e.call(this)||this;return Ci(t),n.l1=null==t||null==t.l1?.01:t.l1,n.l2=null==t||null==t.l2?.01:t.l2,n.hasL1=0!==n.l1,n.hasL2=0!==n.l2,n}return n(r,e),r.prototype.apply=function(e){var n=this;return(0,t.tidy)(function(){var r=(0,t.zeros)([1]);return n.hasL1&&(r=(0,t.add)(r,(0,t.sum)((0,t.mul)(n.l1,(0,t.abs)(e))))),n.hasL2&&(r=(0,t.add)(r,(0,t.sum)((0,t.mul)(n.l2,Dt(e))))),r.asScalar()})},r.prototype.getConfig=function(){return{l1:this.l1,l2:this.l2}},r.fromConfig=function(t,e){return new t({l1:e.l1,l2:e.l2})},r.className="L1L2",r}(Ai);function xi(t){return Ci(t),new Ii({l1:null!=t?t.l1:null,l2:0})}function Ti(t){return Ci(t),new Ii({l2:null!=t?t.l2:null,l1:0})}t.serialization.registerClass(Ii);var Li={l1l2:"L1L2"};function Ei(t){return S(t)}function Oi(e,n){return void 0===n&&(n={}),C(e,t.serialization.SerializationMap.getMap().classNameMap,n,"regularizer")}function Di(t){return null==t?null:"string"==typeof t?Oi({className:t in Li?Li[t]:t,config:{}}):t instanceof Ai?t:Oi(t)}var Ri=function(e){function r(t){var n=e.call(this,null==t?{}:t)||this;return n.supportsMasking=!0,null!=t&&(n.maxValue=t.maxValue),n}return n(r,e),r.prototype.call=function(e,n){e=Re(e);var r=(0,t.relu)(e);return null!=this.maxValue&&(r=(0,t.clipByValue)(r,0,this.maxValue)),r},r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t={maxValue:this.maxValue},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="ReLU",r}(Ze);t.serialization.registerClass(Ri);var Fi=function(e){function r(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_ALPHA=.3,null==t&&(t={}),n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return n(r,e),r.prototype.call=function(e,n){var r=Re(e);return(0,t.leakyRelu)(r,this.alpha)},r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="LeakyReLU",r}(Ze);t.serialization.registerClass(Fi);var _i=function(e){function r(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),n.supportsMasking=!0,n.alphaInitializer=he(t.alphaInitializer||n.DEFAULT_ALPHA_INITIALIZER),n.alphaRegularizer=Di(t.alphaRegularizer),n.alphaConstraint=J(t.alphaConstraint),null==t.sharedAxes)n.sharedAxes=null;else if(Array.isArray(t.sharedAxes))n.sharedAxes=t.sharedAxes;else{if("number"!=typeof t.sharedAxes)throw new h("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);n.sharedAxes=[t.sharedAxes]}return n}return n(r,e),r.prototype.build=function(t){var e=(t=Fe(t)).slice(1);if(null!=this.sharedAxes)for(var n=0,r=this.sharedAxes;n<r.length;n++)e[(a=r[n])-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var i={};if(null!=this.sharedAxes)for(var a=1;a<t.length;++a)i[a]=t[a];this.inputSpec=[new Ue({ndim:t.length,axes:i})],this.built=!0},r.prototype.call=function(e,n){return e=Re(e),(0,t.prelu)(e,this.alpha.read())},r.prototype.getConfig=function(){var t={alphaInitializer:ce(this.alphaInitializer),alphaRegularizer:Ei(this.alphaRegularizer),alphaConstraint:V(this.alphaConstraint),sharedAxes:this.sharedAxes},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="PReLU",r}(Ze);t.serialization.registerClass(_i);var Mi=function(e){function r(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==n.DEFAULT_ALPHA)throw new p("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return n(r,e),r.prototype.call=function(e,n){var r=Re(e);return(0,t.elu)(r)},r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="ELU",r}(Ze);t.serialization.registerClass(Mi);var Bi=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_THETA=1,null==e&&(e={}),n.theta=null==e.theta?n.DEFAULT_THETA:e.theta,n}return n(e,t),e.prototype.call=function(t,e){var n=Re(t);return n.mul(bt(n.greater(this.theta),"float32"))},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={theta:this.theta},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ThresholdedReLU",e}(Ze);t.serialization.registerClass(Bi);var Pi=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_AXIS=1,null==e&&(e={}),n.softmax=(new wi).apply,n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n}return n(e,t),e.prototype.call=function(t,e){var n=Re(t);return this.softmax(n,this.axis)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Softmax",e}(Ze);function ji(t,e,n){if("number"==typeof t)return g(t,e);if(t.length!==e)throw new h("The "+n+" argument must be an integer or tuple of "+e+" integers. Received: "+t.length+" elements.");for(var r=0;r<e;++r){var i=t[r];if(!ft(i))throw new h("The "+n+" argument must be an integer or tuple of "+e+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+i)}return t}function Wi(t,e,n,r,i){return void 0===i&&(i=1),null==t?t:(a="same"===n?t:t-(e+(e-1)*(i-1))+1,Math.floor((a+r-1)/r));var a}function Ui(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+yt([n-e,0]);else{if("same"!==r)throw new h("Unsupport padding mode: "+r+".");t*=e}return t}function Vi(e,n){return(0,t.tidy)(function(){return nt(n),"channelsFirst"===n?(0,t.transpose)(e,[0,2,3,1]):e})}function qi(e,n){return(0,t.tidy)(function(){return nt(n),"channelsFirst"===n?(0,t.transpose)(e,[0,2,3,4,1]):e})}function Ji(e,n,r,i,a,s,o){return void 0===i&&(i=1),void 0===a&&(a="valid"),void 0===o&&(o=1),(0,t.tidy)(function(){if(null==s&&(s=u()),nt(s),3!==e.shape.length)throw new h("The input of a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead.");if(3!==n.shape.length)throw new h("The kernel for a conv1dWithBias operation should be 3, but is "+n.shape.length+" instead");if(null!=r&&1!==r.shape.length)throw new h("The bias for a conv1dWithBias operation should be 1, but is "+n.shape.length+" instead");if("channelsFirst"===s&&(e=(0,t.transpose)(e,[0,2,1])),"causal"===a)throw new p("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var l=(0,t.conv1d)(e,n,i,"same"===a?"same":"valid","NWC",o);return null!=r&&(l=Ft(l,r)),l})}function Hi(e,n,r,i,a,s,o,l){return void 0===i&&(i=[1,1]),void 0===a&&(a="valid"),void 0===l&&(l=null),(0,t.tidy)(function(){if(null==s&&(s=u()),nt(s),3!==e.rank&&4!==e.rank)throw new h("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+e.rank+".");if(3!==n.rank&&4!==n.rank)throw new h("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+e.rank+".");var c=Vi(e,s);if("causal"===a)throw new p("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return c=t.fused.conv2d({x:c,filter:n,strides:i,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:r,activation:l}),"channelsFirst"===s&&(c=(0,t.transpose)(c,[0,3,1,2])),c})}function Zi(e,n,r,i,a,s,o){return void 0===i&&(i=[1,1,1]),void 0===a&&(a="valid"),(0,t.tidy)(function(){if(null==s&&(s=u()),nt(s),4!==e.rank&&5!==e.rank)throw new h("conv3dWithBias expects input to be of rank 4 or 5, but received "+e.rank+".");if(4!==n.rank&&5!==n.rank)throw new h("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+e.rank+".");var l=qi(e,s);if("causal"===a)throw new p("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=(0,t.conv3d)(l,n,i,"same"===a?"same":"valid","NDHWC",o),null!=r&&(l=Ft(l,r)),"channelsFirst"===s&&(l=(0,t.transpose)(l,[0,4,1,2,3])),l})}t.serialization.registerClass(Pi);var Ki=function(t){function e(n,r){var i=t.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyArgs(r),i.rank=n,O(i.rank,"rank"),1!==i.rank&&2!==i.rank&&3!==i.rank)throw new p("Convolution layer for rank other than 1, 2, or 3 ("+i.rank+") is not implemented yet.");if(i.kernelSize=ji(r.kernelSize,n,"kernelSize"),i.strides=ji(null==r.strides?1:r.strides,n,"strides"),i.padding=null==r.padding?"valid":r.padding,rt(i.padding),i.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,nt(i.dataFormat),i.activation=Ni(r.activation),i.useBias=null==r.useBias||r.useBias,i.biasInitializer=he(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=J(r.biasConstraint),i.biasRegularizer=Di(r.biasRegularizer),i.activityRegularizer=Di(r.activityRegularizer),i.dilationRate=ji(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===i.rank&&Array.isArray(i.dilationRate)&&1!==i.dilationRate.length)throw new h("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(2===i.rank){if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate];else if(2!==i.dilationRate.length)throw new h("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate))}else if(3===i.rank)if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate,i.dilationRate];else if(3!==i.dilationRate.length)throw new h("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(i.dilationRate));return i}return n(e,t),e.verifyArgs=function(t){if(m("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!E(t.kernelSize,"number",1,3))throw new h("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(t.kernelSize)+".")},e.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ki(this.activation),useBias:this.useBias,biasInitializer:ce(this.biasInitializer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),biasConstraint:V(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(Ze),Gi=function(e){function r(t,n){var i=e.call(this,t,n)||this;return i.kernel=null,r.verifyArgs(n),i.filters=n.filters,O(i.filters,"filters"),i.kernelInitializer=he(n.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=J(n.kernelConstraint),i.kernelRegularizer=Di(n.kernelRegularizer),i}return n(r,e),r.prototype.build=function(t){var e;t=Fe(t);var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new h("The channel dimension of the input should be defined. Found "+t[n]);var r=t[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(e={},e[n]=r,e)}],this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var t;e=Re(e);var n=null==r.bias?null:r.bias.read(),i=F(r.activation.getClassName());if(null!=i&&2===r.rank)t=Hi(e,r.kernel.read(),n,r.strides,r.padding,r.dataFormat,r.dilationRate,i);else{if(1===r.rank)t=Ji(e,r.kernel.read(),n,r.strides[0],r.padding,r.dataFormat,r.dilationRate[0]);else if(2===r.rank)t=Hi(e,r.kernel.read(),n,r.strides,r.padding,r.dataFormat,r.dilationRate);else{if(3!==r.rank)throw new p("convolutions greater than 3D are not implemented yet.");t=Zi(e,r.kernel.read(),n,r.strides,r.padding,r.dataFormat,r.dilationRate)}null!=r.activation&&(t=r.activation.apply(t))}return t})},r.prototype.computeOutputShape=function(t){t=Fe(t);for(var e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2),r=0;r<n.length;++r){var i=Wi(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(i)}var a=[t[0]];return"channelsLast"===this.dataFormat?(a=a.concat(e)).push(this.filters):(a.push(this.filters),a=a.concat(e)),a},r.prototype.getConfig=function(){var t={filters:this.filters,kernelInitializer:ce(this.kernelInitializer),kernelRegularizer:Ei(this.kernelRegularizer),kernelConstraint:V(this.kernelConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.verifyArgs=function(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new h("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))},r}(Ki),Yi=function(t){function e(n){var r=t.call(this,2,n)||this;return e.verifyArgs(n),r}return n(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyArgs=function(t){if("number"!=typeof t.kernelSize&&!E(t.kernelSize,"number",1,2))throw new h("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv2D",e}(Gi);t.serialization.registerClass(Yi);var Xi=function(t){function e(n){var r=t.call(this,3,n)||this;return e.verifyArgs(n),r}return n(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyArgs=function(t){if("number"!=typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new h("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv3D",e}(Gi);t.serialization.registerClass(Xi);var $i=function(e){function r(t){var n=e.call(this,t)||this;if(n.inputSpec=[new Ue({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new h("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return n(r,e),r.prototype.build=function(t){var e;if(4!==(t=Fe(t)).length)throw new h("Input should have rank 4; Received input shape: "+JSON.stringify(t));var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n])throw new h("The channel dimension of the inputs should be defined. Found `None`.");var r=t[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ue({ndim:4,axes:(e={},e[n]=r,e)})],this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var n=Re(e);if(4!==n.shape.length)throw new h("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+n.shape.length);var i,a,s=n.shape,o=s[0];"channelsFirst"===r.dataFormat?(i=2,a=3):(i=1,a=2);var u=s[i],l=s[a],c=r.kernelSize[0],p=r.kernelSize[1],f=r.strides[0],d=r.strides[1],g=[o,Ui(u,f,c,r.padding),Ui(l,d,p,r.padding),r.filters];"channelsLast"!==r.dataFormat&&(n=(0,t.transpose)(n,[0,2,3,1]));var m=(0,t.conv2dTranspose)(n,r.kernel.read(),g,r.strides,r.padding);return"channelsLast"!==r.dataFormat&&(m=(0,t.transpose)(m,[0,3,1,2])),null!=r.bias&&(m=Ft(m,r.bias.read(),r.dataFormat)),null!=r.activation&&(m=r.activation.apply(m)),m})},r.prototype.computeOutputShape=function(t){var e,n,r,i=(t=Fe(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3):(e=3,n=1,r=2);var a=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],u=this.strides[1];return i[e]=this.filters,i[n]=Ui(i[n],o,a,this.padding),i[r]=Ui(i[r],u,s,this.padding),i},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.dilationRate,t},r.className="Conv2DTranspose",r}(Yi);t.serialization.registerClass($i);var Qi=function(e){function r(t,n){var r=e.call(this,t,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new h("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new h("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new h("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=he(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=Di(n.depthwiseRegularizer),r.depthwiseConstraint=J(n.depthwiseConstraint),r.pointwiseInitializer=he(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=Di(n.pointwiseRegularizer),r.pointwiseConstraint=J(n.pointwiseConstraint),r}return n(r,e),r.prototype.build=function(t){var e;if((t=Fe(t)).length<this.rank+2)throw new h("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(t));var n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n]||t[n]<0)throw new h("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[n]));for(var r=t[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[],s=0;s<this.rank;++s)a.push(1);a.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new Ue({ndim:this.rank+2,axes:(e={},e[n]=r,e)})],this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var n;if(e=Re(e),1===r.rank)throw new p("1D separable convolution is not implemented yet.");return 2===r.rank&&("channelsFirst"===r.dataFormat&&(e=(0,t.transpose)(e,[0,2,3,1])),n=(0,t.separableConv2d)(e,r.depthwiseKernel.read(),r.pointwiseKernel.read(),r.strides,r.padding,r.dilationRate,"NHWC")),r.useBias&&(n=Ft(n,r.bias.read(),r.dataFormat)),null!=r.activation&&(n=r.activation.apply(n)),"channelsFirst"===r.dataFormat&&(n=(0,t.transpose)(n,[0,3,1,2])),n})},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=ce(this.depthwiseInitializer),t.pointwiseInitializer=ce(this.pointwiseInitializer),t.depthwiseRegularizer=Ei(this.depthwiseRegularizer),t.pointwiseRegularizer=Ei(this.pointwiseRegularizer),t.depthwiseConstraint=V(this.depthwiseConstraint),t.pointwiseConstraint=V(this.pointwiseConstraint),t},r.className="SeparableConv",r}(Gi),ta=function(t){function e(e){return t.call(this,2,e)||this}return n(e,t),e.className="SeparableConv2D",e}(Qi);t.serialization.registerClass(ta);var ea=function(t){function e(n){var r=t.call(this,1,n)||this;return e.verifyArgs(n),r.inputSpec=[{ndim:3}],r}return n(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},e.verifyArgs=function(t){if("number"!=typeof t.kernelSize&&!E(t.kernelSize,"number",1,1))throw new h("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv1D",e}(Gi);t.serialization.registerClass(ea);var na=function(e){function r(t){var n=e.call(this,t)||this;return"number"==typeof t.cropping?n.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?n.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:n.cropping=t.cropping,n.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,n.inputSpec=[{ndim:4}],n}return n(r,e),r.prototype.computeOutputShape=function(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){return e=Re(e),"channelsLast"===r.dataFormat?At(At(e,r.cropping[0][0],e.shape[1]-r.cropping[0][0]-r.cropping[0][1],2),r.cropping[1][0],e.shape[2]-r.cropping[1][1]-r.cropping[1][0],3):At(At(e,r.cropping[0][0],e.shape[2]-r.cropping[0][0]-r.cropping[0][1],3),r.cropping[1][0],e.shape[3]-r.cropping[1][1]-r.cropping[1][0],4)})},r.prototype.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Cropping2D",r}(Ze);t.serialization.registerClass(na);var ra=function(e){function r(t){var n=e.call(this,t)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==t.size?n.DEFAULT_SIZE:t.size,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,n}return n(r,e),r.prototype.computeOutputShape=function(t){if("channelsFirst"===this.dataFormat){var e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}return e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2],[t[0],e,n,t[3]]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var n=Re(e),i=n.shape;if("channelsFirst"===r.dataFormat){n=(0,t.transpose)(n,[0,2,3,1]);var a=r.size[0]*i[2],s=r.size[1]*i[3],o=n.resizeNearestNeighbor([a,s]);return(0,t.transpose)(o,[0,3,1,2])}return a=r.size[0]*i[1],s=r.size[1]*i[2],n.resizeNearestNeighbor([a,s])})},r.prototype.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="UpSampling2D",r}(Ze);function ia(e,n,r,i,a,s){return void 0===r&&(r=[1,1]),void 0===i&&(i="valid"),(0,t.tidy)(function(){null==a&&(a=u()),nt(a);var o=Vi(e,a);if(4!==e.rank)throw new h("Input for depthwiseConv2d is required to be 4-D, but is instead "+e.rank+"-D");if(4!==n.rank)throw new h("depthwiseKernel is required to be 4-D, but is instead "+n.rank+"-D");return o=(0,t.depthwiseConv2d)(o,n,r,"same"===i?"same":"valid","NHWC",s),"channelsFirst"===a&&(o=(0,t.transpose)(o,[0,3,1,2])),o})}t.serialization.registerClass(ra);var aa=function(e){function r(t){var n=e.call(this,2,t)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,n.depthwiseInitializer=he(t.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=J(t.depthwiseConstraint),n.depthwiseRegularizer=Di(t.depthwiseRegularizer),n}return n(r,e),r.prototype.build=function(t){if((t=Fe(t)).length<4)throw new h("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(t)+".");var e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new h("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+t[e]+").");var n=t[e],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var t=ia(e=Re(e),r.depthwiseKernel.read(),r.strides,r.padding,r.dataFormat,null);return r.useBias&&(t=Ft(t,r.bias.read(),r.dataFormat)),null!=r.activation&&(t=r.activation.apply(t)),t})},r.prototype.computeOutputShape=function(t){t=Fe(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,i=Wi(e,this.kernelSize[0],this.padding,this.strides[0]),a=Wi(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],r,i,a]:[t[0],i,a,r]},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=ce(this.depthwiseInitializer),t.depthwiseRegularizer=Ei(this.depthwiseRegularizer),t.depthwiseConstraint=V(this.depthwiseRegularizer),t},r.className="DepthwiseConv2D",r}(Ki);t.serialization.registerClass(aa);var sa=function(e){function r(t){var n=e.call(this,t)||this;return n.rate=Math.max(Math.min(t.rate,1),0),n.noiseShape=t.noiseShape,n.seed=t.seed,n.supportsMasking=!0,n}return n(r,e),r.prototype.getNoiseShape=function(t){if(null==this.noiseShape)return this.noiseShape;for(var e=t.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e);if(0<r.rate&&r.rate<1){var i=null!=n.training&&n.training,a=r.getNoiseShape(t);return jt(function(){return Bt(t,r.rate,a,r.seed)},function(){return t},i)}return e})},r.prototype.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.prototype.dispose=function(){return e.prototype.dispose.call(this)},r.className="Dropout",r}(Ze);t.serialization.registerClass(sa);var oa=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[{ndim:3}],n}return n(e,t),e.prototype.getNoiseShape=function(t){var e=t.shape;return[e[0],1,e[2]]},e.className="SpatialDropout1D",e}(sa);t.serialization.registerClass(oa);var ua=function(e){function r(t){var n=e.call(this,t)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=[r,t.inputDim]}return n.units=t.units,O(n.units,"units"),n.activation=Ni(t.activation),null!=t.useBias&&(n.useBias=t.useBias),n.kernelInitializer=he(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=he(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=J(t.kernelConstraint),n.biasConstraint=J(t.biasConstraint),n.kernelRegularizer=Di(t.kernelRegularizer),n.biasRegularizer=Di(t.biasRegularizer),n.activityRegularizer=Di(t.activityRegularizer),n.supportsMasking=!0,n.inputSpec=[{minNDim:2}],n}return n(r,e),r.prototype.build=function(t){var e,n=(t=Fe(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(e={},e[-1]=n,e)}],this.built=!0},r.prototype.computeOutputShape=function(t){var e=(t=Fe(t)).slice();return e[e.length-1]=this.units,e},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t,i=Re(e),a=F(r.activation.getClassName());return null!=a?t=Et(i,r.kernel.read(),a,r.bias?r.bias.read():null):(t=Et(i,r.kernel.read()),null!=r.bias&&(t=Ft(t,r.bias.read())),null!=r.activation&&(t=r.activation.apply(t))),t})},r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),biasInitializer:ce(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),biasConstraint:V(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Dense",r}(Ze);t.serialization.registerClass(ua);var la=function(e){function r(t){var n=this;return t=t||{},(n=e.call(this,t)||this).inputSpec=[{minNDim:3}],n.dataFormat=t.dataFormat,n}return n(r,e),r.prototype.computeOutputShape=function(t){for(var e=0,n=(t=Fe(t)).slice(1);e<n.length;e++)if(null==n[e])throw new h('The shape of the input to "Flatten" is not fully defined (got '+t.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],dt(t,1)]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e);if("channelsFirst"===r.dataFormat&&t.rank>1){for(var i=[0],a=2;a<t.rank;++a)i.push(a);i.push(1),t=t.transpose(i)}return St(t)})},r.prototype.getConfig=function(){var t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);var n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Flatten",r}(Ze);t.serialization.registerClass(la);var ca=function(e){function r(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.activation=Ni(t.activation),n}return n(r,e),r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e);return r.activation.apply(t)})},r.prototype.getConfig=function(){var t={activation:ki(this.activation)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Activation",r}(Ze);t.serialization.registerClass(ca);var ha=function(e){function r(t){var n=e.call(this,t)||this;return n.n=t.n,n.inputSpec=[{ndim:2}],n}return n(r,e),r.prototype.computeOutputShape=function(t){return[t[0],this.n,t[1]]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){return zt(e=Re(e),r.n)})},r.prototype.getConfig=function(){var t={n:this.n},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="RepeatVector",r}(Ze);t.serialization.registerClass(ha);var pa=function(e){function r(t){var n=e.call(this,t)||this;n.targetShape=t.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return n(r,e),r.prototype.isUnknown=function(t){return t<0||null==t},r.prototype.fixUnknownDimension=function(t,e){for(var n="Total size of new array must be unchanged.",r=e.slice(),i=1,a=null,s=0;s<r.length;++s){var o=r[s];if(this.isUnknown(o)){if(null!==a)throw new h("Can only specifiy one unknown dimension.");a=s}else i*=o}var u=dt(t);if(null!==a){if(0===i||u%i!=0)throw new h(n);r[a]=u/i}else if(u!==i)throw new h(n);return r},r.prototype.computeOutputShape=function(t){for(var e=!1,n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e),i=t.shape,a=i.slice(0,1).concat(r.fixUnknownDimension(i.slice(1),r.targetShape));return t.reshape(a)})},r.prototype.getConfig=function(){var t={targetShape:this.targetShape},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Reshape",r}(Ze);t.serialization.registerClass(pa);var fa=function(e){function r(n){var r=e.call(this,n)||this;if(null==n.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(n.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+n.dims+" instead.");var i=vt(1,n.dims.length+1);if(!t.util.arraysEqual(n.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(n.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=n.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Ue({ndim:r.dims.length+1})],r}return n(r,e),r.prototype.computeOutputShape=function(t){var e=(t=Fe(t)).slice();return this.dims.forEach(function(n,r){e[r+1]=t[n]}),e},r.prototype.call=function(e,n){return(0,t.transpose)(Re(e),this.dimsIncludingBatch)},r.prototype.getConfig=function(){var t={dims:this.dims},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Permute",r}(Ze);t.serialization.registerClass(fa);var da=function(e){function r(t){var n=e.call(this,null==t?{}:t)||this;return n.supportsMasking=!0,n.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0,n}return n(r,e),r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={maskValue:this.maskValue};return Object.assign(n,t),n},r.prototype.computeMask=function(e,n){var r=Re(e);return(0,t.any)((0,t.notEqual)(r,this.maskValue),-1)},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var i=Re(e),a=(0,t.any)((0,t.notEqual)(i,r.maskValue),-1,!0);return i.mul(a.asType(i.dtype))})},r.className="Masking",r}(Ze);t.serialization.registerClass(da);var ga=function(e){function r(t){var n=e.call(this,t)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var r=null;null!=t.batchSize&&(r=t.batchSize),null==t.inputLength?n.batchInputShape=[r,null]:n.batchInputShape=[r].concat(b(t.inputLength))}return n.inputDim=t.inputDim,O(n.inputDim,"inputDim"),n.outputDim=t.outputDim,O(n.outputDim,"outputDim"),n.embeddingsInitializer=he(t.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=Di(t.embeddingsRegularizer),n.activityRegularizer=Di(t.activityRegularizer),n.embeddingsConstraint=J(t.embeddingsConstraint),n.maskZero=t.maskZero,n.supportsMasking=t.maskZero,n.inputLength=t.inputLength,n}return n(r,e),r.prototype.build=function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},r.prototype.warnOnIncompatibleInputShape=function(t){},r.prototype.computeMask=function(e,n){var r=this;return(0,t.tidy)(function(){return r.maskZero?(e=Re(e),(0,t.notEqual)(e,(0,t.zerosLike)(e))):null})},r.prototype.computeOutputShape=function(t){if(t=Fe(t),null==this.inputLength)return t.concat([this.outputDim]);var e=b(this.inputLength);if(e.length!==t.length-1)throw new h('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);for(var n=0,r=0;r<e.length;++r){var i=e[r],a=t[r+1];if(null!=i&&null!=a&&i!==a)throw new h('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);null==i&&(e[n]=a),n++}return[t[0]].concat(e,[this.outputDim])},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e);return"int32"!==t.dtype&&(t=bt(t,"int32")),Ot(r.embeddings.read(),t.as1D()).reshape(Fe(r.computeOutputShape(t.shape)))})},r.prototype.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:ce(this.embeddingsInitializer),embeddingsRegularizer:Ei(this.embeddingsRegularizer),activityRegularizer:Ei(this.activityRegularizer),embeddingsConstraint:V(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Embedding",r}(Ze);t.serialization.registerClass(ga);var ma=function(e){function r(t){var n=e.call(this,t||{})||this;return n.supportsMasking=!0,n}return n(r,e),r.prototype.mergeFunction=function(t){throw new p},r.prototype.computeElementwiseOpOutputShape=function(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;for(var n=t.slice(0,t.length-e.length),r=0;r<e.length;++r){var i=t[t.length-e.length+r],a=e[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new h("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n},r.prototype.build=function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Fe(t)]),(t=t).length<2)throw new h("A merge layer should be called on an Array of at least 2 inputs. Got "+t.length+" input(s).");for(var e=[],n=0,r=t;n<r.length;n++)null!=(s=r[n])&&null!==s[0]&&e.push(s[0]);if((e=x(e)).length>1)throw new h("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(t)+".");for(var i=null==t[0]?null:t[0].slice(1),a=1;a<t.length;++a){var s=null==t[a]?null:t[a].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var o=t.map(function(t){return t.length});-1===t.indexOf(null)&&1===x(o).length?this.reshapeRequired=!1:this.reshapeRequired=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){if(e=e,r.reshapeRequired){var n=[],i=e.map(function(t){return t.rank});if(-1===i.indexOf(null)){for(var a=yt(i),s=0,o=e;s<o.length;s++){for(var u=(f=o[s]).rank,l=0;l<a-u;++l)f=wt(f,1);n.push(f)}return r.mergeFunction(n)}for(var c=!1,h=0,p=e;h<p.length;h++){var f;if(null==(u=(f=p[h]).rank)){var d=f.shape,g=d[0],m=d.slice(1).concat([g]),y=f.reshape([g].concat(dt(d.slice(1))));y=(y=(0,t.transpose)(y,[1,0])).reshape(m),n.push(y),c=!0}else if(u>1){var v=vt(1,u).concat([0]);n.push((0,t.transpose)(f,v)),c=!0}else n.push(f)}var b=r.mergeFunction(n),w=b.rank;if(c)if(null==w){var z=b.shape;m=[g=z[z.length-1]].concat(z.slice(0,z.length-1)),b=(0,t.transpose)(b.reshape([-1,g]),[1,0]).reshape(m)}else w>1&&(v=[w-1].concat(vt(0,w-1)),b=(0,t.transpose)(b,v));return b}return r.mergeFunction(e)})},r.prototype.computeOutputShape=function(t){var e;e=null==(t=t)[0]?null:t[0].slice(1);for(var n=1;n<t.length;++n){var r=null==t[n]?null:t[n].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}for(var i=[],a=0,s=t;a<s.length;a++)null!=(r=s[a])&&null!==r[0]&&i.push(r[0]);return 1===(i=x(i)).length?i.concat(e):[null].concat(e)},r.prototype.computeMask=function(e,n){return(0,t.tidy)(function(){if(null==n)return null;if(!Array.isArray(n))throw new h("`mask` should be an Array");if(!Array.isArray(e))throw new h("`inputs` should be an Array");if(n.length!==e.length)throw new h("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+e.length+" vs "+n.length+")");if(n.every(function(t){return null==t}))return null;for(var r=(n=n.map(function(e){return null==e?e:(0,t.expandDims)(e,0)}))[0],i=1;i<n.length-1;++i)r=(0,t.logicalAnd)(r,n[i]);return r})},r}(Ze),ya=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.mergeFunction=function(e){return(0,t.tidy)(function(){for(var n=e[0].clone(),r=1;r<e.length;++r)n=(0,t.add)(n,e[r]);return n})},r.className="Add",r}(ma);t.serialization.registerClass(ya);var va=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.mergeFunction=function(e){return(0,t.tidy)(function(){for(var n=e[0].clone(),r=1;r<e.length;++r)n=(0,t.mul)(n,e[r]);return n})},r.className="Multiply",r}(ma);t.serialization.registerClass(va);var ba=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.mergeFunction=function(e){return(0,t.tidy)(function(){for(var n=e[0].clone(),r=1;r<e.length;++r)n=(0,t.add)(n,e[r]);return(0,t.mul)(1/e.length,n)})},r.className="Average",r}(ma);t.serialization.registerClass(ba);var wa=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.mergeFunction=function(e){return(0,t.tidy)(function(){for(var n=e[0],r=1;r<e.length;++r)n=(0,t.maximum)(n,e[r]);return n})},r.className="Maximum",r}(ma);t.serialization.registerClass(wa);var za=function(e){function r(t){return e.call(this,t)||this}return n(r,e),r.prototype.mergeFunction=function(e){return(0,t.tidy)(function(){for(var n=e[0],r=1;r<e.length;++r)n=(0,t.minimum)(n,e[r]);return n})},r.className="Minimum",r}(ma);t.serialization.registerClass(za);var ka=function(e){function r(t){var n=e.call(this,t)||this;return n.DEFAULT_AXIS=-1,null==t&&(t={}),n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return n(r,e),r.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new h("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var n=!0,r=0,i=e=e;r<i.length;r++)if(null!=(p=i[r])){n=!1;break}if(!n){for(var a=[],s=0;s<e.length;++s){var o=e[s].slice();o.splice(this.axis,1);for(var u=!1,l=0,c=a;l<c.length;l++){var p=c[l];if(t.util.arraysEqual(p,o)){u=!0;break}}u||a.push(o)}if(a.length>1)throw new h("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},r.prototype.mergeFunction=function(e){var n=this;return(0,t.tidy)(function(){return It(e,n.axis)})},r.prototype.computeOutputShape=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new h("A `Concatenate` layer should be called on a list of inputs.");for(var e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,i=0,a=e.slice(1);i<a.length;i++){var s=a[i];if(null==n[r]||null==s[r]){n[r]=null;break}n[r]+=s[r]}return n},r.prototype.computeMask=function(e,n){var r=this;if(null==n)return null;if(!Array.isArray(n))throw new h("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new h("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new h("Mismatch in the length of mask ("+n.length+") and the legnth of inputs ("+e.length+")");return(0,t.tidy)(function(){var i=!0;if(n.forEach(function(t){null==t||(i=!1)}),i)return null;for(var a=[],s=0;s<e.length;++s)null==n[s]?a.push((0,t.onesLike)(e[s]).asType("bool")):n[s].rank<e[s].rank?a.push((0,t.expandDims)(n[s],-1)):a.push(n[s]);var o=(0,t.concat)(a,r.axis);return(0,t.all)(o,-1,!1)})},r.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Concatenate",r}(ma);function Sa(t,e){for(;t<0;)t+=e;return t}function Na(e,n,r){if(e.shape.length>3||n.shape.length>3)throw new p("batchDot is not implemented for tensors of 4D or higher rank yet");if(t.util.assert(e.shape.length>=2,function(){return"batchDot requires the rank of x to be >= 2, but got "+e.shape.length}),t.util.assert(e.shape.length>=2,function(){return"batchDot requires the rank of y to be >= 2, but got "+n.shape.length}),"number"==typeof r&&(r=[r,r]),"complex64"===e.dtype||"complex64"===n.dtype)throw new p("batchDot is not implemented for complex64-type Tensors yet.");var i=e.shape.length,a=n.shape.length;null==r&&(r=[i-1,a-2]);var s=r;return(0,t.tidy)(function(){var t,r;if(i>a){t=i-a;for(var o=[],u=0;u<t;++u)o.push(1);n=n.reshape(n.shape.concat(o))}else if(a>i){for(t=a-i,o=[],u=0;u<t;++u)o.push(1);e=e.reshape(e.shape.concat(o))}else t=0;if(2===e.shape.length&&2===n.shape.length)r=s[0]===s[1]?e.mulStrict(n).sum(s[0]):e.transpose([1,0]).mulStrict(n).sum(s[1]);else{var l=s[0]!==e.shape.length-1,c=s[1]===n.shape.length-1;r=e.matMul(n,l,c)}if(t>0){var h,p=[];for(u=h=i>a?i+a-3:i-1;u<h+t;++u)p.push(u);r=r.squeeze(p)}return 1===r.shape.length&&(r=r.expandDims(1)),r})}t.serialization.registerClass(ka);var Ca=function(e){function r(t){var n=e.call(this,t)||this;return n.axes=t.axes,n.normalize=null!=t.normalize&&t.normalize,n.supportsMasking=!0,n.reshapeRequired=!1,n}return n(r,e),r.prototype.build=function(e){t.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var n=e[0],r=e[1];if(n.length>3||r.length>3)throw new p("Dot layer does not support tensors of 4D or higher rank yet.");var i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new h("Dimension incompatibility: "+n[i[0]]+" !== "+r[i[1]])},r.prototype.mergeFunction=function(t){if(2!==t.length)throw new h("A `Dot` layer must be called on exactly 2 inputs, but received "+t.length+" input(s).");var e,n=t[0],r=t[1];return e=Array.isArray(this.axes)?this.axes.map(function(e,n){return Sa(e,t[n].shape.length)}):[Sa(this.axes,n.shape.length),Sa(this.axes,r.shape.length)],this.normalize&&(n=fn(n,e[0]),r=fn(r,e[1])),Na(n,r,e)},r.prototype.interpretAxes=function(t,e){return Array.isArray(this.axes)?this.axes:[Sa(this.axes,t.length),Sa(this.axes,e.length)]},r.prototype.computeOutputShape=function(e){t.util.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."});var n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new p("Dot layer does not support tensors of 4D or higher rank yet.");var i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);var a=n.concat(r);return 1===a.length&&a.push(1),a},r.prototype.computeMask=function(t,e){return null},r.prototype.getConfig=function(){var t={axes:this.axes,normalize:this.normalize},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="Dot",r}(ma);t.serialization.registerClass(Ca);var Aa=function(e){function r(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.stddev=t.stddev,n}return n(r,e),r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={stddev:this.stddev};return Object.assign(n,t),n},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e);return jt(function(){return Lt(t.shape,0,r.stddev).add(t)},function(){return t},n.training||!1)})},r.className="GaussianNoise",r}(Ze);t.serialization.registerClass(Aa);var Ia=function(e){function r(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.rate=t.rate,n}return n(r,e),r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,t),n},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n);var t=Re(e);return r.rate>0&&r.rate<1?jt(function(){var e=Math.sqrt(r.rate/(1-r.rate));return t.mul(Lt(t.shape,1,e))},function(){return t},n.training||!1):t})},r.className="GaussianDropout",r}(Ze);t.serialization.registerClass(Ia);var xa=function(e){function r(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.rate=t.rate,n.noiseShape=t.noiseShape,n}return n(r,e),r.prototype._getNoiseShape=function(t){return this.noiseShape||Re(t).shape},r.prototype.computeOutputShape=function(t){return t},r.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,t),n},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){if(r.rate<1&&r.rate>0){var i=r._getNoiseShape(e);return jt(function(){var n=Re(e),a=-1.7580993408473766,s=(0,t.greaterEqual)((0,t.randomUniform)(i),r.rate);s=bt(s,"float32");var o=Math.pow((1-r.rate)*(1+r.rate*Math.pow(a,2)),-.5),u=-o*a*r.rate;return n.mul(s).add(s.add(-1).mul(a)).mul(o).add(u)},function(){return Re(e)},n.training||!1)}return e})},r.className="AlphaDropout",r}(Ze);function Ta(e,n,r,i,a,s){var o;if(void 0===s&&(s=.001),2===e.rank)o=(0,t.batchNorm2d)(e,n,r,i,a,s);else if(3===e.rank)o=(0,t.batchNorm3d)(e,n,r,i,a,s);else{if(4!==e.rank)throw new p("batchNormalization is not implemented for array of rank "+e.rank+" yet");o=(0,t.batchNorm4d)(e,n,r,i,a,s)}return o}function La(e,n,r,i,a){return void 0===a&&(a=.001),(0,t.tidy)(function(){var s=(0,t.moments)(e,i),o=s.mean,u=s.variance;return[Ta(e,o,u,r,n,a),o,u]})}function Ea(e,n,r,i,a){return void 0===a&&(a=.001),(0,t.tidy)(function(){for(var s=(0,t.moments)(e,i),o=s.mean,u=s.variance,l=[],c=0,h=vt(0,e.rank);c<h.length;c++){var p=h[c];-1!==i.indexOf(p)?l.push(1):l.push(e.shape[p])}var f=o.reshape(l),d=u.reshape(l),g=null==n?null:n.reshape(l),m=null==r?null:r.reshape(l);return[Ta(e,f,d,m,g,a),o,u]})}function Oa(e,n,r,i,a){return void 0===a&&(a=.001),t.util.arraysEqual(i.slice().sort(),vt(0,e.rank-1))?La(e,n,r,i,a):Ea(e,n,r,i,a)}t.serialization.registerClass(xa);var Da=function(e){function r(t){var n=this;return null==t&&(t={}),(n=e.call(this,t)||this).supportsMasking=!0,n.axis=null==t.axis?-1:t.axis,n.momentum=null==t.momentum?.99:t.momentum,n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=he(t.betaInitializer||"zeros"),n.gammaInitializer=he(t.gammaInitializer||"ones"),n.movingMeanInitializer=he(t.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=he(t.movingVarianceInitializer||"ones"),n.betaConstraint=J(t.betaConstraint),n.gammaConstraint=J(t.gammaConstraint),n.betaRegularizer=Di(t.betaRegularizer),n.gammaRegularizer=Di(t.gammaRegularizer),n}return n(r,e),r.prototype.build=function(t){var e;t=Fe(t);var n=this.axis>=0?this.axis:this.axis+t.length,r=t[n];if(null==r)throw new h("Axis "+n+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(t)+".");this.inputSpec=[new Ue({ndim:t.length,axes:(e={},e[n]=r,e)})];var i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var i=null!=n.training&&n.training,a=Re(e),s=a.shape,o=s.length,u=vt(0,o),l=r.axis>=0?r.axis:r.axis+o;u.splice(l,1);var c=g(1,o);c[l]=s[l];var h=u.slice();h.sort();var p=!t.util.arraysEqual(h,vt(0,o).slice(0,o-1));if(!i)return function(){if(p){var t=r.movingMean.read().reshape(c),e=r.movingVariance.read().reshape(c),n=r.center?r.beta.read().reshape(c):null,i=r.scale?r.gamma.read().reshape(c):null;return Ta(a,t,e,n,i,r.epsilon)}return Ta(a,r.movingMean.read(),r.movingVariance.read(),null==r.beta?null:r.beta.read(),null==r.gamma?null:r.gamma.read(),r.epsilon)}();var f=Oa(a,r.gamma.read(),r.beta.read(),u,r.epsilon),d=f[0],m=f[1],y=f[2],v=function(e,n,r){(0,t.tidy)(function(){var t=1-r,i=e.read(),a=i.sub(n).mul(t);e.write(i.sub(a))})};return v(r.movingMean,m,r.momentum),v(r.movingVariance,y,r.momentum),d})},r.prototype.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ce(this.betaInitializer),gammaInitializer:ce(this.gammaInitializer),movingMeanInitializer:ce(this.movingMeanInitializer),movingVarianceInitializer:ce(this.movingVarianceInitializer),betaRegularizer:Ei(this.betaRegularizer),gammaRegularizer:Ei(this.gammaRegularizer),betaConstraint:V(this.betaConstraint),gammaConstraint:V(this.gammaConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="BatchNormalization",r}(Ze);t.serialization.registerClass(Da);var Ra=function(e){function r(t){var n=this;if(null==t&&(t={}),(n=e.call(this,t)||this).axis=null==t.axis?-1:t.axis,"number"==typeof n.axis){if(!Number.isInteger(n.axis))throw new Error("Expected axis to be an integer, but received "+n.axis)}else{if(!Array.isArray(n.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(n.axis));for(var r=0,i=n.axis;r<i.length;r++){var a=i[r];if(!Number.isInteger(a))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(n.axis))}}return n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=he(t.betaInitializer||"zeros"),n.gammaInitializer=he(t.gammaInitializer||"ones"),n.betaRegularizer=Di(t.betaRegularizer),n.gammaRegularizer=Di(t.gammaRegularizer),n.supportsMasking=!0,n}return n(r,e),r.prototype.build=function(t){var e=(t=Fe(t)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=e);for(var r=0,i=this.axis;r<i.length;r++){var a=i[r];if(a<0||a>=e)throw new Error("Invalid axis: "+a)}if(this.axis.length!==x(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var s=this.axis.map(function(e){return t[e]});this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0},r.prototype.call=function(e,n){var r=this,i=Re(e),a=i.shape,s=a.length;return(0,t.tidy)(function(){for(var e=(0,t.moments)(i,r.axis,!0),n=e.mean,o=e.variance,u=g(1,s),l=0,c=r.axis;l<c.length;l++){var h=c[l];u[h]=a[h]}for(var p=function(t){return null!=t&&t.shape.length!==s&&r.axis!==[s-1]?t.reshape(u):t},f=p(r.gamma.read()),d=p(r.beta.read()),m=[],y=[],v=0;v<s;++v)-1!==r.axis.indexOf(v)?(m.push(a[v]),y.push(1)):(m.push(1),y.push(a[v]));return n=n.tile(m),o=o.tile(m),f=f.tile(y),d=d.tile(y),Ta(i,n,o,d,f,r.epsilon)})},r.prototype.getConfig=function(){var t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:ce(this.betaInitializer),gammaInitializer:ce(this.gammaInitializer),betaRegularizer:Ei(this.betaRegularizer),gammaRegularizer:Ei(this.gammaRegularizer)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="LayerNormalization",r}(Ze);function Fa(e,n,r){return(0,t.tidy)(function(){if(4!==e.rank)throw new h("temporalPadding expects input tensor to be 4-D, but received a "+e.rank+"-D tensor.");if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new h("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r=u()),"channelsLast"!==r&&"channelsFirst"!==r)throw new h("Unknown data format: "+r+". Supported data formats are 'channelsLast' and 'channelsFirst.");var i;return i="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],(0,t.pad)(e,i)})}t.serialization.registerClass(Ra);var _a=function(e){function r(t){var n=this;if(null==t&&(t={}),(n=e.call(this,t)||this).dataFormat=null==t.dataFormat?u():t.dataFormat,null==t.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)n.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new h("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+t.padding.length+" array.");var r=void 0,i=void 0;if("number"==typeof t.padding[0])r=[t.padding[0],t.padding[0]],i=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new h("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+t.padding[0].length+" array.");if(r=t.padding[0],2!==t.padding[1].length)throw new h("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+t.padding[1].length+" array.");i=t.padding[1]}n.padding=[r,i]}return n.inputSpec=[new Ue({ndim:4})],n}return n(r,e),r.prototype.computeOutputShape=function(t){var e,n;return t=Fe(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){return Fa(Re(e),r.padding,r.dataFormat)})},r.prototype.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="ZeroPadding2D",r}(Ze);function Ma(e,n,r,i,a,s){return(0,t.tidy)(function(){var o;nt(a),it(s),rt(i),null==r&&(r=[1,1]),null==i&&(i="valid"),null==a&&(a=u()),null==s&&(s="max"),e=Vi(e,a);var l="same"===i?"same":"valid";return o="max"===s?(0,t.maxPool)(e,n,r,l):(0,t.avgPool)(e,n,r,l),"channelsFirst"===a&&(o=(0,t.transpose)(o,[0,3,1,2])),o})}function Ba(e,n,r,i,a,s){return(0,t.tidy)(function(){var o;nt(a),it(s),rt(i),null==r&&(r=[1,1,1]),null==i&&(i="valid"),null==a&&(a=u()),null==s&&(s="max"),e=qi(e,a);var l="same"===i?"same":"valid";return o="max"===s?(0,t.maxPool3d)(e,n,r,l):(0,t.avgPool3d)(e,n,r,l),"channelsFirst"===a&&(o=(0,t.transpose)(o,[0,4,1,2,3])),o})}t.serialization.registerClass(_a);var Pa=function(e){function r(t){var n=this;if(null==t.poolSize&&(t.poolSize=2),n=e.call(this,t)||this,"number"==typeof t.poolSize)n.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new h("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));n.poolSize=t.poolSize}if(O(n.poolSize,"poolSize"),null==t.strides)n.strides=n.poolSize;else if("number"==typeof t.strides)n.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new h("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));n.strides=t.strides}return O(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,rt(n.padding),n.inputSpec=[new Ue({ndim:3})],n}return n(r,e),r.prototype.computeOutputShape=function(t){var e=Wi((t=Fe(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){r.invokeCallHook(e,n),e=wt(Re(e),2);var i=r.poolingFunction(Re(e),[r.poolSize[0],1],[r.strides[0],1],r.padding,"channelsLast");return(0,t.squeeze)(i,[2])})},r.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r}(Ze),ja=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return nt(i),rt(r),Ma(t,e,n,r,i,"max")},e.className="MaxPooling1D",e}(Pa);t.serialization.registerClass(ja);var Wa=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return nt(i),rt(r),Ma(t,e,n,r,i,"avg")},e.className="AveragePooling1D",e}(Pa);t.serialization.registerClass(Wa);var Ua=function(e){function r(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new h("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides];return O(n.poolSize,"poolSize"),O(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,nt(n.dataFormat),rt(n.padding),n.inputSpec=[new Ue({ndim:4})],n}return n(r,e),r.prototype.computeOutputShape=function(t){t=Fe(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Wi(e,this.poolSize[0],this.padding,this.strides[0]),n=Wi(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){return r.invokeCallHook(e,n),r.poolingFunction(Re(e),r.poolSize,r.strides,r.padding,r.dataFormat)})},r.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r}(Ze),Va=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return nt(i),rt(r),Ma(t,e,n,r,i,"max")},e.className="MaxPooling2D",e}(Ua);t.serialization.registerClass(Va);var qa=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return nt(i),rt(r),Ma(t,e,n,r,i,"avg")},e.className="AveragePooling2D",e}(Ua);t.serialization.registerClass(qa);var Ja=function(e){function r(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new h("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides,t.strides];return O(n.poolSize,"poolSize"),O(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,nt(n.dataFormat),rt(n.padding),n.inputSpec=[new Ue({ndim:5})],n}return n(r,e),r.prototype.computeOutputShape=function(t){t=Fe(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=Wi(e,this.poolSize[0],this.padding,this.strides[0]),n=Wi(n,this.poolSize[1],this.padding,this.strides[1]),r=Wi(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){return r.invokeCallHook(e,n),r.poolingFunction(Re(e),r.poolSize,r.strides,r.padding,r.dataFormat)})},r.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r}(Ze),Ha=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return nt(i),rt(r),Ba(t,e,n,r,i,"max")},e.className="MaxPooling3D",e}(Ja);t.serialization.registerClass(Ha);var Za=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return nt(i),rt(r),Ba(t,e,n,r,i,"avg")},e.className="AveragePooling3D",e}(Ja);t.serialization.registerClass(Za);var Ka=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[new Ue({ndim:3})],n}return n(e,t),e.prototype.computeOutputShape=function(t){return[t[0],t[2]]},e.prototype.call=function(t,e){throw new p},e}(Ze),Ga=function(e){function r(t){return e.call(this,t||{})||this}return n(r,e),r.prototype.call=function(e,n){return(0,t.tidy)(function(){var n=Re(e);return(0,t.mean)(n,1)})},r.className="GlobalAveragePooling1D",r}(Ka);t.serialization.registerClass(Ga);var Ya=function(e){function r(t){return e.call(this,t||{})||this}return n(r,e),r.prototype.call=function(e,n){return(0,t.tidy)(function(){var n=Re(e);return(0,t.max)(n,1)})},r.className="GlobalMaxPooling1D",r}(Ka);t.serialization.registerClass(Ya);var Xa=function(t){function e(e){var n=t.call(this,e)||this;return n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,nt(n.dataFormat),n.inputSpec=[new Ue({ndim:4})],n}return n(e,t),e.prototype.computeOutputShape=function(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]},e.prototype.call=function(t,e){throw new p},e.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(Ze),$a=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var n=Re(e);return"channelsLast"===r.dataFormat?(0,t.mean)(n,[1,2]):(0,t.mean)(n,[2,3])})},r.className="GlobalAveragePooling2D",r}(Xa);t.serialization.registerClass($a);var Qa=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var n=Re(e);return"channelsLast"===r.dataFormat?(0,t.max)(n,[1,2]):(0,t.max)(n,[2,3])})},r.className="GlobalMaxPooling2D",r}(Xa);function ts(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new h("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=i(e),constants:n=i(n)}}function es(e,n,r,i,a,s,o,u){return void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===u&&(u=!1),(0,t.tidy)(function(){var l=n.shape.length;if(l<3)throw new h("Input should be at least 3D, but is "+l+"D.");var c=[1,0].concat(vt(2,l));if(n=(0,t.transpose)(n,c),null!=s)throw new p("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===l-1&&(a=(0,t.expandDims)(a,-1)),a=(0,t.transpose)(a,c)),i&&(n=(0,t.reverse)(n,0),null!=a&&(a=(0,t.reverse)(a,0)));var f,d,g=[],m=r,y=n.shape[0],v=(0,t.unstack)(n);null!=a&&(d=(0,t.unstack)(a));for(var b,w=function(n){var r=v[n],i=(0,t.tidy)(function(){return e(r,m)});if(null==a)f=i[0],m=i[1];else{var s=(0,t.tidy)(function(){var e=d[n],r=(0,t.onesLike)(e).sub(e);return{output:i[0].mul(e).addStrict(m[0].mul(r)),newStates:m.map(function(t,n){return i[1][n].mul(e).addStrict(t.mul(r))})}});f=s.output,m=s.newStates}u&&g.push(f)},z=0;z<y;++z)w(z);return u&&(b=(0,t.stack)(g,1)),[f,b,m]})}t.serialization.registerClass(Qa);var ns=function(e){function r(t){var n,r=e.call(this,t)||this;if(null==t.cell)throw new h("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(t.cell)?new cs({cells:t.cell}):t.cell).stateSize)throw new h("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=t.returnSequences&&t.returnSequences,r.returnState=null!=t.returnState&&t.returnState,r.goBackwards=null!=t.goBackwards&&t.goBackwards,r._stateful=null!=t.stateful&&t.stateful,r.unroll=null!=t.unroll&&t.unroll,r.supportsMasking=!0,r.inputSpec=[new Ue({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return n(r,e),r.prototype.getStates=function(){return null==this.states_?vt(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(t){return null}):this.states_},r.prototype.setStates=function(t){this.states_=t},r.prototype.computeOutputShape=function(t){Oe(t)&&(t=t[0]),t=t;var e=this.cell.stateSize;Array.isArray(e)||(e=[e]);var n,r=e[0];if(n=this.returnSequences?[t[0],t[1],r]:[t[0],r],this.returnState){for(var i=[],a=0,s=e;a<s.length;a++){var o=s[a];i.push([t[0],o])}return[n].concat(i)}return n},r.prototype.computeMask=function(e,n){var r=this;return(0,t.tidy)(function(){Array.isArray(n)&&(n=n[0]);var t=r.returnSequences?n:null;if(r.returnState){var e=r.states.map(function(t){return null});return[t].concat(e)}return t})},Object.defineProperty(r.prototype,"states",{get:function(){if(null==this.states_){for(var t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[],n=0;n<t;++n)e.push(null);return e}return this.states_},set:function(t){this.states_=t},enumerable:!0,configurable:!0}),r.prototype.build=function(e){if(null!=this.numConstants)throw new p("Constants support is not implemented in RNN yet.");Oe(e)&&(e=e[0]),e=e;var n=this.stateful?e[0]:null,r=e[e.length-1];this.inputSpec[0]=new Ue({shape:[n,null,r]});var i,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!t.util.arraysEqual(this.stateSpec.map(function(t){return t.shape[t.shape.length-1]}),i))throw new h("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=i.map(function(t){return new Ue({shape:[null,t]})});this.stateful&&this.resetStates()},r.prototype.resetStates=function(e,n){var r=this;void 0===n&&(n=!1),(0,t.tidy)(function(){if(!r.stateful)throw new l("Cannot call resetStates() on an RNN Layer that is not stateful.");var i=r.inputSpec[0].shape[0];if(null==i)throw new h("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==r.states_)Array.isArray(r.cell.stateSize)?r.states_=r.cell.stateSize.map(function(e){return(0,t.zeros)([i,e])}):r.states_=[(0,t.zeros)([i,r.cell.stateSize])];else if(null==e)(0,t.dispose)(r.states_),null!=r.keptStates&&((0,t.dispose)(r.keptStates),r.keptStates=[]),Array.isArray(r.cell.stateSize)?r.states_=r.cell.stateSize.map(function(e){return(0,t.zeros)([i,e])}):r.states_[0]=(0,t.zeros)([i,r.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==r.states_.length)throw new h("Layer "+r.name+" expects "+r.states_.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);!0===n?r.keptStates.push(r.states_.slice()):(0,t.dispose)(r.states_);for(var a=0;a<r.states_.length;++a){var s=e[a],o=Array.isArray(r.cell.stateSize)?r.cell.stateSize[a]:r.cell.stateSize,u=[i,o];if(!t.util.arraysEqual(s.shape,u))throw new h("State "+a+" is incompatible with layer "+r.name+": expected shape="+u+", received shape="+s.shape);r.states_[a]=s}}r.states_=r.states_.map(function(e){return(0,t.keep)(e.clone())})})},r.prototype.apply=function(t,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=ts(t,r,i,this.numConstants);t=a.inputs,r=a.initialState,i=a.constants;var s=[],o=[];if(null!=r){n.initialState=r,s=s.concat(r),this.stateSpec=[];for(var u=0,l=r;u<l.length;u++){var c=l[u];this.stateSpec.push(new Ue({shape:c.shape}))}o=o.concat(this.stateSpec)}if(null!=i&&(n.constants=i,s=s.concat(i),this.numConstants=i.length),s[0]instanceof Ve){var h=[t].concat(s),p=this.inputSpec.concat(o),f=this.inputSpec;this.inputSpec=p;var d=e.prototype.apply.call(this,h,n);return this.inputSpec=f,d}return e.prototype.apply.call(this,t,n)},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var t=null==n?null:n.mask,i=null==n?null:n.training,a=null==n?null:n.initialState;e=Re(e),null==a&&(a=r.stateful?r.states_:r.getInitialState(e));var s=Array.isArray(r.cell.stateSize)?r.cell.stateSize.length:1;if(a.length!==s)throw new h("RNN Layer has "+s+" state(s) but was passed "+a.length+" initial state(s).");r.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var o={training:i},u=es(function(t,e){var n=r.cell.call([t].concat(e),o);return[n[0],n.slice(1)]},e,a,r.goBackwards,t,null,r.unroll,r.returnSequences),l=u[0],c=u[1],p=u[2];r.stateful&&r.resetStates(p,i);var f=r.returnSequences?c:l;return r.returnState?[f].concat(p):f})},r.prototype.getInitialState=function(e){var n=this;return(0,t.tidy)(function(){var r=(0,t.zeros)(e.shape);return r=wt(r=(0,t.sum)(r,[1,2])),Array.isArray(n.cell.stateSize)?n.cell.stateSize.map(function(t){return t>1?Tt(r,[1,t]):r}):n.cell.stateSize>1?[Tt(r,[1,n.cell.stateSize])]:[r]})},Object.defineProperty(r.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),r.prototype.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)},r.prototype.getConfig=function(){var t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var n=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:n};var r=e.prototype.getConfig.call(this);return Object.assign(t,r),t},r.fromConfig=function(t,e,n){void 0===n&&(n={});var r=pn(e.cell,n);return new t(Object.assign(e,{cell:r}))},r.className="RNN",r}(Ze);exports.RNN=ns,t.serialization.registerClass(ns);var rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Ze),is=function(e){function r(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,O(n.units,"units"),n.activation=Ni(null==t.activation?n.DEFAULT_ACTIVATION:t.activation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=he(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=he(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=he(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Di(t.kernelRegularizer),n.recurrentRegularizer=Di(t.recurrentRegularizer),n.biasRegularizer=Di(t.biasRegularizer),n.kernelConstraint=J(t.kernelConstraint),n.recurrentConstraint=J(t.recurrentConstraint),n.biasConstraint=J(t.biasConstraint),n.dropout=mt([1,yt([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=mt([1,yt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return n(r,e),r.prototype.build=function(t){t=Fe(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){if(2!==(e=e).length)throw new h("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var i=e[1];e=e[0];var a,s=null!=n.training&&n.training;0<r.dropout&&r.dropout<1&&null==r.dropoutMask&&(r.dropoutMask=hs(function(){return(0,t.onesLike)(e)},r.dropout,s)),0<r.recurrentDropout&&r.recurrentDropout<1&&null==r.recurrentDropoutMask&&(r.recurrentDropoutMask=hs(function(){return(0,t.onesLike)(i)},r.recurrentDropout,s));var o=r.dropoutMask,u=r.recurrentDropoutMask;a=Et(null!=o?(0,t.mul)(e,o):e,r.kernel.read()),null!=r.bias&&(a=Ft(a,r.bias.read())),null!=u&&(i=(0,t.mul)(i,u));var l=(0,t.add)(a,Et(i,r.recurrentKernel.read()));return null!=r.activation&&(l=r.activation.apply(l)),[l,l]})},r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),recurrentInitializer:ce(this.recurrentInitializer),biasInitializer:ce(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),recurrentConstraint:V(this.recurrentConstraint),biasConstraint:V(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="SimpleRNNCell",r}(rs);t.serialization.registerClass(is);var as=function(e){function r(t){return t.cell=new is(t),e.call(this,t)||this}return n(r,e),r.prototype.call=function(n,r){var i=this;return(0,t.tidy)(function(){null!=i.cell.dropoutMask&&((0,t.dispose)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&((0,t.dispose)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==r?null:r.mask,s=null==r?null:r.training,o=null==r?null:r.initialState;return e.prototype.call.call(i,n,{mask:a,training:s,initialState:o})})},Object.defineProperty(r.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),recurrentInitializer:ce(this.recurrentInitializer),biasInitializer:ce(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),recurrentConstraint:V(this.recurrentConstraint),biasConstraint:V(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},r.fromConfig=function(t,e){return new t(e)},r.className="SimpleRNN",r}(ns);t.serialization.registerClass(as);var ss=function(e){function r(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,O(n.units,"units"),n.activation=Ni(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=Ni(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=he(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=he(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=he(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Di(t.kernelRegularizer),n.recurrentRegularizer=Di(t.recurrentRegularizer),n.biasRegularizer=Di(t.biasRegularizer),n.kernelConstraint=J(t.kernelConstraint),n.recurrentConstraint=J(t.recurrentConstraint),n.biasConstraint=J(t.biasConstraint),n.dropout=mt([1,yt([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=mt([1,yt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return n(r,e),r.prototype.build=function(t){var e=(t=Fe(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){if(2!==(e=e).length)throw new h("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var i=null!=n.training&&n.training,a=e[1];e=e[0],0<r.dropout&&r.dropout<1&&null==r.dropoutMask&&(r.dropoutMask=hs(function(){return(0,t.onesLike)(e)},r.dropout,i,3)),0<r.recurrentDropout&&r.recurrentDropout<1&&null==r.recurrentDropoutMask&&(r.recurrentDropoutMask=hs(function(){return(0,t.onesLike)(a)},r.recurrentDropout,i,3));var s,o,u,l=r.dropoutMask,c=r.recurrentDropoutMask;0<r.dropout&&r.dropout<1&&(e=(0,t.mul)(e,l[0]));var p=Et(e,r.kernel.read());r.useBias&&(p=Ft(p,r.bias.read())),0<r.recurrentDropout&&r.recurrentDropout<1&&(a=(0,t.mul)(a,c[0]));var f=r.recurrentKernel.read(),d=(0,t.split)(f,[2*r.units,r.units],f.rank-1),g=d[0],m=d[1],y=Et(a,g),v=(0,t.split)(p,3,p.rank-1),b=v[0],w=v[1],z=v[2],k=(0,t.split)(y,2,y.rank-1),S=k[0],N=k[1];s=r.recurrentActivation.apply((0,t.add)(b,S)),o=r.recurrentActivation.apply((0,t.add)(w,N));var C=Et((0,t.mul)(o,a),m);u=r.activation.apply((0,t.add)(z,C));var A=(0,t.add)((0,t.mul)(s,a),(0,t.mul)((0,t.add)(1,(0,t.neg)(s)),u));return[A,A]})},r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),recurrentActivation:ki(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),recurrentInitializer:ce(this.recurrentInitializer),biasInitializer:ce(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),recurrentConstraint:V(this.recurrentConstraint),biasConstraint:V(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="GRUCell",r}(rs);t.serialization.registerClass(ss);var os=function(e){function r(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new ss(t),e.call(this,t)||this}return n(r,e),r.prototype.call=function(n,r){var i=this;return(0,t.tidy)(function(){null!=i.cell.dropoutMask&&((0,t.dispose)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&((0,t.dispose)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==r?null:r.mask,s=null==r?null:r.training,o=null==r?null:r.initialState;return e.prototype.call.call(i,n,{mask:a,training:s,initialState:o})})},Object.defineProperty(r.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),recurrentActivation:ki(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),recurrentInitializer:ce(this.recurrentInitializer),biasInitializer:ce(this.biasInitializer),kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),recurrentConstraint:V(this.recurrentConstraint),biasConstraint:V(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},r.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},r.className="GRU",r}(ns);t.serialization.registerClass(os);var us=function(e){function r(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,O(n.units,"units"),n.activation=Ni(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=Ni(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=he(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=he(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=he(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=t.unitForgetBias,n.kernelRegularizer=Di(t.kernelRegularizer),n.recurrentRegularizer=Di(t.recurrentRegularizer),n.biasRegularizer=Di(t.biasRegularizer),n.kernelConstraint=J(t.kernelConstraint),n.recurrentConstraint=J(t.recurrentConstraint),n.biasConstraint=J(t.biasConstraint),n.dropout=mt([1,yt([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=mt([1,yt([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return n(r,e),r.prototype.build=function(t){var e,r,i=(t=Fe(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[i,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,s=this.units;r=new((e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.apply=function(t,e){var n=a.apply([s]),r=(new Zt).apply([s]),i=a.apply([2*s]);return xt(xt(n,r),i)},e}(Jt)).className="CustomInit",e)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var i=null!=n.training&&n.training;if(3!==(e=e).length)throw new h("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var a=e[1],s=e[2];e=e[0],0<r.dropout&&r.dropout<1&&null==r.dropoutMask&&(r.dropoutMask=hs(function(){return(0,t.onesLike)(e)},r.dropout,i,4)),0<r.recurrentDropout&&r.recurrentDropout<1&&null==r.recurrentDropoutMask&&(r.recurrentDropoutMask=hs(function(){return(0,t.onesLike)(a)},r.recurrentDropout,i,4));var o,u,l,c,p=r.dropoutMask,f=r.recurrentDropoutMask;0<r.dropout&&r.dropout<1&&(e=(0,t.mul)(e,p[0]));var d=Et(e,r.kernel.read());0<r.recurrentDropout&&r.recurrentDropout<1&&(a=(0,t.mul)(a,f[0])),d=(0,t.add)(d,Et(a,r.recurrentKernel.read())),r.useBias&&(d=Ft(d,r.bias.read()));var g=(0,t.split)(d,4,d.rank-1),m=g[0],y=g[1],v=g[2],b=g[3];o=r.recurrentActivation.apply(m),u=r.recurrentActivation.apply(y),l=(0,t.add)((0,t.mul)(u,s),(0,t.mul)(o,r.activation.apply(v))),c=r.recurrentActivation.apply(b);var w=(0,t.mul)(c,r.activation.apply(l));return[w,w,l]})},r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),recurrentActivation:ki(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),recurrentInitializer:ce(this.recurrentInitializer),biasInitializer:ce(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),recurrentConstraint:V(this.recurrentConstraint),biasConstraint:V(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.className="LSTMCell",r}(rs);t.serialization.registerClass(us);var ls=function(e){function r(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new us(t),e.call(this,t)||this}return n(r,e),r.prototype.call=function(n,r){var i=this;return(0,t.tidy)(function(){null!=i.cell.dropoutMask&&((0,t.dispose)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&((0,t.dispose)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==r?null:r.mask,s=null==r?null:r.training,o=null==r?null:r.initialState;return e.prototype.call.call(i,n,{mask:a,training:s,initialState:o})})},Object.defineProperty(r.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),r.prototype.getConfig=function(){var t={units:this.units,activation:ki(this.activation),recurrentActivation:ki(this.recurrentActivation),useBias:this.useBias,kernelInitializer:ce(this.kernelInitializer),recurrentInitializer:ce(this.recurrentInitializer),biasInitializer:ce(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ei(this.kernelRegularizer),recurrentRegularizer:Ei(this.recurrentRegularizer),biasRegularizer:Ei(this.biasRegularizer),activityRegularizer:Ei(this.activityRegularizer),kernelConstraint:V(this.kernelConstraint),recurrentConstraint:V(this.recurrentConstraint),biasConstraint:V(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},r.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},r.className="LSTM",r}(ns);t.serialization.registerClass(ls);var cs=function(e){function r(t){var n=e.call(this,t)||this;return n.cells=t.cells,n}return n(r,e),Object.defineProperty(r.prototype,"stateSize",{get:function(){for(var t=[],e=0,n=this.cells.slice().reverse();e<n.length;e++){var r=n[e];Array.isArray(r.stateSize)?t.push.apply(t,r.stateSize):t.push(r.stateSize)}return t},enumerable:!0,configurable:!0}),r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){for(var t=(e=e).slice(1),i=[],a=0,s=r.cells.slice().reverse();a<s.length;a++){var o=s[a];Array.isArray(o.stateSize)?i.push(t.splice(0,o.stateSize.length)):i.push(t.splice(0,1))}i.reverse();for(var u,l=[],c=0;c<r.cells.length;++c)o=r.cells[c],t=i[c],u=0===c?[e[0]].concat(t):[u[0]].concat(t),u=o.call(u,n),l.push(u.slice(1));t=[];for(var h=0,p=l.slice().reverse();h<p.length;h++){var f=p[h];t.push.apply(t,f)}return[u[0]].concat(t)})},r.prototype.build=function(t){var e;Oe(t)&&(t=t[0]),t=t,this.cells.forEach(function(n,r){ot("RNNCell_"+r,function(){n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0},r.prototype.getConfig=function(){for(var t=[],n=0,r=this.cells;n<r.length;n++){var i=r[n];t.push({className:i.getClassName(),config:i.getConfig()})}var a={cells:t},s=e.prototype.getConfig.call(this);return Object.assign(a,s),a},r.fromConfig=function(t,e,n){void 0===n&&(n={});for(var r=[],i=0,a=e.cells;i<a.length;i++){var s=a[i];r.push(pn(s,n))}return new t({cells:r})},Object.defineProperty(r.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.trainableWeights)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,s=this.cells;a<s.length;a++)r=s[a],i.push.apply(i,r.trainableWeights);return i.concat(t)}return t},enumerable:!0,configurable:!0}),r.prototype.getWeights=function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.weights)}return je(t)},r.prototype.setWeights=function(t){for(var e=[],n=0,r=this.cells;n<r.length;n++)for(var i=r[n],a=i.weights.length,s=t.splice(a),o=0;o<i.weights.length;++o)e.push([i.weights[o],s[o]]);We(e)},r.className="StackedRNNCells",r}(rs);function hs(e,n,r,i){function a(){return Bt(e(),n)}if(void 0===r&&(r=null),void 0===i&&(i=1),i>1){for(var s=[],o=0;o<i;o++)s.push(jt(a,e,r));return s.map(function(e){return(0,t.keep)(e.clone())})}return(0,t.keep)(jt(a,e,r).clone())}t.serialization.registerClass(cs);var ps=function(t){function e(e){var n=t.call(this,e)||this;return n.layer=e.layer,n}return n(e,t),e.prototype.build=function(t){this.built=!0},Object.defineProperty(e.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(t){null!=this.layer&&(this.layer.trainable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.layer.getWeights()},e.prototype.setWeights=function(t){this.layer.setWeights(t)},e.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.prototype.setFastWeightInitDuringBuild=function(e){t.prototype.setFastWeightInitDuringBuild.call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)},e.fromConfig=function(t,e,n){void 0===n&&(n={});var r=pn(e.layer,n);delete e.layer;var i={layer:r};return Object.assign(i,e),new t(i)},e}(Ze),fs=function(e){function r(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n}return n(r,e),r.prototype.build=function(t){if((t=Fe(t)).length<3)throw new h("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),e.prototype.build.call(this,t)},r.prototype.computeOutputShape=function(t){var e=[(t=Fe(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e),r=t[1];return[n[0],r].concat(n.slice(1))},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){return es(function(t,e){return[Re(r.layer.call(t,n)),[]]},e=Re(e),[],!1,null,null,!1,!0)[1]})},r.className="TimeDistributed",r}(ps);function ds(t){L(tt,"BidirectionalMergeMode",t)}t.serialization.registerClass(fs);var gs="concat",ms=function(e){function r(t){var n=e.call(this,t)||this,r=t.layer.getConfig(),i={};i.className=t.layer.getClassName(),i.config=r,n.forwardLayer=pn(i),r.goBackwards=!0!==r.goBackwards;var a={};if(a.className=t.layer.getClassName(),a.config=r,n.backwardLayer=pn(a),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,n.mergeMode=void 0===t.mergeMode?gs:t.mergeMode,ds(n.mergeMode),t.weights)throw new p("weights support is not implemented for Bidirectional layer yet.");return n._stateful=t.layer.stateful,n.returnSequences=t.layer.returnSequences,n.returnState=t.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=t.layer.inputSpec,n.numConstants=null,n}return n(r,e),Object.defineProperty(r.prototype,"trainable",{get:function(){return this._trainable},set:function(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)},enumerable:!0,configurable:!0}),r.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},r.prototype.setWeights=function(t){var e=t.length,n=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,n)),this.backwardLayer.setWeights(t.slice(n))},r.prototype.computeOutputShape=function(t){var e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):v(n)},r.prototype.apply=function(t,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=ts(t,r,i,this.numConstants);if(t=a.inputs,r=a.initialState,i=a.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(null==r||0===r.length)&&null==i)return e.prototype.apply.call(this,t,n);var s=[],o=[];if(null!=r){var u=r.length;if(u%2>0)throw new h("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,s.push.apply(s,r);var l=r.map(function(t){return new Ue({shape:t.shape})});this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),o.push.apply(o,l)}if(null!=i)throw new p("Support for constants in Bidirectional layers is not implemented yet.");for(var c=s[0]instanceof Ve,f=0,d=s;f<d.length;f++)if(d[f]instanceof Ve!==c)throw new h("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var g=[t].concat(s),m=this.inputSpec.concat(o),y=this.inputSpec;this.inputSpec=m;var v=e.prototype.apply.call(this,g,n);return this.inputSpec=y,v}return e.prototype.apply.call(this,t,n)},r.prototype.call=function(e,n){var r=this;return(0,t.tidy)(function(){var i,a,s,o,u=n.initialState;if(null==u)i=r.forwardLayer.call(e,n),a=r.backwardLayer.call(e,n);else{var l=u.slice(0,u.length/2),c=u.slice(u.length/2);i=r.forwardLayer.call(e,Object.assign(n,{initialState:l})),a=r.backwardLayer.call(e,Object.assign(n,{initialState:c}))}return r.returnState&&(Array.isArray(i)&&(s=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),r.returnSequences&&(a=(0,t.reverse)(a,1)),"concat"===r.mergeMode?o=It([i,a]):"sum"===r.mergeMode?o=(0,t.add)(i,a):"ave"===r.mergeMode?o=(0,t.mul)(.5,(0,t.add)(i,a)):"mul"===r.mergeMode?o=(0,t.mul)(i,a):null==r.mergeMode&&(o=[i,a]),r.returnState?null==r.mergeMode?o.concat(s):[o].concat(s):o})},r.prototype.resetStates=function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},r.prototype.build=function(t){var e=this;ot(this.forwardLayer.name,function(){e.forwardLayer.build(t)}),ot(this.backwardLayer.name,function(){e.backwardLayer.build(t)}),this.built=!0},r.prototype.computeMask=function(t,e){var n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map(function(t){return null});return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n},Object.defineProperty(r.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),r.prototype.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)},r.prototype.getConfig=function(){var t={mergeMode:this.mergeMode},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},r.fromConfig=function(t,e){var n=pn(e.layer);if(delete e.layer,null!=e.numConstants)throw new p("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=e;return r.layer=n,new t(r)},r.className="Bidirectional",r}(ps);function ys(t){return new $e(t)}function vs(t){return new Mi(t)}function bs(t){return new Ri(t)}function ws(t){return new Fi(t)}function zs(t){return new _i(t)}function ks(t){return new Pi(t)}function Ss(t){return new Bi(t)}function Ns(t){return new ea(t)}function Cs(t){return new Yi(t)}function As(t){return new $i(t)}function Is(t){return new Xi(t)}function xs(t){return new ta(t)}function Ts(t){return new na(t)}function Ls(t){return new ra(t)}function Es(t){return new aa(t)}function Os(t){return new ca(t)}function Ds(t){return new ua(t)}function Rs(t){return new sa(t)}function Fs(t){return new oa(t)}function _s(t){return new la(t)}function Ms(t){return new ha(t)}function Bs(t){return new pa(t)}function Ps(t){return new fa(t)}function js(t){return new ga(t)}function Ws(t){return new ya(t)}function Us(t){return new ba(t)}function Vs(t){return new ka(t)}function qs(t){return new wa(t)}function Js(t){return new za(t)}function Hs(t){return new va(t)}function Zs(t){return new Ca(t)}function Ks(t){return new Da(t)}function Gs(t){return new Ra(t)}function Ys(t){return new _a(t)}function Xs(t){return new Wa(t)}function $s(t){return Xs(t)}function Qs(t){return Xs(t)}function to(t){return new qa(t)}function eo(t){return to(t)}function no(t){return to(t)}function ro(t){return new Za(t)}function io(t){return ro(t)}function ao(t){return ro(t)}function so(t){return new Ga(t)}function oo(t){return new $a(t)}function uo(t){return new Ya(t)}function lo(t){return new Qa(t)}function co(t){return new ja(t)}function ho(t){return new Va(t)}function po(t){return new Ha(t)}function fo(t){return new os(t)}function go(t){return new ss(t)}function mo(t){return new ls(t)}function yo(t){return new us(t)}function vo(t){return new as(t)}function bo(t){return new is(t)}function wo(t){return new ns(t)}function zo(t){return new cs(t)}function ko(t){return new ms(t)}function So(t){return new fs(t)}t.serialization.registerClass(ms);var No=uo,Co=lo,Ao=co,Io=ho;function xo(t){return new Aa(t)}function To(t){return new Ia(t)}function Lo(t){return new xa(t)}function Eo(t){return new da(t)}var Oo=Object.freeze({inputLayer:ys,elu:vs,reLU:bs,leakyReLU:ws,prelu:zs,softmax:ks,thresholdedReLU:Ss,conv1d:Ns,conv2d:Cs,conv2dTranspose:As,conv3d:Is,separableConv2d:xs,cropping2D:Ts,upSampling2d:Ls,depthwiseConv2d:Es,activation:Os,dense:Ds,dropout:Rs,spatialDropout1d:Fs,flatten:_s,repeatVector:Ms,reshape:Bs,permute:Ps,embedding:js,add:Ws,average:Us,concatenate:Vs,maximum:qs,minimum:Js,multiply:Hs,dot:Zs,batchNormalization:Ks,layerNormalization:Gs,zeroPadding2d:Ys,averagePooling1d:Xs,avgPool1d:$s,avgPooling1d:Qs,averagePooling2d:to,avgPool2d:eo,avgPooling2d:no,averagePooling3d:ro,avgPool3d:io,avgPooling3d:ao,globalAveragePooling1d:so,globalAveragePooling2d:oo,globalMaxPooling1d:uo,globalMaxPooling2d:lo,maxPooling1d:co,maxPooling2d:ho,maxPooling3d:po,gru:fo,gruCell:go,lstm:mo,lstmCell:yo,simpleRNN:vo,simpleRNNCell:bo,rnn:wo,stackedRNNCells:zo,bidirectional:ko,timeDistributed:So,globalMaxPool1d:No,globalMaxPool2d:Co,maxPool1d:Ao,maxPool2d:Io,Layer:Ze,RNN:ns,RNNCell:rs,input:oi,gaussianNoise:xo,gaussianDropout:To,alphaDropout:Lo,masking:Eo});function Do(t,e){return En(t,e)}function Ro(t,e){return Bn(t,e)}function Fo(t,e){return Pn(t,e)}function _o(t,e){return On(t,e)}function Mo(t,e){return Hn(t,e)}function Bo(t,e){return _n(t,e)}function Po(t,e){return Mn(t,e)}function jo(t,e){return xn(t,e)}function Wo(t,e){return gn(t,e)}function Uo(t,e){return mn(t,e)}function Vo(t,e){return mn(t,e)}function qo(t,e){return mn(t,e)}function Jo(t,e){return dn(t,e)}function Ho(t,e){return dn(t,e)}function Zo(t,e){return dn(t,e)}exports.layers=Oo;var Ko=Object.freeze({binaryAccuracy:Do,binaryCrossentropy:Ro,sparseCategoricalAccuracy:Fo,categoricalAccuracy:_o,categoricalCrossentropy:Mo,precision:Bo,recall:Po,cosineProximity:jo,meanAbsoluteError:Wo,meanAbsolutePercentageError:Uo,MAPE:Vo,mape:qo,meanSquaredError:Jo,MSE:Ho,mse:Zo}),Go=Object.freeze({modelFromJSON:Qr});function Yo(t){return new Ii(t)}function Xo(t){return xi(t)}function $o(t){return Ti(t)}exports.models=Go,exports.metrics=Ko;var Qo=Object.freeze({l1l2:Yo,l1:Xo,l2:$o}),tu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e}return n(e,t),e.prototype.setModel=function(t){if(!(t instanceof $r))throw new Error("model must be a LayersModel, not some other Container");this.model=t},e}(rn);function eu(t,e){return t<e}function nu(t,e){return t>e}exports.Callback=tu,exports.regularizers=Qo;var ru=function(t){function e(e){var n=t.call(this)||this;if(null==e&&(e={}),e.restoreBestWeights)throw new p("restoreBestWeights = True is not implemented in EarlyStopping yet.");return n.monitor=e.monitor||"val_loss",n.minDelta=Math.abs(e.minDelta||0),n.patience=e.patience||0,n.verbose=e.verbose||0,n.mode=e.mode||"auto",n.baseline=e.baseline,-1===["auto","min","max"].indexOf(n.mode)&&(console.warn("EarlyStopping mode '"+n.mode+"' is invalid. Falling back to mode 'auto'."),n.mode="auto"),"min"===n.mode?n.monitorFunc=eu:"max"===n.mode?n.monitorFunc=nu:-1!==n.monitor.indexOf("acc")?n.monitorFunc=nu:n.monitorFunc=eu,n.monitorFunc===eu&&(n.minDelta*=-1),n}return n(e,t),e.prototype.onTrainBegin=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===eu?1/0:-1/0,[2]})})},e.prototype.onEpochEnd=function(t,e){return a(this,void 0,void 0,function(){var n;return s(this,function(r){switch(r.label){case 0:return[4,tn(e)];case 1:return r.sent(),null==(n=this.getMonitorValue(e))?[2]:(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)),[2])}})})},e.prototype.onTrainEnd=function(t){return a(this,void 0,void 0,function(){return s(this,function(t){return this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping."),[2]})})},e.prototype.getMonitorValue=function(t){null==t&&(t={});var e=t[this.monitor];return null==e&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(t)),e},e}(tu);function iu(t){return new ru(t)}exports.EarlyStopping=ru;var au={earlyStopping:iu};exports.callbacks=au;
},{"@tensorflow/tfjs-core":"PqBP"}],"ewAU":[function(require,module,exports) {
var global = arguments[3];
var Buffer = require("buffer").Buffer;
var t=arguments[3],e=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.URLDataSource=exports.TextLineDataset=exports.FileDataSource=exports.Dataset=exports.CSVDataset=void 0,exports.array=et,exports.csv=Tt,exports.func=kt,exports.generator=Ft,exports.microphone=Dt,exports.version_data=void 0,exports.webcam=Nt,exports.zip=nt;var n=require("@tensorflow/tfjs-core"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}a((r=r.apply(t,e||[])).next())})}function s(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var u="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var c=a(function(t){!function(t,e,n){function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function i(t,e){var n=new function(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),i=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:this.alea=i}(0,t)}),h=a(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function i(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:this.xor128=i}(0,t)}),l=a(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:this.xorwow=i}(0,t)}),f=a(function(t){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&(i.x&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:this.xorshift7=i}(0,t)}),p=a(function(t){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,s,u=[],a=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,a=Math.max(a,e.length)),i=0,o=-32;o<a;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=u[127&o]^=r+s)?i+1:0);for(i>=128&&(u[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=u[i+34&127],n=u[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[i]=r^n;t.w=s,t.X=u,t.i=i}(e,t)}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&(i.X&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:this.xor4096=i}(0,t)}),d=a(function(t){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&r(i,n),o.state=function(){return r(n,{})}),o}e&&e.exports?e.exports=i:this.tychei=i}(0,t)}),v=a(function(t){!function(e,n){var r,i=this,o=256,s=6,u="random",a=n.pow(o,s),c=n.pow(2,52),h=2*c,l=o-1;function f(t,f,m){var y=[],w=d(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==o?e:e+"\0"}((f=1==f?{entropy:!0}:f||{}).entropy?[t,v(e)]:null==t?function(){try{var t;return r&&(t=r.randomBytes)?t=t(o):(t=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(t)),v(t)}catch(t){var n=i.navigator,s=n&&n.plugins;return[+new Date,i,s,i.screen,v(e)]}}():t,3),y),b=new function(t){var e,n=t.length,r=this,i=0,s=r.i=r.j=0,u=r.S=[];for(n||(t=[n++]);i<o;)u[i]=i++;for(i=0;i<o;i++)u[i]=u[s=l&s+t[i%n]+(e=u[i])],u[s]=e;(r.g=function(t){for(var e,n=0,i=r.i,s=r.j,u=r.S;t--;)e=u[i=l&i+1],n=n*o+u[l&(u[i]=u[s=l&s+e])+(u[s]=e)];return r.i=i,r.j=s,n})(o)}(y),g=function(){for(var t=b.g(s),e=a,n=0;t<c;)t=(t+n)*o,e*=o,n=b.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return g.int32=function(){return 0|b.g(4)},g.quick=function(){return b.g(4)/4294967296},g.double=g,d(v(b.S),e),(f.pass||m||function(t,e,r,i){return i&&(i.S&&p(i,b),t.state=function(){return p(b,{})}),r?(n[u]=t,e):t})(g,w,"global"in f?f.global:this==n,f.state)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function d(t,e){for(var n,r=t+"",i=0;i<r.length;)e[l&i]=l&(n^=19*e[l&i])+r.charCodeAt(i++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(n["seed"+u]=f,d(n.random(),e),t.exports){t.exports=f;try{r=require("crypto")}catch(t){}}}([],Math)});v.alea=c,v.xor128=h,v.xorwow=l,v.xorshift7=f,v.xor4096=p,v.tychei=d;var m=v,y=m.alea;function w(t,e){return b(t,e)}function b(t,e,n,r){if(void 0===n&&(n=new Map),void 0===r&&(r=new Set),null==t)return null;if(r.has(t))throw new Error("Circular references are not supported.");if(n.has(t))return n.get(t);var i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(E(t)){var o=Array.isArray(t)?[]:{};for(var s in r.add(t),t){var u=b(t[s],e,n,r);o[s]=u}return r.delete(t),o}throw new Error("Can't recurse into non-iterable type: "+t)}return n.set(t,i.value),i.value}function g(t,e){return void 0===e&&(e=C),x(t,e)}function x(t,e,n){void 0===n&&(n=new Set);var r=t[0];if(n.has(r))throw new Error("Circular references are not supported.");var i=e(t);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(E(r)){var o=Array.isArray(r)?[]:{};n.add(r);var s=function(r){var i=x(t.map(function(t){return t[r]}),e,n);o[r]=i};for(var u in r)s(u);return n.delete(r),o}throw new Error("Can't recurse into non-iterable type: "+r)}return i.value}function C(t){return null===t?null:E(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function z(t,e){return o(this,void 0,void 0,function(){var n,r,i,o,u,a;return s(this,function(s){switch(s.label){case 0:n=new Map,b(t,e,n),r=0,i=Array.from(n.keys()),s.label=1;case 1:return r<i.length?(o=i[r],(u=n.get(o))instanceof Promise?[4,u]:[3,3]):[3,4];case 2:a=s.sent(),n.set(o,a),s.label=3;case 3:return r++,[3,1];case 4:return[2,b(t,e,n)]}})})}function E(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"==typeof t&&!(t instanceof n.Tensor))}function S(t){return null==t||A(t)||Array.isArray(t)||"object"==typeof t&&t instanceof n.Tensor||n.util.isTypedArray(t)}function A(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function R(t){return w(t,T)}function T(t){return t instanceof n.Tensor?{value:t.clone(),recurse:!1}:E(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}var k=function(){function t(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return t.prototype.wrap=function(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity},t.prototype.get=function(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]},t.prototype.set=function(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e},t.prototype.length=function(){var t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t},t.prototype.isFull=function(){return this.length()===this.capacity},t.prototype.isEmpty=function(){return 0===this.length()},t.prototype.push=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)},t.prototype.pushAll=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];this.push(r)}},t.prototype.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var t=this.get(this.end);return this.set(this.end,void 0),t},t.prototype.unshift=function(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)},t.prototype.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t},t.prototype.shuffleExcise=function(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n},t}(),F=function(t){function e(){return t.call(this,e.INITIAL_CAPACITY)||this}return i(e,t),e.prototype.isFull=function(){return!1},e.prototype.push=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.push.call(this,e)},e.prototype.unshift=function(e){t.prototype.isFull.call(this)&&this.expand(),t.prototype.unshift.call(this,e)},e.prototype.expand=function(){for(var t=2*this.capacity,e=new Array(t),n=this.length(),r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},e.INITIAL_CAPACITY=32,e}(k);function N(t){return new L(t)}function D(t){return new _(t)}function I(t,e){return new Z(t,e)}function O(t,e){return void 0===e&&(e=M.FAIL),new J(t,e)}var M,j=function(){function t(){}return t.prototype.toArray=function(){return o(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return t=[],[4,this.next()];case 1:e=n.sent(),n.label=2;case 2:return e.done?[3,4]:(t.push(e.value),[4,this.next()]);case 3:return e=n.sent(),[3,2];case 4:return[2,t]}})})},t.prototype.toArrayForTest=function(){return o(this,void 0,void 0,function(){var t,e,n;return s(this,function(r){switch(r.label){case 0:return t=this.prefetch(100),e=[],[4,t.next()];case 1:n=r.sent(),r.label=2;case 2:return n.done?[3,4]:(e.push(n.value),[4,t.next()]);case 3:return n=r.sent(),[3,2];case 4:return[2,e]}})})},t.prototype.resolveFully=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.next()];case 1:t=e.sent(),e.label=2;case 2:return t.done?[3,4]:[4,this.next()];case 3:return t=e.sent(),[3,2];case 4:return[2]}})})},t.prototype.resolveWhile=function(t){return o(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return[4,this.next()];case 1:e=r.sent(),n=t(e.value),r.label=2;case 2:return e.done||!n?[3,4]:[4,this.next()];case 3:return e=r.sent(),n=t(e.value),[3,2];case 4:return[2]}})})},t.prototype.handleErrors=function(t){return new U(this,t)},t.prototype.filter=function(t){return new W(this,t)},t.prototype.map=function(t){return new V(this,t)},t.prototype.mapAsync=function(t){return new Q(this,t)},t.prototype.serialMapAsync=function(t){return new Q(this,t).serial()},t.prototype.flatmap=function(t){return new G(this,t)},t.prototype.forEachAsync=function(t){return o(this,void 0,void 0,function(){return s(this,function(e){return[2,this.map(t).resolveFully()]})})},t.prototype.serialForEach=function(t){return o(this,void 0,void 0,function(){return s(this,function(e){return[2,this.serialMapAsync(t).resolveWhile(function(t){return!0===t})]})})},t.prototype.rowMajorBatch=function(t,e){return void 0===e&&(e=!0),new B(this,t,e)},t.prototype.columnMajorBatch=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=C),this.rowMajorBatch(t,e).map(function(t){return g(t,n)})},t.prototype.concatenate=function(t,e){return new Z(N([this,t]),e)},t.prototype.take=function(t){return t<0||null==t?this:new P(this,t)},t.prototype.skip=function(t){return t<0||null==t?this:new H(this,t)},t.prototype.prefetch=function(t){return new Y(this,t)},t.prototype.shuffle=function(t,e){return new K(this,t,e)},t.prototype.serial=function(){return new q(this)},t}(),L=function(t){function e(e){var n=t.call(this)||this;return n.items=e,n.trav=0,n}return i(e,t),e.prototype.summary=function(){return"Array of "+this.items.length+" items"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){return this.trav>=this.items.length?[2,{value:null,done:!0}]:(t=this.items[this.trav],this.trav++,[2,{value:R(t),done:!1}])})})},e}(j),_=function(t){function e(e){var n=t.call(this)||this;return n.nextFn=e,n}return i(e,t),e.prototype.summary=function(){return"Function call"},e.prototype.next=function(){return o(this,void 0,void 0,function(){return s(this,function(t){try{return[2,this.nextFn()]}catch(t){throw t.message="Error thrown while iterating through a dataset: "+t.message,t}return[2]})})},e}(j),q=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.lastRead=Promise.resolve({value:null,done:!1}),n}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Serial"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return[2,this.upstream.next()]})})},e}(j),H=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Skip"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return this.count++<this.maxCount?[4,this.upstream.next()]:[3,2];case 1:return(t=e.sent()).done?[2,t]:((0,n.dispose)(t.value),[3,0]);case 2:return[2,this.upstream.next()]}})})},e}(j),P=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.maxCount=n,r.count=0,r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Take"},e.prototype.next=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return this.count++>=this.maxCount?[2,{value:null,done:!0}]:[2,this.upstream.next()]})})},e}(j),B=function(t){function e(e,n,r){void 0===r&&(r=!0);var i=t.call(this)||this;return i.upstream=e,i.batchSize=n,i.enableSmallLastBatch=r,i.lastRead=Promise.resolve({value:null,done:!1}),i}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:t=[],n.label=1;case 1:return t.length<this.batchSize?[4,this.upstream.next()]:[3,3];case 2:return(e=n.sent()).done?this.enableSmallLastBatch&&t.length>0?[2,{value:t,done:!1}]:[2,{value:null,done:!0}]:(t.push(e.value),[3,1]);case 3:return[2,{value:t,done:!1}]}})})},e}(j),W=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.predicate=n,r.lastRead=Promise.resolve({value:null,done:!1}),r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Filter"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.upstream.next()];case 1:return(t=e.sent()).done||this.predicate(t.value)?[2,t]:((0,n.dispose)(t.value),[3,0]);case 2:return[2]}})})},e}(j),V=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Map"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t,e,r,i,o,u,a;return s(this,function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((t=s.sent()).done)return[2,{value:null,done:!0}];for(e=n.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),i=n.tensor_util.getTensorsInContainer(r),o=0,u=e;o<u.length;o++)a=u[o],n.tensor_util.isTensorInList(a,i)||a.dispose();return[2,{value:r,done:!1}]}})})},e}(j),U=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.handler=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> handleErrors"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.upstream.next()];case 2:return[2,e.sent()];case 3:return t=e.sent(),this.handler(t)?[3,4]:[2,{value:null,done:!0}];case 4:return[3,0];case 5:return[2]}})})},e}(j),Q=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> AsyncMap"},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t,e,r,i,o,u,a;return s(this,function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:return(t=s.sent()).done?[2,{value:null,done:!0}]:(e=n.tensor_util.getTensorsInContainer(t.value),[4,this.transform(t.value)]);case 2:for(r=s.sent(),i=n.tensor_util.getTensorsInContainer(r),o=0,u=e;o<u.length;o++)a=u[o],n.tensor_util.isTensorInList(a,i)||a.dispose();return[2,{value:r,done:!1}]}})})},e}(j),X=function(t){function e(){var e=t.call(this)||this;return e.outputQueue=new F,e.lastRead=Promise.resolve({value:null,done:!1}),e}return i(e,t),e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return 0!==this.outputQueue.length()?[3,2]:[4,this.pump()];case 1:return t.sent()?[3,0]:[2,{value:null,done:!0}];case 2:return[2,{value:this.outputQueue.shift(),done:!1}]}})})},e}(j),G=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.transform=n,r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Flatmap"},e.prototype.pump=function(){return o(this,void 0,void 0,function(){var t,e,r,i,o,u,a;return s(this,function(s){switch(s.label){case 0:return[4,this.upstream.next()];case 1:if((t=s.sent()).done)return[2,!1];for(e=n.tensor_util.getTensorsInContainer(t.value),r=this.transform(t.value),i=n.tensor_util.getTensorsInContainer(r),this.outputQueue.pushAll(r),o=0,u=e;o<u.length;o++)a=u[o],n.tensor_util.isTensorInList(a,i)||a.dispose();return[2,!0]}})})},e}(X),Z=function(t){function e(e,n){var r=t.call(this)||this;return r.baseErrorHandler=n,r.lastRead=null,r.iterator=null,r.moreIterators=e,r}return i(e,t),e.prototype.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},e.prototype.next=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return this.lastRead=this.readFromChain(this.lastRead),[2,this.lastRead]})})},e.prototype.readFromChain=function(t){return o(this,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return[4,t];case 1:return r.sent(),null!=this.iterator?[3,3]:[4,this.moreIterators.next()];case 2:if((e=r.sent()).done)return[2,{value:null,done:!0}];this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler)),r.label=3;case 3:return[4,this.iterator.next()];case 4:return(n=r.sent()).done?(this.iterator=null,[2,this.readFromChain(t)]):[2,n]}})})},e}(j);!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(M||(M={}));var J=function(t){function e(e,n){void 0===n&&(n=M.FAIL);var r=t.call(this)||this;return r.iterators=e,r.mismatchMode=n,r.count=0,r.currentPromise=null,r}return i(e,t),e.prototype.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},e.prototype.nextState=function(t){return o(this,void 0,void 0,function(){function e(t){return t instanceof j?{value:t.next().then(function(t){return n++,t.done&&r++,t.value}),recurse:!1}:{value:null,recurse:!0}}var n,r,i;return s(this,function(o){switch(o.label){case 0:return[4,t];case 1:return o.sent(),n=0,r=0,[4,z(this.iterators,e)];case 2:if(i=o.sent(),n===r)return[2,{value:null,done:!0}];if(r>0)switch(this.mismatchMode){case M.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case M.SHORTEST:return[2,{value:null,done:!0}];case M.LONGEST:}return this.count++,[2,{value:i,done:!1}]}})})},e.prototype.next=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return this.currentPromise=this.nextState(this.currentPromise),[2,this.currentPromise]})})},e}(j),Y=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.bufferSize=n,r.buffer=new k(n),r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Prefetch"},e.prototype.refill=function(){for(;!this.buffer.isFull();){var t=this.upstream.next();this.buffer.push(t)}},e.prototype.next=function(){return this.refill(),this.buffer.shift()},e}(j),K=function(t){function e(e,r,i){var o=t.call(this,e,r)||this;return o.upstream=e,o.windowSize=r,o.upstreamExhausted=!1,o.random=y(i||n.util.now().toString()),o.lastRead=Promise.resolve({value:null,done:!1}),o}return i(e,t),e.prototype.next=function(){return o(this,void 0,void 0,function(){var t=this;return s(this,function(e){return this.lastRead=this.lastRead.then(function(){return t.serialNext()}),[2,this.lastRead]})})},e.prototype.randomInt=function(t){return Math.floor(this.random()*t)},e.prototype.chooseIndex=function(){return this.randomInt(this.buffer.length())},e.prototype.serialNext=function(){return o(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:this.upstreamExhausted||this.refill(),n.label=1;case 1:return this.buffer.isEmpty()?[3,3]:(t=this.chooseIndex(),[4,this.buffer.shuffleExcise(t)]);case 2:return(e=n.sent()).done?(this.upstreamExhausted=!0,[3,1]):(this.refill(),[2,e]);case 3:return[2,{value:null,done:!0}]}})})},e}(Y),$=function(){function t(){this.size=null}return t.prototype.batch=function(t,e){var r=this;void 0===e&&(e=!0);var i=this;return n.util.assert(t>0,function(){return"batchSize needs to be positive, but it is\n      "+t}),tt(function(){return o(r,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,i.iterator()];case 1:return[2,n.sent().columnMajorBatch(t,e,rt)]}})})},this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t))},t.prototype.concatenate=function(t){var e=this,n=this;return tt(function(){return o(e,void 0,void 0,function(){var e,r;return s(this,function(i){switch(i.label){case 0:return[4,n.iterator()];case 1:return r=(e=i.sent()).concatenate,[4,t.iterator()];case 2:return[2,r.apply(e,[i.sent()])]}})})},this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)},t.prototype.filter=function(t){var e=this,r=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,r.iterator()];case 1:return[2,e.sent().filter(function(e){return(0,n.tidy)(function(){return t(e)})})]}})})},this.size===1/0?1/0:null)},t.prototype.forEachAsync=function(t){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.iterator()];case 1:return[2,e.sent().forEachAsync(t)]}})})},t.prototype.forEach=function(t){return o(this,void 0,void 0,function(){return s(this,function(e){return(0,n.deprecationWarn)("dataset.forEach() is deprecated and will be removed. Please use dataset.forEachAsync() instead"),[2,this.forEachAsync(t)]})})},t.prototype.map=function(t){var e=this,r=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,r.iterator()];case 1:return[2,e.sent().map(function(e){return(0,n.tidy)(function(){return t(e)})})]}})})},this.size)},t.prototype.mapAsync=function(t){var e=this,n=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().mapAsync(t)]}})})},this.size)},t.prototype.prefetch=function(t){var e=this;if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var n=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().prefetch(t)]}})})},this.size)},t.prototype.repeat=function(t){var e=this,n=this;return tt(function(){return o(e,void 0,void 0,function(){var e=this;return s(this,function(r){return[2,I(D(function(){return o(e,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return t={},[4,n.iterator()];case 1:return[2,(t.value=e.sent(),t.done=!1,t)]}})})}).take(t))]})})},null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)},t.prototype.skip=function(t){var e=this,n=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().skip(t)]}})})},null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)},t.prototype.shuffle=function(t,e,r){var i=this;if(void 0===r&&(r=!0),null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var u=this,a=y(e||n.util.now().toString());return tt(function(){return o(i,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=a.int32(),r&&(e+=a.int32()),[4,u.iterator()];case 1:return[2,n.sent().shuffle(t,e.toString())]}})})},this.size)},t.prototype.take=function(t){var e=this,n=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,n.iterator()];case 1:return[2,e.sent().take(t)]}})})},null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)},t.prototype.toArray=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArray()]}})})},t.prototype.toArrayForTest=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return[4,this.iterator()];case 1:return[2,t.sent().toArrayForTest()]}})})},t.MAX_BUFFER_SIZE=1e4,t}();function tt(t,e){return void 0===e&&(e=null),new(function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.size=e,t}return i(r,n),r.prototype.iterator=function(){return o(this,void 0,void 0,function(){return s(this,function(e){return[2,t()]})})},r}($))}function et(t){var e=this;return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(e){return[2,N(t)]})})},t.length)}function nt(t){var e,n=this;if(!E(t))throw new Error("The argument to zip() must be an object or array.");if(Array.isArray(t))for(var r=0;r<t.length;r++)e=null==e?t[r].size:Math.min(e,t[r].size);else if(t instanceof Object)for(var i in t)e=null==e?t[i].size:Math.min(e,t[i].size);return tt(function(){return o(n,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,z(t,function(t){if(t instanceof $)return{value:t.iterator(),recurse:!1};if(E(t))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")})];case 1:return[2,O(e.sent(),M.SHORTEST)]}})})},e)}function rt(t){return null===t?null:S(t[0])?{value:it(t),recurse:!1}:{value:null,recurse:!0}}function it(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof n.Tensor?(0,n.stack)(t):(0,n.tensor)(t)}exports.Dataset=$;var ot=function(t){function e(e){var n=t.call(this)||this;return n.input=e,n}return i(e,t),e.prototype.iterator=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,this.input.iterator()];case 1:return t=e.sent(),[2,t.decodeUTF8().split("\n").map(function(t){return t.endsWith("\r")&&(t=t.slice(0,-1)),t})]}})})},e}($),st='"',ut=Symbol("out"),at=Symbol("field"),ct=Symbol("quote"),ht=Symbol("quoteafterquote"),lt=Symbol("quoteinquote"),ft=function(t){function e(e,r){var i=t.call(this)||this;return i.input=e,i.hasHeader=!0,i.fullColumnNames=null,i.columnNamesValidated=!1,i.columnConfigs=null,i.configuredColumnsOnly=!1,i.delimiter=",",i.delimWhitespace=!1,i.base=new ot(e),r||(r={}),i.hasHeader=!1!==r.hasHeader,i.fullColumnNames=r.columnNames,i.columnConfigs=r.columnConfigs,i.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(n.util.assert(null==r.delimiter,function(){return"Delimiter should not be provided when delimWhitespace is true."}),i.delimWhitespace=!0,i.delimiter=" "):i.delimiter=r.delimiter?r.delimiter:",",i}return i(e,t),e.prototype.columnNames=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:t.sent(),t.label=2;case 2:return[2,this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames]}})})},e.prototype.setColumnNames=function(){return o(this,void 0,void 0,function(){var t,e,r,i,o,u,a=this;return s(this,function(s){switch(s.label){case 0:return[4,this.maybeReadHeaderLine()];case 1:if(t=s.sent(),!this.fullColumnNames&&!t)throw new Error("Column names must be provided if there is no header line.");if(this.fullColumnNames&&t&&n.util.assert(t.length===this.fullColumnNames.length,function(){return"The length of provided columnNames ("+a.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}),this.fullColumnNames||(this.fullColumnNames=t),e=this.fullColumnNames.reduce(function(t,e){return t[e]=t[e]+1||1,t},{}),r=Object.keys(e).filter(function(t){return e[t]>1}),n.util.assert(0===r.length,function(){return"Duplicate column names found: "+r.toString()}),this.columnConfigs)for(i=0,o=Object.keys(this.columnConfigs);i<o.length;i++)if(u=o[i],-1===this.fullColumnNames.indexOf(u))throw new Error('The key "'+u+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");return this.columnNamesValidated=!0,[2]}})})},e.prototype.maybeReadHeaderLine=function(){return o(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return this.hasHeader?[4,this.base.iterator()]:[3,3];case 1:return[4,n.sent().next()];case 2:if((t=n.sent()).done)throw new Error("No data was found for CSV parsing.");return e=t.value,[2,this.parseRow(e,!1)];case 3:return[2,null]}})})},e.prototype.iterator=function(){return o(this,void 0,void 0,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return this.columnNamesValidated?[3,2]:[4,this.setColumnNames()];case 1:n.sent(),n.label=2;case 2:return[4,this.base.iterator()];case 3:return t=n.sent(),this.hasHeader&&(t=t.skip(1)),[2,t.map(function(t){return e.makeDataElement(t)})]}})})},e.prototype.makeDataElement=function(t){for(var e=this.parseRow(t),n={},r={},i=0;i<this.fullColumnNames.length;i++){var o=this.fullColumnNames[i],s=this.columnConfigs?this.columnConfigs[o]:null;if(!this.configuredColumnsOnly||s){var u=e[i],a=null;if(""===u)if(s&&void 0!==s.default)a=s.default;else{if(s&&(s.required||s.isLabel))throw new Error("Required column "+o+" is empty in this line: "+t);a=void 0}else{var c=Number(u);if(isNaN(c))a=s&&"bool"===s.dtype?this.getBoolean(u):u;else if(s&&s.dtype)switch(s.dtype){case"float32":a=c;break;case"int32":a=Math.floor(c);break;case"bool":a=this.getBoolean(u);break;default:a=c}else a=c}s&&s.isLabel?r[o]=a:n[o]=a}}return 0===Object.keys(r).length?n:{xs:n,ys:r}},e.prototype.getBoolean=function(t){return"1"===t||"true"===t.toLowerCase()?1:0},e.prototype.parseRow=function(t,e){void 0===e&&(e=!0);for(var n=[],r=0,i=t.length,o=ut,s=0;s<i;s++)switch(o){case ut:switch(t.charAt(s)){case st:r=s+1,o=ct;break;case this.delimiter:if(r=s+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),o=ut;break;default:o=at,r=s}break;case at:switch(t.charAt(s)){case this.delimiter:n.push(t.substring(r,s)),o=ut,r=s+1}break;case ct:switch(t.charAt(s)){case st:o=ht}break;case ht:switch(t.charAt(s)){case this.delimiter:n.push(t.substring(r,s-1)),o=ut,r=s+1;break;case st:o=ct;break;default:o=lt}break;case lt:switch(t.charAt(s)){case st:o=ct}}if(o===ht?n.push(t.substring(r,i-1)):n.push(t.substring(r)),e&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+n);return n},e}($),pt=function(t){function e(e){var n=t.call(this)||this;n.microphoneConfig=e,n.isClosed=!1,n.fftSize=e.fftSize||1024;var r=Math.log2(n.fftSize);if(n.fftSize<0||r<4||r>14||!Number.isInteger(r))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+n.fftSize);if(n.numFrames=e.numFramesPerSpectrogram||43,n.sampleRateHz=e.sampleRateHz,n.columnTruncateLength=e.columnTruncateLength||n.fftSize,n.audioTrackConstraints=e.audioTrackConstraints,n.smoothingTimeConstant=e.smoothingTimeConstant||0,n.includeSpectrogram=!1!==e.includeSpectrogram,n.includeWaveform=!0===e.includeWaveform,!n.includeSpectrogram&&!n.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return n}return i(e,t),e.prototype.summary=function(){return"microphone"},e.create=function(t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){var r;return s(this,function(i){switch(i.label){case 0:if((0,n.env)().get("IS_NODE"))throw new Error("microphone API is only supported in browser environment.");return[4,(r=new e(t)).start()];case 1:return i.sent(),[2,r]}})})},e.prototype.start=function(){return o(this,void 0,void 0,function(){var t,e,n,r;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=this,[4,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})];case 1:return t.stream=i.sent(),[3,3];case 2:throw e=i.sent(),new Error("Error thrown while initializing video stream: "+e.message);case 3:if(!this.stream)throw new Error("Could not obtain audio from microphone.");if(n=window.AudioContext||window.webkitAudioContext,this.audioContext=new n,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate)}else this.sampleRateHz=this.audioContext.sampleRate;return r=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,r.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),[2]}})})},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t,e,n,r,i;return s(this,function(o){switch(o.label){case 0:return this.isClosed?[2,{value:null,done:!0}]:[4,this.getAudioData()];case 1:return n=o.sent(),this.includeSpectrogram&&(r=this.flattenQueue(n.freqDataQueue),t=this.getTensorFromAudioDataArray(r,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(n.timeDataQueue),e=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),[2,{value:{spectrogram:t,waveform:e},done:!1}]}})})},e.prototype.capture=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}})})},e.prototype.getAudioData=function(){return o(this,void 0,void 0,function(){var t,e,n,r=this;return s(this,function(i){return t=[],e=[],n=0,[2,new Promise(function(i){var o=setInterval(function(){r.includeSpectrogram&&(r.analyser.getFloatFrequencyData(r.freqData),r.freqData[0]===-1/0&&i({freqDataQueue:t,timeDataQueue:e}),t.push(r.freqData.slice(0,r.columnTruncateLength))),r.includeWaveform&&(r.analyser.getFloatTimeDomainData(r.timeData),e.push(r.timeData.slice())),++n===r.numFrames&&(clearInterval(o),i({freqDataQueue:t,timeDataQueue:e}))},r.fftSize/r.sampleRateHz*1e3)})]})})},e.prototype.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},e.prototype.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},e.prototype.getSampleRate=function(){return this.sampleRateHz},e.prototype.flattenQueue=function(t){var e=t[0].length,n=new Float32Array(t.length*e);return t.forEach(function(t,r){return n.set(t,r*e)}),n},e.prototype.getTensorFromAudioDataArray=function(t,e){var r=new Float32Array(n.util.sizeFromShape(e));return r.set(t,r.length-t.length),(0,n.tensor)(r,e)},e}(j),dt=function(t){function e(e,r){var i=t.call(this)||this;if(i.webcamVideoElement=e,i.webcamConfig=r,i.isClosed=!0,i.resize=!1,i.needToResize())if(i.resize=!0,i.cropSize=[i.webcamConfig.resizeHeight,i.webcamConfig.resizeWidth],i.cropBoxInd=(0,n.tensor1d)([0],"int32"),i.webcamConfig.centerCrop){var o=1*i.webcamConfig.resizeWidth/i.webcamVideoElement.width,s=1*i.webcamConfig.resizeHeight/i.webcamVideoElement.height,u=(1-o)/2,a=(1-s)/2,c=u+o,h=s+a;i.cropBox=(0,n.tensor2d)([a,u,h,c],[1,4])}else i.cropBox=(0,n.tensor2d)([0,0,1,1],[1,4]);return i}return i(e,t),e.prototype.summary=function(){return"webcam"},e.create=function(t,r){return void 0===r&&(r={}),o(this,void 0,void 0,function(){var i;return s(this,function(o){switch(o.label){case 0:if((0,n.env)().get("IS_NODE"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!r.resizeWidth||!r.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=r.resizeWidth,t.height=r.resizeHeight}return[4,(i=new e(t,r)).start()];case 1:return o.sent(),[2,i]}})})},e.prototype.start=function(){return o(this,void 0,void 0,function(){var t,e,r=this;return s(this,function(i){switch(i.label){case 0:this.webcamConfig.facingMode&&n.util.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,function(){return"Invalid webcam facing mode: "+r.webcamConfig.facingMode+". Please provide 'user' or 'environment'"}),i.label=1;case 1:return i.trys.push([1,3,,4]),t=this,[4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})];case 2:return t.stream=i.sent(),[3,4];case 3:throw(e=i.sent()).message="Error thrown while initializing video stream: "+e.message,e;case 4:if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(t){console.log(t),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,[2,new Promise(function(t){r.webcamVideoElement.onloadedmetadata=function(){t()}})]}})})},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){if(this.isClosed)return[2,{value:null,done:!0}];try{t=n.browser.fromPixels(this.webcamVideoElement)}catch(t){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(t))}if(!this.resize)return[2,{value:t,done:!1}];try{return[2,{value:this.cropAndResizeFrame(t),done:!1}]}catch(t){throw new Error("Error thrown cropping the video: "+t.message)}finally{t.dispose()}return[2]})})},e.prototype.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},e.prototype.cropAndResizeFrame=function(t){var e=this;return(0,n.tidy)(function(){var r,i=t.toFloat().expandDims(0),o=(r=n.image.cropAndResize(i,e.cropBox,e.cropBoxInd,e.cropSize,"bilinear")).shape;return r.reshape(o.slice(1))})},e.prototype.capture=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.next()];case 1:return[2,t.sent().value]}})})},e.prototype.stop=function(){this.stream.getTracks().forEach(function(t){return t.stop()});try{this.webcamVideoElement.srcObject=null}catch(t){console.log(t),this.webcamVideoElement.src=null}this.isClosed=!0},e.prototype.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},e}(j),vt=function(){},mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.split=function(t){return new yt(this,t)},e}(j),yt=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.impl=new wt(e,n),r}return i(e,t),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return[2,this.impl.next()]})})},e}(mt),wt=function(t){function e(e,n){var r=t.call(this)||this;return r.upstream=e,r.separator=n,r.carryover="",r}return i(e,t),e.prototype.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},e.prototype.pump=function(){return o(this,void 0,void 0,function(){var t,e,n,r,i;return s(this,function(o){switch(o.label){case 0:return[4,this.upstream.next()];case 1:if((t=o.sent()).done)return""===this.carryover?[2,!1]:(this.outputQueue.push(this.carryover),this.carryover="",[2,!0]);for((e=t.value.split(this.separator))[0]=this.carryover+e[0],n=0,r=e.slice(0,-1);n<r.length;n++)i=r[n],this.outputQueue.push(i);return this.carryover=e[e.length-1],[2,!0]}})})},e}(X),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.decodeUTF8=function(){return new gt(this)},e}(j),gt=function(t){function e(e){var n=t.call(this)||this;return n.upstream=e,n.impl=new xt(e),n}return i(e,t),e.prototype.summary=function(){return this.impl.summary()},e.prototype.next=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return[2,this.impl.next()]})})},e}(mt),xt=function(t){function r(e){var r=t.call(this)||this;if(r.upstream=e,(0,n.env)().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var i=require("string_decoder").StringDecoder;r.decoder=new i("utf8")}return r}return i(r,t),r.prototype.summary=function(){return this.upstream.summary()+" -> Utf8"},r.prototype.pump=function(){return o(this,void 0,void 0,function(){var t,r,i;return s(this,function(o){switch(o.label){case 0:return[4,this.upstream.next()];case 1:return(t=o.sent()).done?[2,!1]:(r=t.value,i=(0,n.env)().get("IS_BROWSER")?this.decoder.decode(r,{stream:!0}):this.decoder.write(e.from(r.buffer)),this.outputQueue.push(i),[2,!0])}})})},r}(X),Ct=function(t){function e(e,r){void 0===r&&(r={});var i=t.call(this)||this;return i.file=e,i.options=r,n.util.assert(e instanceof Uint8Array||!!(0,n.env)().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."}),i.offset=r.offset||0,i.chunkSize=r.chunkSize||1048576,i}return i(e,t),e.prototype.summary=function(){return"FileChunks "+this.file},e.prototype.next=function(){return o(this,void 0,void 0,function(){var t,e,n=this;return s(this,function(r){switch(r.label){case 0:return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?[2,{value:null,done:!0}]:(t=new Promise(function(t,e){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)t(new Uint8Array(n.file.slice(n.offset,r)));else{var i=new FileReader;i.onload=function(n){var r=i.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return e(new TypeError("FileReader returned unknown type."));t(r)},i.onabort=function(t){return e(new Error("Aborted"))},i.onerror=function(t){return e(new Error(t.type))};var o=n.file.slice(n.offset,r);i.readAsArrayBuffer(o)}n.offset=r}),e={},[4,t]);case 1:return[2,(e.value=r.sent(),e.done=!1,e)]}})})},e}(bt);function zt(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,function(){var r,i,o,u,a;return s(this,function(s){switch(s.label){case 0:return"string"==typeof t?r=t:(r=t.url,i=Et(t)),[4,n.util.fetch(r,i)];case 1:return(o=s.sent()).ok?(a=Uint8Array.bind,[4,o.arrayBuffer()]):[3,3];case 2:return u=new(a.apply(Uint8Array,[void 0,s.sent()])),[2,new Ct(u,e)];case 3:throw new Error(o.statusText)}})})}exports.CSVDataset=ft,exports.TextLineDataset=ot;var Et=function(t){return{method:t.method,headers:t.headers,body:t.body,mode:t.mode,credentials:t.credentials,cache:t.cache,redirect:t.redirect,referrer:t.referrer,integrity:t.integrity}};function St(t){return"string"==typeof t&&"file://"===t.substr(0,7)}var At=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.input=e,r.options=n,r}return i(e,t),e.prototype.iterator=function(){return o(this,void 0,void 0,function(){var t;return s(this,function(e){return St(this.input)&&(0,n.env)().get("IS_NODE")&&(t=require("fs"),this.input=t.readFileSync(this.input.substr(7))),[2,new Ct(this.input,this.options)]})})},e}(vt),Rt=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this)||this;return r.url=e,r.fileOptions=n,r}return i(e,t),e.prototype.iterator=function(){return o(this,void 0,void 0,function(){return s(this,function(t){return St(this.url)?[2,new At(this.url,this.fileOptions).iterator()]:[2,zt(this.url,this.fileOptions)]})})},e}(vt);function Tt(t,e){return void 0===e&&(e={}),new ft(new Rt(t),e)}function kt(t){var e=this,n=D(t);return tt(function(){return o(e,void 0,void 0,function(){return s(this,function(t){return[2,n]})})})}function Ft(t){var e=this;return tt(function(){return o(e,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return e=n.sent(),[2,D(function(){return e.next()})]}})})})}function Nt(t,e){return o(this,void 0,void 0,function(){return s(this,function(n){return[2,dt.create(t,e)]})})}function Dt(t){return o(this,void 0,void 0,function(){return s(this,function(e){return[2,pt.create(t)]})})}exports.URLDataSource=Rt,exports.FileDataSource=At;var It="1.7.4";exports.version_data=It;
},{"@tensorflow/tfjs-core":"PqBP","crypto":"sC8V","string_decoder":"sC8V","fs":"sC8V","buffer":"aMB2"}],"cHV2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,data:!0};exports.version=exports.data=void 0;var r=require("@tensorflow/tfjs-core");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||t in exports&&exports[t]===r[t]||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("@tensorflow/tfjs-layers");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("@tensorflow/tfjs-converter");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=a(require("@tensorflow/tfjs-data"));function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function a(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var f=n?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}exports.data=n;var f="1.7.4",u={"tfjs-core":r.version_core,"tfjs-data":n.version_data,"tfjs-layers":t.version_layers,"tfjs-converter":o.version_converter,tfjs:f};exports.version=u;
},{"@tensorflow/tfjs-core":"PqBP","@tensorflow/tfjs-layers":"KLDv","@tensorflow/tfjs-converter":"rGPK","@tensorflow/tfjs-data":"ewAU"}],"Heqi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOptions=exports.TokenType=exports.Token=exports.TokContext=exports.SourceLocation=exports.Position=exports.Parser=exports.Node=void 0,exports.getLineInfo=N,exports.isIdentifierChar=l,exports.isIdentifierStart=u,exports.isNewLine=b,exports.nonASCIIwhitespace=exports.lineBreakG=exports.lineBreak=exports.keywordTypes=void 0,exports.parse=te,exports.parseExpressionAt=ee,exports.tokTypes=exports.tokContexts=void 0,exports.tokenizer=ie,exports.version=void 0;var t={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},e="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",i={5:e,"5module":e+" export import",6:e+" const class extends export import super"},s=/^in(stanceof)?$/,r="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",a="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",n=new RegExp("["+r+"]"),o=new RegExp("["+r+a+"]");r=a=null;var h=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],p=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function c(t,e){for(var i=65536,s=0;s<e.length;s+=2){if((i+=e[s])>t)return!1;if((i+=e[s+1])>=t)return!0}}function u(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&n.test(String.fromCharCode(t)):!1!==e&&c(t,h)))}function l(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&o.test(String.fromCharCode(t)):!1!==e&&(c(t,h)||c(t,p)))))}var d=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function f(t,e){return new d(t,{beforeExpr:!0,binop:e})}exports.TokenType=d;var m={beforeExpr:!0},x={startsExpr:!0},g={};function v(t,e){return void 0===e&&(e={}),e.keyword=t,g[t]=new d(t,e)}exports.keywordTypes=g;var y={num:new d("num",x),regexp:new d("regexp",x),string:new d("string",x),name:new d("name",x),eof:new d("eof"),bracketL:new d("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new d("]"),braceL:new d("{",{beforeExpr:!0,startsExpr:!0}),braceR:new d("}"),parenL:new d("(",{beforeExpr:!0,startsExpr:!0}),parenR:new d(")"),comma:new d(",",m),semi:new d(";",m),colon:new d(":",m),dot:new d("."),question:new d("?",m),arrow:new d("=>",m),template:new d("template"),invalidTemplate:new d("invalidTemplate"),ellipsis:new d("...",m),backQuote:new d("`",x),dollarBraceL:new d("${",{beforeExpr:!0,startsExpr:!0}),eq:new d("=",{beforeExpr:!0,isAssign:!0}),assign:new d("_=",{beforeExpr:!0,isAssign:!0}),incDec:new d("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new d("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:f("||",1),logicalAND:f("&&",2),bitwiseOR:f("|",3),bitwiseXOR:f("^",4),bitwiseAND:f("&",5),equality:f("==/!=/===/!==",6),relational:f("</>/<=/>=",7),bitShift:f("<</>>/>>>",8),plusMin:new d("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:f("%",10),star:f("*",10),slash:f("/",10),starstar:new d("**",{beforeExpr:!0}),_break:v("break"),_case:v("case",m),_catch:v("catch"),_continue:v("continue"),_debugger:v("debugger"),_default:v("default",m),_do:v("do",{isLoop:!0,beforeExpr:!0}),_else:v("else",m),_finally:v("finally"),_for:v("for",{isLoop:!0}),_function:v("function",x),_if:v("if"),_return:v("return",m),_switch:v("switch"),_throw:v("throw",m),_try:v("try"),_var:v("var"),_const:v("const"),_while:v("while",{isLoop:!0}),_with:v("with"),_new:v("new",{beforeExpr:!0,startsExpr:!0}),_this:v("this",x),_super:v("super",x),_class:v("class",x),_extends:v("extends",m),_export:v("export"),_import:v("import",x),_null:v("null",x),_true:v("true",x),_false:v("false",x),_in:v("in",{beforeExpr:!0,binop:7}),_instanceof:v("instanceof",{beforeExpr:!0,binop:7}),_typeof:v("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:v("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:v("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})};exports.tokTypes=y;var k=/\r\n?|\n|\u2028|\u2029/;exports.lineBreak=k;var _=new RegExp(k.source,"g");function b(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}exports.lineBreakG=_;var S=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/;exports.nonASCIIwhitespace=S;var C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,w=Object.prototype,E=w.hasOwnProperty,A=w.toString;function I(t,e){return E.call(t,e)}var P=Array.isArray||function(t){return"[object Array]"===A.call(t)};function T(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var L=function(t,e){this.line=t,this.column=e};exports.Position=L,L.prototype.offset=function(t){return new L(this.line,this.column+t)};var V=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function N(t,e){for(var i=1,s=0;;){_.lastIndex=s;var r=_.exec(t);if(!(r&&r.index<e))return new L(i,e-s);++i,s=r.index+r[0].length}}exports.SourceLocation=V;var R={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t){var e={};for(var i in R)e[i]=t&&I(t,i)?t[i]:R[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),P(e.onToken)){var s=e.onToken;e.onToken=function(t){return s.push(t)}}return P(e.onComment)&&(e.onComment=O(e,e.onComment)),e}function O(t,e){return function(i,s,r,a,n,o){var h={type:i?"Block":"Line",value:s,start:r,end:a};t.locations&&(h.loc=new V(this,n,o)),t.ranges&&(h.range=[r,a]),e.push(h)}}exports.defaultOptions=R;var M=1,D=2,F=M|D,U=4,q=8,G=16,H=32,j=64,W=128;function z(t,e){return D|(t?U:0)|(e?q:0)}var Q=0,K=1,X=2,Y=3,Z=4,$=5,J=function(e,s,r){this.options=e=B(e),this.sourceFile=e.sourceFile,this.keywords=T(i[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var a="";if(!0!==e.allowReserved){for(var n=e.ecmaVersion;!(a=t[n]);n--);"module"===e.sourceType&&(a+=" await")}this.reservedWords=T(a);var o=(a?a+" ":"")+t.strict;this.reservedWordsStrict=T(o),this.reservedWordsStrictBind=T(o+" "+t.strictBind),this.input=String(s),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(k).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=y.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(M),this.regexpState=null};exports.Parser=J;var tt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};J.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},tt.inFunction.get=function(){return(this.currentVarScope().flags&D)>0},tt.inGenerator.get=function(){return(this.currentVarScope().flags&q)>0},tt.inAsync.get=function(){return(this.currentVarScope().flags&U)>0},tt.allowSuper.get=function(){return(this.currentThisScope().flags&j)>0},tt.allowDirectSuper.get=function(){return(this.currentThisScope().flags&W)>0},tt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},J.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&D)>0},J.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,s=0;s<t.length;s++)i=t[s](i);return i},J.parse=function(t,e){return new this(e,t).parse()},J.parseExpressionAt=function(t,e,i){var s=new this(i,t,e);return s.nextToken(),s.parseExpression()},J.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(J.prototype,tt);var et=J.prototype,it=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function st(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}et.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=it.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,C.lastIndex=t,t+=C.exec(this.input)[0].length,";"===this.input[t]&&t++}},et.eat=function(t){return this.type===t&&(this.next(),!0)},et.isContextual=function(t){return this.type===y.name&&this.value===t&&!this.containsEsc},et.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},et.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},et.canInsertSemicolon=function(){return this.type===y.eof||this.type===y.braceR||k.test(this.input.slice(this.lastTokEnd,this.start))},et.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},et.semicolon=function(){this.eat(y.semi)||this.insertSemicolon()||this.unexpected()},et.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},et.expect=function(t){this.eat(t)||this.unexpected()},et.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},et.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},et.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,s=t.doubleProto;if(!e)return i>=0||s>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),s>=0&&this.raiseRecoverable(s,"Redefinition of __proto__ property")},et.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},et.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var rt=J.prototype;rt.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==y.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var s=0,r=Object.keys(this.undefinedExports);s<r.length;s+=1){var a=r[s];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var at={kind:"loop"},nt={kind:"switch"};rt.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),i=this.pos+e[0].length,r=this.input.charCodeAt(i);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(u(r,!0)){for(var a=i+1;l(this.input.charCodeAt(a),!0);)++a;var n=this.input.slice(i,a);if(!s.test(n))return!0}return!1},rt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!(k.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&l(this.input.charAt(e+8)))},rt.parseStatement=function(t,e,i){var s,r=this.type,a=this.startNode();switch(this.isLet(t)&&(r=y._var,s="let"),r){case y._break:case y._continue:return this.parseBreakContinueStatement(a,r.keyword);case y._debugger:return this.parseDebuggerStatement(a);case y._do:return this.parseDoStatement(a);case y._for:return this.parseForStatement(a);case y._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!t);case y._class:return t&&this.unexpected(),this.parseClass(a,!0);case y._if:return this.parseIfStatement(a);case y._return:return this.parseReturnStatement(a);case y._switch:return this.parseSwitchStatement(a);case y._throw:return this.parseThrowStatement(a);case y._try:return this.parseTryStatement(a);case y._const:case y._var:return s=s||this.value,t&&"var"!==s&&this.unexpected(),this.parseVarStatement(a,s);case y._while:return this.parseWhileStatement(a);case y._with:return this.parseWithStatement(a);case y.braceL:return this.parseBlock(!0,a);case y.semi:return this.parseEmptyStatement(a);case y._export:case y._import:if(this.options.ecmaVersion>10&&r===y._import){C.lastIndex=this.pos;var n=C.exec(this.input),o=this.pos+n[0].length;if(40===this.input.charCodeAt(o))return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===y._import?this.parseImport(a):this.parseExport(a,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!t);var h=this.value,p=this.parseExpression();return r===y.name&&"Identifier"===p.type&&this.eat(y.colon)?this.parseLabeledStatement(a,h,p,t):this.parseExpressionStatement(a,p)}},rt.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(y.semi)||this.insertSemicolon()?t.label=null:this.type!==y.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var s=0;s<this.labels.length;++s){var r=this.labels[s];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(i||"loop"===r.kind))break;if(t.label&&i)break}}return s===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},rt.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},rt.parseDoStatement=function(t){return this.next(),this.labels.push(at),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(y._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(y.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},rt.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(at),this.enterScope(0),this.expect(y.parenL),this.type===y.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===y._var||this.type===y._const||i){var s=this.startNode(),r=i?"let":this.value;return this.next(),this.parseVar(s,!0,r),this.finishNode(s,"VariableDeclaration"),(this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===s.declarations.length?(this.options.ecmaVersion>=9&&(this.type===y._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,s)):(e>-1&&this.unexpected(e),this.parseFor(t,s))}var a=new st,n=this.parseExpression(!0,a);return this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===y._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(n,!1,a),this.checkLVal(n),this.parseForIn(t,n)):(this.checkExpressionErrors(a,!0),e>-1&&this.unexpected(e),this.parseFor(t,n))},rt.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,ht|(i?0:pt),!1,e)},rt.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(y._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},rt.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(y.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},rt.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(y.braceL),this.labels.push(nt),this.enterScope(0);for(var i=!1;this.type!==y.braceR;)if(this.type===y._case||this.type===y._default){var s=this.type===y._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),s?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(y.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},rt.parseThrowStatement=function(t){return this.next(),k.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ot=[];rt.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===y._catch){var e=this.startNode();if(this.next(),this.eat(y.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?H:0),this.checkLVal(e.param,i?Z:X),this.expect(y.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(y._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},rt.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},rt.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(at),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},rt.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},rt.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},rt.parseLabeledStatement=function(t,e,i,s){for(var r=0,a=this.labels;r<a.length;r+=1){a[r].name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var n=this.type.isLoop?"loop":this.type===y._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var h=this.labels[o];if(h.statementStart!==t.start)break;h.statementStart=this.start,h.kind=n}return this.labels.push({name:e,kind:n,statementStart:this.start}),t.body=this.parseStatement(s?-1===s.indexOf("label")?s+"label":s:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},rt.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},rt.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(y.braceL),t&&this.enterScope(0);!this.eat(y.braceR);){var i=this.parseStatement(null);e.body.push(i)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},rt.parseFor=function(t,e){return t.init=e,this.expect(y.semi),t.test=this.type===y.semi?null:this.parseExpression(),this.expect(y.semi),t.update=this.type===y.parenR?null:this.parseExpression(),this.expect(y.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},rt.parseForIn=function(t,e){var i=this.type===y._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(y.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")},rt.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var s=this.startNode();if(this.parseVarId(s,i),this.eat(y.eq)?s.init=this.parseMaybeAssign(e):"const"!==i||this.type===y._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===s.id.type||e&&(this.type===y._in||this.isContextual("of"))?s.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(y.comma))break}return t},rt.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?K:X,!1)};var ht=1,pt=2,ct=4;rt.parseFunction=function(t,e,i,s){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!s)&&(this.type===y.star&&e&pt&&this.unexpected(),t.generator=this.eat(y.star)),this.options.ecmaVersion>=8&&(t.async=!!s),e&ht&&(t.id=e&ct&&this.type!==y.name?null:this.parseIdent(),!t.id||e&pt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?K:X:Y));var r=this.yieldPos,a=this.awaitPos,n=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(z(t.async,t.generator)),e&ht||(t.id=this.type===y.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=n,this.finishNode(t,e&ht?"FunctionDeclaration":"FunctionExpression")},rt.parseFunctionParams=function(t){this.expect(y.parenL),t.params=this.parseBindingList(y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},rt.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var s=this.startNode(),r=!1;for(s.body=[],this.expect(y.braceL);!this.eat(y.braceR);){var a=this.parseClassElement(null!==t.superClass);a&&(s.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind&&(r&&this.raise(a.start,"Duplicate constructor in the same class"),r=!0))}return t.body=this.finishNode(s,"ClassBody"),this.strict=i,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},rt.parseClassElement=function(t){var e=this;if(this.eat(y.semi))return null;var i=this.startNode(),s=function(t,s){void 0===s&&(s=!1);var r=e.start,a=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===y.parenL||s&&e.canInsertSemicolon())||(i.key&&e.unexpected(),i.computed=!1,i.key=e.startNodeAt(r,a),i.key.name=t,e.finishNode(i.key,"Identifier"),!1))};i.kind="method",i.static=s("static");var r=this.eat(y.star),a=!1;r||(this.options.ecmaVersion>=8&&s("async",!0)?(a=!0,r=this.options.ecmaVersion>=9&&this.eat(y.star)):s("get")?i.kind="get":s("set")&&(i.kind="set")),i.key||this.parsePropertyName(i);var n=i.key,o=!1;return i.computed||i.static||!("Identifier"===n.type&&"constructor"===n.name||"Literal"===n.type&&"constructor"===n.value)?i.static&&"Identifier"===n.type&&"prototype"===n.name&&this.raise(n.start,"Classes may not have a static property named prototype"):("method"!==i.kind&&this.raise(n.start,"Constructor can't have get/set modifier"),r&&this.raise(n.start,"Constructor can't be a generator"),a&&this.raise(n.start,"Constructor can't be an async method"),i.kind="constructor",o=t),this.parseClassMethod(i,r,a,o),"get"===i.kind&&0!==i.value.params.length&&this.raiseRecoverable(i.value.start,"getter should have no params"),"set"===i.kind&&1!==i.value.params.length&&this.raiseRecoverable(i.value.start,"setter should have exactly one param"),"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params"),i},rt.parseClassMethod=function(t,e,i,s){return t.value=this.parseMethod(e,i,s),this.finishNode(t,"MethodDefinition")},rt.parseClassId=function(t,e){this.type===y.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,X,!1)):(!0===e&&this.unexpected(),t.id=null)},rt.parseClassSuper=function(t){t.superClass=this.eat(y._extends)?this.parseExprSubscripts():null},rt.parseExport=function(t,e){if(this.next(),this.eat(y.star))return this.expectContextual("from"),this.type!==y.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(y._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===y._function||(i=this.isAsyncFunction())){var s=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(s,ht|ct,!1,i)}else if(this.type===y._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==y.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var a=0,n=t.specifiers;a<n.length;a+=1){var o=n[a];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},rt.checkExport=function(t,e,i){t&&(I(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},rt.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===i)for(var s=0,r=e.properties;s<r.length;s+=1){var a=r[s];this.checkPatternExport(t,a)}else if("ArrayPattern"===i)for(var n=0,o=e.elements;n<o.length;n+=1){var h=o[n];h&&this.checkPatternExport(t,h)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},rt.checkVariableExport=function(t,e){if(t)for(var i=0,s=e;i<s.length;i+=1){var r=s[i];this.checkPatternExport(t,r.id)}},rt.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},rt.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(y.braceL);!this.eat(y.braceR);){if(i)i=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var s=this.startNode();s.local=this.parseIdent(!0),s.exported=this.eatContextual("as")?this.parseIdent(!0):s.local,this.checkExport(t,s.exported.name,s.exported.start),e.push(this.finishNode(s,"ExportSpecifier"))}return e},rt.parseImport=function(t){return this.next(),this.type===y.string?(t.specifiers=ot,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===y.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},rt.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===y.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,X),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(y.comma))return t}if(this.type===y.star){var s=this.startNode();return this.next(),this.expectContextual("as"),s.local=this.parseIdent(),this.checkLVal(s.local,X),t.push(this.finishNode(s,"ImportNamespaceSpecifier")),t}for(this.expect(y.braceL);!this.eat(y.braceR);){if(e)e=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var r=this.startNode();r.imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLVal(r.local,X),t.push(this.finishNode(r,"ImportSpecifier"))}return t},rt.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},rt.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var ut=J.prototype;ut.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var s=0,r=t.properties;s<r.length;s+=1){var a=r[s];this.toAssignable(a,e),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},ut.toAssignableList=function(t,e){for(var i=t.length,s=0;s<i;s++){var r=t[s];r&&this.toAssignable(r,e)}if(i){var a=t[i-1];6===this.options.ecmaVersion&&e&&a&&"RestElement"===a.type&&"Identifier"!==a.argument.type&&this.unexpected(a.argument.start)}return t},ut.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},ut.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==y.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},ut.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case y.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(y.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case y.braceL:return this.parseObj(!0)}return this.parseIdent()},ut.parseBindingList=function(t,e,i){for(var s=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(y.comma),e&&this.type===y.comma)s.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===y.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var n=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(n),s.push(n)}return s},ut.parseBindingListItem=function(t){return t},ut.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(y.eq))return i;var s=this.startNodeAt(t,e);return s.left=i,s.right=this.parseMaybeAssign(),this.finishNode(s,"AssignmentPattern")},ut.checkLVal=function(t,e,i){switch(void 0===e&&(e=Q),t.type){case"Identifier":e===X&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(I(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e!==Q&&e!==$&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var s=0,r=t.properties;s<r.length;s+=1){var a=r[s];this.checkLVal(a,e,i)}break;case"Property":this.checkLVal(t.value,e,i);break;case"ArrayPattern":for(var n=0,o=t.elements;n<o.length;n+=1){var h=o[n];h&&this.checkLVal(h,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var lt=J.prototype;lt.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var s,r=t.key;switch(r.type){case"Identifier":s=r.name;break;case"Literal":s=String(r.value);break;default:return}var a=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===s&&"init"===a&&(e.proto&&(i&&i.doubleProto<0?i.doubleProto=r.start:this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var n=e[s="$"+s];if(n)("init"===a?this.strict&&n.init||n.get||n.set:n.init||n[a])&&this.raiseRecoverable(r.start,"Redefinition of property");else n=e[s]={init:!1,get:!1,set:!1};n[a]=!0}}},lt.parseExpression=function(t,e){var i=this.start,s=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===y.comma){var a=this.startNodeAt(i,s);for(a.expressions=[r];this.eat(y.comma);)a.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(a,"SequenceExpression")}return r},lt.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var s=!1,r=-1,a=-1,n=-1;e?(r=e.parenthesizedAssign,a=e.trailingComma,n=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new st,s=!0);var o=this.start,h=this.startLoc;this.type!==y.parenL&&this.type!==y.name||(this.potentialArrowAt=this.start);var p=this.parseMaybeConditional(t,e);if(i&&(p=i.call(this,p,o,h)),this.type.isAssign){var c=this.startNodeAt(o,h);return c.operator=this.value,c.left=this.type===y.eq?this.toAssignable(p,!1,e):p,s||st.call(e),e.shorthandAssign=-1,this.checkLVal(p),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return s&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),a>-1&&(e.trailingComma=a),n>-1&&(e.shorthandAssign=n),p},lt.parseMaybeConditional=function(t,e){var i=this.start,s=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(y.question)){var a=this.startNodeAt(i,s);return a.test=r,a.consequent=this.parseMaybeAssign(),this.expect(y.colon),a.alternate=this.parseMaybeAssign(t),this.finishNode(a,"ConditionalExpression")}return r},lt.parseExprOps=function(t,e){var i=this.start,s=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?r:r.start===i&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,i,s,-1,t)},lt.parseExprOp=function(t,e,i,s,r){var a=this.type.binop;if(null!=a&&(!r||this.type!==y._in)&&a>s){var n=this.type===y.logicalOR||this.type===y.logicalAND,o=this.value;this.next();var h=this.start,p=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),h,p,a,r),u=this.buildBinary(e,i,t,c,o,n);return this.parseExprOp(u,e,i,s,r)}return t},lt.buildBinary=function(t,e,i,s,r,a){var n=this.startNodeAt(t,e);return n.left=i,n.operator=r,n.right=s,this.finishNode(n,a?"LogicalExpression":"BinaryExpression")},lt.parseMaybeUnary=function(t,e){var i,s=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))i=this.parseAwait(),e=!0;else if(this.type.prefix){var a=this.startNode(),n=this.type===y.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),n?this.checkLVal(a.argument):this.strict&&"delete"===a.operator&&"Identifier"===a.argument.type?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(a,n?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(s,r);o.operator=this.value,o.prefix=!1,o.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(y.starstar)?this.buildBinary(s,r,i,this.parseMaybeUnary(null,!1),"**",!1):i},lt.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,s=this.parseExprAtom(t),r="ArrowFunctionExpression"===s.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return s;var a=this.parseSubscripts(s,e,i);return t&&"MemberExpression"===a.type&&(t.parenthesizedAssign>=a.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=a.start&&(t.parenthesizedBind=-1)),a},lt.parseSubscripts=function(t,e,i,s){for(var r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var a=this.parseSubscript(t,e,i,s,r);if(a===t||"ArrowFunctionExpression"===a.type)return a;t=a}},lt.parseSubscript=function(t,e,i,s,r){var a=this.eat(y.bracketL);if(a||this.eat(y.dot)){var n=this.startNodeAt(e,i);n.object=t,n.property=a?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),n.computed=!!a,a&&this.expect(y.bracketR),t=this.finishNode(n,"MemberExpression")}else if(!s&&this.eat(y.parenL)){var o=new st,h=this.yieldPos,p=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var u=this.parseExprList(y.parenR,this.options.ecmaVersion>=8&&"Import"!==t.type,!1,o);if(r&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=h,this.awaitPos=p,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,i),u,!0);this.checkExpressionErrors(o,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var l=this.startNodeAt(e,i);if(l.callee=t,l.arguments=u,"Import"===l.callee.type){1!==l.arguments.length&&this.raise(l.start,"import() requires exactly one argument");var d=l.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}t=this.finishNode(l,"CallExpression")}else if(this.type===y.backQuote){var f=this.startNodeAt(e,i);f.tag=t,f.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(f,"TaggedTemplateExpression")}return t},lt.parseExprAtom=function(t){this.type===y.slash&&this.readRegexp();var e,i=this.potentialArrowAt===this.start;switch(this.type){case y._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==y.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==y.dot&&this.type!==y.bracketL&&this.type!==y.parenL&&this.unexpected(),this.finishNode(e,"Super");case y._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case y.name:var s=this.start,r=this.startLoc,a=this.containsEsc,n=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===n.name&&!this.canInsertSemicolon()&&this.eat(y._function))return this.parseFunction(this.startNodeAt(s,r),0,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(y.arrow))return this.parseArrowExpression(this.startNodeAt(s,r),[n],!1);if(this.options.ecmaVersion>=8&&"async"===n.name&&this.type===y.name&&!a)return n=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(y.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,r),[n],!0)}return n;case y.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case y.num:case y.string:return this.parseLiteral(this.value);case y._null:case y._true:case y._false:return(e=this.startNode()).value=this.type===y._null?null:this.type===y._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case y.parenL:var h=this.start,p=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(p)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),p;case y.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(y.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case y.braceL:return this.parseObj(!1,t);case y._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case y._class:return this.parseClass(this.startNode(),!1);case y._new:return this.parseNew();case y.backQuote:return this.parseTemplate();case y._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},lt.parseDynamicImport=function(){var t=this.startNode();return this.next(),this.type!==y.parenL&&this.unexpected(),this.finishNode(t,"Import")},lt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},lt.parseParenExpression=function(){this.expect(y.parenL);var t=this.parseExpression();return this.expect(y.parenR),t},lt.parseParenAndDistinguishExpression=function(t){var e,i=this.start,s=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,n=this.start,o=this.startLoc,h=[],p=!0,c=!1,u=new st,l=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==y.parenR;){if(p?p=!1:this.expect(y.comma),r&&this.afterTrailingComma(y.parenR,!0)){c=!0;break}if(this.type===y.ellipsis){a=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}h.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(y.parenR),t&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=l,this.awaitPos=d,this.parseParenArrowList(i,s,h);h.length&&!c||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(u,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=d||this.awaitPos,h.length>1?((e=this.startNodeAt(n,o)).expressions=h,this.finishNodeAt(e,"SequenceExpression",f,m)):e=h[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var x=this.startNodeAt(i,s);return x.expression=e,this.finishNode(x,"ParenthesizedExpression")}return e},lt.parseParenItem=function(t){return t},lt.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var dt=[];lt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(y.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||i)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var s=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),s,r,!0),this.options.ecmaVersion>10&&"Import"===t.callee.type&&this.raise(t.callee.start,"Cannot use new with import(...)"),this.eat(y.parenL)?t.arguments=this.parseExprList(y.parenR,this.options.ecmaVersion>=8&&"Import"!==t.callee.type,!1):t.arguments=dt,this.finishNode(t,"NewExpression")},lt.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===y.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===y.backQuote,this.finishNode(i,"TemplateElement")},lt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var s=this.parseTemplateElement({isTagged:e});for(i.quasis=[s];!s.tail;)this.type===y.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(y.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(y.braceR),i.quasis.push(s=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},lt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===y.name||this.type===y.num||this.type===y.string||this.type===y.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===y.star)&&!k.test(this.input.slice(this.lastTokEnd,this.start))},lt.parseObj=function(t,e){var i=this.startNode(),s=!0,r={};for(i.properties=[],this.next();!this.eat(y.braceR);){if(s)s=!1;else if(this.expect(y.comma),this.afterTrailingComma(y.braceR))break;var a=this.parseProperty(t,e);t||this.checkPropClash(a,r,e),i.properties.push(a)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},lt.parseProperty=function(t,e){var i,s,r,a,n=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(y.ellipsis))return t?(n.argument=this.parseIdent(!1),this.type===y.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(this.type===y.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),n.argument=this.parseMaybeAssign(!1,e),this.type===y.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(t||e)&&(r=this.start,a=this.startLoc),t||(i=this.eat(y.star)));var o=this.containsEsc;return this.parsePropertyName(n),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(n)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(y.star),this.parsePropertyName(n,e)):s=!1,this.parsePropertyValue(n,t,i,s,r,a,e,o),this.finishNode(n,"Property")},lt.parsePropertyValue=function(t,e,i,s,r,a,n,o){if((i||s)&&this.type===y.colon&&this.unexpected(),this.eat(y.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,n),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===y.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,s);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===y.comma||this.type===y.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||s)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,a,t.key):this.type===y.eq&&n?(n.shorthandAssign<0&&(n.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,a,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(i||s)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var h="get"===t.kind?0:1;if(t.value.params.length!==h){var p=t.value.start;"get"===t.kind?this.raiseRecoverable(p,"getter should have no params"):this.raiseRecoverable(p,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},lt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(y.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(y.bracketR),t.key;t.computed=!1}return t.key=this.type===y.num||this.type===y.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},lt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},lt.parseMethod=function(t,e,i){var s=this.startNode(),r=this.yieldPos,a=this.awaitPos,n=this.awaitIdentPos;return this.initFunction(s),this.options.ecmaVersion>=6&&(s.generator=t),this.options.ecmaVersion>=8&&(s.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(z(e,s.generator)|j|(i?W:0)),this.expect(y.parenL),s.params=this.parseBindingList(y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(s,!1,!0),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=n,this.finishNode(s,"FunctionExpression")},lt.parseArrowExpression=function(t,e,i){var s=this.yieldPos,r=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(z(i,!1)|G),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=s,this.awaitPos=r,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},lt.parseFunctionBody=function(t,e,i){var s=e&&this.type!==y.braceL,r=this.strict,a=!1;if(s)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var n=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!n||(a=this.strictDirective(this.end))&&n&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!r&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,$),this.strict=r},lt.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){if("Identifier"!==i[e].type)return!1}return!0},lt.checkParams=function(t,e){for(var i={},s=0,r=t.params;s<r.length;s+=1){var a=r[s];this.checkLVal(a,K,e?null:i)}},lt.parseExprList=function(t,e,i,s){for(var r=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(y.comma),e&&this.afterTrailingComma(t))break;var n=void 0;i&&this.type===y.comma?n=null:this.type===y.ellipsis?(n=this.parseSpread(s),s&&this.type===y.comma&&s.trailingComma<0&&(s.trailingComma=this.start)):n=this.parseMaybeAssign(!1,s),r.push(n)}return r},lt.checkUnreserved=function(t){var e=t.start,i=t.end,s=t.name;(this.inGenerator&&"yield"===s&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===s&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(s)&&this.raise(e,"Unexpected keyword '"+s+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(s)&&(this.inAsync||"await"!==s||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+s+"' is reserved"))},lt.parseIdent=function(t,e){var i=this.startNode();return this.type===y.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},lt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===y.semi||this.canInsertSemicolon()||this.type!==y.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(y.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},lt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var ft=J.prototype;ft.raise=function(t,e){var i=N(this.input,t);e+=" ("+i.line+":"+i.column+")";var s=new SyntaxError(e);throw s.pos=t,s.loc=i,s.raisedAt=this.pos,s},ft.raiseRecoverable=ft.raise,ft.curPosition=function(){if(this.options.locations)return new L(this.curLine,this.pos-this.lineStart)};var mt=J.prototype,xt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};mt.enterScope=function(t){this.scopeStack.push(new xt(t))},mt.exitScope=function(){this.scopeStack.pop()},mt.treatFunctionsAsVarInScope=function(t){return t.flags&D||!this.inModule&&t.flags&M},mt.declareName=function(t,e,i){var s=!1;if(e===X){var r=this.currentScope();s=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&r.flags&M&&delete this.undefinedExports[t]}else if(e===Z){this.currentScope().lexical.push(t)}else if(e===Y){var a=this.currentScope();s=this.treatFunctionsAsVar?a.lexical.indexOf(t)>-1:a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var n=this.scopeStack.length-1;n>=0;--n){var o=this.scopeStack[n];if(o.lexical.indexOf(t)>-1&&!(o.flags&H&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){s=!0;break}if(o.var.push(t),this.inModule&&o.flags&M&&delete this.undefinedExports[t],o.flags&F)break}s&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},mt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},mt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},mt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&F)return e}},mt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&F&&!(e.flags&G))return e}};var gt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new V(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])};exports.Node=gt;var vt=J.prototype;function yt(t,e,i,s){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=s),this.options.ranges&&(t.range[1]=i),t}vt.startNode=function(){return new gt(this,this.start,this.startLoc)},vt.startNodeAt=function(t,e){return new gt(this,t,e)},vt.finishNode=function(t,e){return yt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},vt.finishNodeAt=function(t,e,i,s){return yt.call(this,t,e,i,s)};var kt=function(t,e,i,s,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=s,this.generator=!!r};exports.TokContext=kt;var _t={b_stat:new kt("{",!1),b_expr:new kt("{",!0),b_tmpl:new kt("${",!1),p_stat:new kt("(",!1),p_expr:new kt("(",!0),q_tmpl:new kt("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new kt("function",!1),f_expr:new kt("function",!0),f_expr_gen:new kt("function",!0,!1,null,!0),f_gen:new kt("function",!1,!1,null,!0)};exports.tokContexts=_t;var bt=J.prototype;bt.initialContext=function(){return[_t.b_stat]},bt.braceIsBlock=function(t){var e=this.curContext();return e===_t.f_expr||e===_t.f_stat||(t!==y.colon||e!==_t.b_stat&&e!==_t.b_expr?t===y._return||t===y.name&&this.exprAllowed?k.test(this.input.slice(this.lastTokEnd,this.start)):t===y._else||t===y.semi||t===y.eof||t===y.parenR||t===y.arrow||(t===y.braceL?e===_t.b_stat:t!==y._var&&t!==y._const&&t!==y.name&&!this.exprAllowed):!e.isExpr)},bt.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},bt.updateContext=function(t){var e,i=this.type;i.keyword&&t===y.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},y.parenR.updateContext=y.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===_t.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},y.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?_t.b_stat:_t.b_expr),this.exprAllowed=!0},y.dollarBraceL.updateContext=function(){this.context.push(_t.b_tmpl),this.exprAllowed=!0},y.parenL.updateContext=function(t){var e=t===y._if||t===y._for||t===y._with||t===y._while;this.context.push(e?_t.p_stat:_t.p_expr),this.exprAllowed=!0},y.incDec.updateContext=function(){},y._function.updateContext=y._class.updateContext=function(t){!t.beforeExpr||t===y.semi||t===y._else||t===y._return&&k.test(this.input.slice(this.lastTokEnd,this.start))||(t===y.colon||t===y.braceL)&&this.curContext()===_t.b_stat?this.context.push(_t.f_stat):this.context.push(_t.f_expr),this.exprAllowed=!1},y.backQuote.updateContext=function(){this.curContext()===_t.q_tmpl?this.context.pop():this.context.push(_t.q_tmpl),this.exprAllowed=!1},y.star.updateContext=function(t){if(t===y._function){var e=this.context.length-1;this.context[e]===_t.f_expr?this.context[e]=_t.f_expr_gen:this.context[e]=_t.f_gen}this.exprAllowed=!0},y.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==y.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var St="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ct=St+" Extended_Pictographic",wt=Ct,Et={9:St,10:Ct,11:wt},At="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",It="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Pt=It+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Tt=Pt+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Lt={9:It,10:Pt,11:Tt},Vt={};function Nt(t){var e=Vt[t]={binary:T(Et[t]+" "+At),nonBinary:{General_Category:T(At),Script:T(Lt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}Nt(9),Nt(10),Nt(11);var Rt=J.prototype,Bt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Vt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Ot(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Mt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Dt(t){return u(t,!0)||36===t||95===t}function Ft(t){return l(t,!0)||36===t||95===t||8204===t||8205===t}function Ut(t){return t>=65&&t<=90||t>=97&&t<=122}function qt(t){return t>=0&&t<=1114111}function Gt(t){return 100===t||68===t||115===t||83===t||119===t||87===t}function Ht(t){return Ut(t)||95===t}function jt(t){return Ht(t)||Wt(t)}function Wt(t){return t>=48&&t<=57}function zt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Qt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Kt(t){return t>=48&&t<=55}Bt.prototype.reset=function(t,e,i){var s=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchN=s&&this.parser.options.ecmaVersion>=9},Bt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Bt.prototype.at=function(t){var e=this.source,i=e.length;if(t>=i)return-1;var s=e.charCodeAt(t);if(!this.switchU||s<=55295||s>=57344||t+1>=i)return s;var r=e.charCodeAt(t+1);return r>=56320&&r<=57343?(s<<10)+r-56613888:s},Bt.prototype.nextIndex=function(t){var e=this.source,i=e.length;if(t>=i)return i;var s,r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=i||(s=e.charCodeAt(t+1))<56320||s>57343?t+1:t+2},Bt.prototype.current=function(){return this.at(this.pos)},Bt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Bt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Bt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},Rt.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,s=0;s<i.length;s++){var r=i.charAt(s);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(r,s+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},Rt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},Rt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var s=i[e];-1===t.groupNames.indexOf(s)&&t.raise("Invalid named capture referenced")}},Rt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},Rt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},Rt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},Rt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},Rt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},Rt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},Rt.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var s=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<s&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},Rt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},Rt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},Rt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},Rt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},Rt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},Rt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},Rt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Mt(e)&&(t.lastIntValue=e,t.advance(),!0)},Rt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!Mt(i);)t.advance();return t.pos!==e},Rt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},Rt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},Rt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},Rt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Ot(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Ot(t.lastIntValue);return!0}return!1},Rt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),Dt(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Rt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),Ft(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},Rt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},Rt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},Rt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},Rt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},Rt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},Rt.regexp_eatZero=function(t){return 48===t.current()&&!Wt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},Rt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},Rt.regexp_eatControlLetter=function(t){var e=t.current();return!!Ut(e)&&(t.lastIntValue=e%32,t.advance(),!0)},Rt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(t.switchU&&i>=55296&&i<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(r>=56320&&r<=57343)return t.lastIntValue=1024*(i-55296)+(r-56320)+65536,!0}t.pos=s,t.lastIntValue=i}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&qt(t.lastIntValue))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=e}return!1},Rt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},Rt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},Rt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Gt(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},Rt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,s),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},Rt.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){I(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},Rt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},Rt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Ht(e=t.current());)t.lastStringValue+=Ot(e),t.advance();return""!==t.lastStringValue},Rt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";jt(e=t.current());)t.lastStringValue+=Ot(e),t.advance();return""!==t.lastStringValue},Rt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},Rt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},Rt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},Rt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||Kt(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var s=t.current();return 93!==s&&(t.lastIntValue=s,t.advance(),!0)},Rt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},Rt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Wt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},Rt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},Rt.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;Wt(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},Rt.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;zt(i=t.current());)t.lastIntValue=16*t.lastIntValue+Qt(i),t.advance();return t.pos!==e},Rt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},Rt.regexp_eatOctalDigit=function(t){var e=t.current();return Kt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},Rt.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var s=0;s<e;++s){var r=t.current();if(!zt(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Qt(r),t.advance()}return!0};var Xt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new V(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])};exports.Token=Xt;var Yt=J.prototype;function Zt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Yt.next=function(){this.options.onToken&&this.options.onToken(new Xt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Yt.getToken=function(){return this.next(),new Xt(this)},"undefined"!=typeof Symbol&&(Yt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===y.eof,value:e}}}}),Yt.curContext=function(){return this.context[this.context.length-1]},Yt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(y.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Yt.readToken=function(t){return u(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Yt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Yt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),i=this.pos,s=this.input.indexOf("*/",this.pos+=2);if(-1===s&&this.raise(this.pos-2,"Unterminated comment"),this.pos=s+2,this.options.locations)for(_.lastIndex=i;(t=_.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,s),i,this.pos,e,this.curPosition())},Yt.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),s=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!b(s);)s=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},Yt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&S.test(String.fromCharCode(t))))break t;++this.pos}}},Yt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},Yt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(y.ellipsis)):(++this.pos,this.finishToken(y.dot))},Yt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(y.assign,2):this.finishOp(y.slash,1)},Yt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,s=42===t?y.star:y.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,s=y.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(y.assign,i+1):this.finishOp(s,i)},Yt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?y.logicalOR:y.logicalAND,2):61===e?this.finishOp(y.assign,2):this.finishOp(124===t?y.bitwiseOR:y.bitwiseAND,1)},Yt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(y.assign,2):this.finishOp(y.bitwiseXOR,1)},Yt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!k.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(y.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(y.assign,2):this.finishOp(y.plusMin,1)},Yt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(y.assign,i+1):this.finishOp(y.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(y.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Yt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(y.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(y.arrow)):this.finishOp(61===t?y.eq:y.prefix,1)},Yt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(y.parenL);case 41:return++this.pos,this.finishToken(y.parenR);case 59:return++this.pos,this.finishToken(y.semi);case 44:return++this.pos,this.finishToken(y.comma);case 91:return++this.pos,this.finishToken(y.bracketL);case 93:return++this.pos,this.finishToken(y.bracketR);case 123:return++this.pos,this.finishToken(y.braceL);case 125:return++this.pos,this.finishToken(y.braceR);case 58:return++this.pos,this.finishToken(y.colon);case 63:return++this.pos,this.finishToken(y.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(y.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(y.prefix,1)}this.raise(this.pos,"Unexpected character '"+Zt(t)+"'")},Yt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},Yt.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var s=this.input.charAt(this.pos);if(k.test(s)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++this.pos}var r=this.input.slice(i,this.pos);++this.pos;var a=this.pos,n=this.readWord1();this.containsEsc&&this.unexpected(a);var o=this.regexpState||(this.regexpState=new Bt(this));o.reset(i,r,n),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var h=null;try{h=new RegExp(r,n)}catch(p){}return this.finishToken(y.regexp,{pattern:r,flags:n,value:h})},Yt.readInt=function(t,e){for(var i=this.pos,s=0,r=0,a=null==e?1/0:e;r<a;++r){var n=this.input.charCodeAt(this.pos),o=void 0;if((o=n>=97?n-97+10:n>=65?n-65+10:n>=48&&n<=57?n-48:1/0)>=t)break;++this.pos,s=s*t+o}return this.pos===i||null!=e&&this.pos-i!==e?null:s},Yt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return null==i&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i="undefined"!=typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):u(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(y.num,i)},Yt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number"),i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1);var s=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&110===s){var r=this.input.slice(e,this.pos),a="undefined"!=typeof BigInt?BigInt(r):null;return++this.pos,u(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(y.num,a)}46!==s||i||(++this.pos,this.readInt(10),s=this.input.charCodeAt(this.pos)),69!==s&&101!==s||i||(43!==(s=this.input.charCodeAt(++this.pos))&&45!==s||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),u(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var n=this.input.slice(e,this.pos),o=i?parseInt(n,8):parseFloat(n);return this.finishToken(y.num,o)},Yt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Yt.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var s=this.input.charCodeAt(this.pos);if(s===t)break;92===s?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):(b(s,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(y.string,e)};var $t={};Yt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==$t)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Yt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw $t;this.raise(t,e)},Yt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==y.template&&this.type!==y.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(y.template,t)):36===i?(this.pos+=2,this.finishToken(y.dollarBraceL)):(++this.pos,this.finishToken(y.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(b(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Yt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(y.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Yt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Zt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(i,8);return s>255&&(i=i.slice(0,-1),s=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return b(e)?"":String.fromCharCode(e)}},Yt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},Yt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,s=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(l(r,s))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var a=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var n=this.readCodePoint();(e?u:l)(n,s)||this.invalidStringToken(a,"Invalid Unicode escape"),t+=Zt(n),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},Yt.readWord=function(){var t=this.readWord1(),e=y.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=g[t]),this.finishToken(e,t)};var Jt="6.4.2";function te(t,e){return J.parse(t,e)}function ee(t,e,i){return J.parseExpressionAt(t,e,i)}function ie(t,e){return J.tokenizer(t,e)}exports.version=Jt,J.acorn={Parser:J,version:Jt,defaultOptions:R,Position:L,SourceLocation:V,getLineInfo:N,Node:gt,TokenType:d,tokTypes:y,keywordTypes:g,TokContext:kt,tokContexts:_t,isIdentifierChar:l,isIdentifierStart:u,Token:Xt,isNewLine:b,lineBreak:k,lineBreakG:_,nonASCIIwhitespace:S};
},{}],"kGI0":[function(require,module,exports) {
var define;
var process = require("process");
var global = arguments[3];
var t,e=require("process"),n=arguments[3];function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(e,n){var r=(e=e||require("./node/self.js")).window,s=e.document,a=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],i=e.slice,r=Object.create,s=Object.getOwnPropertyDescriptor,a=Object.defineProperty,o=e.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},h=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},u=function(t,e,n){if(t){var i=s(t,"length");(i&&"number"==typeof i.value?o:function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}).call(t,e,n=n||t)}return n};function l(e,n,i,r,o){var h={};function u(t,u){"string"==typeof(u=u||(u=s(n,t))&&(u.get?u:u.value))&&"#"===u[0]&&(u=e[u.substring(1)]||u);var l,f="function"==typeof u,d=u,_=o||f&&!u.base?u&&u.get?t in e:e[t]:null;o&&_||(f&&_&&(u.base=_),f&&!1!==r&&(l=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(h[l[3].toLowerCase()+l[4]]=l[2]),d&&!f&&d.get&&"function"==typeof d.get&&c.isPlainObject(d)||(d={value:d,writable:!0}),(s(e,t)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=i?i:!l),a(e,t,d))}if(n){for(var l in n)n.hasOwnProperty(l)&&!t.test(l)&&u(l);for(var l in h){var f=h[l],d=e["set"+f],_=e["get"+f]||d&&e["is"+f];!_||!0!==r&&0!==_.length||u(l,{get:_,set:d})}}return e}function c(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&h(this,n)}return this}return l(c,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,n=t.beans,i=t.preserve;e!==t&&l(this.prototype,t,t.enumerable,n,i),l(this,e,null,n,i)}for(var r=1,s=arguments.length;r<s;r++)this.inject(arguments[r]);return this},extend:function(){for(var t,e,n,i=this,s=0,o=arguments.length;s<o&&(!t||!e);s++)n=arguments[s],t=t||n.initialize,e=e||n.prototype;return e=(t=t||function(){i.apply(this,arguments)}).prototype=e||r(this.prototype),a(e,"constructor",{value:t,writable:!0,configurable:!0}),l(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}}).inject({enumerable:!1,initialize:c,set:c,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&l(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return u(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:h,each:u,create:r,define:a,describe:s,clone:function(t){return h(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===c||"Object"===e.name)},pick:function(t,e){return t!==n?t:e},slice:function(t,e,n){return i.call(t,e,n)}}})};"undefined"!=typeof module&&(module.exports=a),a.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+a.each(this,function(t,e){if(!/^_/.test(e)){var n=i(t);this.push(e+": "+("number"===n?c.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return a.importJSON(t,this)},exportJSON:function(t){return a.exportJSON(this,t)},toJSON:function(){return a.serialize(this)},set:function(t,e){return t&&a.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!a.exports[n]&&(a.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"===i(t)&&"object"===i(e)){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!a.equals(t[n],e[n]))return!1}else{var n,r=Object.keys(t);if((n=r.length)!==Object.keys(e).length)return!1;for(;n--;){var s=r[n];if(!e.hasOwnProperty(s)||!a.equals(t[s],e[s]))return!1}}return!0}return!1},read:function(t,e,i,r){if(this===a){var s=this.peek(t,e);return t.__index++,s}var o=this.prototype,h=o._readIndex,u=e||h&&t.__index||0,l=t.length,c=t[u];if(r=r||l-u,c instanceof this||i&&i.readNull&&null==c&&r<=1)return h&&(t.__index=u+1),c&&i&&i.clone?c.clone():c;if(c=a.create(o),h&&(c.__read=!0),c=c.initialize.apply(c,u>0||u+r<l?a.slice(t,u,u+r):t)||c,h){t.__index=u+c.__read;var f=c.__filtered;f&&(t.__filtered=f,c.__filtered=n),c.__read=n}return c},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,s=[],a=e||0,o=i?a+i:t.length,h=a;h<o;h++)s.push(Array.isArray(r=t[h])?this.read(r,0,n):this.read(t,h,n,1));return s},readNamed:function(t,e,i,r,s){var o=this.getNamed(t,e),h=o!==n;if(h){var u=t.__filtered;if(!u){var l=this.getSource(t);(u=t.__filtered=a.create(l)).__unfiltered=l}u[e]=n}return this.read(h?[o]:t,i,r,s)},readSupported:function(t,e){var i=this.getSource(t),r=this,s=!1;return i&&Object.keys(i).forEach(function(i){if(i in e){var a=r.readNamed(t,i);a!==n&&(e[i]=a),s=!0}}),s},getSource:function(t){var e=t.__source;if(e===n){var i=1===t.length&&t[0];e=t.__source=i&&a.isPlainObject(i)?i:null}return e},getNamed:function(t,e){var n=this.getSource(t);if(n)return e?n[e]:t.__filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,r){var s;function a(r){if(!(i&&r in i||s&&r in s)){var a=e[r];a!==n&&(t[r]=a)}}if(r){for(var o,h={},u=0,l=r.length;u<l;u++)(o=r[u])in e&&(a(o),h[o]=!0);s=h}return Object.keys(e.__unfiltered||e).forEach(a),t},isPlainValue:function(t,e){return a.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new c(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!s&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var h=0,u=t.length;h<u;h++)r[h]=a.serialize(t[h],e,n,i)}else if(a.isPlainObject(t)){r={};var l=Object.keys(t);for(h=0,u=l.length;h<u;h++){var f=l[h];r[f]=a.serialize(t[f],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var s=t,o=!n,h=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var u=t[0],l="dictionary"===u;if(1==t.length&&/^#/.test(u))return n.dictionary[u];s=[];for(var c=(u=a.exports[u])?1:0,f=t.length;c<f;c++)s.push(a.deserialize(t[c],e,n,l,h));if(u){var d=s;s=e?e(u,d,o||r):new u(d)}}else if(a.isPlainObject(t))for(var _ in s={},i&&(n.dictionary=s),t)s[_]=a.deserialize(t[_],e,n);return h?s[1]:s},exportJSON:function(t,e){var n=a.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return a.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var r=i&&e&&e.constructor===t,s=r?e:a.create(t.prototype);if(1===n.length&&s instanceof C&&(r||!(s instanceof k))){var o=n[0];a.isPlainObject(o)&&(o.insert=!1,r&&(n=n.concat([{insert:!0}])))}return(r?s.set:t).apply(s,n),r&&(e=null),s})},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,e,i,r){var s=e&&e.length,o=i===n;(i=o?t.length:i)>t.length&&(i=t.length);for(var h=0;h<s;h++)e[h]._index=i+h;if(o)return a.push(t,e),[];var u=[i,r];e&&a.push(u,e);for(var l=t.splice.apply(t,u),c=(h=0,l.length);h<c;h++)l[h]._index=n;for(h=i+s,c=t.length;h<c;h++)t[h]._index=h;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var o={on:function(t,e){if("string"!=typeof t)a.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(n=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&s.splice(n,1)),this}a.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function n(){e.apply(this,arguments),this.off(t,n)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=a.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var s=0,o=n.length;s<o;s++)if(0==n[s].apply(this,i)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var s=e[r],a=s&&s[i];a&&a.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};a.each(n,function(t,n){var r="string"==typeof t,s=r?t:n,o=a.capitalize(s),h=s.substring(2).toLowerCase();i[h]=r?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(t){var e=this[s];e&&this.off(h,e),t&&this.on(h,t),this[s]=t}}),e._eventTypes=i}return t.base.apply(this,arguments)}}},h=a.extend({_class:"PaperScope",initialize:function t(){ht=this,this.settings=new a({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var n=t.prototype;if(!this.support){var i=rt.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:st.nativeModes},rt.release(i)}if(!this.agent){var r=e.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],o="darwin"===s?"mac":s,h=n.agent=n.browser={platform:o};o&&(h[o]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!h.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;h.version=s,h.versionNumber=parseFloat(s),e={trident:"msie",jsdom:"node"}[e]||e,h.name=e,h[e]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.12.15",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=ht.PaperScript.execute(t,this,e);return G.updateFocus(),n},install:function(t){var e=this;for(var n in a.each(["project","view","tool"],function(n){a.define(t,n,{configurable:!0,get:function(){return e[n]}})}),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return ht=this,this.project=new b(t),this},createCanvas:function(t,e){return rt.getCanvas(t,e)},activate:function(){ht=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete h._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),u=a.extend(o,{initialize:function(t){this._scope=ht,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(a.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l={findItemBoundsCollisions:function(t,e,n){function i(t){for(var e=new Array(t.length),n=0;n<t.length;n++){var i=t[n].getBounds();e[n]=[i.left,i.top,i.right,i.bottom]}return e}var r=i(t),s=e&&e!==t?i(e):r;return this.findBoundsCollisions(r,s,n||0)},findCurveBoundsCollisions:function(t,e,n,i){function r(t){for(var e=Math.min,n=Math.max,i=new Array(t.length),r=0;r<t.length;r++){var s=t[r];i[r]=[e(s[0],s[2],s[4],s[6]),e(s[1],s[3],s[5],s[7]),n(s[0],s[2],s[4],s[6]),n(s[1],s[3],s[5],s[7])]}return i}var s=r(t),a=e&&e!==t?r(e):s;if(i){for(var o=this.findBoundsCollisions(s,a,n||0,!1,!0),h=this.findBoundsCollisions(s,a,n||0,!0,!0),u=[],l=0,c=o.length;l<c;l++)u[l]={hor:o[l],ver:h[l]};return u}return this.findBoundsCollisions(s,a,n||0)},findBoundsCollisions:function(t,e,n,i,r){var s=!e||t===e,a=s?t:t.concat(e),o=t.length,h=a.length;function u(t,e,n){for(var i=0,r=t.length;i<r;){var s=r+i>>>1;a[t[s]][e]<n?i=s+1:r=s}return i-1}for(var l=i?1:0,c=l+2,f=i?0:1,d=f+2,_=new Array(h),g=0;g<h;g++)_[g]=g;_.sort(function(t,e){return a[t][l]-a[e][l]});var v=[],p=new Array(o);for(g=0;g<h;g++){var m=_[g],y=a[m],w=s?m:m-o,x=m<o,b=s||!x,C=x?[]:null;if(v.length){var S=u(v,c,y[l]-n)+1;if(v.splice(0,S),s&&r){C=C.concat(v);for(var k=0;k<v.length;k++){p[M=v[k]].push(w)}}else{var I=y[d],P=y[f];for(k=0;k<v.length;k++){var M=v[k],A=a[M],T=M<o,O=s||M>=o;(r||(x&&O||b&&T)&&I>=A[f]-n&&P<=A[d]+n)&&(x&&O&&C.push(s?M:M-o),b&&T&&p[M].push(w))}}}if(x&&(t===e&&C.push(m),p[m]=C),v.length){var z=u(v,c,y[c]);v.splice(z+1,0,m)}else v.push(m)}for(g=0;g<p.length;g++){var E=p[g];E&&E.sort(function(t,e){return t-e})}return p}},c=a.extend({initialize:function(t){this.precision=a.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});c.instance=new c;var f=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function a(t,e,n){return t<e?e:t>n?n:t}function o(t,e,i){function r(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var s=e*e-t*i,a=e*e+t*i;if(3*n(s)<a){var o=r(t),h=r(e),u=r(i),l=e*e,c=t*i;s=l-c+(h[0]*h[0]-l+2*h[0]*h[1]+h[1]*h[1]-(o[0]*u[0]-c+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return s}function h(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?r(2,-Math.round(s(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:1.12e-16,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(i(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},isMachineZero:function(t){return t>=-1.12e-16&&t<=1.12e-16},clamp:a,integrate:function(n,i,r,s){for(var a=t[s-2],o=e[s-2],h=.5*(r-i),u=h+i,l=0,c=s+1>>1,f=1&s?o[l++]*n(u):0;l<c;){var d=h*a[l];f+=o[l++]*(n(u+d)+n(u-d))}return h*f},findRoot:function(t,e,i,r,s,o,h){for(var u=0;u<o;u++){var l=t(i),c=l/e(i),f=i-c;if(n(c)<h){i=f;break}l>0?(s=i,i=f<=r?.5*(r+s):f):(r=i,i=f>=s?.5*(r+s):f)}return a(i,r,s)},solveQuadratic:function(t,e,r,s,u,l){var c,f=1/0;if(n(t)<1e-12){if(n(e)<1e-12)return n(r)<1e-12?-1:0;c=-r/e}else{var d=o(t,e*=-.5,r);if(d&&n(d)<1.12e-16){var _=h(n(t),n(e),n(r));_&&(d=o(t*=_,e*=_,r*=_))}if(d>=-1.12e-16){var g=d<0?0:i(d),v=e+(e<0?-g:g);0===v?f=-(c=r/t):(c=v/t,f=r/v)}}var p=0,m=null==u,y=u-1e-12,w=l+1e-12;return isFinite(c)&&(m||c>y&&c<w)&&(s[p++]=m?c:a(c,u,l)),f!==c&&isFinite(f)&&(m||f>y&&f<w)&&(s[p++]=m?f:a(f,u,l)),p},solveCubic:function(t,e,s,o,u,l,c){var d,_,g,v,p,m=h(n(t),n(e),n(s),n(o));function y(n){var i=t*(d=n);v=(i+(_=i+e))*d+(g=_*d+s),p=g*d+o}if(m&&(t*=m,e*=m,s*=m,o*=m),n(t)<1e-12)t=e,_=s,g=o,d=1/0;else if(n(o)<1e-12)_=e,g=s,d=0;else{y(-e/t/3);var w=p/t,x=r(n(w),1/3),b=w<0?-1:1,C=-v/t,S=C>0?1.324717957244746*Math.max(x,i(C)):x,k=d-b*S;if(k!==d){do{y(k),k=0===v?d:d-p/v/(1+1.12e-16)}while(b*k>b*d);n(t)*d*d>n(o/d)&&(_=((g=-o/d)-s)/d)}}var I=f.solveQuadratic(t,_,g,u,l,c),P=null==l;return isFinite(d)&&(0===I||I>0&&d!==u[0]&&d!==u[1])&&(P||d>l-1e-12&&d<c+1e-12)&&(u[I++]=P?d:a(d,l,c)),I}}},d={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},_=a.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=i(t),r=this.__read,s=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),r&&(s=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(s=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),s=0)}return r&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new _(this.x,this.y)},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();f.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=_.read(arguments),e=this.getLength()*t.getLength();if(f.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=_.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=arguments,e=_.read(t),n=e.x-this.x,i=e.y-this.y,r=n*n+i*i;return a.read(t)?r:Math.sqrt(r)},normalize:function(t){t===n&&(t=1);var e=this.getLength(),i=0!==e?t/e:0,r=new _(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new _(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=_.read(arguments);return new _(this.x+t.x,this.y+t.y)},subtract:function(){var t=_.read(arguments);return new _(this.x-t.x,this.y-t.y)},multiply:function(){var t=_.read(arguments);return new _(this.x*t.x,this.y*t.y)},divide:function(){var t=_.read(arguments);return new _(this.x/t.x,this.y/t.y)},modulo:function(){var t=_.read(arguments);return new _(this.x%t.x,this.y%t.y)},negate:function(){return new _(-this.x,-this.y)},isInside:function(){return m.read(arguments).contains(this)},isClose:function(){var t=arguments,e=_.read(t),n=a.read(t);return this.getDistance(e)<=n},isCollinear:function(){var t=_.read(arguments);return _.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=_.read(arguments);return _.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=f.isZero;return t(this.x)&&t(this.y)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return isNaN(this.x)||isNaN(this.y)}),isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=_.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=_.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=_.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new _(t.x*e,t.y*e)},statics:{min:function(){var t=arguments,e=_.read(t),n=_.read(t);return new _(Math.min(e.x,n.x),Math.min(e.y,n.y))},max:function(){var t=arguments,e=_.read(t),n=_.read(t);return new _(Math.max(e.x,n.x),Math.max(e.y,n.y))},random:function(){return new _(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},a.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new _(e(this.x),e(this.y))}},{})),g=_.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),v=a.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=i(t),r=this.__read,s=0;if("number"===n){var a="number"==typeof e;this._set(t,a?e:t),r&&(s=a?2:1)}else if("undefined"===n||null===t)this._set(0,0),r&&(s=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;s=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),s=0)}return r&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new v(this.width,this.height)},toString:function(){var t=c.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=v.read(arguments);return new v(this.width+t.width,this.height+t.height)},subtract:function(){var t=v.read(arguments);return new v(this.width-t.width,this.height-t.height)},multiply:function(){var t=v.read(arguments);return new v(this.width*t.width,this.height*t.height)},divide:function(){var t=v.read(arguments);return new v(this.width/t.width,this.height/t.height)},modulo:function(){var t=v.read(arguments);return new v(this.width%t.width,this.height%t.height)},negate:function(){return new v(-this.width,-this.height)},isZero:function(){var t=f.isZero;return t(this.width)&&t(this.height)},isNaN:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return isNaN(this.width)||isNaN(this.height)}),statics:{min:function(t,e){return new v(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new v(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new v(Math.random(),Math.random())}}},a.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new v(e(this.width),e(this.height))}},{})),p=v.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),m=a.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,r,s){var o,h=arguments,u=i(t);if("number"===u?(this._set(t,e,r,s),o=4):"undefined"===u||null===t?(this._set(0,0,0,0),o=null===t?1:0):1===h.length&&(Array.isArray(t)?(this._set.apply(this,t),o=1):t.x!==n||t.width!==n?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),o=1):t.from===n&&t.to===n&&(this._set(0,0,0,0),a.readSupported(h,this)&&(o=1))),o===n){var l,c,f=_.readNamed(h,"from"),d=a.peek(h),g=f.x,p=f.y;if(d&&d.x!==n||a.hasNamed(h,"to")){var m=_.readNamed(h,"to");l=m.x-g,c=m.y-p,l<0&&(g=m.x,l=-l),c<0&&(p=m.y,c=-c)}else{var y=v.read(h);l=y.width,c=y.height}this._set(g,p,l,c),o=h.__index}var w=h.__filtered;return w&&(this.__filtered=w),this.__read&&(this.__read=o),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new m(this.x,this.y,this.width,this.height)},equals:function(t){var e=a.isPlainValue(t)?m.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?_:g)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=_.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?v:p)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=v.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?_:g)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=_.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==n||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(m.read(arguments)):this._containsPoint(_.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=m.read(arguments),e=a.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=m.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},unite:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},include:function(){var t=_.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new m(e,n,i-e,r-n)},expand:function(){var t=v.read(arguments),e=t.width,n=t.height;return new m(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===n?t:e)-this.height)}},a.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],a="get"+r,o="get"+s,h="set"+r,u="set"+s,l="set"+n;this["get"+n]=function(t){return new(t?_:g)(this[a](),this[o](),this,l)},this[l]=function(){var t=_.read(arguments);this[h](t.x),this[u](t.y)}},{beans:!0})),y=m.extend({initialize:function(t,e,n,i,r,s){this._set(t,e,n,i,!0),this._owner=r,this._setter=s},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=m.prototype;return a.each(["x","y","width","height"],function(t){var e=a.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},a.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),w=a.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments,r=i.length,s=!0;if(r>=6?this._set.apply(this,i):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):s=!1:r?s=!1:this.reset(),!s)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,s,a){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return a.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new w(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=c.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,a.pick(t,!0),e),this.isIdentity())},translate:function(){var t=_.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,e=_.read(t),n=_.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=e.x,this._b*=e.x,this._c*=e.y,this._d*=e.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=_.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),a=n-n*r+i*s,o=i-n*s-i*r,h=this._a,u=this._b,l=this._c,c=this._d;return this._a=r*h+s*l,this._b=r*u+s*c,this._c=-s*h+r*l,this._d=-s*u+r*c,this._tx+=a*h+o*l,this._ty+=a*u+o*c,this._changed(),this},shear:function(){var t=arguments,e=_.read(t),n=_.read(t,0,{readNull:!0});n&&this.translate(n);var i=this._a,r=this._b;return this._a+=e.y*this._c,this._b+=e.y*this._d,this._c+=e.x*i,this._d+=e.x*r,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,e=_.read(t),n=_.read(t,0,{readNull:!0}),i=Math.PI/180,r=new _(Math.tan(e.x*i),Math.tan(e.y*i));return this.shear(r,n)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,a=t._a,o=t._c,h=t._b,u=t._d,l=t._tx,c=t._ty;this._a=a*n+h*r,this._c=o*n+u*r,this._b=a*i+h*s,this._d=o*i+u*s,this._tx+=l*n+c*r,this._ty+=l*i+c*s,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,h=t._a,u=t._c,l=t._b,c=t._d,f=t._tx,d=t._ty;this._a=h*n+u*i,this._c=h*r+u*s,this._b=l*n+c*i,this._d=l*r+c*s,this._tx=h*a+u*o+f,this._ty=l*a+c*o+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,a=t*i-e*n,o=null;return a&&!isNaN(a)&&isFinite(r)&&isFinite(s)&&(this._a=i/a,this._b=-e/a,this._c=-n/a,this._d=t/a,this._tx=(n*s-i*r)/a,this._ty=(e*r-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new w(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(_.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new _),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],a=t[i+1];e[i]=s*this._a+a*this._c+this._tx,e[i+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=i[a],h=1&a;o<r[h]?r[h]=o:o>s[h]&&(s[h]=o)}return e||(e=new m),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(_.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,u=i*a-r*s,l=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(h)){var c=t.x-this._tx,f=t.y-this._ty;e||(e=new _),l=e._set((c*a-f*s)/u,(f*i-c*r)/u,n)}return l},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,a=this._d,o=i*a-r*s,h=Math.sqrt,u=Math.atan2,l=180/Math.PI;if(0!==i||0!==r){var c=h(i*i+r*r);t=Math.acos(i/c)*(r>0?1:-1),e=[c,o/c],n=[u(i*s+r*a,c*c),0]}else if(0!==s||0!==a){var f=h(s*s+a*a);t=Math.asin(s/f)*(a>0?1:-1),e=[o/f,f],n=[0,u(i*s+r*a,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*l,scaling:new _(e),skewing:new _(n[0]*l,n[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new _(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},a.each(["a","b","c","d","tx","ty"],function(t){var e=a.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),x=a.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new _(this._px,this._py)},getVector:function(){return new _(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return x.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return x.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return x.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return _.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return _.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,a,o,h,u){h||(n-=t,i-=e,a-=r,o-=s);var l=n*o-i*a;if(!f.isMachineZero(l)){var c=t-r,d=e-s,g=(a*d-o*c)/l,v=(n*d-i*c)/l;if(u||-1e-12<g&&g<1+1e-12&&-1e-12<v&&v<1+1e-12)return u||(g=g<=0?0:g>=1?1:g),new _(t+g*n,e+g*i)}},getSide:function(t,e,n,i,r,s,a,o){a||(n-=t,i-=e);var h=r-t,u=h*i-(s-e)*n;return!o&&f.isMachineZero(u)&&(u=(h*n+h*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,s,a){return a||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/(i>n?i*Math.sqrt(1+n*n/(i*i)):n*Math.sqrt(1+i*i/(n*n)))},getDistance:function(t,e,n,i,r,s,a){return Math.abs(x.getSignedDistance(t,e,n,i,r,s,a))}}}),b=u.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){u.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=G.create(this,t||rt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return a.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,a=r[s];a?a.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new k({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:M,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(n,t)},insertLayer:function(t,e){if(e instanceof k){e._remove(!1,!0),a.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(n,new k(C.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return C._getItems(this,t)},getItem:function(t){return C._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return a.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var a=e[s];a&&a!=n&&delete a[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new a({offset:new _(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new w],updateMatrix:!0}),s=0,o=i.length;s<o;s++)i[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var h=this._selectionItems,u=this._scope.settings.handleSize,l=this._updateVersion;for(var c in h)h[c]._drawSelection(t,e,u,h,l);t.restore()}}}),C=a.extend(o,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=a.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new w,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return a.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&a.isPlainObject(t),r=i&&!0===t.internal,s=this._matrix=new w,o=i&&t.project||ht.project,h=ht.settings;return this._id=r?null:d.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&h.applyMatrix,e&&s.translate(e),s._owner=this,this._style=new Z(o._currentStyle,this,o),r||i&&0==t.insert||!h.insertItems&&(!i||!0!==t.insert)?this._setProject(o):(i&&t.parent||o)._insertItem(n,this,!0),i&&t!==C.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var n={},i=this;function r(r){for(var s in r){var o=i[s];a.equals(o,"leading"===s?1.2*r.fontSize:r[s])||(n[s]=a.serialize(o,t,"data"!==s,e))}}return r(this._serializeFields),this instanceof S||r(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,i=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=n),16&t&&(this._globalMatrix=n),i&&72&t&&C._clearBoundsCache(i),2&t&&C._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||n,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},a.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=a.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?_:g,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(_.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new g(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=_.read(arguments,0,{clone:!0,readNull:!0}),this._position=n}},a.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof w,i=a.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i).rect;return arguments.length?r:new y(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=m.read(arguments),e=this.getBounds(),n=this._matrix,i=new w,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new w).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(C._updateBoundsCache(this,e.cacheItem),C._getBounds(n,t,e)):new m},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),a=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,i),o=this._bounds;if(C._updateBoundsCache(this._parent||this._symbol,r),a&&o&&a in o)return{rect:(f=o[a]).rect.clone(),nonscaling:f.nonscaling};var h=this._getBounds(t||s,e),u=h.rect||h,l=this._style,c=h.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(a){o||(this._bounds=o={});var f=o[a]={rect:u.clone(),nonscaling:c,internal:i}}return{rect:u,nonscaling:c}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=n;for(var i=0,r=e.list,s=r.length;i<s;i++){var a=r[i];a!==t&&(a._bounds=a._position=n,a._boundsCache&&C._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,s=i,a=r,o=!1;n=n||{};for(var h=0,u=t.length;h<u;h++){var l=t[h];if(l._visible&&!l.isEmpty(!0)){var c=l._getCachedBounds(e&&e.appended(l._matrix),n,!0),f=c.rect;i=Math.min(f.x,i),s=Math.min(f.y,s),r=Math.max(f.x+f.width,r),a=Math.max(f.y+f.height,a),c.nonscaling&&(o=!0)}}return{rect:isFinite(i)?new m(i,s,r-i,a-s):new m,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new g(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=_.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new w,s=f.isZero;if(s(t.x)||s(t.y))r.translate(i.translation),n&&r.rotate(n),r.scale(e.x,e.y),this._matrix.set(r);else{var a=this.getPosition(!0);r.translate(a),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(a.negate()),this.transform(r)}i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,s=i.length;r<s;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0)));return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof k)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return a.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(C.NO_INSERT),i=this._children,r=a.pick(t?t.insert:n,t===n||!0===t),s=a.pick(t?t.deep:n,!0);i&&e.copyAttributes(this),i&&!s||e.copyContent(this),i||e.copyAttributes(this),r&&e.insertAbove(this);var o=this._name,h=this._parent;if(o&&h){i=h._children;for(var u=o,l=1;i[o];)o=u+" "+l++;o!==u&&e.setName(o)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var s=n[i];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,h=t._name;this._data=o?a.clone(o):null,h&&this.setName(h)},rasterize:function(t,e){var i,r,s;a.isPlainObject(t)?(i=t.resolution,r=t.insert,s=t.raster):(i=t,r=e),s?s.matrix.reset(!0):s=new P(C.NO_INSERT);var o=this.getStrokeBounds(),h=(i||this.getView().getResolution())/72,u=o.getTopLeft().floor(),l=o.getBottomRight().ceil(),c=new v(l.subtract(u)),f=c.multiply(h);if(s.setSize(f,!0),!f.isZero()){var d=s.getContext(!0),_=(new w).scale(h).translate(u.negate());d.save(),_.applyToContext(d),this.draw(d,new a({matrices:[_]})),d.restore()}return s.transform((new w).translate(u.add(c.divide(2))).scale(1/h)),(r===n||r)&&s.insertAbove(this),s},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(_.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return m.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new B.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof C&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){var t=arguments;return this._hitTest(_.read(t),T.getOptions(t))}function e(){var t=arguments,e=_.read(t),n=T.getOptions(t),i=[];return this._hitTest(e,new a({all:i},n)),i}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var a=r[s],o=a!==i&&a._hitTest(t,e,n);if(o&&!e.all)return o}return null}return b.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var i=this._matrix,r=n?n.appended(i):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(e.tolerance,1e-12),o=e._tolerancePadding=new v(B._getStrokePadding(s,i._shiftless().invert()));if(!(t=i._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(o.multiply(2))._containsPoint(t))return null;var h,u,l=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==a.hyphenate(this._class)||e.class&&!(this instanceof e.class)),c=e.match,f=this;function d(t){return t&&c&&!c(t)&&(t=null),t&&e.all&&e.all.push(t),t}function _(e,n){var i=n?h["get"+n]():f.getPosition();if(t.subtract(i).divide(o).length<=1)return new T(e,f,{name:n?a.hyphenate(n):e,point:i})}var g=e.position,p=e.center,m=e.bounds;if(l&&this._parent&&(g||p||m)){if((p||m)&&(h=this.getInternalBounds()),!(u=g&&_("position")||p&&_("center","Center"))&&m)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],w=0;w<8&&!u;w++)u=_("bounds",y[w]);u=d(u)}return u||(u=this._hitTestChildren(t,e,r)||l&&d(this._hitTestSelf(t,e,r,this.getStrokeScaling()?null:r._shiftless().invert()))||null),u&&u.point&&(u.point=i.transform(u.point)),u},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new T("fill",this)},matches:function(t,e){var n=i(t);if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+a.capitalize(t)]():"type"===t?a.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(a.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],s=n[i];if(a.isPlainObject(r)&&a.isPlainObject(s)){if(!t(r,s))return!1}else if(!a.equals(r,s))return!1}return!0}(e,s)}return a.equals(s,e)},getItems:function(t){return C._getItems(this,t,this._matrix)},getItem:function(t){return C._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,r,s,o){if(!s){var h="object"===i(n)&&n,u=h&&h.overlapping,l=h&&h.inside,c=(x=u||l)&&m.read([x]);s={items:[],recursive:h&&!1!==h.recursive,inside:!!l,overlapping:!!u,rect:c,path:u&&new B.Rectangle({rectangle:c,insert:!1})},h&&(n=a.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var f=e._children,d=s.items;r=(c=s.rect)&&(r||new w);for(var _=0,g=f&&f.length;_<g;_++){var v=f[_],p=r&&r.appended(v._matrix),y=!0;if(c){var x=v.getBounds(p);if(!c.intersects(x))continue;c.contains(x)||s.overlapping&&(x.contains(c)||s.path.intersects(v,p))||(y=!1)}if(y&&v.matches(n)&&(d.push(v),o))break;if(!1!==s.recursive&&t(v,n,p,s,o),o&&d.length>0)break}return d}}},{importJSON:function(t){var e=a.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(n,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var i={},r=(e=a.slice(e)).length-1;r>=0;r--){var s=(l=e[r])&&l._id;!l||i[s]?e.splice(r,1):(l._remove(!1,!0),i[s]=!0)}a.splice(n,e,t,0);for(var o=this._project,h=o._changes,u=(r=0,e.length);r<u;r++){var l,c=(l=e[r])._name;l._parent=this,l._setProject(o,!0),c&&l.setName(c),h&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(n,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(n,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),a.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=a.pick(e,this._children.length);for(var n=a.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var e=this._children,n=e?e.length:0;if(t){for(var i=0;i<n;i++)if(!e[i].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},a.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?a:_).read(n),r=_.read(n,0,{readNull:!0});return this.transform((new w)[t](i,r||this.getPosition(!0)))}},{translate:function(){var t=new w;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n){var i=this._matrix,r=t&&!t.isIdentity(),s=n&&this._canApplyMatrix||this._applyMatrix&&(r||!i.isIdentity()||e&&this._children);if(!r&&!s)return this;if(r){!t.isInvertible()&&i.isInvertible()&&(i._backup=i.getValues()),i.prepend(t,!0);var a=this._style,o=a.getFillColor(!0),h=a.getStrokeColor(!0);o&&o.transform(t),h&&h.transform(t)}if(s&&(s=this._transformContent(i,e,n))){var u=this._pivot;u&&i._transformPoint(u,u,!0),i.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var l=this._bounds,c=this._position;(r||s)&&this._changed(25);var f=r&&l&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var d in l){var _=l[d];if(_.nonscaling)delete l[d];else if(s||!_.internal){var g=_.rect;t._transformBounds(g,g)}}this._bounds=l;var v=l[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else r&&c&&this._pivot&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(_.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(_.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(_.read(arguments))},localToParent:function(){return this._matrix._transformPoint(_.read(arguments))},fitBounds:function(t,e){t=m.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,a=new m(new _,new v(n.width*s,n.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var s=i.getStrokeJoin(),a=i.getStrokeCap(),o=i.getMiterLimit();if(s&&(t.lineJoin=s),a&&(t.lineCap=a),o&&(t.miterLimit=o),ht.support.nativeDash){var h=i.getDashArray(),u=i.getDashOffset();h&&h.length&&("setLineDash"in t?(t.setLineDash(h),t.lineDashOffset=u):(t.mozDash=h,t.mozDashOffset=u))}}if(i.hasShadow()){var l=e.pixelRatio||1,c=n._shiftless().prepend((new w).scale(l,l)),f=c.transform(new _(i.getShadowBlur(),0)),d=c.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,s=this._matrix,a=i[i.length-1].appended(s);if(a.isInvertible()){r=r?r.appended(a):a,i.push(a),e.updateMatrix&&(this._globalMatrix=a);var o,h,u,l=this._blendMode,c=f.clamp(this._opacity,0,1),d="normal"===l,_=st.nativeModes[l],g=d&&1===c||e.dontStart||e.clip||(_||d&&c<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var p=this.getStrokeBounds(r);if(!p.width||!p.height)return void i.pop();u=e.offset,h=e.offset=p.getTopLeft().floor(),o=t,t=rt.getContext(p.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var m=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,y=!g&&e.clipItem,w=!m||y;if(g?(t.globalAlpha=c,_&&(t.globalCompositeOperation=l)):w&&t.translate(-h.x,-h.y),w&&(g?s:r).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,r,m),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(this.getFillRule()),g||(st.process(l,t,o,c,h.subtract(u).multiply(v)),rt.release(t),e.offset=u)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof F)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,h=4&s;if(this._drawSelected||(a=!1),(a||o||h)&&this._isUpdated(r)){var u,l=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=l?l.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,i),h){var d=this.getPosition(!0),_=this._parent,g=_?_.localToGlobal(d):d,v=g.x,p=g.y;t.beginPath(),t.arc(v,p,f,0,2*Math.PI,!0),t.stroke();for(var m=[[0,-1],[1,0],[0,1],[-1,0]],y=f,w=n+1,x=0;x<4;x++){var b=m[x],C=b[0],S=b[1];t.moveTo(v+C*y,p+S*y),t.lineTo(v+C*w,p+S*w),t.stroke()}}if(o){var k=c._transformCorners(this.getInternalBounds());t.beginPath();for(x=0;x<8;x++)t[x?"lineTo":"moveTo"](k[x],k[++x]);t.closePath(),t.stroke();for(x=0;x<8;x++)t.fillRect(k[x]-f,k[++x]-f,n,n)}}},_canComposite:function(){return!1}},a.each(["down","drag","up","move"],function(t){this["removeOn"+a.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=n&&n.easing,r=n&&n.start,s=null!=n&&("number"==typeof n?n:n.duration),a=new nt(this,t,e,s,i,r);return s&&this.on("frame",function t(e){a._handleFrame(1e3*e.time),a.running||this.off("frame",t)}),a},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),S=C.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),2050&e&&(this._clipItem=n)},_getClipItem:function(){var t=this._clipItem;if(t===n){t=null;for(var e=this._children,i=0,r=e.length;i<r;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(i._matrix.prepended(e),a.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,a=r.length;s<a;s++){var o=r[s];o!==i&&o.draw(t,e)}}}),k=S.extend({_class:"Layer",initialize:function(){S.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),I=C.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&a.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new p(t.width,t.height,this,"setSize")},setSize:function(){var t=v.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(v.min(this._radius,t.divide(2).abs())):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new p(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=v.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){n=v.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(B[a.capitalize(this._type)])({center:new _,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),ht.settings.applyMatrix&&e.setApplyMatrix(!0),(t===n||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),a=r.hasStroke(),o=e.dontFinish||e.clip,h=!i;if(s||a||o){var u=this._type,l=this._radius,c="circle"===u;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,l,0,2*Math.PI,!0);else{var f=c?l:l.width,d=c?l:l.height,_=this._size,g=_.width,v=_.height;if(h&&"rectangle"===u&&0===f&&0===d)t.rect(-g/2,-v/2,g,v);else{var p=g/2,m=v/2,y=.44771525016920644,w=f*y,x=d*y,b=[-p,-m+d,-p,-m+x,-p+w,-m,-p+f,-m,p-f,-m,p-w,-m,p,-m+x,p,-m+d,p,m-d,p,m-x,p-w,m,p-f,m,-p+f,m,-p+w,m,-p,m-x,-p,m-d];i&&i.transform(b,b,32),t.moveTo(b[0],b[1]),t.bezierCurveTo(b[2],b[3],b[4],b[5],b[6],b[7]),p!==f&&t.lineTo(b[8],b[9]),t.bezierCurveTo(b[10],b[11],b[12],b[13],b[14],b[15]),m!==d&&t.lineTo(b[16],b[17]),t.bezierCurveTo(b[18],b[19],b[20],b[21],b[22],b[23]),p!==f&&t.lineTo(b[24],b[25]),t.bezierCurveTo(b[26],b[27],b[28],b[29],b[30],b[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(B._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var a=new _(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(r),h=o.subtract(a.multiply(i));if(new m(n?o.add(a.multiply(n)):o,h).contains(e))return{point:h,quadrant:s}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,s,a){var o=!1,h=this._style,u=r.stroke&&h.hasStroke(),l=r.fill&&h.hasFill();if(u||l){var c=this._type,f=this._radius,d=u?h.getStrokeWidth()/2:0,_=r._tolerancePadding.add(B._getStrokePadding(d,!h.getStrokeScaling()&&a));if("rectangle"===c){var g=_.multiply(2),v=t(this,i,g);if(v)o=e(i.subtract(v.point),f,_,v.quadrant);else{var p=new m(this._size).setCenter(0,0),y=p.expand(g),w=p.expand(g.negate());o=y._containsPoint(i)&&!w._containsPoint(i)}}else o=e(i,f,_)}return o?new T(u?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var s=a.create(I.prototype);return s._type=t,s._size=n,s._radius=i,s._initialize(a.getNamed(r),e),s}return{Circle:function(){var e=arguments,n=_.readNamed(e,"center"),i=a.readNamed(e,"radius");return t("circle",n,new v(2*i),i,e)},Rectangle:function(){var e=arguments,n=m.readNamed(e,"rectangle"),i=v.min(v.readNamed(e,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),i,e)},Ellipse:function(){var e=arguments,n=I._readEllipse(e),i=n.radius;return t("ellipse",n.center,i.multiply(2),i,e)},_readEllipse:function(t){var e,n;if(a.hasNamed(t,"radius"))e=_.readNamed(t,"center"),n=v.readNamed(t,"radius");else{var i=m.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),P=C.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,e){if(!this._initialize(t,e!==n&&_.read(arguments))){var r,a=i(t),o="string"===a?s.getElementById(t):"object"===a?t:null;if(o&&o!==C.NO_INSERT)if(o.getContext||null!=o.naturalHeight)r=o;else if(o){var h=v.read(arguments);h.isZero()||(r=rt.getCanvas(h))}r?this.setImage(r):this.setSource(t)}this._size||(this._size=new v,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=rt.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new p(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,e){var n=v.read(arguments);if(n.equals(this._size))e&&this.clear();else if(n.width>0&&n.height>0){var i=!e&&this.getElement();this._setImage(rt.getCanvas(n)),i&&this.getContext(!0).drawImage(i,0,0,n.width,n.height)}else this._canvas&&rt.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new _(0,0).transform(t),n=new _(1,0).transform(t).subtract(e),i=new _(0,1).transform(t).subtract(e);return new v(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function n(t){var n=e.getView(),i=t&&t.type||"load";n&&e.responds(i)&&(ht=n._scope,e.emit(i,new X(t)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&$.add(t,{load:function(i){e._setImage(t),n(i)},error:n})},_setImage:function(t){this._canvas&&rt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new v(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=rt.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){rt.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var n=new e.Image,i=this._crossOrigin;i&&(n.crossOrigin=i),t&&(n.src=t),this.setImage(n)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing="string"==typeof t?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=m.read(arguments),e=rt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=m.read(arguments),e=new P(C.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=_.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof N?(n=t,e=t.getBounds()):"object"===i(t)&&("width"in t?e=new m(t):"x"in t&&(e=new m(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=Math.min(e.width,32),s=Math.min(e.height,32),o=P._sampleContext;o?o.clearRect(0,0,33,33):o=P._sampleContext=rt.getContext(new v(32)),o.save();var h=(new w).scale(r/e.width,s/e.height).translate(-e.x,-e.y);h.applyToContext(o),n&&n.draw(o,new a({clip:!0,matrices:[h]})),this._matrix.applyToContext(o);var u=this.getElement(),l=this._size;u&&o.drawImage(u,-l.width/2,-l.height/2),o.restore();for(var c=o.getImageData(.5,.5,Math.ceil(r),Math.ceil(s)).data,f=[0,0,0],d=0,_=0,g=c.length;_<g;_+=4){var p=c[_+3];d+=p,p/=255,f[0]+=c[_]*p,f[1]+=c[_+1]*p,f[2]+=c[_+2]*p}for(_=0;_<3;_++)f[_]/=d;return d?V.read(f):null},getPixel:function(){var t=_.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new V("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=arguments,e=_.read(t),n=V.read(t),i=n._convert("rgb"),r=n._alpha,s=this.getContext(!0),a=s.createImageData(1,1),o=a.data;o[0]=255*i[0],o[1]=255*i[1],o[2]=255*i[2],o[3]=null!=r?255*r:255,s.putImageData(a,e.x,e.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=v.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=m.read(arguments);return t.isEmpty()&&(t=new m(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=_.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new T("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();if(i&&i.width>0&&i.height>0){t.globalAlpha=f.clamp(this._opacity,0,1),this._setStyles(t,e,n);var r=this._smoothing,s="off"===r;W.setPrefixed(t,s?"imageSmoothingEnabled":"imageSmoothingQuality",!s&&r),t.drawImage(i,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),M=C.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==n&&_.read(arguments,1))||this.setDefinition(t instanceof A?t:new A(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=e.extend({all:!1}),r=this._definition._item._hitTest(t,i,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),A=a.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=d.get(),this.project=ht.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return a.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&C._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new _),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new M(this,t)},clone:function(){return new A(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),T=a.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&a.read(t);return new a({type:null,tolerance:ht.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),O=a.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,r,s,a,o){var h,u,l,c,f=arguments.length;f>0&&(null==t||"object"===i(t)?1===f&&t&&"point"in t?(h=t.point,u=t.handleIn,l=t.handleOut,c=t.selection):(h=t,u=e,l=r,c=s):(h=[t,e],u=r!==n?[r,s]:null,l=a!==n?[a,o]:null)),new z(h,this,"_point"),new z(u,this,"_handleIn"),new z(l,this,"_handleOut"),c&&this.setSelection(c)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),a.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(_.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(_.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(_.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==n?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new L(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var r=t||{},s=r.type,a=r.factor,o=this.getPrevious(),h=this.getNext(),u=(o||this)._point,l=this._point,c=(h||this)._point,f=u.getDistance(l),d=l.getDistance(c);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&h){var g=u.subtract(c),v=a===n?.4:a,p=v*f/(f+d);e||this.setHandleIn(g.multiply(p)),i||this.setHandleOut(g.multiply(p-v))}}else{var m=a===n?.5:a,y=Math.pow(f,m),w=y*y,x=Math.pow(d,m),b=x*x;if(!e&&o){var C=2*b+3*x*y+w,S=3*x*(x+y);this.setHandleIn(0!==S?new _((b*u._x+C*l._x-w*c._x)/S-l._x,(b*u._y+C*l._y-w*c._y)/S-l._y):new _)}if(!i&&h){C=2*w+3*y*x+b,S=3*y*(y+x);this.setHandleOut(0!==S?new _((w*c._x+C*l._x-b*u._x)/S-l._x,(w*c._y+C*l._y-b*u._y)/S-l._y):new _)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new O(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new O(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,s=t._point,a=e._point,o=t._handleIn,h=e._handleIn,u=e._handleOut,l=t._handleOut;this._point._set(i*s._x+r*a._x,i*s._y+r*a._y,!0),this._handleIn._set(i*o._x+r*h._x,i*o._y+r*h._y,!0),this._handleOut._set(i*l._x+r*u._x,i*l._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,a=i._x,o=i._y,h=2;return e[0]=a,e[1]=o,r&&(e[h++]=r._x+a,e[h++]=r._y+o),s&&(e[h++]=s._x+a,e[h++]=s._y+o),t&&(t._transformCoordinates(e,e,h/2),a=e[0],o=e[1],n?(i._x=a,i._y=o,h=2,r&&(r._x=e[h++]-a,r._y=e[h++]-o),s&&(s._x=e[h++]-a,s._y=e[h++]-o)):(r||(e[h++]=a,e[h++]=o),s||(e[h++]=a,e[h++]=o))),e}}),z=_.extend({initialize:function(t,e,i){var r,s,a;if(t)if((r=t[0])!==n)s=t[1];else{var o=t;(r=o.x)===n&&(r=(o=_.read(arguments)).x),s=o.y,a=o.selected}else r=s=0;this._x=r,this._y=s,this._owner=e,e[i]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=f.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),E=a.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,s,a,o){var h,u,l,c,f,d,_=arguments.length;3===_?(this._path=t,h=e,u=n):_?1===_?"segment1"in t?(h=new O(t.segment1),u=new O(t.segment2)):"point1"in t?(l=t.point1,f=t.handle1,d=t.handle2,c=t.point2):Array.isArray(t)&&(l=[t[0],t[1]],c=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===_?(h=new O(t),u=new O(e)):4===_?(l=t,f=e,d=n,c=i):8===_&&(l=[t,e],c=[a,o],f=[n-t,i-e],d=[r-a,s-o]):(h=new O,u=new O),this._segment1=h||new O(l,null,f),this._segment2=u||new O(c,d,null)},_serialize:function(t,e){return a.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=n},clone:function(){return new E(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return E.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(_.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(_.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(_.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(_.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return E.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new _(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=E.getLength(this.getValues(),0,1)),this._length},getArea:function(){return E.getArea(this.getValues())},getLine:function(){return new x(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new E(E.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return E.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var i=E.subdivide(this.getValues(),t),r=i[0],s=i[1],a=e||this.hasHandles(),o=this._segment1,h=this._segment2,u=this._path;a&&(o._handleOut._set(r[2]-r[0],r[3]-r[1]),h._handleIn._set(s[4]-s[6],s[5]-s[7]));var l=r[6],c=r[7],f=new O(new _(l,c),a&&new _(r[4]-l,r[5]-c),a&&new _(s[2]-l,s[3]-c));u?(u.insert(o._index+1,f),n=this.getNext()):(this._segment2=f,this._changed(),n=new E(f,h))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===n?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===n?.5:e?t:this.getTimeAt(t))},reversed:function(){return new E(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,s=t._handleOut,a=e._handleIn,o=e._point,h=r.x,u=r.y,l=o.x,c=o.y,f=i?[h,u,h,u,l,c,l,c]:[h,u,h+s._x,u+s._y,l+a._x,c+a._y,l,c];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],h=t[5],u=t[6],l=t[7];e===n&&(e=.5);var c=1-e,f=c*i+e*s,d=c*r+e*a,_=c*s+e*o,g=c*a+e*h,v=c*o+e*u,p=c*h+e*l,m=c*f+e*_,y=c*d+e*g,w=c*_+e*v,x=c*g+e*p,b=c*m+e*w,C=c*y+e*x;return[[i,r,f,d,m,y,b,C],[b,C,w,x,v,p,u,l]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],s=t[i+2],a=t[i+4],o=t[i+6];if(r>=s==s>=a&&s>=a==a>=o||E.isStraight(t))n.push(t);else{var h=3*(s-a)-r+o,u=2*(r+a)-4*s,l=s-r,c=[],d=f.solveQuadratic(h,u,l,c,1e-8,1-1e-8);if(d){c.sort();var _=c[0],g=E.subdivide(t,_);n.push(g[0]),d>1&&(_=(c[1]-_)/(1-_),g=E.subdivide(g[1],_),n.push(g[0])),n.push(g[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,s){var a=t[e],o=t[e+2],h=t[e+4],u=t[e+6],l=0;if(!(a<n&&u<n&&o<n&&h<n||a>n&&u>n&&o>n&&h>n)){var c=3*(o-a),d=3*(h-o)-c,_=u-a-c-d;l=f.solveCubic(_,d,c,a-n,i,r,s)}return l},getTimeOf:function(t,e){var n=new _(t[0],t[1]),i=new _(t[6],t[7]);if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var r=[e.x,e.y],s=[],a=0;a<2;a++)for(var o=E.solveCubic(t,a,r[a],s,0,1),h=0;h<o;h++){var u=s[h];if(e.isClose(E.getPoint(t,u),1e-7))return u}return e.isClose(n,1e-7)?0:e.isClose(i,1e-7)?1:null},getNearestTime:function(t,e){if(E.isStraight(t)){var n=t[0],i=t[1],r=t[6]-n,s=t[7]-i,a=r*r+s*s;if(0===a)return 0;var o=((e.x-n)*r+(e.y-i)*s)/a;return o<1e-12?0:o>.999999999999?1:E.getTimeOf(t,new _(n+o*r,i+o*s))}var h=1/0,u=0;function l(n){if(n>=0&&n<=1){var i=e.getDistance(E.getPoint(t,n),!0);if(i<h)return h=i,u=n,!0}}for(var c=0;c<=100;c++)l(c/100);for(var f=.005;f>1e-8;)l(u-f)||l(u+f)||(f/=2);return u},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=E.subdivide(t,e)[1]),n<1&&(t=E.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=3*r-2*n-h,c=3*s-2*i-u,f=3*a-2*h-n,d=3*o-2*u-i;return Math.max(l*l,f*f)+Math.max(c*c,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7];return 3*((h-n)*(i+s)-(o-e)*(r+a)+r*(e-s)-i*(n-a)+h*(s+e/3)-o*(a+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)E._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new m(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,a,o,h){function u(t,e){var n=t-e,i=t+e;n<a[r]&&(a[r]=n),i>o[r]&&(o[r]=i)}s/=2;var l=a[r]+s,c=o[r]-s;if(t<l||e<l||n<l||i<l||t>c||e>c||n>c||i>c)if(e<t!=e<i&&n<t!=n<i)u(t,0),u(i,0);else{var d=3*(e-n)-t+i,_=2*(t+n)-4*e,g=e-t,v=f.solveQuadratic(d,_,g,h);u(i,0);for(var p=0;p<v;p++){var m=h[p],y=1-m;1e-8<=m&&m<=1-1e-8&&u(y*y*y*t+3*y*y*m*e+3*y*m*m*n+m*m*m*i,s)}}}}},a.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=B[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),a.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var s=new x(t,i);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(i.add(n))<1e-7){var a=r.dot(r),o=r.dot(e)/a,h=r.dot(n)/a;return o>=0&&o<=1&&h<=0&&h>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],s=e[6],a=e[7];return t(new _(i,r),new _(e[2]-i,e[3]-r),new _(e[4]-s,e[5]-a),new _(s,a),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new L(this,t):null},getTimeAt:function(t,e){return E.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=_.read(arguments);return t.isZero()?[]:E.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(_.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return E.getTimeOf(this.getValues(),_.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=_.read(arguments),e=this.getValues(),n=E.getNearestTime(e,t),i=E.getPoint(e,n);return new L(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return a.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return E[t](i,n?e:E.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return E[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=9*(i-s)+3*(o-e),l=6*(e+s)-12*i,c=3*(i-e),f=9*(r-a)+3*(h-n),d=6*(n+a)-12*r,_=3*(r-n);return function(t){var e=(u*t+l)*t+c,n=(f*t+d)*t+_;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],a=t[2],o=t[3],h=t[4],u=t[5],l=t[6],c=t[7],d=f.isZero;d(a-r)&&d(o-s)&&(a=r,o=s),d(h-l)&&d(u-c)&&(h=l,u=c);var g,v,p=3*(a-r),m=3*(h-a)-p,y=l-r-p-m,w=3*(o-s),x=3*(u-o)-w,b=c-s-w-x;if(0===n)g=0===e?r:1===e?l:((y*e+m)*e+p)*e+r,v=0===e?s:1===e?c:((b*e+x)*e+w)*e+s;else{if(e<1e-8?(g=p,v=w):e>1-1e-8?(g=3*(l-h),v=3*(c-u)):(g=(3*y*e+2*m)*e+p,v=(3*b*e+2*x)*e+w),i){0===g&&0===v&&(e<1e-8||e>1-1e-8)&&(g=h-a,v=u-o);var C=Math.sqrt(g*g+v*v);C&&(g/=C,v/=C)}if(3===n){h=6*y*e+2*m,u=6*b*e+2*x;var S=Math.pow(g*g+v*v,1.5);g=0!==S?(g*u-v*h)/S:0,v=0}}return 2===n?new _(v,-g):new _(g,v)}return{statics:{classify:function(t){var e=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=r*(i-u)+s*(h-e)+e*u-i*h,c=3*(a*(s-i)+o*(e-r)+r*i-s*e),d=c-l,_=d-l+(e*(u-o)+i*(a-h)+h*o-u*a),g=Math.sqrt(_*_+d*d+c*c),v=0!==g?1/g:0,p=f.isZero;function m(t,e,i){var r=e!==n,s=r&&e>0&&e<1,a=r&&i>0&&i<1;return!r||(s||a)&&("loop"!==t||s&&a)||(t="arch",s=a=!1),{type:t,roots:s||a?s&&a?e<i?[e,i]:[i,e]:[s?e:i]:null}}if(d*=v,c*=v,p(_*=v))return p(d)?m(p(c)?"line":"quadratic"):m("serpentine",c/(3*d));var y=3*d*d-4*_*c;if(p(y))return m("cusp",d/(2*_));var w=y>0?Math.sqrt(y/3):Math.sqrt(-y),x=2*_;return m(y>0?"serpentine":"loop",(d+w)/x,(d-w)/x)},getLength:function(i,r,s,a){if(r===n&&(r=0),s===n&&(s=1),E.isStraight(i)){var o=i;s<1&&(o=E.subdivide(o,s)[0],r/=s),r>0&&(o=E.subdivide(o,r)[1]);var h=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(h*h+u*u)}return f.integrate(a||t(i),r,s,e(r,s))},getTimeAt:function(i,r,s){if(s===n&&(s=r<0?1:0),0===r)return s;var a=Math.abs,o=r>0,h=o?s:0,u=o?1:s,l=t(i),c=E.getLength(i,h,u,l),d=a(r)-c;if(a(d)<1e-12)return o?u:h;if(d>1e-12)return null;var _=r/c,g=0;return f.findRoot(function(t){return g+=f.integrate(l,s,t,e(s,t)),s=t,g-r},l,s+_,h,u,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=3*i-e-3*s+t[6],h=3*e-6*i+3*s,u=-3*e+3*i,l=3*r-n-3*a+t[7],c=3*n-6*r+3*a,d=-3*n+3*r,_=[];return f.solveCubic(9*(o*o+l*l),9*(o*h+c*l),2*(h*h+c*c)+3*(u*o+d*l),u*h+c*d,_,1e-8,1-1e-8),_.sort()}}}},new function(){function t(t,e,n,i,r,s,a){var o=!a&&n.getPrevious()===r,h=!a&&n!==r&&n.getNext()===r;if(null!==i&&i>=(o?1e-8:0)&&i<=(h?1-1e-8:1)&&null!==s&&s>=(h?1e-8:0)&&s<=(o?1-1e-8:1)){var u=new L(n,i,null,a),l=new L(r,s,null,a);u._intersection=l,l._intersection=u,e&&!e(u)||L.insert(t,u,!0)}}function e(t,e,i,r){return t[0][1]<i?n(t,!0,i):e[0][1]>r?n(e,!1,r):t[0][0]}function n(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],h=t[s][1];if(e?h>=n:h<=n)return h===n?o:i+(n-r)*(o-i)/(h-r);i=o,r=h}return null}function i(t,e,n,i,r){var s=f.isZero;if(s(i)&&s(r)){var a=E.getTimeOf(t,new _(e,n));return null===a?[]:[a]}for(var o=Math.atan2(-r,i),h=Math.sin(o),u=Math.cos(o),l=[],c=[],d=0;d<8;d+=2){var g=t[d]-e,v=t[d+1]-n;l.push(g*u-v*h,g*h+v*u)}return E.solveCubic(l,1,0,c,0,1),c}function r(n,r,s,o,h,u){var l=Math.min,c=Math.max;if(c(n[0],n[2],n[4],n[6])+1e-12>l(r[0],r[2],r[4],r[6])&&l(n[0],n[2],n[4],n[6])-1e-12<c(r[0],r[2],r[4],r[6])&&c(n[1],n[3],n[5],n[7])+1e-12>l(r[1],r[3],r[5],r[7])&&l(n[1],n[3],n[5],n[7])-1e-12<c(r[1],r[3],r[5],r[7])){var f=a(n,r);if(f)for(var d=0;d<2;d++){var g=f[d];t(h,u,s,g[0],o,g[1],!0)}else{var v=E.isStraight(n),p=E.isStraight(r),m=v&&p,y=v&&!p,w=h.length;if((m?function(e,n,i,r,s,a){var o=x.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(s,a,i,E.getTimeOf(e,o),r,E.getTimeOf(n,o))}:v||p?function(e,n,r,s,a,o,h){for(var u=n[0],l=n[1],c=i(e,u,l,n[6]-u,n[7]-l),f=0,d=c.length;f<d;f++){var _=c[f],g=E.getPoint(e,_),v=E.getTimeOf(n,g);null!==v&&t(a,o,h?s:r,h?v:_,h?r:s,h?_:v)}}:function n(i,r,s,a,o,h,u,l,c,f,d,_,g){if(++c>=4096||++l>=40)return c;var v,p,m=r[0],y=r[1],w=r[6],b=r[7],C=x.getSignedDistance,S=C(m,y,w,b,r[2],r[3]),k=C(m,y,w,b,r[4],r[5]),I=S*k>0?.75:4/9,P=I*Math.min(0,S,k),M=I*Math.max(0,S,k),A=C(m,y,w,b,i[0],i[1]),T=C(m,y,w,b,i[2],i[3]),O=C(m,y,w,b,i[4],i[5]),z=C(m,y,w,b,i[6],i[7]),L=function(t,e,n,i){var r,s=[0,t],a=[1/3,e],o=[2/3,n],h=[1,i],u=e-(2*t+i)/3,l=n-(t+2*i)/3;if(u*l<0)r=[[s,a,h],[s,o,h]];else{var c=u/l;r=[c>=2?[s,a,h]:c<=.5?[s,o,h]:[s,a,o,h],[s,h]]}return(u||l)<0?r.reverse():r}(A,T,O,z),N=L[0],B=L[1];if(0===S&&0===k&&0===A&&0===T&&0===O&&0===z||null==(v=e(N,B,P,M))||null==(p=e(N.reverse(),B.reverse(),P,M)))return c;var F=f+(d-f)*v,j=f+(d-f)*p;if(Math.max(g-_,j-F)<1e-9){var R=(F+j)/2,D=(_+g)/2;t(o,h,u?a:s,u?D:R,u?s:a,u?R:D)}else{i=E.getPart(i,v,p);var q=g-_;if(p-v>.8)if(j-F>q)R=(F+j)/2,c=n(r,(V=E.subdivide(i,.5))[0],a,s,o,h,!u,l,c,_,g,F,R),c=n(r,V[1],a,s,o,h,!u,l,c,_,g,R,j);else{var V;D=(_+g)/2,c=n((V=E.subdivide(r,.5))[0],i,a,s,o,h,!u,l,c,_,D,F,j),c=n(V[1],i,a,s,o,h,!u,l,c,D,g,F,j)}else c=0===q||q>=1e-9?n(r,i,a,s,o,h,!u,l,c,_,g,F,j):n(i,r,s,a,o,h,u,l,c,F,j,_,g)}return c})(y?r:n,y?n:r,y?o:s,y?s:o,h,u,y,0,0,0,1,0,1),!m||h.length===w)for(d=0;d<4;d++){var b=d>>1,C=1&d,S=6*b,k=6*C,I=new _(n[S],n[S+1]),P=new _(r[k],r[k+1]);I.isClose(P,1e-12)&&t(h,u,s,b,o,C)}}}return h}function s(e,n,i,r){var s=E.classify(e);if("loop"===s.type){var a=s.roots;t(i,r,n,a[0],n,a[1])}return i}function a(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=x.getDistance,s=E.isStraight(t),a=E.isStraight(e),o=s&&a,h=n(t)<n(e),u=h?e:t,l=h?t:e,c=u[0],f=u[1],d=u[6]-c,g=u[7]-f;if(r(c,f,d,g,l[0],l[1],!0)<1e-7&&r(c,f,d,g,l[6],l[7],!0)<1e-7)!o&&r(c,f,d,g,u[2],u[3],!0)<1e-7&&r(c,f,d,g,u[4],u[5],!0)<1e-7&&r(c,f,d,g,l[2],l[3],!0)<1e-7&&r(c,f,d,g,l[4],l[5],!0)<1e-7&&(s=a=o=!0);else if(o)return null;if(s^a)return null;for(var v=[t,e],p=[],m=0;m<4&&p.length<2;m++){var y=1&m,w=1^y,b=m>>1,C=E.getTimeOf(v[y],new _(v[w][b?6:0],v[w][b?7:1]));if(null!=C){var S=y?[b,C]:[C,b];(!p.length||i(S[0]-p[0][0])>1e-8&&i(S[1]-p[0][1])>1e-8)&&p.push(S)}if(m>2&&!p.length)break}if(2!==p.length)p=null;else if(!o){var k=E.getPart(t,p[0][0],p[1][0]),I=E.getPart(e,p[0][1],p[1][1]);(i(I[2]-k[2])>1e-7||i(I[3]-k[3])>1e-7||i(I[4]-k[4])>1e-7||i(I[5]-k[5])>1e-7)&&(p=null)}return p}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?r(e,n,this,t,[]):s(e,this,[])},statics:{getOverlaps:a,getIntersections:function(t,e,n,i,a,o){var h=!e;h&&(e=t);for(var u=t.length,c=e.length,f=new Array(u),d=h?f:new Array(c),_=[],g=0;g<u;g++)f[g]=t[g].getValues(i);if(!h)for(g=0;g<c;g++)d[g]=e[g].getValues(a);for(var v=l.findCurveBoundsCollisions(f,d,1e-7),p=0;p<u;p++){var m=t[p],y=f[p];h&&s(y,m,_,n);var w=v[p];if(w)for(var x=0;x<w.length;x++){if(o&&_.length)return _;var b=w[x];if(!h||b>p){var C=e[b];r(y,d[b],m,C,_,n)}}}return _},getCurveLineIntersections:i,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=e.normalize(),c=l.x,d=l.y,_=3*h-9*a+9*r-3*n,g=3*u-9*o+9*s-3*i,v=6*a-12*r+6*n,p=6*o-12*s+6*i,m=3*r-3*n,y=3*s-3*i,w=2*_*d-2*g*c,x=[];if(Math.abs(w)<f.CURVETIME_EPSILON){if(0!=(w=_*p-g*v)){var b=-(_*y-g*m)/w;b>=0&&b<=1&&x.push(b)}}else{var C=(v*v-4*_*m)*d*d+(-2*v*p+4*g*m+4*_*y)*c*d+(p*p-4*g*y)*c*c,S=v*d-p*c;if(C>=0&&0!=w){var k=Math.sqrt(C),I=-(S+k)/w,P=(-S+k)/w;I>=0&&I<=1&&x.push(I),P>=0&&P<=1&&x.push(P)}}return x}}}}),L=a.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var e=t.getCurve();e?this._setCurve(e):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function n(t){var n=t&&t.getCurve();if(n&&null!=(e._time=n.getTimeOf(e._point)))return e._setCurve(n),n}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof L){var i=this.getCurve(),r=t.getCurve(),s=i._path;if(s===r._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),h=!e&&this._intersection,u=!e&&t._intersection;n=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!h&&!u||h&&u&&h.equals(u,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=c.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),n=t.getTime(),i=e>=1e-8&&e<=1-1e-8,r=n>=1e-8&&n<=1-1e-8;if(i&&r)return!this.isTouching();var s=this.getCurve(),a=s&&e<1e-8?s.getPrevious():s,o=t.getCurve(),h=o&&n<1e-8?o.getPrevious():o;if(e>1-1e-8&&(s=s.getNext()),n>1-1e-8&&(o=o.getNext()),!(a&&s&&h&&o))return!1;var u=[];function l(t,e){var n=t.getValues(),i=E.classify(n).roots||E.getPeaks(n),r=i.length,s=E.getLength(n,e&&r?i[r-1]:0,!e&&r?i[0]:1);u.push(r?s:s/32)}function c(t,e,n){return e<n?t>e&&t<n:t>e||t<n}i||(l(a,!0),l(s,!1)),r||(l(h,!0),l(o,!1));var f=this.getPoint(),d=Math.min.apply(Math,u),_=i?s.getTangentAtTime(e):s.getPointAt(d).subtract(f),g=i?_.negate():a.getPointAt(-d).subtract(f),v=r?o.getTangentAtTime(n):o.getPointAt(d).subtract(f),p=r?v.negate():h.getPointAt(-d).subtract(f),m=g.getAngle(),y=_.getAngle(),w=p.getAngle(),x=v.getAngle();return!!(i?c(m,w,x)^c(y,w,x)&&c(m,x,w)^c(y,x,w):c(w,m,y)^c(x,m,y)&&c(w,y,m)^c(x,y,m))},hasOverlap:function(){return!!this._overlap}},a.each(E._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){var i=t.length,r=0,s=i-1;function a(n,r){for(var s=n+r;s>=-1&&s<=i;s+=r){var a=t[(s%i+i)%i];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(;r<=s;){var o,h=r+s>>>1,u=t[h];if(n&&(o=e.equals(u)?u:a(h,-1)||a(h,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var l=e.getPath(),c=u.getPath();(l!==c?l._id-c._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?s=h-1:r=h+1}return t.splice(r,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),N=C.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(a.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?F:B)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,n,i,r=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,a=new _,o=new _;function h(t,n){var i=+e[t];return s&&(i+=a[n]),i}function u(t){return new _(h(t,"x"),h(t+1,"y"))}this.clear();for(var l=0,c=r&&r.length;l<c;l++){var f=r[l],d=f[0],g=d.toLowerCase(),p=(e=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(s=d===g,"z"!==n||/[mz]/.test(g)||this.moveTo(a),g){case"m":case"l":for(var m="m"===g,y=0;y<p;y+=2)this[m?"moveTo":"lineTo"](a=u(y)),m&&(o=a,m=!1);i=a;break;case"h":case"v":var w="h"===g?"x":"y";a=a.clone();for(y=0;y<p;y++)a[w]=h(y,w),this.lineTo(a);i=a;break;case"c":for(y=0;y<p;y+=6)this.cubicCurveTo(u(y),i=u(y+2),a=u(y+4));break;case"s":for(y=0;y<p;y+=4)this.cubicCurveTo(/[cs]/.test(n)?a.multiply(2).subtract(i):a,i=u(y),a=u(y+2)),n=g;break;case"q":for(y=0;y<p;y+=4)this.quadraticCurveTo(i=u(y),a=u(y+2));break;case"t":for(y=0;y<p;y+=2)this.quadraticCurveTo(i=/[qt]/.test(n)?a.multiply(2).subtract(i):a,a=u(y)),n=g;break;case"a":for(y=0;y<p;y+=7)this.arcTo(a=u(y+5),new v(+e[y],+e[y+1]),+e[y+2],+e[y+4],+e[y+3]);break;case"z":this.closePath(1e-12),a=o}n=g}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),a=r?s:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(a),1e-12)?E.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,a,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var t=_.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var a=e[r].getNearestLocation(t);a._distance<n&&(n=a._distance,i=a)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],a=e[r],o=this[r];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=o.length,u=a.length;if(h<u)for(var l=i?O:B,c=h;c<u;c++)this.add(new l);else h>u&&this[i?"removeSegments":"removeChildren"](u,h);for(c=0;c<u;c++)o[c].interpolate(s[c],a[c],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,s=i.length,a=[],o=0;e=!0;for(var h=l.findItemBoundsCollisions(n,i,f.GEOMETRIC_EPSILON),u=r-1;u>=0&&e;u--){var c=n[u];e=!1;var d=h[u];if(d)for(var _=d.length-1;_>=0&&!e;_--)c.compare(i[d[_]])&&(a[d[_]]||(a[d[_]]=!0,o++),e=!0)}e=e&&o===s}return e}}),B=N.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=arguments,r=Array.isArray(t)?"object"===i(t[0])?t:e:!t||t.size!==n||t.x===n&&t.point===n?null:e;r&&r.length>0?this.setSegments(r):(this._curves=n,this._segmentSelection=0,r||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!r&&t)},_equals:function(t){return this._closed===t._closed&&a.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=n,32&e)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 64&e&&(this._bounds=n)},getStyle:function(){var t=this._parent;return(t instanceof F?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=n,i){var r=t[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(O.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new E(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new E(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){var n,i,r,s,a,o,h,u,l=this._segments,f=l.length,d=new c(e),_=new Array(6),g=!0,v=[];function p(e,l){if(e._transformCoordinates(t,_),n=_[0],i=_[1],g)v.push("M"+d.pair(n,i)),g=!1;else if(a=_[2],o=_[3],a===n&&o===i&&h===r&&u===s){if(!l){var c=n-r,f=i-s;v.push(0===c?"v"+d.number(f):0===f?"h"+d.number(c):"l"+d.pair(c,f))}}else v.push("c"+d.pair(h-r,u-s)+" "+d.pair(a-r,o-s)+" "+d.pair(n-r,i-s));r=n,s=i,h=_[4],u=_[5]}if(!f)return"";for(var m=0;m<f;m++)p(l[m]);return this._closed&&f>0&&(p(l[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,o=(e=s?n.length:e,0);o<r;o++){var h=t[o];h._path&&(h=t[o]=h.clone()),h._path=this,h._index=e+o,h._selection&&this._updateSelection(h,0,h._selection)}if(s)a.push(n,t);else{n.splice.apply(n,[e,0].concat(t));o=e+r;for(var u=n.length;o<u;o++)n[o]._index=o}if(i){var l=this._countCurves(),c=e>0&&e+r-1===l?e-1:e,f=c,d=Math.min(c+r,l);t._curves&&(i.splice.apply(i,[c,0].concat(t._curves)),f+=t._curves.length);for(o=f;o<d;o++)i.splice(o,0,new E(this,null,null));this._adjustCurves(c,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)(n=r[s])._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var e=arguments;return e.length>1&&"number"!=typeof t?this._add(O.readList(e)):this._add([O.read(e)])[0]},insert:function(t,e){var n=arguments;return n.length>2&&"number"!=typeof e?this._add(O.readList(n,1),t):this._add([O.read(n,1)],t)[0]},addSegment:function(){return this._add([O.read(arguments)])[0]},insertSegment:function(t){return this._add([O.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(O.readList(t))},insertSegments:function(t,e){return this._add(O.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=a.pick(e,this._segments.length);var i=this._segments,r=this._curves,s=i.length,o=i.splice(t,e-t),h=o.length;if(!h)return o;for(var u=0;u<h;u++){var l=o[u];l._selection&&this._updateSelection(l,l._selection,0),l._index=l._path=null}u=t;for(var c=i.length;u<c;u++)i[u]._index=u;if(r){var f=t>0&&e===s+(this._closed?1:0)?t-1:t;for(u=(r=r.splice(f,h)).length-1;u>=0;u--)r[u]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var s=i+1===r;t+=E.getArea(E.getValues(e[i],e[s?0:i+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var s,a=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new B(C.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(t,e){var i,r=e===n?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var a=t.getFirstSegment();if(r&&r._point.isClose(a._point,n))r.setHandleOut(a._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,n)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,n)?(o.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var h=this.getFirstSegment(),u=this.getLastSegment();return h!==u&&h._point.isClose(u._point,n)&&(h.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(i)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new j(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new O(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new O(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new R(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,i=t||{},r=i.type||"asymmetric",s=this._segments,a=s.length,o=this._closed;function h(t,n){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==e)throw new Error(t._class+" "+i+" of "+r+" is not part of "+e);n&&t instanceof E&&i++}else i="number"==typeof t?t:n;return Math.min(i<0&&o?i%a:i<0?i+a:i,a-1)}var u=o&&i.from===n&&i.to===n,l=h(i.from,0),c=h(i.to,a-1);if(l>c)if(o)l-=a;else{var f=l;l=c,c=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,_=Math.min,g=c-l+1,v=g-1,p=u?_(g,4):1,m=p,y=p,w=[];if(o||(m=_(1,l),y=_(1,a-c-1)),(v+=m+y)<=1)return;for(var x=0,b=l-m;x<=v;x++,b++)w[x]=s[(b<0?b+a:b)%a]._point;var C=w[0]._x+2*w[1]._x,S=w[0]._y+2*w[1]._y,k=2,I=v-1,P=[C],M=[S],A=[k],T=[],O=[];for(x=1;x<v;x++){var z=x<I,L=z?4:d?2:7,N=z?4:d?3:8,B=z?2:d?0:1,F=(z?1:d?1:2)/k;k=A[x]=L-F,C=P[x]=N*w[x]._x+B*w[x+1]._x-F*C,S=M[x]=N*w[x]._y+B*w[x+1]._y-F*S}T[I]=P[I]/A[I],O[I]=M[I]/A[I];for(x=v-2;x>=0;x--)T[x]=(P[x]-T[x+1])/A[x],O[x]=(M[x]-O[x+1])/A[x];T[v]=(3*w[v]._x-T[I])/2,O[v]=(3*w[v]._y-O[I])/2;x=m;var j=v-y;for(b=l;x<=j;x++,b++){var R=s[b<0?b+a:b],D=R._point,q=T[x]-D._x,V=O[x]-D._y;(u||x<j)&&R.setHandleOut(q,V),(u||x>m)&&R.setHandleIn(-q,-V)}}else for(x=l;x<=c;x++)s[x<0?x+a:x].smooth(i,!u&&x===l,!u&&x===c)},toShape:function(t){if(!this._closed)return null;var e,i,r,s,a,o,h,u=this._segments;function l(t,e){var n=u[t],i=n.getNext(),r=u[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function c(t){var e=u[t],n=e.getNext(),i=e._handleOut,r=n._handleIn;if(i.isOrthogonal(r)){var s=e._point,a=n._point,o=new x(s,i,!0).intersect(new x(a,r,!0),!0);return o&&f.isZero(i.getLength()/o.subtract(s).getLength()-.5522847498307936)&&f.isZero(r.getLength()/o.subtract(a).getLength()-.5522847498307936)}return!1}function d(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this.hasHandles()&&4===u.length&&l(0,2)&&l(1,3)&&(a=u[1],o=a.getPrevious(),h=a.getNext(),o._handleOut.isZero()&&a._handleIn.isZero()&&a._handleOut.isZero()&&h._handleIn.isZero()&&a._point.subtract(o._point).isOrthogonal(h._point.subtract(a._point)))?(e=I.Rectangle,i=new v(d(0,3),d(0,1)),s=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&c(0)&&c(2)&&c(4)&&c(6)&&l(1,5)&&l(3,7)?(e=I.Rectangle,r=(i=new v(d(1,6),d(0,3))).subtract(new v(d(0,7),d(1,2))).divide(2),s=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&c(0)&&c(1)&&c(2)&&c(3)&&(f.isZero(d(0,2)-d(1,3))?(e=I.Circle,r=d(0,2)/2):(e=I.Ellipse,r=new v(d(2,0)/2,d(3,1)/2)),s=u[1]._point),e){var _=this.getPosition(!0),g=new e({center:_,size:i,radius:r,insert:!1});return g.copyAttributes(this,!0),g._matrix.prepend(this._matrix),g.rotate(s.subtract(_).getAngle()+90),(t===n||t)&&g.insertAbove(this),g}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof F)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,s=i.length;if(!r||!s)return r==s;for(var a,o,h=n[0].getValues(),u=[],l=0,c=0,f=0;f<s;f++){var d=i[f].getValues();if(u.push(d),v=E.getOverlaps(h,d)){a=!f&&v[0][0]>0?s-1:f,o=v[0][1];break}}var _,g=Math.abs;for(d=u[a];h&&d;){var v;if(v=E.getOverlaps(h,d))if(g(v[0][0]-c)<1e-8){1===(c=v[1][0])&&(h=++l<r?n[l].getValues():null,c=0);var p=v[0][1];if(g(p-o)<1e-8){if(_||(_=[a,p]),1===(o=v[1][1])&&(++a>=s&&(a=0),d=u[a]||i[a].getValues(),o=0),!h)return _[0]===a&&_[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){var r,s,a,o,h,u,l=this,c=this.getStyle(),f=this._segments,d=f.length,_=this._closed,g=e._tolerancePadding,v=g,p=e.stroke&&c.hasStroke(),m=e.fill&&c.hasFill(),y=e.curves,w=p?c.getStrokeWidth()/2:m&&e.tolerance>0||y?0:null;function x(e,n){return t.subtract(e).divide(n).length<=1}function b(t,n,i){if(!e.selected||n.isSelected()){var r=t._point;if(n!==r&&(n=n.add(r)),x(n,v))return new T(i,l,{segment:t,point:n})}}function C(t,n){return(n||e.segments)&&b(t,t._point,"segment")||!n&&e.handles&&(b(t,t._handleIn,"handle-in")||b(t,t._handleOut,"handle-out"))}function S(t){o.add(t)}function k(e){var n,h=_||e._index>0&&e._index<d-1;return"round"===(h?r:s)?x(e._point,v):(o=new B({internal:!0,closed:!0}),h?e.isSmooth()||B._addBevelJoin(e,r,w,a,null,i,S,!0):"square"===s&&B._addSquareCap(e,s,w,null,i,S,!0),o.isEmpty()?void 0:o.contains(t)||(n=o.getNearestLocation(t))&&x(n.getPoint(),g))}if(null!==w&&(w>0?(r=c.getStrokeJoin(),s=c.getStrokeCap(),a=c.getMiterLimit(),v=v.add(B._getStrokePadding(w,i))):r=s="round"),!e.ends||e.segments||_){if(e.segments||e.handles)for(var I=0;I<d;I++)if(u=C(f[I]))return u}else if(u=C(f[0],!0)||C(f[d-1],!0))return u;if(null!==w){if(h=this.getNearestLocation(t)){var P=h.getTime();0===P||1===P&&d>1?k(h.getSegment())||(h=null):x(h.getPoint(),v)||(h=null)}if(!h&&"miter"===r&&d>1)for(I=0;I<d;I++){var M=f[I];if(t.getDistance(M._point)<=a*w&&k(M)){h=M.getLocation();break}}}return!h&&m&&this._contains(t)||h&&!p&&!y?new T("fill",this):h?new T(p?"stroke":"curve",this,{location:h,point:h.getPoint()}):null}},a.each(E._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=_.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,a=e[i];if((n+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new L(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=_.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,s=i.length;r<s;r++){for(var a=i[r],o=a.getTimesWithTangent(t),h=0,u=o.length;h<u;h++){var l=n+a.getOffsetAtTime(o[h]);e.indexOf(l)<0&&e.push(l)}n+=a.length}return e}}),new function(){function t(t,e,n){var i,r,s,a,o,h,u,l,c=e._segments,f=c.length,d=new Array(6),_=!0;function g(e){if(n)e._transformCoordinates(n,d),i=d[0],r=d[1];else{var c=e._point;i=c._x,r=c._y}if(_)t.moveTo(i,r),_=!1;else{if(n)o=d[2],h=d[3];else{var f=e._handleIn;o=i+f._x,h=r+f._y}o===i&&h===r&&u===s&&l===a?t.lineTo(i,r):t.bezierCurveTo(u,l,o,h,i,r)}if(s=i,a=r,n)u=d[4],l=d[5];else{f=e._handleOut;u=s+f._x,l=a+f._y}}for(var v=0;v<f;v++)g(c[v]);e._closed&&f>0&&g(c[0])}return{_draw:function(e,n,i,r){var s=n.dontStart,a=n.dontFinish||n.clip,o=this.getStyle(),h=o.hasFill(),u=o.hasStroke(),l=o.getDashArray(),c=!ht.support.nativeDash&&u&&l&&l.length;function f(t){return l[(t%c+c)%c]}if(s||e.beginPath(),(h||u&&!c||a)&&(t(e,this,r),this._closed&&e.closePath()),!a&&(h||u)&&(this._setStyles(e,n,i),h&&(e.fill(o.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(c){s||e.beginPath();for(var d,_=new j(this,.25,32,!1,r),g=_.length,v=-o.getDashOffset(),p=0;v>0;)v-=f(p--)+f(p--);for(;v<g;)d=v+f(p++),(v>0||d>0)&&_.drawPart(e,Math.max(v,0),Math.max(d,0)),v=d+f(p++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){if(!(i<=0))for(var r,s,a=i/2,o=i-2,h=a-1,u=new Array(6),l=0,c=e.length;l<c;l++){var f=e[l],d=f._selection;if(f._transformCoordinates(n,u),r=u[0],s=u[1],2&d&&g(2),4&d&&g(4),t.fillRect(r-a,s-a,i,i),o>0&&!(1&d)){var _=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(r-h,s-h,o,o),t.fillStyle=_}}function g(e){var n=u[e],i=u[e+1];r==n&&s==i||(t.beginPath(),t.moveTo(r,s),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,a,0,2*Math.PI,!0),t.fill())}}(e,this._segments,n,ht.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new O(_.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new O(_.read(arguments))])},cubicCurveTo:function(){var e=arguments,n=_.read(e),i=_.read(e),r=_.read(e),s=t(this);s.setHandleOut(n.subtract(s._point)),this._add([new O(r,i.subtract(r))])},quadraticCurveTo:function(){var e=arguments,n=_.read(e),i=_.read(e),r=t(this)._point;this.cubicCurveTo(n.add(r.subtract(n).multiply(1/3)),n.add(i.subtract(n).multiply(1/3)),i)},curveTo:function(){var e=arguments,n=_.read(e),i=_.read(e),r=a.pick(a.read(e),.5),s=1-r,o=t(this)._point,h=n.subtract(o.multiply(s*s)).subtract(i.multiply(r*r)).divide(2*r*s);if(h.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(h,i)},arcTo:function(){var e,n,i,r,s=arguments,o=Math.abs,h=Math.sqrt,u=t(this),l=u._point,c=_.read(s),d=a.peek(s);if("boolean"==typeof(b=a.pick(d,!0)))var g=(S=l.add(c).divide(2)).add(S.subtract(l).rotate(b?-90:90));else if(a.remain(s)<=2)g=c,c=_.read(s);else if(!l.equals(c)){var p=v.read(s),m=f.isZero;if(m(p.width)||m(p.height))return this.lineTo(c);var y=a.read(s),b=!!a.read(s),C=!!a.read(s),S=l.add(c).divide(2),k=($=l.subtract(S).rotate(-y)).x,I=$.y,P=o(p.width),M=o(p.height),A=P*P,T=M*M,z=k*k,E=I*I,L=h(z/A+E/T);if(L>1&&(A=(P*=L)*P,T=(M*=L)*M),o(L=(A*T-A*E-T*z)/(A*E+T*z))<1e-12&&(L=0),L<0)throw new Error("Cannot create an arc with the given arguments");e=new _(P*I/M,-M*k/P).multiply((C===b?-1:1)*h(L)).rotate(y).add(S),n=(i=(r=(new w).translate(e).rotate(y).scale(P,M))._inverseTransform(l)).getDirectedAngle(r._inverseTransform(c)),!b&&n>0?n-=360:b&&n<0&&(n+=360)}if(g){var N=new x(l.add(g).divide(2),g.subtract(l).rotate(90),!0),B=new x(g.add(c).divide(2),c.subtract(g).rotate(90),!0),F=new x(l,c),j=F.getSide(g);if(!(e=N.intersect(B,!0))){if(!j)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}n=(i=l.subtract(e)).getDirectedAngle(c.subtract(e));var R=F.getSide(e,!0);0===R?n=j*o(n):j===R&&(n+=n<0?360:-360)}if(n){for(var D=o(n),q=D>=360?4:Math.ceil((D-1e-7)/90),V=n/q,U=V*Math.PI/360,H=4/3*Math.sin(U)/(1+Math.cos(U)),Z=[],W=0;W<=q;W++){var $=c,G=null;if(W<q&&(G=i.rotate(90).multiply(H),r?($=r._transformPoint(i),G=r._transformPoint(i.add(G)).subtract($)):$=e.add(i)),W){var J=i.rotate(-90).multiply(H);r&&(J=r._transformPoint(i.add(J)).subtract($)),Z.push(new O($,J,G))}else u.setHandleOut(G);i=i.rotate(V)}this._add(Z)}},lineBy:function(){var e=_.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=arguments,n=_.read(e),i=_.read(e),r=a.read(e),s=t(this)._point;this.curveTo(s.add(n),s.add(i),r)},cubicCurveBy:function(){var e=arguments,n=_.read(e),i=_.read(e),r=_.read(e),s=t(this)._point;this.cubicCurveTo(s.add(n),s.add(i),s.add(r))},quadraticCurveBy:function(){var e=arguments,n=_.read(e),i=_.read(e),r=t(this)._point;this.quadraticCurveTo(r.add(n),r.add(i))},arcBy:function(){var e=arguments,n=t(this)._point,i=n.add(_.read(e)),r=a.pick(a.peek(e),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(_.read(e)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return B[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){var a=t[0];if(!a)return new m;var o=new Array(6),h=a._transformCoordinates(i,new Array(6)),u=h.slice(0,2),l=u.slice(),c=new Array(2);function f(t){t._transformCoordinates(i,o);for(var e=0;e<2;e++)E._addBounds(h[e],h[e+4],o[e+2],o[e],e,s?s[e]:0,u,l,c);var n=h;h=o,o=n}for(var d=1,_=t.length;d<_;d++)f(t[d]);return e&&f(a),new m(u[0],u[1],l[0]-u[0],l[1]-u[1])},getStrokeBounds:function(t,e,n,i,r){var s=n.getStyle(),a=s.hasStroke(),o=s.getStrokeWidth(),h=a&&n._getStrokeMatrix(i,r),u=a&&B._getStrokePadding(o,h),l=B.getBounds(t,e,n,i,r,u);if(!a)return l;var c=o/2,f=s.getStrokeJoin(),d=s.getStrokeCap(),_=s.getMiterLimit(),g=new m(new v(u));function p(t){l=l.include(t)}function y(t){l=l.unite(g.setCenter(t._point.transform(i)))}function w(t,e){"round"===e||t.isSmooth()?y(t):B._addBevelJoin(t,e,c,_,i,h,p)}function x(t,e){"round"===e?y(t):B._addSquareCap(t,e,c,i,h,p)}var b=t.length-(e?0:1);if(b>0){for(var C=1;C<b;C++)w(t[C],f);e?w(t[0],f):(x(t[0],d),x(t[t.length-1],d))}return l},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new _(t,0).transform(e),i=new _(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),a=i.getLength(),o=Math.sin(r),h=Math.cos(r),u=Math.tan(r),l=Math.atan2(a*u,s),c=Math.atan2(a,u*s);return[Math.abs(s*Math.cos(l)*h+a*Math.sin(l)*o),Math.abs(a*Math.sin(c)*h+s*Math.cos(c)*o)]},_addBevelJoin:function(t,e,n,i,r,s,a,o){var h=t.getCurve(),u=h.getPrevious(),l=h.getPoint1().transform(r),c=u.getNormalAtTime(1).multiply(n).transform(s),f=h.getNormalAtTime(0).multiply(n).transform(s),d=c.getDirectedAngle(f);if((d<0||d>=180)&&(c=c.negate(),f=f.negate()),o&&a(l),a(l.add(c)),"miter"===e){var g=new x(l.add(c),new _(-c.y,c.x),!0).intersect(new x(l.add(f),new _(-f.y,f.x),!0),!0);g&&l.getDistance(g)<=i*n&&a(g)}a(l.add(f))},_addSquareCap:function(t,e,n,i,r,s,a){var o=t._point.transform(i),h=t.getLocation(),u=h.getNormal().multiply(0===h.getTime()?n:-n).transform(r);"square"===e&&(a&&(s(o.subtract(u)),s(o.add(u))),o=o.add(u.rotate(-90))),s(o.add(u)),s(o.subtract(u))},getHandleBounds:function(t,e,n,i,r){var s,a,o=n.getStyle();if(r.stroke&&o.hasStroke()){var h=n._getStrokeMatrix(i,r),u=o.getStrokeWidth()/2,l=u;"miter"===o.getStrokeJoin()&&(l=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(l=Math.max(l,u*Math.SQRT2)),s=B._getStrokePadding(u,h),a=B._getStrokePadding(l,h)}for(var c=new Array(6),f=1/0,d=-f,_=f,g=d,v=0,p=t.length;v<p;v++){t[v]._transformCoordinates(i,c);for(var y=0;y<6;y+=2){var w=y?s:a,x=w?w[0]:0,b=w?w[1]:0,C=c[y],S=c[y+1],k=C-x,I=C+x,P=S-b,M=S+b;k<f&&(f=k),I>d&&(d=I),P<_&&(_=P),M>g&&(g=M)}}return new m(f,_,d-f,g-_)}}});B.inject({statics:new function(){var t=.5522847498307936,e=[new O([-1,0],[0,t],[0,-t]),new O([0,-1],[-t,0],[t,0]),new O([1,0],[0,-t],[0,t]),new O([0,1],[t,0],[-t,0])];function n(t,e,n){var i=a.getNamed(n),r=new B(i&&0==i.insert&&C.NO_INSERT);return r._add(t),r._closed=e,r.set(i,{insert:!0})}function i(t,i,r){for(var s=new Array(4),a=0;a<4;a++){var o=e[a];s[a]=new O(o._point.multiply(i).add(t),o._handleIn.multiply(i),o._handleOut.multiply(i))}return n(s,!0,r)}return{Line:function(){var t=arguments;return n([new O(_.readNamed(t,"from")),new O(_.readNamed(t,"to"))],!1,t)},Circle:function(){var t=arguments,e=_.readNamed(t,"center"),n=a.readNamed(t,"radius");return i(e,new v(n),t)},Rectangle:function(){var e,i=arguments,r=m.readNamed(i,"rectangle"),s=v.readNamed(i,"radius",0,{readNull:!0}),a=r.getBottomLeft(!0),o=r.getTopLeft(!0),h=r.getTopRight(!0),u=r.getBottomRight(!0);if(!s||s.isZero())e=[new O(a),new O(o),new O(h),new O(u)];else{var l=(s=v.min(s,r.getSize(!0).divide(2))).width,c=s.height,f=l*t,d=c*t;e=[new O(a.add(l,0),null,[-f,0]),new O(a.subtract(0,c),[0,d]),new O(o.add(0,c),null,[0,-d]),new O(o.add(l,0),[-f,0],null),new O(h.subtract(l,0),null,[f,0]),new O(h.add(0,c),[0,-d],null),new O(u.subtract(0,c),null,[0,d]),new O(u.subtract(l,0),[f,0])]}return n(e,!0,i)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=arguments,e=I._readEllipse(t);return i(e.center,e.radius,t)},Oval:"#Ellipse",Arc:function(){var t=arguments,e=_.readNamed(t,"from"),n=_.readNamed(t,"through"),i=_.readNamed(t,"to"),r=a.getNamed(t),s=new B(r&&0==r.insert&&C.NO_INSERT);return s.moveTo(e),s.arcTo(n,i),s.set(r)},RegularPolygon:function(){for(var t=arguments,e=_.readNamed(t,"center"),i=a.readNamed(t,"sides"),r=a.readNamed(t,"radius"),s=360/i,o=i%3==0,h=new _(0,o?-r:r),u=o?-1:.5,l=new Array(i),c=0;c<i;c++)l[c]=new O(e.add(h.rotate((c+u)*s)));return n(l,!0,t)},Star:function(){for(var t=arguments,e=_.readNamed(t,"center"),i=2*a.readNamed(t,"points"),r=a.readNamed(t,"radius1"),s=a.readNamed(t,"radius2"),o=360/i,h=new _(0,-1),u=new Array(i),l=0;l<i;l++)u[l]=new O(e.add(h.rotate(o*l).multiply(l%2?s:r)));return n(u,!0,t)}}}});var F=N.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,r=i[0];r&&"number"==typeof r[0]&&(i=[i]);for(var s=n.length-1;s>=0;s--){var o=i[s];i!==n||o instanceof B||(i=a.slice(i)),Array.isArray(o)?i[s]=new B({segments:o,insert:!1}):o instanceof F&&(i.splice.apply(i,[s,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--){var r;(r=n[i].reduce(e)).isEmpty()&&r.remove()}return n.length?t.base.call(this):((r=new B(C.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)a.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var a=n[r],o=a._matrix;i.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===B||"path"===n.type?n:a.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=r.length;s<a;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;n[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return a.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new B(C.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=_.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},a.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}},{}));N.inject(new function(){var t=Math.min,e=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function s(t){return t._children||[t]}function o(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(e){for(var i=s(n),r=0,a=i.length;r<a;r++){(t=i[r])._closed||t.isEmpty()||(t.closePath(1e-12),t.getFirstSegment().setHandleIn(0,0),t.getLastSegment().setHandleOut(0,0))}n=n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0)}return n}function h(t,e,n,i,r){var s=new F(C.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&0==r.insert||s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.copyAttributes(n,!0),s}function u(t){return t.hasOverlap()||t.isCrossing()}function c(t,e,n,i){if(i&&(0==i.trace||i.stroke)&&/^(subtract|intersect)$/.test(n))return d(t,e,n);var c=o(t,!0),f=e&&t!==e&&o(e,!0),_=r[n];_[n]=!0,f&&(_.subtract||_.exclude)^f.isClockwise()^c.isClockwise()&&f.reverse();var g,m=p(L.expand(c.getIntersections(f,u))),x=s(c),b=f&&s(f),C=[],S=[];function k(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];a.push(C,i._segments),a.push(S,i.getCurves()),i._overlapsOnly=!0}}function I(t){for(var e=[],n=0,i=t&&t.length;n<i;n++)e.push(S[t[n]]);return e}if(m.length){k(x),b&&k(b);for(var P=new Array(S.length),M=0,A=S.length;M<A;M++)P[M]=S[M].getValues();var T=l.findCurveBoundsCollisions(P,P,0,!0),O={};for(M=0;M<S.length;M++){var z=S[M],E=z._path._id;(O[E]=O[E]||{})[z.getIndex()]={hor:I(T[M].hor),ver:I(T[M].ver)}}for(M=0,A=m.length;M<A;M++)y(m[M]._segment,c,f,O,_);for(M=0,A=C.length;M<A;M++){var N=C[M],B=N._intersection;N._winding||y(N,c,f,O,_),B&&B._overlap||(N._path._overlapsOnly=!1)}g=w(C,_)}else g=v(b?x.concat(b):x.slice(),function(t){return!!_[t]});return h(g,!0,t,e,i)}function d(t,e,n){var i=o(t),r=o(e),s=i.getIntersections(r,u),a="subtract"===n,l="divide"===n,c={},f=[];function d(t){if(!c[t._id]&&(l||r.contains(t.getPointAt(t.getLength()/2))^a))return f.unshift(t),c[t._id]=!0}for(var _=s.length-1;_>=0;_--){var g=s[_].split();g&&(d(g)&&g.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return d(i),h(f,!1,t,e)}function _(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function g(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function v(t,e,n){var r=t&&t.length;if(r){var s=a.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),o=t.slice().sort(function(t,e){return i(e.getArea())-i(t.getArea())}),h=o[0],u=l.findItemBoundsCollisions(o,null,f.GEOMETRIC_EPSILON);null==n&&(n=h.isClockwise());for(var c=0;c<r;c++){var d=o[c],_=s[d._id],g=0,v=u[c];if(v)for(var p=null,m=v.length-1;m>=0;m--)if(v[m]<c){p=p||d.getInteriorPoint();var y=o[v[m]];if(y.contains(p)){var w=s[y._id];g=w.winding,_.winding+=g,_.container=w.exclude?w.container:y;break}}if(e(_.winding)===e(g))_.exclude=!0,t[_.index]=null;else{var x=_.container;d.setClockwise(x?!x.isClockwise():n)}}}return t}function p(t,e,n){var i,r,s,a=e&&[],o=!1,h=n||[],u=n&&{};function l(t){return t._path._id+"."+t._segment1._index}for(var c=(n&&n.length)-1;c>=0;c--){(f=n[c])._path&&(u[l(f)]=!0)}for(c=t.length-1;c>=0;c--){var f,d,v=t[c],p=v._time,m=p,y=e&&!e(v);if((f=v._curve)&&(f!==r?(o=!f.hasHandles()||u&&u[l(f)],i=[],s=null,r=f):s>=1e-8&&(p/=s)),y)i&&i.push(v);else{if(e&&a.unshift(v),s=m,p<1e-8)d=f._segment1;else if(p>1-1e-8)d=f._segment2;else{var w=f.divideAtTime(p,!0);o&&h.push(f,w),d=w._segment1;for(var x=i.length-1;x>=0;x--){var b=i[x];b._time=(b._time-p)/(1-p)}}v._setSegment(d);var C=d._intersection,S=v._intersection;if(C){_(C,S);for(var k=C;k;)_(k._intersection,C),k=k._next}else d._intersection=S}}return n||g(h),a||t}function m(n,r,s,a,o){var h,u,l=Array.isArray(r)?r:r[s?"hor":"ver"],c=s?1:0,f=1^c,d=[n.x,n.y],_=d[c],g=d[f],v=1e-6,p=_-1e-9,y=_+1e-9,w=0,x=0,b=0,C=0,S=!1,k=!1,I=1,P=[];function M(i){var u=i[f+0],l=i[f+6];if(!(g<t(u,l)||g>e(u,l))){var d=i[c+0],w=i[c+2],x=i[c+4],k=i[c+6];if(u!==l){var M=g===u?0:g===l?1:p>e(d,w,x,k)||y<t(d,w,x,k)?1:E.solveCubic(i,f,g,P,0,1)>0?P[0]:1,A=0===M?d:1===M?k:E.getPoint(i,M)[s?"y":"x"],T=u>l?1:-1,O=h[f]>h[f+6]?1:-1,z=h[c+6];return g!==u?(A<p?b+=T:A>y?C+=T:S=!0,A>_-v&&A<_+v&&(I/=2)):(T!==O?d<p?b+=T:d>y&&(C+=T):d!=z&&(z<y&&A>y?(C+=T,S=!0):z>p&&A<p&&(b+=T,S=!0)),I/=4),h=i,!o&&A>p&&A<y&&0===E.getTangent(i,M)[s?"x":"y"]&&m(n,r,!s,a,!0)}(d<y&&k>p||k<y&&d>p)&&(S=!0)}}function A(n){var i=n[f+0],r=n[f+2],a=n[f+4],o=n[f+6];if(g<=e(i,r,a,o)&&g>=t(i,r,a,o))for(var h,u=n[c+0],l=n[c+2],d=n[c+4],_=n[c+6],v=p>e(u,l,d,_)||y<t(u,l,d,_)?[n]:E.getMonoCurves(n,s),m=0,w=v.length;m<w;m++)if(h=M(v[m]))return h}for(var T=0,O=l.length;T<O;T++){var z,L=l[T],N=L._path,B=L.getValues();if(!(T&&l[T-1]._path===N||(h=null,N._closed||(u=E.getValues(N.getLastCurve().getSegment2(),L.getSegment1(),null,!a))[f]!==u[f+6]&&(h=u),h))){h=B;for(var F=N.getLastCurve();F&&F!==L;){var j=F.getValues();if(j[f]!==j[f+6]){h=j;break}F=F.getPrevious()}}if(z=A(B))return z;if(T+1===O||l[T+1]._path!==N){if(u&&(z=A(u)))return z;!S||b||C||(b=C=N.isClockwise(a)^s?1:-1),w+=b,x+=C,b=C=0,S&&(k=!0,S=!1),u=null}}return w=i(w),x=i(x),{winding:e(w,x),windingL:w,windingR:x,quality:I,onPath:k}}function y(t,e,n,r,s){var a=[],o=t,h=0;do{if(y=t.getCurve()){var u=y.getLength();a.push({segment:t,curve:y,length:u}),h+=u}t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var l=[.5,.25,.75],c={winding:0,quality:-1},d=0;d<l.length&&c.quality<.5;d++){u=h*l[d];for(var _=0,g=a.length;_<g;_++){var v=a[_],p=v.length;if(u<=p){var y,w=(y=v.curve)._path,x=w._parent,b=x instanceof F?x:w,C=f.clamp(y.getTimeAt(u),.001,.999),S=y.getPointAtTime(C),k=i(y.getTangentAtTime(C).y)<Math.SQRT1_2,I=null;if(s.subtract&&n){var P=(b===e?n:e)._getWinding(S,k,!0);if(b===e&&P.winding||b===n&&!P.winding){if(P.quality<1)continue;I={winding:0,quality:1}}}(I=I||m(S,r[w._id][y.getIndex()],k,!0)).quality>c.quality&&(c=I);break}u-=p}}for(_=a.length-1;_>=0;_--)a[_].segment._winding=c}function w(t,e){var n,i=[];function r(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function s(t){if(t)for(var e=0,i=n.length;e<i;e++)if(t===n[e])return!0;return!1}function a(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function o(t,e){var i=t._intersection,a=i,o=[];function h(i,a){for(;i&&i!==a;){var h=i._segment,u=h&&h._path;if(u){var l=h.getNext()||u.getFirstSegment(),c=l._intersection;h!==t&&(s(h)||s(l)||l&&r(h)&&(r(l)||c&&r(c._segment)))&&o.push(h),e&&n.push(h)}i=i._next}}if(e&&(n=[t]),i){for(h(i);i&&i._previous;)i=i._previous;h(i,a)}return o}t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),s=!(!i||!i._overlap),a=t._path,o=e._path;return r^s?r?1:-1:!n^!i?n?1:-1:a!==o?a._id-o._id:t._index-e._index});for(var h=0,u=t.length;h<u;h++){var l,c,f,d=t[h],_=r(d),g=null,v=!1,p=!0,m=[];if(_&&d._path._overlapsOnly){var y=d._path,w=d._intersection._segment._path;y.compare(w)&&(y.getArea()&&i.push(y.clone(!1)),a(y),a(w),_=!1)}for(;_;){var x=!g,b=o(d,x),S=b.shift(),k=!(v=!x&&(s(d)||s(S)))&&S;if(x&&(g=new B(C.NO_INSERT),l=null),v){(d.isFirst()||d.isLast())&&(p=d._path._closed),d._visited=!0;break}if(k&&l&&(m.push(l),l=null),l||(k&&b.push(d),l={start:g._segments.length,crossings:b,visited:c=[],handleIn:f}),k&&(d=S),!r(d)){g.removeSegments(l.start);for(var I=0,P=c.length;I<P;I++)c[I]._visited=!1;c.length=0;do{(d=l&&l.crossings.shift())&&d._path||(d=null,(l=m.pop())&&(c=l.visited,f=l.handleIn))}while(l&&!r(d));if(!d)break}var M=d.getNext();g.add(new O(d._point,f,M&&d._handleOut)),d._visited=!0,c.push(d),d=M||d._path.getFirstSegment(),f=M&&M._handleIn}v&&(p&&(g.getFirstSegment().setHandleIn(f),g.setClosed(p)),0!==g.getArea()&&i.push(g))}return i}return{_getWinding:function(t,e,n){return m(t,this.getCurves(),e,n)},unite:function(t,e){return c(this,t,"unite",e)},intersect:function(t,e){return c(this,t,"intersect",e)},subtract:function(t,e){return c(this,t,"subtract",e)},exclude:function(t,e){return c(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?d(this,t,"divide"):h([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function n(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var i=!1,r=!1,s=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)}),o=i&&r&&[];if(s=L.expand(s),i)for(var h=p(s,function(t){return t.hasOverlap()},o),u=h.length-1;u>=0;u--){var l=h[u],c=l._path,f=l._segment,d=f.getPrevious(),_=f.getNext();n(d,c)&&n(_,c)&&(f.remove(),d._handleOut._set(0,0),_._handleIn._set(0,0),d===f||d.getCurve().hasLength()||(_._handleIn.set(d._handleIn),d.remove()))}r&&(p(s,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,s=i._segment;if(e&&r&&e._path&&r._path)return!0;n&&(n._intersection=null),s&&(s._intersection=null)},o),o&&g(o),e=w(a.each(e,function(t){a.push(this,t._segments)},[])));var v,m=e.length;return m>1&&t?(e!==t&&this.setChildren(e),v=this):1!==m||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),v=this),v||((v=new F(C.NO_INSERT)).addChildren(e),(v=v.reduce()).copyAttributes(this),this.replaceWith(v)),v},reorient:function(t,e){var i=this._children;return i&&i.length?this.setChildren(v(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==n&&this.setClockwise(e),this},getInteriorPoint:function(){var n=this.getBounds().getCenter(!0);if(!this.contains(n)){for(var i=this.getCurves(),r=n.y,s=[],a=[],o=0,h=i.length;o<h;o++){var u=i[o].getValues(),l=u[1],c=u[3],f=u[5],d=u[7];if(r>=t(l,c,f,d)&&r<=e(l,c,f,d))for(var _=E.getMonoCurves(u),g=0,v=_.length;g<v;g++){var p=_[g],m=p[1],y=p[7];if(m!==y&&(r>=m&&r<=y||r>=y&&r<=m)){var w=r===m?p[0]:r===y?p[6]:1===E.solveCubic(p,1,r,a,0,1)?E.getPoint(p,a[0]).x:(p[0]+p[6])/2;s.push(w)}}}s.length>1&&(s.sort(function(t,e){return t-e}),n.x=(s[0]+s[1])/2)}return n}}});var j=a.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){var s,a=[],o=[],h=0,u=1/(n||32),l=t._segments,c=l[0];function f(t,n){var s=E.getValues(t,n,r);a.push(s),function t(n,r,s,a){if(!(a-s>u)||i&&E.isStraight(n)||E.isFlatEnough(n,e||.25)){var l=n[6]-n[0],c=n[7]-n[1],f=Math.sqrt(l*l+c*c);f>0&&(h+=f,o.push({offset:h,curve:n,index:r,time:a}))}else{var d=E.subdivide(n,.5),_=(s+a)/2;t(d[0],r,s,_),t(d[1],r,_,a)}}(s,t._index,0,1)}for(var d=1,_=l.length;d<_;d++)f(c,s=l[d]),c=s;t._closed&&f(s||c,l[0]),this.curves=a,this.parts=o,this.length=h,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var s=n[e];if(s.offset>=t){this.index=e;var a=n[e-1],o=a&&a.index===s.index?a.time:0,h=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-h)/(s.offset-h)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,a=r.index;s<=a;s++){var o=E.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},a.each(E._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return E[t](this.curves[n.index],n.time)}},{})),R=a.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,a=i.length;s<a;s++){var o=i[s].point;e&&e.equals(o)||n.push(e=o.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new O(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var a=this.points;if(i-n!=1){for(var o,h=this.chordLengthParameterize(n,i),u=Math.max(e,e*e),l=!0,c=0;c<=4;c++){var f=this.generateBezier(n,i,h,r,s),d=this.findMaxError(n,i,f,h);if(d.error<e&&l)return void this.addCurve(t,f);if(o=d.index,d.error>=u)break;l=this.reparameterize(n,i,h,f),u=d.error}var _=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,n,o,r,_),this.fitCubic(t,e,o,i,_.negate(),s)}else{var g=a[n],v=a[i],p=g.getDistance(v)/3;this.addCurve(t,[g,g.add(r.normalize(p)),v.add(s.normalize(p)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new O(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=Math.abs,a=this.points,o=a[t],h=a[e],u=[[0,0],[0,0]],l=[0,0],c=0,f=e-t+1;c<f;c++){var d=n[c],_=1-d,g=3*d*_,v=_*_*_,p=g*_,m=g*d,y=d*d*d,w=i.normalize(p),x=r.normalize(m),b=a[t+c].subtract(o.multiply(v+p)).subtract(h.multiply(m+y));u[0][0]+=w.dot(w),u[0][1]+=w.dot(x),u[1][0]=u[0][1],u[1][1]+=x.dot(x),l[0]+=w.dot(b),l[1]+=x.dot(b)}var C,S,k=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(s(k)>1e-12){var I=u[0][0]*l[1]-u[1][0]*l[0];C=(l[0]*u[1][1]-l[1]*u[0][1])/k,S=I/k}else{var P=u[0][0]+u[0][1],M=u[1][0]+u[1][1];C=S=s(P)>1e-12?l[0]/P:s(M)>1e-12?l[1]/M:0}var A,T,O=h.getDistance(o),z=1e-12*O;if(C<z||S<z)C=S=O/3;else{var E=h.subtract(o);A=i.normalize(C),T=r.normalize(S),A.dot(E)-T.dot(E)>O*O&&(C=S=O/3,A=T=null)}return[o,o.add(A||i.normalize(C)),h.add(T||r.normalize(S)),h]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var a=this.evaluate(3,t,n),o=this.evaluate(2,i,n),h=this.evaluate(1,r,n),u=a.subtract(e),l=o.dot(o)+u.dot(h);return f.isMachineZero(l)?n:n-u.dot(o)/l},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,n,i[a-t]).subtract(this.points[a]),h=o.x*o.x+o.y*o.y;h>=s&&(s=h,r=a)}return{error:s,index:r}}}),D=C.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&a.isPlainObject(t)&&t.x===n&&t.y===n;this._initialize(e&&t,!e&&_.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),q=D.extend({_class:"PointText",initialize:function(){D.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new g(t.x,t.y,this,"setPoint")},setPoint:function(){var t=_.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),a=r.hasStroke(),o=r.getLeading(),h=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,l=i.length;u<l;u++){t.shadowColor=h;var c=i[u];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),a=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),h=0;"left"!==s&&(h-=o/("center"===s?2:1));var u=new m(h,r?-.75*a:0,o,r*a);return t?t._transformBounds(u,u):u}}),V=a.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},s={transparent:[0,0,0,0]};var o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[(i=o[i])[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,a=0===s,o=(i+r)/2;return[a?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(i+r):s/(2-i-r),o]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,a=[],o=0;o<3;o++){var h=i[o];h<0&&(h+=1),h>1&&(h-=1),a[o]=6*h<1?s+6*(r-s)*h:2*h<1?r:3*h<2?s+(r-s)*(2/3-h)*6:s}return a},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return a.each(e,function(t,i){n[i]=[],a.each(t,function(t,r){var s=a.capitalize(t),o=/^(hue|saturation)$/.test(t),h=n[i][r]="gradient"===i?"gradient"===t?function(t){var e=this._components[0];return e!==(t=U.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return _.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+s]=function(){return this._type===i||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(i)[r]},this["set"+s]=function(t){this._type===i||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(i),this._properties=e[i],this._type=i),this._components[r]=h.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function o(h){var u,l,c,f,d=arguments,_=this.__read,g=0;Array.isArray(h)&&(h=(d=h)[0]);var v=null!=h&&i(h);if("string"===v&&h in e&&(u=h,h=d[1],Array.isArray(h)?(l=h,c=d[2]):(_&&(g=1),d=a.slice(d,1),v=i(h))),!l){if(f="number"===v?d:"object"===v&&null!=h.length?h:null){u||(u=f.length>=3?"rgb":"gray");var p=e[u].length;c=f[p],_&&(g+=f===arguments?p+(null!=c?1:0):1),f.length>p&&(f=a.slice(f,0,p))}else if("string"===v){var m=function(e){var n,i=e.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||e.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),a="rgb";if(i){var o=i[4]?4:3;n=new Array(o);for(var h=0;h<o;h++){var u=i[h+1];n[h]=parseInt(1==u.length?u+u:u,16)/255}}else if(i=e.match(/^(rgb|hsl)a?\((.*)\)$/)){a=i[1],n=i[2].trim().split(/[,\s]+/g);for(var l="hsl"===a,c=(h=0,Math.min(n.length,4));h<c;h++){var f=n[h];if(u=parseFloat(f),l)if(0===h){var d=f.match(/([a-z]*)$/)[1];u*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else h<3&&(u/=100);else h<3&&(u/=/%$/.test(f)?100:255);n[h]=u}}else{var _=s[e];if(!_)if(r){t||((t=rt.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var g=t.getImageData(0,0,1,1).data;_=s[e]=[g[0]/255,g[1]/255,g[2]/255]}else _=[0,0,0];n=_.slice()}return[a,n]}(h);u=m[0],4===(l=m[1]).length&&(c=l[3],l.length--)}else if("object"===v)if(h.constructor===o){if(u=h._type,l=h._components.slice(),c=h._alpha,"gradient"===u)for(var y=1,w=l.length;y<w;y++){var x=l[y];x&&(l[y]=x.clone())}}else if(h.constructor===U)u="gradient",f=d;else{var b=e[u="hue"in h?"lightness"in h?"hsl":"hsb":"gradient"in h||"stops"in h||"radial"in h?"gradient":"gray"in h?"gray":"rgb"],C=n[u];this._components=l=[];for(y=0,w=b.length;y<w;y++){null==(S=h[b[y]])&&!y&&"gradient"===u&&"stops"in h&&(S={stops:h.stops,radial:h.radial}),null!=(S=C[y].call(this,S))&&(l[y]=S)}c=h.alpha}_&&u&&(g=1)}if(this._type=u||"rgb",!l){this._components=l=[];for(y=0,w=(C=n[this._type]).length;y<w;y++){var S;null!=(S=C[y].call(this,f&&f[y]))&&(l[y]=S)}}return this._components=l,this._properties=e[this._type],this._alpha=c,_&&(this.__read=g),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return a.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new V(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=a.isPlainValue(t,!0)?V.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&a.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=c.instance,r=0,s=t.length;r<s;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(n?a:i.number(a)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;function i(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[i(e[0]),i(e[1]),i(e[2])],n<1&&e.push(n<0?0:n),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],s=r._stops,a=i[1],o=i[2],h=i[3],u=e&&e.inverted();if(u&&(a=u._transformPoint(a),o=u._transformPoint(o),h&&(h=u._transformPoint(h))),r._radial){var l=o.getDistance(a);if(h){var c=h.subtract(a);c.getLength()>l&&(h=a.add(c.normalize(l-.1)))}var f=h||a;n=t.createRadialGradient(f.x,f.y,0,a.x,a.y,l)}else n=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var d=0,_=s.length;d<_;d++){var g=s[d],v=g._offset;n.addColorStop(null==v?d/(_-1):v,g._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new V(t(),t(),t())},_setOwner:function(t,e,n){return t&&(t._owner&&e&&t._owner!==e&&(t=t.clone()),!t._owner^!e&&(t._owner=e||null,t._setter=n||null)),t}}})},new function(){return a.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(t,e){this[e]=function(e){e=V.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,a=i.length;s<a;s++)r[s]=t(i[s],r[s]);return new V(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),U=a.extend({_class:"Gradient",initialize:function(t,e){this._id=d.get(),t&&a.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return a.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=n))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new U(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,r=e.length;i<r;i++)e[i]._owner=n;for(i=0,r=(e=this._stops=H.readList(t,0,{clone:!0})).length;i<r;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),H=a.extend({_class:"GradientStop",initialize:function(t,e){var r=t,s=e;"object"===i(t)&&e===n&&(Array.isArray(t)&&"number"!=typeof t[0]?(r=t[0],s=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,s=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(s)},clone:function(){return new H(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return a.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){V._setOwner(this._color,null),this._color=V._setOwner(V.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=a.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new _,selectedColor:null},e=a.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=a.set({},e,{fillColor:new V}),r={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},s={beans:!0},o={_class:"Style",beans:!0,initialize:function(n,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||ht.project,this._defaults=!r||r instanceof S?e:r instanceof D?i:t,n&&this.set(n)}};return a.each(e,function(t,e){var i=/Color$/.test(e),h="shadowOffset"===e,u=a.capitalize(e),l=r[e],c="set"+u,f="get"+u;o[c]=function(t){var n=this._owner,r=n&&n._children,s=r&&r.length>0&&!(n instanceof F);if(s)for(var a=0,o=r.length;a<o;a++)r[a]._style[c](t);if(("selectedColor"===e||!s)&&e in this._defaults){var h=this._values[e];h!==t&&(i&&(h&&(V._setOwner(h,null),h._canvasStyle=null),t&&t.constructor===V&&(t=V._setOwner(t,n,s&&c))),this._values[e]=t,n&&n._changed(l||129))}},o[f]=function(t){var r=this._owner,s=r&&r._children,o=s&&s.length>0&&!(r instanceof F);if(o&&!t)for(var u=0,l=s.length;u<l;u++){var d=s[u]._style[f]();if(u){if(!a.equals(g,d))return n}else g=d}else if(e in this._defaults){var g;if((g=this._values[e])===n)(g=this._defaults[e])&&g.clone&&(g=g.clone());else{var v=i?V:h?_:null;!v||g&&g.constructor===v||(this._values[e]=g=v.read([g],0,{readNull:!0,clone:!0}))}}return g&&i&&(g=V._setOwner(g,r,o&&c)),g},s[f]=function(t){return this._style[f](t)},s[c]=function(t){this._style[c](t)}}),a.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;o[n]=s[n]="#get"+t,o[i]=s[i]="#set"+t}),C.inject(s),o},{set:function(t){var e=t instanceof Z,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,i){var r=t._values,s=e._values,o=e._defaults;for(var h in r){var u=r[h],l=s[h];if(!(i&&h in s||a.equals(u,l===n?o[h]:l)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),W=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=r[a],h=o?o+s:e;if(h in t){if(!n)return t[h];t[h]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(u){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||r.clientLeft||0),o=n.top-(s.clientTop||r.clientTop||0);if(!e){var h=i.defaultView;a+=h.pageXOffset||s.scrollLeft||r.scrollLeft,o+=h.pageYOffset||s.scrollTop||r.scrollTop}return new m(a,o,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new m(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return W.getBounds(t,e).getPoint()},getSize:function(t){return W.getBounds(t,!0).getSize()},isInvisible:function(t){return W.getSize(t).equals(new v(0,0))},isInView:function(t){return!W.isInvisible(t)&&W.getViewportBounds(t).intersects(W.getBounds(t,!0))},isInserted:function(t){return s.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,r){if("object"===i(n))for(var s in n)t(e,s,!0,n[s]);else t(e,n,!0,r)}}},$={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),a=0,o=r.length;a<o;a++){var h=r[a],u=t===s&&("touchstart"===h||"touchmove"===h)&&{passive:!1};t.addEventListener(h,i,u)}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new _(e.pageX||e.clientX+s.documentElement.scrollLeft,e.pageY||e.clientY+s.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return $.getPoint(t).subtract(W.getOffset(e||$.getTarget(t)))}};$.requestAnimationFrame=new function(){var t,e=W.getPrefixed(r,"requestAnimationFrame"),n=!1,i=[];function s(){var t=i;i=[];for(var r=0,a=t.length;r<a;r++)t[r]();(n=e&&i.length)&&e(s)}return function(r){i.push(r),e?n||(e(s),n=!0):t||(t=setInterval(s,1e3/60))}};var G=a.extend(o,{_class:"View",initialize:function t(e,n){function i(t){return n[t]||parseInt(n.getAttribute(t),10)}function a(){var t=W.getSize(n);return t.isNaN()||t.isZero()?new v(i("width"),i("height")):t}var o;if(r&&n){this._id=n.getAttribute("id"),null==this._id&&n.setAttribute("id",this._id="paper-view-"+t._id++),$.add(n,this._viewEvents);if(W.setPrefixed(n.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),h.hasAttribute(n,"resize")){var u=this;$.add(r,this._windowEvents={resize:function(){u.setViewSize(a())}})}if(o=a(),h.hasAttribute(n,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,c=l.style,f=W.getOffset(n);c.position="absolute",c.left=f.x+"px",c.top=f.y+"px",s.body.appendChild(l)}}else o=new v(n),n=null;this._project=e,this._scope=e._scope,this._element=n,this._pixelRatio||(this._pixelRatio=r&&r.devicePixelRatio||1),this._setElementSize(o.width,o.height),this._viewSize=o,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new w)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!ht.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;G._focused===this&&(G._focused=null),G._views.splice(G._views.indexOf(this),1),delete G._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),$.remove(this._element,this._viewEvents),$.remove(r,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:a.each(C._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;$.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;W.getPrefixed(s,"hidden")&&"true"!==h.getAttribute(e,"keepalive")||!W.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){ht=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new a({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new a(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=n},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new p(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=v.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new m(new _,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return W.isInView(this._element)},isInserted:function(){return W.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=s.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(W.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},a.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=arguments,i=(e?a:_).read(n),r=_.read(n,0,{readNull:!0});return this.transform((new w)[t](i,r||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new w;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=_.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new w).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new g(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=_.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(_.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(_.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(_.read(arguments))},getEventPoint:function(t){return this.viewToProject($.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return s&&"string"==typeof e&&(e=s.getElementById(e)),new(r?J:G)(t,e)}}},new function(){if(r){var t,e,n,i,a,o=!1,h=!1,u=r.navigator;u.pointerEnabled||u.msPointerEnabled?(n="pointerdown MSPointerDown",i="pointermove MSPointerMove",a="pointerup pointercancel MSPointerUp MSPointerCancel"):(n="touchstart",i="touchmove",a="touchend touchcancel","ontouchstart"in r&&u.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(n+=" mousedown",i+=" mousemove",a+=" mouseup"));var l={},c={mouseout:function(t){var e=G._focused,n=$.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=$.getOffset(t,e._element),r=i.x,s=Math.abs,a=s(r),o=a-(1<<25);i.x=s(o)<a?o*(r<0?-1:1):r,P(e,t,e.viewToProject(i))}},scroll:I};l[n]=function(t){var e=G._focused=k(t);o||(o=!0,e._handleMouseEvent("mousedown",t))},c[i]=function(n){var i=G._focused;if(!h){var r=k(n);r?i!==r&&(i&&P(i,n),t||(t=i),i=G._focused=e=r):e&&e===i&&(t&&!t.isInserted()&&(t=null),i=G._focused=t,t=null,I())}i&&P(i,n)},c[n]=function(){h=!0},c[a]=function(t){var e=G._focused;e&&o&&e._handleMouseEvent("mouseup",t),h=o=!1},$.add(s,c),$.add(r,{load:I});var f,d,_,g,v,p,m,y,w=!1,x=!1,b={doubleclick:"click",mousedrag:"mousemove"},C=!1,S={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:l,_handleMouseEvent:function(t,e,n){var i=this._itemEvents,r=i.native[t],s="mousemove"===t,a=this._scope.tool,h=this;function u(t){return i.virtual[t]||h.responds(t)||a&&a.responds(t)}s&&o&&u("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var l=this.getBounds().contains(n),c=r&&l&&h._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),b=c&&c.item||null,S=!1,k={};if(k[t.substr(5)]=!0,r&&b!==g&&(g&&M(g,null,"mouseleave",e,n),b&&M(b,null,"mouseenter",e,n),g=b),C^l&&(M(this,null,l?"mouseenter":"mouseleave",e,n),l?this:null,S=!0),!l&&!k.drag||n.equals(d)||(A(this,b,s?t:"mousemove",e,n,d),S=!0),C=l,k.down&&l||k.up&&f){if(A(this,b,t,e,n,f),k.down){if(y=b===p&&Date.now()-m<300,_=p=b,!x&&b){for(var I=b;I&&!I.responds("mousedrag");)I=I._parent;I&&(v=b)}f=n}else k.up&&(x||b!==_||(m=Date.now(),A(this,b,y?"doubleclick":"click",e,n,f),y=!1),_=v=null);C=!1,S=!0}d=n,S&&a&&(w=a._handleMouseEvent(t,e,n,k)||w),!1!==e.cancelable&&(w&&!k.move||k.down&&u("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){var r,s=this._scope,a=s.tool;function o(a){a.responds(t)&&(ht=s,a.emit(t,r=r||new K(t,e,n,i)))}this.isVisible()&&(o(this),a&&a.responds(t)&&o(a))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var s in S)i[s]=(i[s]||0)+(S[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:I,_resetState:function(){o=h=w=C=!1,t=e=f=d=_=g=v=p=m=y=null}}}}function k(t){var e=$.getTarget(t);return e.getAttribute&&G._viewsById[e.getAttribute("id")]}function I(){var t=G._focused;if(!t||!t.isVisible())for(var n=0,i=G._views.length;n<i;n++)if((t=G._views[n]).isVisible()){G._focused=e=t;break}}function P(t,e,n){t._handleMouseEvent("mousemove",e,n)}function M(t,e,n,i,r,s,a){var o,h=!1;function u(t,n){if(t.responds(n)){if(o||(o=new Y(n,i,r,e||t,s?r.subtract(s):null)),t.emit(n,o)&&(w=!0,o.prevented&&(x=!0),o.stopped))return h=!0}else{var a=b[n];if(a)return u(t,a)}}for(;t&&t!==a&&!u(t,n);)t=t._parent;return h}function A(t,e,n,i,r,s){return t._project.removeOn(n),x=w=!1,v&&M(v,null,n,i,r,s)||e&&e!==v&&!e.isDescendant(v)&&M(e,null,"mousedrag"===n?"mousemove":n,i,r,s,v)||M(t,v||e||t,n,i,r,s)}}),J=G.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof r.HTMLCanvasElement)){var n=v.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+a.slice(arguments,1));e=rt.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(h.getAttribute(e,"hidpi"))){var s=r.devicePixelRatio||1,o=W.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=s/o}G.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,s=this._context;if(!h.hasAttribute(r,"resize")){var a=r.style;a.width=e+"px",a.height=n+"px"}s.restore(),s.save(),s.scale(i,i)}},getContext:function(){return this._context},getPixelSize:function t(e){var n,i=ht.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=s}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,a=e.length;s<a;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),X=a.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return Q.modifiers}}),K=X.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Q=new function(){var t,e,i={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},o={tab:"\t",space:" ",enter:"\r"},h={},u={},l=new a({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=ht&&ht.agent;return t&&t.mac?this.meta:this.control}}});function c(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===n?String.fromCharCode(t.keyCode):e,i[e]||(e.length>1?a.hyphenate(e):e.toLowerCase())}function f(e,n,i,r){var s,o=G._focused;if(h[n]=e,e?u[n]=i:delete u[n],n.length>1&&(s=a.camelize(n))in l){l[s]=e;var c=ht&&ht.agent;if("meta"===s&&c&&c.mac)if(e)t={};else{for(var d in t)d in u&&f(!1,d,t[d],r);t=null}}else e&&t&&(t[n]=i);o&&o._handleKeyEvent(e?"keydown":"keyup",r,n,i)}return $.add(s,{keydown:function(t){var n=c(t),i=ht&&ht.agent;n.length>1||i&&i.chrome&&(t.altKey||i.mac&&t.metaKey||!i.mac&&t.ctrlKey)?f(!0,n,o[n]||(n.length>1?"":n),t):e=n},keypress:function(t){if(e){var n=c(t),i=t.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==e&&(n=r.toLowerCase()),f(!0,n,r,t),e=null}},keyup:function(t){var e=c(t);e in u&&f(!1,e,u[e],t)}}),$.add(r,{blur:function(t){for(var e in u)f(!1,e,u[e],t)}}),{modifiers:l,isDown:function(t){return!!h[t]}}},Y=X.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tt=X.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),et=u.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){u.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){ht=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var r=i.move||i.drag,s=this.responds(t),a=this.minDistance,o=this.maxDistance,h=!1,u=this;function l(t,e){var s=n,a=r?u._point:u._downPoint||s;if(r){if(u._moveCount>=0&&s.equals(a))return!1;if(a&&(null!=t||null!=e)){var o=s.subtract(a),h=o.getLength();if(h<(t||0))return!1;e&&(s=a.add(o.normalize(Math.min(h,e))))}u._moveCount++}return u._point=s,u._lastPoint=a||s,i.down&&(u._moveCount=-1,u._downPoint=s,u._downCount++),!0}function c(){s&&(h=u.emit(t,new tt(u,t,e))||h)}if(i.down)l(),c();else if(i.up)l(null,o),c();else if(s)for(;l(a,o);)c();return h}}),nt=a.extend(o,{_class:"Tween",statics:{easings:new a({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(e,n,r,s,a,o){this.object=e;var h=i(a),u="function"===h;this.type=u?h:"string"===h?a:"linear",this.easing=u?a:t.easings[this.type],this.duration=s,this.running=!1,this._then=null,this._startTime=null;var l=n||r;this._keys=l?Object.keys(l):[],this._parsedKeys=this._parseKeys(this._keys),this._from=l&&this._getState(n),this._to=l&&this._getState(r),!1!==o&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},r=0,s=n&&n.length;r<s;r++){var o=n[r],h=i(this._from[o]),u=i(this._to[o]),l=h&&u&&h.__add&&u.__add?u.__subtract(h).__multiply(e).__add(h):(u-h)*e+h;this._setProperty(this._parsedKeys[o],l)}this.responds("update")&&this.emit("update",new a({progress:t,factor:e})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var s,a=e[i],o=this._parsedKeys[a],h=this._getProperty(o);if(t){var u=this._resolveValue(h,t[a]);this._setProperty(o,u),s=(s=this._getProperty(o))&&s.clone?s.clone():s,this._setProperty(o,h)}else s=h&&h.clone?h.clone():h;n[a]=s}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return ht.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],s=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=s.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),it={request:function(t){var n=new e.XMLHttpRequest;return n.open((t.method||"get").toUpperCase(),t.url,a.pick(t.async,!0)),t.mimeType&&n.overrideMimeType(t.mimeType),n.onload=function(){var e=n.status;0===e||200===e?t.onLoad&&t.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var e=n.status,i='Could not load "'+t.url+'" (Status: '+e+")";if(!t.onError)throw new Error(i);t.onError(i,e)},n.send(null)}},rt=a.exports.CanvasProvider={canvases:[],getCanvas:function(t,e){if(!r)return null;var n,a=!0;"object"===i(t)&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=s.createElement("canvas"),a=!1);var o=n.getContext("2d");if(!o)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?a&&o.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),o.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},st=new function(){var t,e,n,i,r,s,o,h,u,l,c,f=Math.min,d=Math.max,_=Math.abs;function g(t,e,n){return.2989*t+.587*e+.114*n}function v(t,e,n,i){var r=i-g(t,e,n),s=(i=g(u=t+r,l=e+r,c=n+r),f(u,l,c)),a=d(u,l,c);if(s<0){var o=i-s;u=i+(u-i)*i/o,l=i+(l-i)*i/o,c=i+(c-i)*i/o}if(a>255){var h=255-i,_=a-i;u=i+(u-i)*h/_,l=i+(l-i)*h/_,c=i+(c-i)*h/_}}function p(t,e,n){return d(t,e,n)-f(t,e,n)}function m(t,e,n,i){var r,s=[t,e,n],a=d(t,e,n),o=f(t,e,n);r=0===f(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===d(o,a)?2:1:0,s[a]>s[o]?(s[r]=(s[r]-s[o])*i/(s[a]-s[o]),s[a]=i):s[r]=s[a]=0,s[o]=0,u=s[0],l=s[1],c=s[2]}var y={multiply:function(){u=r*t/255,l=s*e/255,c=o*n/255},screen:function(){u=r+t-r*t/255,l=s+e-s*e/255,c=o+n-o*n/255},overlay:function(){u=r<128?2*r*t/255:255-2*(255-r)*(255-t)/255,l=s<128?2*s*e/255:255-2*(255-s)*(255-e)/255,c=o<128?2*o*n/255:255-2*(255-o)*(255-n)/255},"soft-light":function(){var i=t*r/255;u=i+r*(255-(255-r)*(255-t)/255-i)/255,l=(i=e*s/255)+s*(255-(255-s)*(255-e)/255-i)/255,c=(i=n*o/255)+o*(255-(255-o)*(255-n)/255-i)/255},"hard-light":function(){u=t<128?2*t*r/255:255-2*(255-t)*(255-r)/255,l=e<128?2*e*s/255:255-2*(255-e)*(255-s)/255,c=n<128?2*n*o/255:255-2*(255-n)*(255-o)/255},"color-dodge":function(){u=0===r?0:255===t?255:f(255,255*r/(255-t)),l=0===s?0:255===e?255:f(255,255*s/(255-e)),c=0===o?0:255===n?255:f(255,255*o/(255-n))},"color-burn":function(){u=255===r?255:0===t?0:d(0,255-255*(255-r)/t),l=255===s?255:0===e?0:d(0,255-255*(255-s)/e),c=255===o?255:0===n?0:d(0,255-255*(255-o)/n)},darken:function(){u=r<t?r:t,l=s<e?s:e,c=o<n?o:n},lighten:function(){u=r>t?r:t,l=s>e?s:e,c=o>n?o:n},difference:function(){(u=r-t)<0&&(u=-u),(l=s-e)<0&&(l=-l),(c=o-n)<0&&(c=-c)},exclusion:function(){u=r+t*(255-r-r)/255,l=s+e*(255-s-s)/255,c=o+n*(255-o-o)/255},hue:function(){m(t,e,n,p(r,s,o)),v(u,l,c,g(r,s,o))},saturation:function(){m(r,s,o,p(t,e,n)),v(u,l,c,g(r,s,o))},luminosity:function(){v(r,s,o,g(t,e,n))},color:function(){v(t,e,n,g(r,s,o))},add:function(){u=f(r+t,255),l=f(s+e,255),c=f(o+n,255)},subtract:function(){u=d(r-t,0),l=d(s-e,0),c=d(o-n,0)},average:function(){u=(r+t)/2,l=(s+e)/2,c=(o+n)/2},negation:function(){u=255-_(255-t-r),l=255-_(255-e-s),c=255-_(255-n-o)}},w=this.nativeModes=a.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),x=rt.getContext(1,1);x&&(a.each(y,function(t,e){var n="darken"===e,i=!1;x.save();try{x.fillStyle=n?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=n?"#a00":"#300",x.fillRect(0,0,1,1),i=x.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}x.restore(),w[e]=i}),rt.release(x)),this.process=function(a,f,d,_,g){var v=f.canvas,p="normal"===a;if(p||w[a])d.save(),d.setTransform(1,0,0,1,0,0),d.globalAlpha=_,p||(d.globalCompositeOperation=a),d.drawImage(v,g.x,g.y),d.restore();else{var m=y[a];if(!m)return;for(var x=d.getImageData(g.x,g.y,v.width,v.height),b=x.data,C=f.getImageData(0,0,v.width,v.height).data,S=0,k=b.length;S<k;S+=4){t=C[S],r=b[S],e=C[S+1],s=b[S+1],n=C[S+2],o=b[S+2],i=C[S+3],h=b[S+3],m();var I=i*_/255,P=1-I;b[S]=I*u+P*r,b[S+1]=I*l+P*s,b[S+2]=I*c+P*o,b[S+3]=i*_+P*h}d.putImageData(x,g.x,g.y)}}},at=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",i={href:n,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function r(t,e,n){for(var r in e){var s=e[r],a=i[r];"number"==typeof s&&n&&(s=n.number(s)),a?t.setAttributeNS(a,r,s):t.setAttribute(r,s)}return t}return{svg:t,xmlns:e,xlink:n,create:function(e,n,i){return r(s.createElementNS(t,e),n,i)},get:function(t,e){var n=i[e],r=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===r?null:r},set:r}},ot=a.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof N||t instanceof I||t instanceof D)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=a.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&a.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});new function(){var t;function n(e,n,i){var r,s=new a,o=e.getTranslation();n&&(e.isInvertible()?(r=(e=e._shiftless())._inverseTransform(o),o=null):r=new _,s[i?"cx":"x"]=r.x,s[i?"cy":"y"]=r.y);if(!e.isIdentity()){var h=e.decompose();if(h){var u=[],l=h.rotation,c=h.scaling,d=h.skewing;o&&!o.isZero()&&u.push("translate("+t.point(o)+")"),l&&u.push("rotate("+t.number(l)+")"),f.isZero(c.x-1)&&f.isZero(c.y-1)||u.push("scale("+t.point(c)+")"),d.x&&u.push("skewX("+t.number(d.x)+")"),d.y&&u.push("skewY("+t.number(d.y)+")"),s.transform=u.join(" ")}else s.transform="matrix("+e.getValues().join(",")+")"}return s}function i(e,i){for(var r=n(e._matrix),s=e._children,a=at.create("g",r,t),o=0,h=s.length;o<h;o++){var u=s[o],c=v(u,i);if(c)if(u.isClipMask()){var f=at.create("clipPath");f.appendChild(c),l(u,f,"clip"),at.set(a,{"clip-path":"url(#"+f.id+")"})}else a.appendChild(c)}return a}function r(e){var i=e._type,r=e._radius,s=n(e._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var a=e._size,o=a.width,h=a.height;s.x-=o/2,s.y-=h/2,s.width=o,s.height=h,r.isZero()&&(r=null)}return r&&("circle"===i?s.r=r:(s.rx=r.width,s.ry=r.height)),at.create(i,s,t)}var s,o={Group:i,Layer:i,Raster:function(e,i){var r=n(e._matrix,!0),s=e.getSize(),a=e.getImage();return r.x-=s.width/2,r.y-=s.height/2,r.width=s.width,r.height=s.height,r.href=0==i.embedImages&&a&&a.src||e.toDataURL(),at.create("image",r,t)},Path:function(e,i){var s=i.matchShapes;if(s){var a=e.toShape(!1);if(a)return r(a)}var o,h=e._segments,u=h.length,l=n(e._matrix);if(s&&u>=2&&!e.hasHandles())if(u>2){o=e._closed?"polygon":"polyline";for(var c=[],f=0;f<u;f++)c.push(t.point(h[f]._point));l.points=c.join(" ")}else{o="line";var d=h[0]._point,_=h[1]._point;l.set({x1:d.x,y1:d.y,x2:_.x,y2:_.y})}else o="path",l.d=e.getPathData(null,i.precision);return at.create(o,l,t)},Shape:r,CompoundPath:function(e,i){var r=n(e._matrix),s=e.getPathData(null,i.precision);return s&&(r.d=s),at.create("path",r,t)},SymbolItem:function(e,i){var r=n(e._matrix,!0),s=e._definition,a=u(s,"symbol"),o=s._item,h=o.getStrokeBounds();return a||((a=at.create("symbol",{viewBox:t.rectangle(h)})).appendChild(v(o,i)),l(s,a,"symbol")),r.href="#"+a.id,r.x+=h.x,r.y+=h.y,r.width=h.width,r.height=h.height,r.overflow="visible",at.create("use",r,t)},PointText:function(e){var i=at.create("text",n(e._matrix,!0),t);return i.textContent=e._content,i}};function h(e,n,i){var r={},s=!i&&e.getParent(),o=[];return null!=e._name&&(r.id=e._name),a.each(ot,function(n){var i=n.get,h=n.type,c=e[i]();if(n.exportFilter?n.exportFilter(e,c):!s||!a.equals(s[i](),c)){if("color"===h&&null!=c){var f=c.getAlpha();f<1&&(r[n.attribute+"-opacity"]=f)}"style"===h?o.push(n.attribute+": "+c):r[n.attribute]=null==c?"none":"color"===h?c.gradient?function(e){var n=u(e,"color");if(!n){var i,r=e.getGradient(),s=r._radial,a=e.getOrigin(),o=e.getDestination();if(s){i={cx:a.x,cy:a.y,r:a.getDistance(o)};var h=e.getHighlight();h&&(i.fx=h.x,i.fy=h.y)}else i={x1:a.x,y1:a.y,x2:o.x,y2:o.y};i.gradientUnits="userSpaceOnUse",n=at.create((s?"radial":"linear")+"Gradient",i,t);for(var c=r._stops,f=0,d=c.length;f<d;f++){var _=c[f],g=_._color,v=g.getAlpha(),p=_._offset;i={offset:null==p?f/(d-1):p},g&&(i["stop-color"]=g.toCSS(!0)),v<1&&(i["stop-opacity"]=v),n.appendChild(at.create("stop",i,t))}l(e,n,"color")}return"url(#"+n.id+")"}(c):c.toCSS(!0):"array"===h?c.join(","):"lookup"===h?n.toSVG[c]:c}}),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,e._visible||(r.visibility="hidden"),at.set(n,r,t)}function u(t,e){return s||(s={ids:{},svgs:{}}),t&&s.svgs[e+"-"+(t._id||t.__id||(t.__id=d.get("svg")))]}function l(t,e,n){s||u();var i=s.ids[n]=(s.ids[n]||0)+1;e.id=n+"-"+i,s.svgs[n+"-"+(t._id||t.__id)]=e}function g(t,n){var i=t,r=null;if(s){for(var a in i="svg"===t.nodeName.toLowerCase()&&t,s.svgs)r||(i||(i=at.create("svg")).appendChild(t),r=i.insertBefore(at.create("defs"),i.firstChild)),r.appendChild(s.svgs[a]);s=null}return n.asString?(new e.XMLSerializer).serializeToString(i):i}function v(t,e,n){var i=o[t._class],r=i&&i(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&r.setAttribute("data-paper-data",a)}return r&&h(t,r,n)}function p(e){return e||(e={}),t=new c(e.precision),e}C.inject({exportSVG:function(t){return g(v(this,t=p(t),!0),t)}}),b.inject({exportSVG:function(e){e=p(e);var i=this._children,r=this.getView(),s=a.pick(e.bounds,"view"),o=e.matrix||"view"===s&&r._matrix,h=o&&w.read([o]),u="view"===s?new m([0,0],r.getViewSize()):"content"===s?C._getBounds(i,h,{stroke:!0}).rect:m.read([s],0,{readNull:!0}),l={version:"1.1",xmlns:at.svg,"xmlns:xlink":at.xlink};u&&(l.width=u.width,l.height=u.height,(u.x||0===u.x||u.y||0===u.y)&&(l.viewBox=t.rectangle(u)));var c=at.create("svg",l,t),f=c;h&&!h.isIdentity()&&(f=c.appendChild(at.create("g",n(h),t)));for(var d=0,_=i.length;d<_;d++)f.appendChild(v(i[d],e,!0));return g(c,e)}})},new function(){var t,o={};function h(e,n,i,r,s,a){var o=at.get(e,n)||a,h=null==o?r?null:i?"":0:i?o:parseFloat(o);return/%\s*$/.test(o)?h/100*(s?1:t[/x|^width/.test(n)?"width":"height"]):h}function u(t,e,n,i,r,s,a){return e=h(t,e||"x",!1,i,r,s),n=h(t,n||"y",!1,i,r,a),!i||null!=e&&null!=n?new _(e,n):null}function l(t,e,n,i,r){return e=h(t,e||"width",!1,i,r),n=h(t,n||"height",!1,i,r),!i||null!=e&&null!=n?new v(e,n):null}function c(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?O(t)||t:"lookup"===e?n[t]:t}function f(t,e,n,i){var r=t.childNodes,s="clippath"===e,a="defs"===e,o=new S,h=o._project,u=h._currentStyle,l=[];if(s||a||(o=T(o,t,i),h._currentStyle=o._style.clone()),i)for(var c=t.querySelectorAll("defs"),f=0,d=c.length;f<d;f++)z(c[f],n,!1);for(f=0,d=r.length;f<d;f++){var _,g=r[f];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(_=z(g,n,!1))||_ instanceof A||l.push(_)}return o.addChildren(l),s&&(o=T(o.reduce(),t,i)),h._currentStyle=u,(s||a)&&(o.remove(),o=null),o}function d(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new _(parseFloat(n[r]),parseFloat(n[r+1])));var a=new B(i);return"polygon"===e&&a.closePath(),a}function g(t,e){var n,i=(h(t,"href",!0)||"").substring(1),r="radialgradient"===e;if(i)(n=o[i].getGradient())._radial^r&&((n=n.clone())._radial=r);else{for(var s=t.childNodes,a=[],l=0,c=s.length;l<c;l++){var f=s[l];1===f.nodeType&&a.push(T(new H,f))}n=new U(a,r)}var d,_,g,v="userSpaceOnUse"!==h(t,"gradientUnits",!0);return r?(_=(d=u(t,"cx","cy",!1,v,"50%","50%")).add(h(t,"r",!1,!1,v,"50%"),0),g=u(t,"fx","fy",!0,v)):(d=u(t,"x1","y1",!1,v,"0%","0%"),_=u(t,"x2","y2",!1,v,"100%","0%")),T(new V(n,d,_,g),t)._scaleToBounds=v,null}var p={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,a=r.length;s<a;s++){var o=r[s];if(1===o.nodeType)return z(o,n,i)}},g:f,svg:f,clippath:f,polygon:d,polyline:d,path:function(t){return N.create(t.getAttribute("d"))},lineargradient:g,radialgradient:g,image:function(t){var e=new P(h(t,"href",!0));return e.on("load",function(){var e=l(t);this.setSize(e);var n=u(t).add(e.divide(2));this._matrix.append((new w).translate(n))}),e},symbol:function(t,e,n,i){return new A(f(t,e,n,i),!0)},defs:f,use:function(t){var e=(h(t,"href",!0)||"").substring(1),n=o[e],i=u(t);return n?n instanceof A?n.place(i):n.clone().translate(i):null},circle:function(t){return new I.Circle(u(t,"cx","cy"),h(t,"r"))},ellipse:function(t){return new I.Ellipse({center:u(t,"cx","cy"),radius:l(t,"rx","ry")})},rect:function(t){return new I.Rectangle(new m(u(t),l(t)),l(t,"rx","ry"))},line:function(t){return new B.Line(u(t,"x1","y1"),u(t,"x2","y2"))},text:function(t){var e=new q(u(t).add(u(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e},switch:f};function y(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new w,a=0,o=r.length;a<o;a++){var h=r[a];if(!h)break;for(var u=h.split(/\(\s*/),l=u[0],c=u[1].split(/[\s,]+/g),f=0,d=c.length;f<d;f++)c[f]=parseFloat(c[f]);switch(l){case"matrix":s.append(new w(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":s.translate(c[0],c[1]||0);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function x(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}var k=a.set(a.each(ot,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](c(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new w).translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(t,e){o[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=O(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof S))return new S(n,t);t.insertChild(0,n)}},gradientTransform:y,transform:y,"fill-opacity":x,"stroke-opacity":x,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var s,a=new m(c(e,"array")),o=l(i,null,null,!0);if(t instanceof S){var h=o?o.divide(a.getSize()):1,u=(new w).scale(h).translate(a.getPoint().negate());s=t}else t instanceof A&&(o&&a.setSize(o),s=t._item);if(s){if("visible"!==M(i,"overflow",r)){var f=new I.Rectangle(a);f.setClipMask(!0),s.addChild(f)}u&&s.transform(u)}}});function M(t,e,i){var r=t.attributes[e],s=r&&r.value;if(!s&&t.style){var o=a.camelize(e);(s=t.style[o])||i.node[o]===i.parent[o]||(s=i.node[o])}return s?"none"===s?null:s:n}function T(t,e,i){var r=e.parentNode,s={node:W.getStyles(e)||{},parent:!i&&!/^defs$/i.test(r.tagName)&&W.getStyles(r)||{}};return a.each(k,function(i,r){var a=M(e,r,s);t=a!==n&&i(t,a,r,e,s)||t}),t}function O(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],i=n&&o[r?n.replace(r.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&((i=i.clone())._scaleToBounds=!0),i}function z(e,n,i){var r,h,u,c=e.nodeName.toLowerCase(),f="#document"!==c,d=s.body;i&&f&&(t=ht.getView().getSize(),t=l(e,null,null,!0)||t,r=at.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),h=e.parentNode,u=e.nextSibling,r.appendChild(e),d.appendChild(r));var _=ht.settings,g=_.applyMatrix,v=_.insertItems;_.applyMatrix=!1,_.insertItems=!1;var m=p[c],y=m&&m(e,c,n,i)||null;if(_.insertItems=v,_.applyMatrix=g,y){!f||y instanceof S||(y=T(y,e,i));var w=n.onImport,x=f&&e.getAttribute("data-paper-data");w&&(y=w(e,y,n)||y),n.expandShapes&&y instanceof I&&(y.remove(),y=y.toPath()),x&&(y._data=JSON.parse(x))}return r&&(d.removeChild(r),h&&(u?h.insertBefore(e,u):h.appendChild(e))),i&&(o={},y&&a.pick(n.applyMatrix,g)&&y.matrix.apply(!0,!0)),y}function E(t,r,a){if(!t)return null;r="function"==typeof r?{onLoad:r}:r||{};var o=ht,h=null;function u(s){try{var u="object"===i(s)?s:(new e.DOMParser).parseFromString(s.trim(),"image/svg+xml");if(!u.nodeName)throw u=null,new Error("Unsupported SVG source: "+t);ht=o,h=z(u,r,!0),r&&!1===r.insert||a._insertItem(n,h);var c=r.onLoad;c&&c(h,s)}catch(f){l(f)}}function l(t,e){var n=r.onError;if(!n)throw new Error(t);n(t,e)}if("string"!=typeof t||/^[\s\S]*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){u(c.result)},c.onerror=function(){l(c.error)},c.readAsText(t)}u(t)}else{var f=s.getElementById(t);f?u(f):it.request({url:t,async:!0,onLoad:u,onError:l})}return h}C.inject({importSVG:function(t,e){return E(t,e,this)}}),b.inject({importSVG:function(t,e){return this.activate(),E(t,e,this)}})},a.exports.PaperScript=function(){var n,o,u,l,c=this,f=c.acorn;if(!f&&"undefined"!=typeof require)try{f=require("acorn")}catch(k){}f||(f=n=o={},u=this,l=function(t){"use strict";var e,n,i,r;t.version="0.5.0",t.parse=function(t,r){return n=String(t),i=n.length,a(r),$t(),function(t){p=m=o,e.locations&&(y=new Wt);w=b=null,x=[],Yt();var n=t||ce(),i=!0;t||(n.body=[]);for(;f!==O;){var r=Ce();n.body.push(r),i&&_e(r)&&he(!0),i=!1}return de(n,"Program")}(e.program)};var s=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function a(t){for(var n in e=t||{},s)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=s[n]);r=e.sourceFile||null}var o,h,u,l,c,f,d,_,g,v,p,m,y,w,x,b,C=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Ut.lastIndex=i;var r=Ut.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};function S(t,e){var i=C(n,t);e+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=i,r.raisedAt=o,r}t.tokenize=function(t,r){n=String(t),i=n.length,a(r),$t();var s={};function p(t){return m=u,Yt(t),s.start=h,s.end=u,s.startLoc=l,s.endLoc=c,s.type=f,s.value=d,s}return p.jumpTo=function(t,i){var r;if(o=t,e.locations)for(g=1,v=Ut.lastIndex=0;(r=Ut.exec(n))&&r.index<t;)++g,v=r.index+r[0].length;_=i,Kt()},p};var I=[],P={type:"num"},M={type:"regexp"},A={type:"string"},T={type:"name"},O={type:"eof"},z={keyword:"break"},E={keyword:"case",beforeExpr:!0},L={keyword:"catch"},N={keyword:"continue"},B={keyword:"debugger"},F={keyword:"default"},j={keyword:"do",isLoop:!0},R={keyword:"else",beforeExpr:!0},D={keyword:"finally"},q={keyword:"for",isLoop:!0},V={keyword:"function"},U={keyword:"if"},H={keyword:"return",beforeExpr:!0},Z={keyword:"switch"},W={keyword:"throw",beforeExpr:!0},$={keyword:"try"},G={keyword:"var"},J={keyword:"while",isLoop:!0},X={keyword:"with"},K={keyword:"new",beforeExpr:!0},Q={keyword:"this"},Y={keyword:"null",atomValue:null},tt={keyword:"true",atomValue:!0},et={keyword:"false",atomValue:!1},nt={keyword:"in",binop:7,beforeExpr:!0},it={break:z,case:E,catch:L,continue:N,debugger:B,default:F,do:j,else:R,finally:D,for:q,function:V,if:U,return:H,switch:Z,throw:W,try:$,var:G,while:J,with:X,null:Y,true:tt,false:et,new:K,in:nt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Q,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},rt={type:"[",beforeExpr:!0},st={type:"]"},at={type:"{",beforeExpr:!0},ot={type:"}"},ht={type:"(",beforeExpr:!0},ut={type:")"},lt={type:",",beforeExpr:!0},ct={type:";",beforeExpr:!0},ft={type:":",beforeExpr:!0},dt={type:"."},_t={type:"?",beforeExpr:!0},gt={binop:10,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},pt={isAssign:!0,beforeExpr:!0},mt={postfix:!0,prefix:!0,isUpdate:!0},yt={prefix:!0,beforeExpr:!0},wt={binop:1,beforeExpr:!0},xt={binop:2,beforeExpr:!0},bt={binop:3,beforeExpr:!0},Ct={binop:4,beforeExpr:!0},St={binop:5,beforeExpr:!0},kt={binop:6,beforeExpr:!0},It={binop:7,beforeExpr:!0},Pt={binop:8,beforeExpr:!0},Mt={binop:9,prefix:!0,beforeExpr:!0},At={binop:10,beforeExpr:!0};for(var Tt in t.tokTypes={bracketL:rt,bracketR:st,braceL:at,braceR:ot,parenL:ht,parenR:ut,comma:lt,semi:ct,colon:ft,dot:dt,question:_t,slash:gt,eq:vt,name:T,eof:O,num:P,regexp:M,string:A},it)t.tokTypes["_"+Tt]=it[Tt];function Ot(t){t=t.split(" ");var e="",n=[];t:for(var i=0;i<t.length;++i){for(var r=0;r<n.length;++r)if(n[r][0].length==t[i].length){n[r].push(t[i]);continue t}n.push([t[i]])}function s(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var n=0;n<t.length;++n)e+="case "+JSON.stringify(t[n])+":";e+="return true}return false;"}if(n.length>3){n.sort(function(t,e){return e.length-t.length}),e+="switch(str.length){";for(i=0;i<n.length;++i){var a=n[i];e+="case "+a[0].length+":",s(a)}e+="}"}else s(t);return new Function("str",e)}var zt,Et=Ot("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Lt=Ot("class enum extends super const export import"),Nt=Ot("implements interface let package private protected public static yield"),Bt=Ot("eval arguments"),Ft=Ot("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),jt=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Rt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Dt=new RegExp("["+Rt+"]"),qt=new RegExp("["+Rt+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Vt=/[\n\r\u2028\u2029]/,Ut=/\r\n|[\n\r\u2028\u2029]/g,Ht=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Dt.test(String.fromCharCode(t)))},Zt=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&qt.test(String.fromCharCode(t))))};function Wt(){this.line=g,this.column=o-v}function $t(){g=1,o=v=0,_=!0,Kt()}function Gt(t,n){u=o,e.locations&&(c=new Wt),f=t,Kt(),d=n,_=t.beforeExpr}function Jt(){var t,i=e.onComment&&e.locations&&new Wt,r=o,s=n.indexOf("*/",o+=2);if(-1===s&&S(o-2,"Unterminated comment"),o=s+2,e.locations)for(Ut.lastIndex=r;(t=Ut.exec(n))&&t.index<o;)++g,v=t.index+t[0].length;e.onComment&&e.onComment(!0,n.slice(r+2,s),r,o,i,e.locations&&new Wt)}function Xt(){for(var t=o,r=e.onComment&&e.locations&&new Wt,s=n.charCodeAt(o+=2);o<i&&10!==s&&13!==s&&8232!==s&&8233!==s;)++o,s=n.charCodeAt(o);e.onComment&&e.onComment(!1,n.slice(t+2,o),t,o,r,e.locations&&new Wt)}function Kt(){for(;o<i;){var t=n.charCodeAt(o);if(32===t)++o;else if(13===t){++o,10===(r=n.charCodeAt(o))&&++o,e.locations&&(++g,v=o)}else if(10===t||8232===t||8233===t)++o,e.locations&&(++g,v=o);else if(t>8&&t<14)++o;else if(47===t){var r;if(42===(r=n.charCodeAt(o+1)))Jt();else{if(47!==r)break;Xt()}}else if(160===t)++o;else{if(!(t>=5760&&jt.test(String.fromCharCode(t))))break;++o}}}function Qt(t){switch(t){case 46:return function(){var t=n.charCodeAt(o+1);return t>=48&&t<=57?ie(!0):(++o,Gt(dt))}();case 40:return++o,Gt(ht);case 41:return++o,Gt(ut);case 59:return++o,Gt(ct);case 44:return++o,Gt(lt);case 91:return++o,Gt(rt);case 93:return++o,Gt(st);case 123:return++o,Gt(at);case 125:return++o,Gt(ot);case 58:return++o,Gt(ft);case 63:return++o,Gt(_t);case 48:var r=n.charCodeAt(o+1);if(120===r||88===r)return function(){o+=2;var t=ne(16);null==t&&S(h+2,"Expected hexadecimal number");Ht(n.charCodeAt(o))&&S(o,"Identifier directly after number");return Gt(P,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ie(!1);case 34:case 39:return function(t){o++;for(var r="";;){o>=i&&S(h,"Unterminated string constant");var s=n.charCodeAt(o);if(s===t)return++o,Gt(A,r);if(92===s){s=n.charCodeAt(++o);var a=/^[0-7]+/.exec(n.slice(o,o+3));for(a&&(a=a[0]);a&&parseInt(a,8)>255;)a=a.slice(0,-1);if("0"===a&&(a=null),++o,a)b&&S(o-2,"Octal literal in strict mode"),r+=String.fromCharCode(parseInt(a,8)),o+=a.length-1;else switch(s){case 110:r+="\n";break;case 114:r+="\r";break;case 120:r+=String.fromCharCode(re(2));break;case 117:r+=String.fromCharCode(re(4));break;case 85:r+=String.fromCharCode(re(8));break;case 116:r+="\t";break;case 98:r+="\b";break;case 118:r+="\v";break;case 102:r+="\f";break;case 48:r+="\0";break;case 13:10===n.charCodeAt(o)&&++o;case 10:e.locations&&(v=o,++g);break;default:r+=String.fromCharCode(s)}}else 13!==s&&10!==s&&8232!==s&&8233!==s||S(h,"Unterminated string constant"),r+=String.fromCharCode(s),++o}}(t);case 47:return function(){var t=n.charCodeAt(o+1);return _?(++o,ee()):61===t?te(pt,2):te(gt,1)}();case 37:case 42:return 61===n.charCodeAt(o+1)?te(pt,2):te(At,1);case 124:case 38:return function(t){var e=n.charCodeAt(o+1);return e===t?te(124===t?wt:xt,2):61===e?te(pt,2):te(124===t?bt:St,1)}(t);case 94:return 61===n.charCodeAt(o+1)?te(pt,2):te(Ct,1);case 43:case 45:return function(t){var e=n.charCodeAt(o+1);return e===t?45==e&&62==n.charCodeAt(o+2)&&Vt.test(n.slice(m,o))?(o+=3,Xt(),Kt(),Yt()):te(mt,2):61===e?te(pt,2):te(Mt,1)}(t);case 60:case 62:return function(t){var e=n.charCodeAt(o+1),i=1;return e===t?(i=62===t&&62===n.charCodeAt(o+2)?3:2,61===n.charCodeAt(o+i)?te(pt,i+1):te(Pt,i)):33==e&&60==t&&45==n.charCodeAt(o+2)&&45==n.charCodeAt(o+3)?(o+=4,Xt(),Kt(),Yt()):(61===e&&(i=61===n.charCodeAt(o+2)?3:2),te(It,i))}(t);case 61:case 33:return function(t){return 61===n.charCodeAt(o+1)?te(kt,61===n.charCodeAt(o+2)?3:2):te(61===t?vt:yt,1)}(t);case 126:return te(yt,1)}return!1}function Yt(t){if(t?o=h+1:h=o,e.locations&&(l=new Wt),t)return ee();if(o>=i)return Gt(O);var r=n.charCodeAt(o);if(Ht(r)||92===r)return ae();var s=Qt(r);if(!1===s){var a=String.fromCharCode(r);if("\\"===a||Dt.test(a))return ae();S(o,"Unexpected character '"+a+"'")}return s}function te(t,e){var i=n.slice(o,o+e);o+=e,Gt(t,i)}function ee(){for(var t,e,r=o;;){o>=i&&S(r,"Unterminated regular expression");var s=n.charAt(o);if(Vt.test(s)&&S(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++o}var a=n.slice(r,o);++o;var h=se();h&&!/^[gmsiy]*$/.test(h)&&S(r,"Invalid regexp flag");try{var u=new RegExp(a,h)}catch(k){k instanceof SyntaxError&&S(r,k.message),S(k)}return Gt(M,u)}function ne(t,e){for(var i=o,r=0,s=0,a=null==e?1/0:e;s<a;++s){var h,u=n.charCodeAt(o);if((h=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;++o,r=r*t+h}return o===i||null!=e&&o-i!==e?null:r}function ie(t){var e=o,i=!1,r=48===n.charCodeAt(o);t||null!==ne(10)||S(e,"Invalid number"),46===n.charCodeAt(o)&&(++o,ne(10),i=!0);var s=n.charCodeAt(o);69!==s&&101!==s||(43!==(s=n.charCodeAt(++o))&&45!==s||++o,null===ne(10)&&S(e,"Invalid number"),i=!0),Ht(n.charCodeAt(o))&&S(o,"Identifier directly after number");var a,h=n.slice(e,o);return i?a=parseFloat(h):r&&1!==h.length?/[89]/.test(h)||b?S(e,"Invalid number"):a=parseInt(h,8):a=parseInt(h,10),Gt(P,a)}function re(t){var e=ne(16,t);return null===e&&S(h,"Bad character escape sequence"),e}function se(){zt=!1;for(var t,e=!0,i=o;;){var r=n.charCodeAt(o);if(Zt(r))zt&&(t+=n.charAt(o)),++o;else{if(92!==r)break;zt||(t=n.slice(i,o)),zt=!0,117!=n.charCodeAt(++o)&&S(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var s=re(4),a=String.fromCharCode(s);a||S(o-1,"Invalid Unicode escape"),(e?Ht(s):Zt(s))||S(o-4,"Invalid Unicode escape"),t+=a}e=!1}return zt?t:n.slice(i,o)}function ae(){var t=se(),e=T;return!zt&&Ft(t)&&(e=it[t]),Gt(e,t)}function oe(){p=h,m=u,y=c,Yt()}function he(t){if(b=t,o=h,e.locations)for(;o<v;)v=n.lastIndexOf("\n",v-2)+1,--g;Kt(),Yt()}function ue(){this.type=null,this.start=h,this.end=null}function le(){this.start=l,this.end=null,null!==r&&(this.source=r)}function ce(){var t=new ue;return e.locations&&(t.loc=new le),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[h,0]),t}function fe(t){var n=new ue;return n.start=t.start,e.locations&&(n.loc=new le,n.loc.start=t.loc.start),e.ranges&&(n.range=[t.range[0],0]),n}function de(t,n){return t.type=n,t.end=m,e.locations&&(t.loc.end=y),e.ranges&&(t.range[1]=m),t}function _e(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function ge(t){if(f===t)return oe(),!0}function ve(){return!e.strictSemicolons&&(f===O||f===ot||Vt.test(n.slice(m,h)))}function pe(){ge(ct)||ve()||ye()}function me(t){f===t?oe():ye()}function ye(){S(h,"Unexpected token")}function we(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&S(t.start,"Assigning to rvalue"),b&&"Identifier"===t.type&&Bt(t.name)&&S(t.start,"Assigning to "+t.name+" in strict mode")}var xe={kind:"loop"},be={kind:"switch"};function Ce(){(f===gt||f===pt&&"/="==d)&&Yt(!0);var t=f,i=ce();switch(t){case z:case N:oe();var r=t===z;ge(ct)||ve()?i.label=null:f!==T?ye():(i.label=Fe(),pe());for(var s=0;s<x.length;++s){var a=x[s];if(null==i.label||a.name===i.label.name){if(null!=a.kind&&(r||"loop"===a.kind))break;if(i.label&&r)break}}return s===x.length&&S(i.start,"Unsyntactic "+t.keyword),de(i,r?"BreakStatement":"ContinueStatement");case B:return oe(),pe(),de(i,"DebuggerStatement");case j:return oe(),x.push(xe),i.body=Ce(),x.pop(),me(J),i.test=Se(),pe(),de(i,"DoWhileStatement");case q:if(oe(),x.push(xe),me(ht),f===ct)return Ie(i,null);if(f===G){var o=ce();return oe(),Me(o,!0),de(o,"VariableDeclaration"),1===o.declarations.length&&ge(nt)?Pe(i,o):Ie(i,o)}o=Ae(!1,!0);return ge(nt)?(we(o),Pe(i,o)):Ie(i,o);case V:return oe(),Ne(i,!0);case U:return oe(),i.test=Se(),i.consequent=Ce(),i.alternate=ge(R)?Ce():null,de(i,"IfStatement");case H:return w||e.allowReturnOutsideFunction||S(h,"'return' outside of function"),oe(),ge(ct)||ve()?i.argument=null:(i.argument=Ae(),pe()),de(i,"ReturnStatement");case Z:oe(),i.discriminant=Se(),i.cases=[],me(at),x.push(be);for(var u,l;f!=ot;)if(f===E||f===F){var c=f===E;u&&de(u,"SwitchCase"),i.cases.push(u=ce()),u.consequent=[],oe(),c?u.test=Ae():(l&&S(p,"Multiple default clauses"),l=!0,u.test=null),me(ft)}else u||ye(),u.consequent.push(Ce());return u&&de(u,"SwitchCase"),oe(),x.pop(),de(i,"SwitchStatement");case W:return oe(),Vt.test(n.slice(m,h))&&S(m,"Illegal newline after throw"),i.argument=Ae(),pe(),de(i,"ThrowStatement");case $:if(oe(),i.block=ke(),i.handler=null,f===L){var _=ce();oe(),me(ht),_.param=Fe(),b&&Bt(_.param.name)&&S(_.param.start,"Binding "+_.param.name+" in strict mode"),me(ut),_.guard=null,_.body=ke(),i.handler=de(_,"CatchClause")}return i.guardedHandlers=I,i.finalizer=ge(D)?ke():null,i.handler||i.finalizer||S(i.start,"Missing catch or finally clause"),de(i,"TryStatement");case G:return oe(),Me(i),pe(),de(i,"VariableDeclaration");case J:return oe(),i.test=Se(),x.push(xe),i.body=Ce(),x.pop(),de(i,"WhileStatement");case X:return b&&S(h,"'with' in strict mode"),oe(),i.object=Se(),i.body=Ce(),de(i,"WithStatement");case at:return ke();case ct:return oe(),de(i,"EmptyStatement");default:var g=d,v=Ae();if(t===T&&"Identifier"===v.type&&ge(ft)){for(s=0;s<x.length;++s)x[s].name===g&&S(v.start,"Label '"+g+"' is already declared");var y=f.isLoop?"loop":f===Z?"switch":null;return x.push({name:g,kind:y}),i.body=Ce(),x.pop(),i.label=v,de(i,"LabeledStatement")}return i.expression=v,pe(),de(i,"ExpressionStatement")}}function Se(){me(ht);var t=Ae();return me(ut),t}function ke(t){var e,n=ce(),i=!0,r=!1;for(n.body=[],me(at);!ge(ot);){var s=Ce();n.body.push(s),i&&t&&_e(s)&&(e=r,he(r=!0)),i=!1}return r&&!e&&he(!1),de(n,"BlockStatement")}function Ie(t,e){return t.init=e,me(ct),t.test=f===ct?null:Ae(),me(ct),t.update=f===ut?null:Ae(),me(ut),t.body=Ce(),x.pop(),de(t,"ForStatement")}function Pe(t,e){return t.left=e,t.right=Ae(),me(ut),t.body=Ce(),x.pop(),de(t,"ForInStatement")}function Me(t,e){for(t.declarations=[],t.kind="var";;){var n=ce();if(n.id=Fe(),b&&Bt(n.id.name)&&S(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=ge(vt)?Ae(!0,e):null,t.declarations.push(de(n,"VariableDeclarator")),!ge(lt))break}return t}function Ae(t,e){var n=Te(e);if(!t&&f===lt){var i=fe(n);for(i.expressions=[n];ge(lt);)i.expressions.push(Te(e));return de(i,"SequenceExpression")}return n}function Te(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=f.binop;if(null!=r&&(!i||f!==nt)&&r>n){var s=fe(e);s.left=e,s.operator=d;var a=f;oe(),s.right=t(Oe(),r,i);var o=de(s,a===wt||a===xt?"LogicalExpression":"BinaryExpression");return t(o,n,i)}return e}(Oe(),-1,t)}(t);if(ge(_t)){var n=fe(e);return n.test=e,n.consequent=Ae(!0),me(ft),n.alternate=Ae(!0,t),de(n,"ConditionalExpression")}return e}(t);if(f.isAssign){var n=fe(e);return n.operator=d,n.left=e,oe(),n.right=Te(t),we(e),de(n,"AssignmentExpression")}return e}function Oe(){if(f.prefix){var t=ce(),e=f.isUpdate;return t.operator=d,t.prefix=!0,_=!0,oe(),t.argument=Oe(),e?we(t.argument):b&&"delete"===t.operator&&"Identifier"===t.argument.type&&S(t.start,"Deleting local variable in strict mode"),de(t,e?"UpdateExpression":"UnaryExpression")}for(var n=ze(Ee());f.postfix&&!ve();){(t=fe(n)).operator=d,t.prefix=!1,t.argument=n,we(n),oe(),n=de(t,"UpdateExpression")}return n}function ze(t,e){var n;return ge(dt)?((n=fe(t)).object=t,n.property=Fe(!0),n.computed=!1,ze(de(n,"MemberExpression"),e)):ge(rt)?((n=fe(t)).object=t,n.property=Ae(),n.computed=!0,me(st),ze(de(n,"MemberExpression"),e)):!e&&ge(ht)?((n=fe(t)).callee=t,n.arguments=Be(ut,!1),ze(de(n,"CallExpression"),e)):t}function Ee(){switch(f){case Q:var t=ce();return oe(),de(t,"ThisExpression");case T:return Fe();case P:case A:case M:return(t=ce()).value=d,t.raw=n.slice(h,u),oe(),de(t,"Literal");case Y:case tt:case et:return(t=ce()).value=f.atomValue,t.raw=f.keyword,oe(),de(t,"Literal");case ht:var i=l,r=h;oe();var s=Ae();return s.start=r,s.end=u,e.locations&&(s.loc.start=i,s.loc.end=c),e.ranges&&(s.range=[r,u]),me(ut),s;case rt:t=ce();return oe(),t.elements=Be(st,!0,!0),de(t,"ArrayExpression");case at:return function(){var t=ce(),n=!0,i=!1;t.properties=[],oe();for(;!ge(ot);){if(n)n=!1;else if(me(lt),e.allowTrailingCommas&&ge(ot))break;var r,s={key:Le()},a=!1;if(ge(ft)?(s.value=Ae(!0),r=s.kind="init"):e.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=i=!0,r=s.kind=s.key.name,s.key=Le(),f!==ht&&ye(),s.value=Ne(ce(),!1)):ye(),"Identifier"===s.key.type&&(b||i))for(var o=0;o<t.properties.length;++o){var h=t.properties[o];if(h.key.name===s.key.name){var u=r==h.kind||a&&"init"===h.kind||"init"===r&&("get"===h.kind||"set"===h.kind);u&&!b&&"init"===r&&"init"===h.kind&&(u=!1),u&&S(s.key.start,"Redefinition of property")}}t.properties.push(s)}return de(t,"ObjectExpression")}();case V:t=ce();return oe(),Ne(t,!1);case K:return function(){var t=ce();oe(),t.callee=ze(Ee(),!0),ge(ht)?t.arguments=Be(ut,!1):t.arguments=I;return de(t,"NewExpression")}();default:ye()}}function Le(){return f===P||f===A?Ee():Fe(!0)}function Ne(t,e){f===T?t.id=Fe():e?ye():t.id=null,t.params=[];var n=!0;for(me(ht);!ge(ut);)n?n=!1:me(lt),t.params.push(Fe());var i=w,r=x;if(w=!0,x=[],t.body=ke(!0),w=i,x=r,b||t.body.body.length&&_e(t.body.body[0]))for(var s=t.id?-1:0;s<t.params.length;++s){var a=s<0?t.id:t.params[s];if((Nt(a.name)||Bt(a.name))&&S(a.start,"Defining '"+a.name+"' in strict mode"),s>=0)for(var o=0;o<s;++o)a.name===t.params[o].name&&S(a.start,"Argument name clash in strict mode")}return de(t,e?"FunctionDeclaration":"FunctionExpression")}function Be(t,n,i){for(var r=[],s=!0;!ge(t);){if(s)s=!1;else if(me(lt),n&&e.allowTrailingCommas&&ge(t))break;i&&f===lt?r.push(null):r.push(Ae(!0))}return r}function Fe(t){var i=ce();return t&&"everywhere"==e.forbidReserved&&(t=!1),f===T?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?Et:Lt)(d)||b&&Nt(d))&&-1==n.slice(h,u).indexOf("\\")&&S(h,"The keyword '"+d+"' is reserved"),i.name=d):t&&f.keyword?i.name=f.keyword:ye(),_=!1,oe(),de(i,"Identifier")}},"object"==i(n)&&"object"==i(o)?l(n):"function"==typeof t&&t.amd?t(["exports"],l):l(u.acorn||(u.acorn={})),f.version||(f=null));function d(t,e){return(c.acorn||f).parse(t,e)}var g={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},p={"-":"__negate","+":"__self"},m=a.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});function y(t,e,n){var i=g[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function w(t,e){var n=p[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function x(t,n){if(!t)return"";var a=[];function o(t){for(var e=0,n=a.length;e<n;e++){var i=a[e];if(i[0]>=t)break;t+=i[1]}return t}function h(e){return t.substring(o(e.range[0]),o(e.range[1]))}function u(e,n){for(var i=o(e.range[0]),r=o(e.range[1]),s=0,h=a.length-1;h>=0;h--)if(i>a[h][0]){s=h+1;break}a.splice(s,0,[i,n.length-r+i]),t=t.substring(0,i)+n+t.substring(r)}function l(e,n){switch(e.type){case"UnaryExpression":if(e.operator in p&&"Literal"!==e.argument.type){var i=h(e.argument);u(e,'$__("'+e.operator+'", '+i+")")}break;case"BinaryExpression":if(e.operator in g&&"Literal"!==e.left.type){var r=h(e.left),s=h(e.right),a=function(e,n){return t.substring(o(e.range[1]),o(n.range[0]))}(e.left,e.right),l=e.operator;u(e,"__$__("+r+","+a.replace(new RegExp("\\"+l),'"'+l+'"')+", "+s+")")}break;case"UpdateExpression":case"AssignmentExpression":var c=n&&n.type;if(!("ForStatement"===c||"BinaryExpression"===c&&/^[=!<>]/.test(n.operator)||"MemberExpression"===c&&n.computed))if("UpdateExpression"===e.type){var f=(i=h(e.argument))+" = "+(d="__$__("+i+', "'+e.operator[0]+'", 1)');e.prefix?f="("+f+")":"AssignmentExpression"!==c&&"VariableDeclarator"!==c&&"BinaryExpression"!==c||(h(n.left||n.id)===i&&(f=d),f=i+"; "+f),u(e,f)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){r=h(e.left),s=h(e.right);var d=r+" = __$__("+r+', "'+e.operator[0]+'", '+s+")";u(e,/^\(.*\)$/.test(h(e))?"("+d+")":d)}}}var c,f=(n=n||{}).url||"",_=n.sourceMaps,v=n.paperFeatures||{},m=n.source||t,y=n.offset||0,w=ht.agent,x=w.versionNumber,b=!1,C=/\r\n|\n|\r/gm;if(_&&(w.chrome&&x>=30||w.webkit&&x>=537.76||w.firefox&&x>=23||w.node)){if(w.node)y-=2;else if(r&&f&&!r.location.href.indexOf(f)){var S=s.getElementsByTagName("html")[0].innerHTML;y=S.substr(0,S.indexOf(t)+1).match(C).length+1}var k=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((b=y>0&&!(w.chrome&&x>=36||w.safari&&x>=600||w.firefox&&x>=40||w.node))?0:y)+"A"];k.length=(t.match(C)||[]).length+1+(b?y:0),c={version:3,file:f,names:[],mappings:k.join(";AACA"),sourceRoot:"",sources:[f],sourcesContent:[m]}}return!1===v.operatorOverloading&&!1===v.moduleExports||function t(e,n,r){if(e){for(var s in e)if("range"!==s&&"loc"!==s){var a=e[s];if(Array.isArray(a))for(var o=0,c=a.length;o<c;o++)t(a[o],e,r);else a&&"object"===i(a)&&t(a,e,r)}!1!==r.operatorOverloading&&l(e,n),!1!==r.moduleExports&&function(t){switch(t.type){case"ExportDefaultDeclaration":u({range:[t.start,t.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var e=t.declaration,n=t.specifiers;if(e){var i=e.declarations;i&&(i.forEach(function(t){u(t,"module.exports."+h(t))}),u({range:[t.start,e.start+e.kind.length]},""))}else if(n){var r=n.map(function(t){var e=h(t);return"module.exports."+e+" = "+e+"; "}).join("");r&&u(t,r)}}}(e)}}(d(t,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,v),c&&(b&&(t=new Array(y+1).join("\n")+t),/^(inline|both)$/.test(_)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+e.btoa(unescape(encodeURIComponent(JSON.stringify(c))))),t+="\n//# sourceURL="+(f||"paperscript")),{url:f,source:m,code:t,map:c}}function b(t,e,n){ht=e;var r,o=e.getView(),h=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new et:null,u=h?h._events:[],l=["onFrame","onResize"].concat(u),c=[],f=[],d="object"===i(t)?t:x(t,n);function g(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(c.push(i),f.push(e[i]))}t=d.code,g({__$__:y,$__:w,paper:e,tool:h},!0),g(e),t="var module = { exports: {} }; "+t,(b=a.each(l,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(c.push(e),this.push("module.exports."+e+" = "+e+";"))},[]).join("\n"))&&(t+="\n"+b),t+="\nreturn module.exports;";var v=ht.agent;if(s&&(v.chrome||v.firefox&&v.versionNumber<40)){var p=s.createElement("script"),m=s.head||s.getElementsByTagName("head")[0];v.firefox&&(t="\n"+t),p.appendChild(s.createTextNode("document.__paperscript__ = function("+c+") {"+t+"\n}")),m.appendChild(p),r=s.__paperscript__,delete s.__paperscript__,m.removeChild(p)}else r=Function(c,t);var b,C=(b=r&&r.apply(e,f))||{};return a.each(u,function(t){var e=C[t];e&&(h[t]=e)}),o&&(C.onResize&&o.setOnResize(C.onResize),o.emit("resize",{size:o.size,delta:new _}),C.onFrame&&o.setOnFrame(C.onFrame),o.requestUpdate()),b}function C(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==h.getAttribute(t,"ignore")){var e=h.getAttribute(t,"canvas"),n=s.getElementById(e),i=t.src||t.getAttribute("data-src"),r=h.hasAttribute(t,"async");if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var a=h.get(n.getAttribute("data-paper-scope"))||(new h).setup(n);return n.setAttribute("data-paper-scope",a._id),i?it.request({url:i,async:r,mimeType:"text/plain",onLoad:function(t){b(t,a,i)}}):b(t.innerHTML,a,t.baseURI),t.setAttribute("data-paper-ignore","true"),a}}function S(){a.each(s&&s.getElementsByTagName("script"),C)}return _.inject(m),v.inject(m),V.inject(m),r&&("complete"===s.readyState?setTimeout(S):$.add(r,{load:S})),{compile:x,execute:b,load:function(t){return t?C(t):S()},parse:d,calculateBinary:y,calculateUnary:w}}.call(this);var ht=new(h.inject(a.exports,{Base:a,Numerical:f,Key:Q,DomEvent:$,DomElement:W,document:s,window:r,Symbol:A,PlacedSymbol:M}));return ht.agent.node&&require("./node/extend.js")(ht),"function"==typeof t&&t.amd?t("paper",ht):"object"===("undefined"==typeof module?"undefined":i(module))&&module&&(module.exports=ht),ht}.call(this,"object"===("undefined"==typeof self?"undefined":i(self))?self:null);
},{"./node/self.js":"sC8V","acorn":"Heqi","./node/extend.js":"sC8V","process":"g5IB"}],"ArXC":[function(require,module,exports) {
"use strict";function e(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}function t(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),s=e.a,a=Math.round(e.h),l=e.s.toFixed(1),d=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+s+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+s+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+d+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+d+",a:"+s+"}":"unknown format"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.gui=exports.dom=exports.default=exports.controllers=exports.color=exports.GUI=void 0;var n=Array.prototype.forEach,o=Array.prototype.slice,i={BREAK:{},extend:function(e){return this.each(o.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(o.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=o.call(arguments);return function(){for(var t=o.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,o){if(e)if(n&&e.forEach&&e.forEach===n)e.forEach(t,o);else if(e.length===e.length+0){var i,r=void 0;for(r=0,i=e.length;r<i;r++)if(r in e&&t.call(o,e[r],r)===this.BREAK)return}else for(var s in e)if(t.call(o,e[s],s)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments;var s=n||!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,r)},t),s&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():o.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},r=[{litmus:i.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:t},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:t},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:i.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:i.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:i.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(i.isNumber(e.r)&&i.isNumber(e.g)&&i.isNumber(e.b)&&i.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(i.isNumber(e.r)&&i.isNumber(e.g)&&i.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(i.isNumber(e.h)&&i.isNumber(e.s)&&i.isNumber(e.v)&&i.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(i.isNumber(e.h)&&i.isNumber(e.s)&&i.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],s=void 0,a=void 0,l=function(){a=!1;var e=arguments.length>1?i.toArray(arguments):arguments[0];return i.each(r,function(t){if(t.litmus(e))return i.each(t.conversions,function(t,n){if(s=t.read(e),!1===a&&!1!==s)return a=s,s.conversionName=n,s.conversion=t,i.BREAK}),i.BREAK}),a},d=void 0,c={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,s=void 0;return 0===i?{h:NaN,s:0,v:0}:(s=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(s/=6)<0&&(s+=1),{h:360*s,s:r/i,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(d=8*t)|e&~(255<<d)}},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(o):void 0},f=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},m=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g=function(){function e(){if(_(this,e),this.__state=l.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return h(e,[{key:"toString",value:function(){return t(this)}},{key:"toHexString",value:function(){return t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function b(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(g.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(g.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function v(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(g.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(g.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}g.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=c.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");i.extend(e.__state,c.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},g.recalculateHSV=function(e){var t=c.rgb_to_hsv(e.r,e.g,e.b);i.extend(e.__state,{s:t.s,v:t.v}),i.isNaN(t.h)?i.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},g.COMPONENTS=["r","g","b","h","s","v","hex","a"],b(g.prototype,"r",2),b(g.prototype,"g",1),b(g.prototype,"b",0),v(g.prototype,"h"),v(g.prototype,"s"),v(g.prototype,"v"),Object.defineProperty(g.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(g.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=c.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var y=function(){function e(t,n){_(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return h(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),w={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},x={};i.each(w,function(e,t){i.each(e,function(e){x[e]=t})});var E=/(\d+(\.\d+)?)px/;function C(e){if("0"===e||i.isUndefined(e))return 0;var t=e.match(E);return i.isNull(t)?0:parseFloat(t[1])}var A={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,r=t;i.isUndefined(r)&&(r=!0),i.isUndefined(o)&&(o=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var r=n||{},s=x[t];if(!s)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var l=r.x||r.clientX||0,d=r.y||r.clientY||0;a.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,d,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;i.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:a.initEvent(t,r.bubbles||!1,r.cancelable||!0)}i.defaults(a,o),e.dispatchEvent(a)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),A},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),A},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return A},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return A},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return C(t["border-left-width"])+C(t["border-right-width"])+C(t["padding-left"])+C(t["padding-right"])+C(t.width)},getHeight:function(e){var t=getComputedStyle(e);return C(t["border-top-width"])+C(t["border-bottom-width"])+C(t["padding-top"])+C(t["padding-bottom"])+C(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},k=function(e){function t(e,n){_(this,t);var o=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),A.bind(o.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return f(t,y),h(t,[{key:"setValue",value:function(e){var n=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),S=function(e){function t(e,n,o){_(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=o,a=r;if(r.__select=document.createElement("select"),i.isArray(s)){var l={};i.each(s,function(e){l[e]=e}),s=l}return i.each(s,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),r.updateDisplay(),A.bind(r.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),r.domElement.appendChild(r.__select),r}return f(t,y),h(t,[{key:"setValue",value:function(e){var n=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return A.isActive(this.__select)?this:(this.__select.value=this.getValue(),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),O=function(e){function t(e,n){_(this,t);var o=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;function r(){i.setValue(i.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),A.bind(o.__input,"keyup",r),A.bind(o.__input,"change",r),A.bind(o.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),A.bind(o.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return f(t,y),h(t,[{key:"updateDisplay",value:function(){return A.isActive(this.__input)||(this.__input.value=this.getValue()),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function T(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var L=function(e){function t(e,n,o){_(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=o||{};return r.__min=s.min,r.__max=s.max,r.__step=s.step,i.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=T(r.__impliedStep),r}return f(t,y),h(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=T(e),this}}]),t}();function R(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var B=function(e){function t(e,n,o){_(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));r.__truncationSuspended=!1;var s=r,a=void 0;function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function d(e){var t=a-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),a=e.clientY}function c(){A.unbind(window,"mousemove",d),A.unbind(window,"mouseup",c),l()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),A.bind(r.__input,"change",function(){var e=parseFloat(s.__input.value);i.isNaN(e)||s.setValue(e)}),A.bind(r.__input,"blur",function(){l()}),A.bind(r.__input,"mousedown",function(e){A.bind(window,"mousemove",d),A.bind(window,"mouseup",c),a=e.clientY}),A.bind(r.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,l())}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return f(t,L),h(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():R(this.getValue(),this.__precision),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function N(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}var H=function(e){function t(e,n,o,i,r){_(this,t);var s=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),a=s;function l(e){e.preventDefault();var t=a.__background.getBoundingClientRect();return a.setValue(N(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function d(){A.unbind(window,"mousemove",l),A.unbind(window,"mouseup",d),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function c(e){var t=e.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(N(t,n.left,n.right,a.__min,a.__max))}function u(){A.unbind(window,"touchmove",c),A.unbind(window,"touchend",u),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),A.bind(s.__background,"mousedown",function(e){document.activeElement.blur(),A.bind(window,"mousemove",l),A.bind(window,"mouseup",d),l(e)}),A.bind(s.__background,"touchstart",function(e){if(1!==e.touches.length)return;A.bind(window,"touchmove",c),A.bind(window,"touchend",u),c(e)}),A.addClass(s.__background,"slider"),A.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return f(t,L),h(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),F=function(e){function t(e,n,o){_(this,t);var i=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,A.bind(i.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),A.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return f(t,y),h(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),P=function(e){function t(e,n){_(this,t);var o=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.__color=new g(o.getValue()),o.__temp=new g(0);var r=o;o.domElement=document.createElement("div"),A.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",A.bind(o.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),A.bind(o.__input,"blur",h),A.bind(o.__selector,"mousedown",function(){A.addClass(this,"drag").bind(window,"mouseup",function(){A.removeClass(r.__selector,"drag")})}),A.bind(o.__selector,"touchstart",function(){A.addClass(this,"drag").bind(window,"touchend",function(){A.removeClass(r.__selector,"drag")})});var s=document.createElement("div");function a(e){f(e),A.bind(window,"mousemove",f),A.bind(window,"touchmove",f),A.bind(window,"mouseup",c),A.bind(window,"touchend",c)}function d(e){b(e),A.bind(window,"mousemove",b),A.bind(window,"touchmove",b),A.bind(window,"mouseup",u),A.bind(window,"touchend",u)}function c(){A.unbind(window,"mousemove",f),A.unbind(window,"touchmove",f),A.unbind(window,"mouseup",c),A.unbind(window,"touchend",c),p()}function u(){A.unbind(window,"mousemove",b),A.unbind(window,"touchmove",b),A.unbind(window,"mouseup",u),A.unbind(window,"touchend",u),p()}function h(){var e=l(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function p(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,i=n.clientY,s=(o-t.left)/(t.right-t.left),a=1-(i-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),s>1?s=1:s<0&&(s=0),r.__color.v=a,r.__color.s=s,r.setValue(r.__color.toOriginal()),!1}function b(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return i.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(s.style,{width:"100%",height:"100%",background:"none"}),j(s,"top","rgba(0,0,0,0)","#000"),i.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),V(o.__hue_field),i.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),A.bind(o.__saturation_field,"mousedown",a),A.bind(o.__saturation_field,"touchstart",a),A.bind(o.__field_knob,"mousedown",a),A.bind(o.__field_knob,"touchstart",a),A.bind(o.__hue_field,"mousedown",d),A.bind(o.__hue_field,"touchstart",d),o.__saturation_field.appendChild(s),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return f(t,y),h(t,[{key:"updateDisplay",value:function(){var e=l(this.getValue());if(!1!==e){var t=!1;i.each(g.COMPONENTS,function(n){if(!i.isUndefined(e[n])&&!i.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,j(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),i.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(),D=["-moz-","-o-","-webkit-","-ms-",""];function j(e,t,n,o){e.style.background="",i.each(D,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}function V(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var I={load:function(e,t){var n=t||document,o=n.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,n.getElementsByTagName("head")[0].appendChild(o)},inject:function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(r){}}},z='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',M=function(e,t){var n=e[t];return i.isArray(arguments[2])||i.isObject(arguments[2])?new S(e,t,arguments[2]):i.isNumber(n)?i.isNumber(arguments[2])&&i.isNumber(arguments[3])?i.isNumber(arguments[4])?new H(e,t,arguments[2],arguments[3],arguments[4]):new H(e,t,arguments[2],arguments[3]):i.isNumber(arguments[4])?new B(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new B(e,t,{min:arguments[2],max:arguments[3]}):i.isString(n)?new O(e,t):i.isFunction(n)?new F(e,t,""):i.isBoolean(n)?new k(e,t):null};function G(e){setTimeout(e,1e3/60)}var U=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||G,X=function(){function e(){_(this,e),this.backgroundElement=document.createElement("div"),i.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),A.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),i.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;A.bind(this.backgroundElement,"click",function(){t.hide()})}return h(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),i.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",A.unbind(e.domElement,"webkitTransitionEnd",t),A.unbind(e.domElement,"transitionend",t),A.unbind(e.domElement,"oTransitionEnd",t)};A.bind(this.domElement,"webkitTransitionEnd",t),A.bind(this.domElement,"transitionend",t),A.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-A.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-A.getHeight(this.domElement)/2+"px"}}]),e}(),K=e(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");I.inject(K);var Y="dg",J=72,W=20,Q="Default",q=function(){try{return!!window.localStorage}catch(e){return!1}}(),Z=void 0,$=!0,ee=void 0,te=!1,ne=[],oe=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),A.addClass(this.domElement,Y),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=i.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=i.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),i.isUndefined(o.load)?o.load={preset:Q}:o.preset&&(o.load.preset=o.preset),i.isUndefined(o.parent)&&o.hideable&&ne.push(this),o.resizable=i.isUndefined(o.parent)&&o.resizable,o.autoPlace&&i.isUndefined(o.scrollable)&&(o.scrollable=!0);var r,s=q&&"true"===localStorage.getItem(ce(this,"isLocal")),a=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,ge(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,fe(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,l&&(l.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?A.addClass(n.__ul,e.CLASS_CLOSED):A.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return s},set:function(e){q&&(s=e,e?A.bind(window,"unload",a):A.unbind(window,"unload",a),localStorage.setItem(ce(n,"isLocal"),e))}}}),i.isUndefined(o.parent)){if(this.closed=o.closed||!1,A.addClass(this.domElement,e.CLASS_MAIN),A.makeSelectable(this.domElement,!1),q&&s){n.useLocalStorage=!0;var d=localStorage.getItem(ce(this,"gui"));d&&(o.load=JSON.parse(d))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,A.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(A.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(A.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),A.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===o.closed&&(o.closed=!0);var c=document.createTextNode(o.name);A.addClass(c,"controller-name"),l=ie(n,c);A.addClass(this.__ul,e.CLASS_CLOSED),A.addClass(l,"title"),A.bind(l,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),o.closed||(this.closed=!1)}o.autoPlace&&(i.isUndefined(o.parent)&&($&&(ee=document.createElement("div"),A.addClass(ee,Y),A.addClass(ee,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ee),$=!1),ee.appendChild(this.domElement),A.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||fe(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},A.bind(window,"resize",this.__resizeHandler),A.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),A.bind(this.__ul,"transitionend",this.__resizeHandler),A.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&pe(this),a=function(){q&&"true"===localStorage.getItem(ce(n,"isLocal"))&&localStorage.setItem(ce(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,o.parent||((r=n.getRoot()).width+=1,i.defer(function(){r.width-=1}))};function ie(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function re(e){A.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&A.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function se(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ae(e,t,n){if(n.__li=t,n.__gui=e,i.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),de(e,n.object,n.property,{before:o,factoryArgs:[i.toArray(arguments)]})}if(i.isArray(t)||i.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),de(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof H){var o=new B(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});i.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}}),A.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof B){var r=function(t){if(i.isNumber(n.__min)&&i.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=de(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(o),r&&s.listen(),s}return t};n.min=i.compose(r,n.min),n.max=i.compose(r,n.max)}else n instanceof k?(A.bind(t,"click",function(){A.fakeEvent(n.__checkbox,"click")}),A.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof F?(A.bind(t,"click",function(){A.fakeEvent(n.__button,"click")}),A.bind(t,"mouseover",function(){A.addClass(n.__button,"hover")}),A.bind(t,"mouseout",function(){A.removeClass(n.__button,"hover")})):n instanceof P&&(A.addClass(t,"color"),n.updateDisplay=i.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=i.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&se(e.getRoot(),!0),t},n.setValue)}function le(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,s=void 0;if(r[e.preset])s=r[e.preset];else{if(!r[Q])return;s=r[Q]}if(s[o]&&void 0!==s[o][t.property]){var a=s[o][t.property];t.initialValue=a,t.setValue(a)}}}}function de(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new P(t,n);else{var r=[t,n].concat(o.factoryArgs);i=M.apply(e,r)}o.before instanceof y&&(o.before=o.before.__li),le(e,i),A.addClass(i.domElement,"c");var s=document.createElement("span");A.addClass(s,"property-name"),s.innerHTML=i.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(i.domElement);var l=ie(e,a,o.before);return A.addClass(l,oe.CLASS_CONTROLLER_ROW),i instanceof P?A.addClass(l,"color"):A.addClass(l,u(i.getValue())),ae(e,l,i),e.__controllers.push(i),i}function ce(e,t){return document.location.href+"."+t}function ue(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function _e(e,t){t.style.display=e.useLocalStorage?"block":"none"}function he(e){var t=e.__save_row=document.createElement("li");A.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),A.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",A.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",A.addClass(o,"button"),A.addClass(o,"save");var r=document.createElement("span");r.innerHTML="New",A.addClass(r,"button"),A.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",A.addClass(s,"button"),A.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?i.each(e.load.remembered,function(t,n){ue(e,n,n===e.preset)}):ue(e,Q,!1),A.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(s),q){var l=document.getElementById("dg-local-explain"),d=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ce(e,"isLocal"))&&d.setAttribute("checked","checked"),_e(e,l),A.bind(d,"change",function(){e.useLocalStorage=!e.useLocalStorage,_e(e,l)})}var c=document.getElementById("dg-new-constructor");A.bind(c,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Z.hide()}),A.bind(n,"click",function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Z.show(),c.focus(),c.select()}),A.bind(o,"click",function(){e.save()}),A.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),A.bind(s,"click",function(){e.revert()})}function pe(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){A.removeClass(e.__closeButton,oe.CLASS_DRAG),A.unbind(window,"mousemove",n),A.unbind(window,"mouseup",o)}function r(i){return i.preventDefault(),t=i.clientX,A.addClass(e.__closeButton,oe.CLASS_DRAG),A.bind(window,"mousemove",n),A.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),i.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),A.bind(e.__resize_handle,"mousedown",r),A.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function fe(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function me(e,t){var n={};return i.each(e.__rememberedObjects,function(o,r){var s={},a=e.__rememberedObjectIndecesToControllers[r];i.each(a,function(e,n){s[n]=t?e.initialValue:e.getValue()}),n[r]=s}),n}function ge(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function be(e){0!==e.length&&U.call(window,function(){be(e)}),i.each(e,function(e){e.updateDisplay()})}oe.toggleHide=function(){te=!te,i.each(ne,function(e){e.domElement.style.display=te?"none":""})},oe.CLASS_AUTO_PLACE="a",oe.CLASS_AUTO_PLACE_CONTAINER="ac",oe.CLASS_MAIN="main",oe.CLASS_CONTROLLER_ROW="cr",oe.CLASS_TOO_TALL="taller-than-window",oe.CLASS_CLOSED="closed",oe.CLASS_CLOSE_BUTTON="close-button",oe.CLASS_CLOSE_TOP="close-top",oe.CLASS_CLOSE_BOTTOM="close-bottom",oe.CLASS_DRAG="drag",oe.DEFAULT_WIDTH=245,oe.TEXT_CLOSED="Close Controls",oe.TEXT_OPEN="Open Controls",oe._keydownHandler=function(e){"text"===document.activeElement.type||e.which!==J&&e.keyCode!==J||oe.toggleHide()},A.bind(window,"keydown",oe._keydownHandler,!1),i.extend(oe.prototype,{add:function(e,t){return de(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return de(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;i.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ee.removeChild(this.domElement);var e=this;i.each(this.__folders,function(t){e.removeFolder(t)}),A.unbind(window,"keydown",oe._keydownHandler,!1),re(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new oe(t);this.__folders[e]=n;var o=ie(this,n.domElement);return A.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],re(e);var t=this;i.each(e.__folders,function(t){e.removeFolder(t)}),i.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=A.getOffset(e.__ul).top,n=0;i.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=A.getHeight(t))}),window.innerHeight-t-W<n?(A.addClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-W+"px"):(A.removeClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&i.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:i.debounce(function(){this.onResize()},50),remember:function(){if(i.isUndefined(Z)&&((Z=new X).domElement.innerHTML=z),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;i.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&he(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&fe(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=me(this)),e.folders={},i.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=me(this),se(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Q]=me(this,!0)),this.load.remembered[e]=me(this),this.preset=e,ue(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){i.each(this.__controllers,function(t){this.getRoot().load.remembered?le(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),i.each(this.__folders,function(e){e.revert(e)}),e||se(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&be(this.__listening)},updateDisplay:function(){i.each(this.__controllers,function(e){e.updateDisplay()}),i.each(this.__folders,function(e){e.updateDisplay()})}});var ve={Color:g,math:c,interpret:l};exports.color=ve;var ye={Controller:y,BooleanController:k,OptionController:S,StringController:O,NumberController:L,NumberControllerBox:B,NumberControllerSlider:H,FunctionController:F,ColorController:P};exports.controllers=ye;var we={dom:A};exports.dom=we;var xe={GUI:oe};exports.gui=xe;var Ee=oe;exports.GUI=Ee;var Ce={color:ve,controllers:ye,dom:we,gui:xe,GUI:Ee},Ae=Ce;exports.default=Ae;
},{}],"ZsAW":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.Stats=n()}(this,function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";l=e}var l=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),n(++l%i.children.length)},!1);var a=(performance||Date).now(),o=a,r=0,f=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){a=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(c.update(e-a,200),e>o+1e3&&(f.update(1e3*r/(e-o),100),o=e,r=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var l=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),r=80*o,f=48*o,c=3*o,d=2*o,p=3*o,u=15*o,s=74*o,m=30*o,h=document.createElement("canvas");h.width=r,h.height=f,h.style.cssText="width:80px;height:48px";var v=h.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,r,f),v.fillStyle=t,v.fillText(e,c,d),v.fillRect(p,u,s,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p,u,s,m),{dom:h,update:function(f,y){l=Math.min(l,f),i=Math.max(i,f),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,r,u),v.fillStyle=t,v.fillText(a(f)+" "+e+" ("+a(l)+"-"+a(i)+")",c,d),v.drawImage(h,p+o,u,s-o,m,p,u,s-o,m),v.fillRect(p+s-o,u,o,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p+s-o,u,o,a((1-f/y)*m))}}},e});
},{}],"kql1":[function(require,module,exports) {

var e=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e);
},{}],"nW2g":[function(require,module,exports) {
var r={}.hasOwnProperty;module.exports=function(e,n){return r.call(e,n)};
},{}],"e5TU":[function(require,module,exports) {
module.exports=function(r){try{return!!r()}catch(t){return!0}};
},{}],"ZJLI":[function(require,module,exports) {
module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});
},{"./_fails":"e5TU"}],"KVo1":[function(require,module,exports) {
var e=module.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e);
},{}],"SP6V":[function(require,module,exports) {
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],"DBsB":[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e};
},{"./_is-object":"SP6V"}],"dDni":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_global").document,t=e(r)&&e(r.createElement);module.exports=function(e){return t?r.createElement(e):{}};
},{"./_is-object":"SP6V","./_global":"kql1"}],"UUWM":[function(require,module,exports) {
module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a});
},{"./_descriptors":"ZJLI","./_fails":"e5TU","./_dom-create":"dDni"}],"PUNq":[function(require,module,exports) {
var t=require("./_is-object");module.exports=function(r,e){if(!t(r))return r;var o,n;if(e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;if("function"==typeof(o=r.valueOf)&&!t(n=o.call(r)))return n;if(!e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;throw TypeError("Can't convert object to primitive value")};
},{"./_is-object":"SP6V"}],"wvco":[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_ie8-dom-define"),t=require("./_to-primitive"),i=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(o,n,u){if(e(o),n=t(n,!0),e(u),r)try{return i(o,n,u)}catch(c){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(o[n]=u.value),o};
},{"./_an-object":"DBsB","./_ie8-dom-define":"UUWM","./_to-primitive":"PUNq","./_descriptors":"ZJLI"}],"B9EI":[function(require,module,exports) {
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],"i5RL":[function(require,module,exports) {
var r=require("./_object-dp"),e=require("./_property-desc");module.exports=require("./_descriptors")?function(t,u,o){return r.f(t,u,e(1,o))}:function(r,e,t){return r[e]=t,r};
},{"./_object-dp":"wvco","./_property-desc":"B9EI","./_descriptors":"ZJLI"}],"f0sk":[function(require,module,exports) {
var o=0,t=Math.random();module.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++o+t).toString(36))};
},{}],"Nw1e":[function(require,module,exports) {
module.exports=!1;
},{}],"sTGr":[function(require,module,exports) {

var r=require("./_core"),e=require("./_global"),o="__core-js_shared__",i=e[o]||(e[o]={});(module.exports=function(r,e){return i[r]||(i[r]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:require("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});
},{"./_core":"KVo1","./_global":"kql1","./_library":"Nw1e"}],"xZwm":[function(require,module,exports) {
module.exports=require("./_shared")("native-function-to-string",Function.toString);
},{"./_shared":"sTGr"}],"l2hW":[function(require,module,exports) {

var e=require("./_global"),r=require("./_hide"),t=require("./_has"),i=require("./_uid")("src"),n=require("./_function-to-string"),o="toString",u=(""+n).split(o);require("./_core").inspectSource=function(e){return n.call(e)},(module.exports=function(n,o,c,l){var s="function"==typeof c;s&&(t(c,"name")||r(c,"name",o)),n[o]!==c&&(s&&(t(c,i)||r(c,i,n[o]?""+n[o]:u.join(String(o)))),n===e?n[o]=c:l?n[o]?n[o]=c:r(n,o,c):(delete n[o],r(n,o,c)))})(Function.prototype,o,function(){return"function"==typeof this&&this[i]||n.call(this)});
},{"./_global":"kql1","./_hide":"i5RL","./_has":"nW2g","./_uid":"f0sk","./_function-to-string":"xZwm","./_core":"KVo1"}],"L6p4":[function(require,module,exports) {
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};
},{}],"N9ch":[function(require,module,exports) {
var r=require("./_a-function");module.exports=function(n,t,u){if(r(n),void 0===t)return n;switch(u){case 1:return function(r){return n.call(t,r)};case 2:return function(r,u){return n.call(t,r,u)};case 3:return function(r,u,e){return n.call(t,r,u,e)}}return function(){return n.apply(t,arguments)}};
},{"./_a-function":"L6p4"}],"NjVL":[function(require,module,exports) {

var e=require("./_global"),r=require("./_core"),o=require("./_hide"),i=require("./_redefine"),u=require("./_ctx"),n="prototype",t=function(c,f,l){var q,_,a,d,p=c&t.F,v=c&t.G,F=c&t.S,x=c&t.P,y=c&t.B,B=v?e:F?e[f]||(e[f]={}):(e[f]||{})[n],G=v?r:r[f]||(r[f]={}),P=G[n]||(G[n]={});for(q in v&&(l=f),l)a=((_=!p&&B&&void 0!==B[q])?B:l)[q],d=y&&_?u(a,e):x&&"function"==typeof a?u(Function.call,a):a,B&&i(B,q,a,c&t.U),G[q]!=a&&o(G,q,d),x&&P[q]!=a&&(P[q]=a)};e.core=r,t.F=1,t.G=2,t.S=4,t.P=8,t.B=16,t.W=32,t.U=64,t.R=128,module.exports=t;
},{"./_global":"kql1","./_core":"KVo1","./_hide":"i5RL","./_redefine":"l2hW","./_ctx":"N9ch"}],"RGdG":[function(require,module,exports) {
var e=require("./_uid")("meta"),r=require("./_is-object"),t=require("./_has"),n=require("./_object-dp").f,i=0,u=Object.isExtensible||function(){return!0},f=!require("./_fails")(function(){return u(Object.preventExtensions({}))}),o=function(r){n(r,e,{value:{i:"O"+ ++i,w:{}}})},s=function(n,i){if(!r(n))return"symbol"==typeof n?n:("string"==typeof n?"S":"P")+n;if(!t(n,e)){if(!u(n))return"F";if(!i)return"E";o(n)}return n[e].i},c=function(r,n){if(!t(r,e)){if(!u(r))return!0;if(!n)return!1;o(r)}return r[e].w},E=function(r){return f&&a.NEED&&u(r)&&!t(r,e)&&o(r),r},a=module.exports={KEY:e,NEED:!1,fastKey:s,getWeak:c,onFreeze:E};
},{"./_uid":"f0sk","./_is-object":"SP6V","./_has":"nW2g","./_object-dp":"wvco","./_fails":"e5TU"}],"MgdH":[function(require,module,exports) {
var e=require("./_shared")("wks"),r=require("./_uid"),o=require("./_global").Symbol,u="function"==typeof o,i=module.exports=function(i){return e[i]||(e[i]=u&&o[i]||(u?o:r)("Symbol."+i))};i.store=e;
},{"./_shared":"sTGr","./_uid":"f0sk","./_global":"kql1"}],"iqAm":[function(require,module,exports) {
var e=require("./_object-dp").f,r=require("./_has"),o=require("./_wks")("toStringTag");module.exports=function(t,u,i){t&&!r(t=i?t:t.prototype,o)&&e(t,o,{configurable:!0,value:u})};
},{"./_object-dp":"wvco","./_has":"nW2g","./_wks":"MgdH"}],"d9Ry":[function(require,module,exports) {
exports.f=require("./_wks");
},{"./_wks":"MgdH"}],"hijg":[function(require,module,exports) {

var r=require("./_global"),e=require("./_core"),o=require("./_library"),i=require("./_wks-ext"),l=require("./_object-dp").f;module.exports=function(u){var a=e.Symbol||(e.Symbol=o?{}:r.Symbol||{});"_"==u.charAt(0)||u in a||l(a,u,{value:i.f(u)})};
},{"./_global":"kql1","./_core":"KVo1","./_library":"Nw1e","./_wks-ext":"d9Ry","./_object-dp":"wvco"}],"viv7":[function(require,module,exports) {
var r={}.toString;module.exports=function(t){return r.call(t).slice(8,-1)};
},{}],"kZKK":[function(require,module,exports) {
var e=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(r){return"String"==e(r)?r.split(""):Object(r)};
},{"./_cof":"viv7"}],"Zcur":[function(require,module,exports) {
module.exports=function(o){if(null==o)throw TypeError("Can't call method on  "+o);return o};
},{}],"mwRI":[function(require,module,exports) {
var e=require("./_iobject"),r=require("./_defined");module.exports=function(i){return e(r(i))};
},{"./_iobject":"kZKK","./_defined":"Zcur"}],"cHfm":[function(require,module,exports) {
var o=Math.ceil,r=Math.floor;module.exports=function(t){return isNaN(t=+t)?0:(t>0?r:o)(t)};
},{}],"HdKs":[function(require,module,exports) {
var e=require("./_to-integer"),r=Math.min;module.exports=function(t){return t>0?r(e(t),9007199254740991):0};
},{"./_to-integer":"cHfm"}],"AXg2":[function(require,module,exports) {
var e=require("./_to-integer"),r=Math.max,t=Math.min;module.exports=function(n,a){return(n=e(n))<0?r(n+a,0):t(n,a)};
},{"./_to-integer":"cHfm"}],"dIPJ":[function(require,module,exports) {
var e=require("./_to-iobject"),r=require("./_to-length"),t=require("./_to-absolute-index");module.exports=function(n){return function(i,o,u){var f,l=e(i),a=r(l.length),c=t(u,a);if(n&&o!=o){for(;a>c;)if((f=l[c++])!=f)return!0}else for(;a>c;c++)if((n||c in l)&&l[c]===o)return n||c||0;return!n&&-1}};
},{"./_to-iobject":"mwRI","./_to-length":"HdKs","./_to-absolute-index":"AXg2"}],"xSc0":[function(require,module,exports) {
var e=require("./_shared")("keys"),r=require("./_uid");module.exports=function(u){return e[u]||(e[u]=r(u))};
},{"./_shared":"sTGr","./_uid":"f0sk"}],"UrZ8":[function(require,module,exports) {
var r=require("./_has"),e=require("./_to-iobject"),u=require("./_array-includes")(!1),i=require("./_shared-key")("IE_PROTO");module.exports=function(o,a){var n,s=e(o),t=0,h=[];for(n in s)n!=i&&r(s,n)&&h.push(n);for(;a.length>t;)r(s,n=a[t++])&&(~u(h,n)||h.push(n));return h};
},{"./_has":"nW2g","./_to-iobject":"mwRI","./_array-includes":"dIPJ","./_shared-key":"xSc0"}],"t611":[function(require,module,exports) {
module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
},{}],"kfVX":[function(require,module,exports) {
var e=require("./_object-keys-internal"),r=require("./_enum-bug-keys");module.exports=Object.keys||function(u){return e(u,r)};
},{"./_object-keys-internal":"UrZ8","./_enum-bug-keys":"t611"}],"JErC":[function(require,module,exports) {
exports.f=Object.getOwnPropertySymbols;
},{}],"Blc0":[function(require,module,exports) {
exports.f={}.propertyIsEnumerable;
},{}],"wCtS":[function(require,module,exports) {
var e=require("./_object-keys"),r=require("./_object-gops"),o=require("./_object-pie");module.exports=function(t){var u=e(t),i=r.f;if(i)for(var c,f=i(t),a=o.f,l=0;f.length>l;)a.call(t,c=f[l++])&&u.push(c);return u};
},{"./_object-keys":"kfVX","./_object-gops":"JErC","./_object-pie":"Blc0"}],"OsmR":[function(require,module,exports) {
var r=require("./_cof");module.exports=Array.isArray||function(e){return"Array"==r(e)};
},{"./_cof":"viv7"}],"JfJ5":[function(require,module,exports) {
var e=require("./_defined");module.exports=function(r){return Object(e(r))};
},{"./_defined":"Zcur"}],"Vixs":[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_an-object"),t=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(o,i){r(o);for(var u,c=t(i),n=c.length,s=0;n>s;)e.f(o,u=c[s++],i[u]);return o};
},{"./_object-dp":"wvco","./_an-object":"DBsB","./_object-keys":"kfVX","./_descriptors":"ZJLI"}],"DBa9":[function(require,module,exports) {
var e=require("./_global").document;module.exports=e&&e.documentElement;
},{"./_global":"kql1"}],"d4Ek":[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_object-dps"),t=require("./_enum-bug-keys"),n=require("./_shared-key")("IE_PROTO"),o=function(){},i="prototype",u=function(){var e,r=require("./_dom-create")("iframe"),n=t.length;for(r.style.display="none",require("./_html").appendChild(r),r.src="javascript:",(e=r.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u[i][t[n]];return u()};module.exports=Object.create||function(t,c){var a;return null!==t?(o[i]=e(t),a=new o,o[i]=null,a[n]=t):a=u(),void 0===c?a:r(a,c)};
},{"./_an-object":"DBsB","./_object-dps":"Vixs","./_enum-bug-keys":"t611","./_shared-key":"xSc0","./_dom-create":"dDni","./_html":"DBa9"}],"yyyP":[function(require,module,exports) {
var e=require("./_object-keys-internal"),r=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(t){return e(t,r)};
},{"./_object-keys-internal":"UrZ8","./_enum-bug-keys":"t611"}],"JaVi":[function(require,module,exports) {
var e=require("./_to-iobject"),t=require("./_object-gopn").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n=function(e){try{return t(e)}catch(o){return r.slice()}};module.exports.f=function(c){return r&&"[object Window]"==o.call(c)?n(c):t(e(c))};
},{"./_to-iobject":"mwRI","./_object-gopn":"yyyP"}],"SFON":[function(require,module,exports) {
var e=require("./_object-pie"),r=require("./_property-desc"),i=require("./_to-iobject"),t=require("./_to-primitive"),o=require("./_has"),c=require("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?u:function(p,q){if(p=i(p),q=t(q,!0),c)try{return u(p,q)}catch(_){}if(o(p,q))return r(!e.f.call(p,q),p[q])};
},{"./_object-pie":"Blc0","./_property-desc":"B9EI","./_to-iobject":"mwRI","./_to-primitive":"PUNq","./_has":"nW2g","./_ie8-dom-define":"UUWM","./_descriptors":"ZJLI"}],"s5uV":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_has"),t=require("./_descriptors"),i=require("./_export"),n=require("./_redefine"),o=require("./_meta").KEY,u=require("./_fails"),s=require("./_shared"),f=require("./_set-to-string-tag"),c=require("./_uid"),a=require("./_wks"),l=require("./_wks-ext"),p=require("./_wks-define"),b=require("./_enum-keys"),y=require("./_is-array"),h=require("./_an-object"),_=require("./_is-object"),q=require("./_to-object"),g=require("./_to-iobject"),m=require("./_to-primitive"),v=require("./_property-desc"),d=require("./_object-create"),S=require("./_object-gopn-ext"),j=require("./_object-gopd"),O=require("./_object-gops"),w=require("./_object-dp"),k=require("./_object-keys"),P=j.f,F=w.f,E=S.f,N=e.Symbol,J=e.JSON,x=J&&J.stringify,I="prototype",T=a("_hidden"),C=a("toPrimitive"),M={}.propertyIsEnumerable,D=s("symbol-registry"),G=s("symbols"),K=s("op-symbols"),Q=Object[I],W="function"==typeof N&&!!O.f,Y=e.QObject,z=!Y||!Y[I]||!Y[I].findChild,A=t&&u(function(){return 7!=d(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(e,r,t){var i=P(Q,r);i&&delete Q[r],F(e,r,t),i&&e!==Q&&F(Q,r,i)}:F,B=function(e){var r=G[e]=d(N[I]);return r._k=e,r},H=W&&"symbol"==typeof N.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof N},L=function(e,t,i){return e===Q&&L(K,t,i),h(e),t=m(t,!0),h(i),r(G,t)?(i.enumerable?(r(e,T)&&e[T][t]&&(e[T][t]=!1),i=d(i,{enumerable:v(0,!1)})):(r(e,T)||F(e,T,v(1,{})),e[T][t]=!0),A(e,t,i)):F(e,t,i)},R=function(e,r){h(e);for(var t,i=b(r=g(r)),n=0,o=i.length;o>n;)L(e,t=i[n++],r[t]);return e},U=function(e,r){return void 0===r?d(e):R(d(e),r)},V=function(e){var t=M.call(this,e=m(e,!0));return!(this===Q&&r(G,e)&&!r(K,e))&&(!(t||!r(this,e)||!r(G,e)||r(this,T)&&this[T][e])||t)},X=function(e,t){if(e=g(e),t=m(t,!0),e!==Q||!r(G,t)||r(K,t)){var i=P(e,t);return!i||!r(G,t)||r(e,T)&&e[T][t]||(i.enumerable=!0),i}},Z=function(e){for(var t,i=E(g(e)),n=[],u=0;i.length>u;)r(G,t=i[u++])||t==T||t==o||n.push(t);return n},$=function(e){for(var t,i=e===Q,n=E(i?K:g(e)),o=[],u=0;n.length>u;)!r(G,t=n[u++])||i&&!r(Q,t)||o.push(G[t]);return o};W||(n((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var e=c(arguments.length>0?arguments[0]:void 0),i=function(t){this===Q&&i.call(K,t),r(this,T)&&r(this[T],e)&&(this[T][e]=!1),A(this,e,v(1,t))};return t&&z&&A(Q,e,{configurable:!0,set:i}),B(e)})[I],"toString",function(){return this._k}),j.f=X,w.f=L,require("./_object-gopn").f=S.f=Z,require("./_object-pie").f=V,O.f=$,t&&!require("./_library")&&n(Q,"propertyIsEnumerable",V,!0),l.f=function(e){return B(a(e))}),i(i.G+i.W+i.F*!W,{Symbol:N});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ee.length>re;)a(ee[re++]);for(var te=k(a.store),ie=0;te.length>ie;)p(te[ie++]);i(i.S+i.F*!W,"Symbol",{for:function(e){return r(D,e+="")?D[e]:D[e]=N(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var r in D)if(D[r]===e)return r},useSetter:function(){z=!0},useSimple:function(){z=!1}}),i(i.S+i.F*!W,"Object",{create:U,defineProperty:L,defineProperties:R,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:$});var ne=u(function(){O.f(1)});i(i.S+i.F*ne,"Object",{getOwnPropertySymbols:function(e){return O.f(q(e))}}),J&&i(i.S+i.F*(!W||u(function(){var e=N();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))})),"JSON",{stringify:function(e){for(var r,t,i=[e],n=1;arguments.length>n;)i.push(arguments[n++]);if(t=r=i[1],(_(r)||void 0!==e)&&!H(e))return y(r)||(r=function(e,r){if("function"==typeof t&&(r=t.call(this,e,r)),!H(r))return r}),i[1]=r,x.apply(J,i)}}),N[I][C]||require("./_hide")(N[I],C,N[I].valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(e.JSON,"JSON",!0);
},{"./_global":"kql1","./_has":"nW2g","./_descriptors":"ZJLI","./_export":"NjVL","./_redefine":"l2hW","./_meta":"RGdG","./_fails":"e5TU","./_shared":"sTGr","./_set-to-string-tag":"iqAm","./_uid":"f0sk","./_wks":"MgdH","./_wks-ext":"d9Ry","./_wks-define":"hijg","./_enum-keys":"wCtS","./_is-array":"OsmR","./_an-object":"DBsB","./_is-object":"SP6V","./_to-object":"JfJ5","./_to-iobject":"mwRI","./_to-primitive":"PUNq","./_property-desc":"B9EI","./_object-create":"d4Ek","./_object-gopn-ext":"JaVi","./_object-gopd":"SFON","./_object-gops":"JErC","./_object-dp":"wvco","./_object-keys":"kfVX","./_object-gopn":"yyyP","./_object-pie":"Blc0","./_library":"Nw1e","./_hide":"i5RL"}],"ELq7":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{create:require("./_object-create")});
},{"./_export":"NjVL","./_object-create":"d4Ek"}],"SeKy":[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f});
},{"./_export":"NjVL","./_descriptors":"ZJLI","./_object-dp":"wvco"}],"FFVz":[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F*!require("./_descriptors"),"Object",{defineProperties:require("./_object-dps")});
},{"./_export":"NjVL","./_descriptors":"ZJLI","./_object-dps":"Vixs"}],"GmOm":[function(require,module,exports) {
var e=require("./_export"),r=require("./_core"),t=require("./_fails");module.exports=function(c,i){var o=(r.Object||{})[c]||Object[c],u={};u[c]=i(o),e(e.S+e.F*t(function(){o(1)}),"Object",u)};
},{"./_export":"NjVL","./_core":"KVo1","./_fails":"e5TU"}],"eObd":[function(require,module,exports) {
var r=require("./_to-iobject"),e=require("./_object-gopd").f;require("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,o){return e(r(t),o)}});
},{"./_to-iobject":"mwRI","./_object-gopd":"SFON","./_object-sap":"GmOm"}],"kbAb":[function(require,module,exports) {
var t=require("./_has"),e=require("./_to-object"),o=require("./_shared-key")("IE_PROTO"),r=Object.prototype;module.exports=Object.getPrototypeOf||function(c){return c=e(c),t(c,o)?c[o]:"function"==typeof c.constructor&&c instanceof c.constructor?c.constructor.prototype:c instanceof Object?r:null};
},{"./_has":"nW2g","./_to-object":"JfJ5","./_shared-key":"xSc0"}],"x4A6":[function(require,module,exports) {
var e=require("./_to-object"),r=require("./_object-gpo");require("./_object-sap")("getPrototypeOf",function(){return function(t){return r(e(t))}});
},{"./_to-object":"JfJ5","./_object-gpo":"kbAb","./_object-sap":"GmOm"}],"oiqN":[function(require,module,exports) {
var e=require("./_to-object"),r=require("./_object-keys");require("./_object-sap")("keys",function(){return function(t){return r(e(t))}});
},{"./_to-object":"JfJ5","./_object-keys":"kfVX","./_object-sap":"GmOm"}],"NX5N":[function(require,module,exports) {
require("./_object-sap")("getOwnPropertyNames",function(){return require("./_object-gopn-ext").f});
},{"./_object-sap":"GmOm","./_object-gopn-ext":"JaVi"}],"QMvv":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("freeze",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":"SP6V","./_meta":"RGdG","./_object-sap":"GmOm"}],"y8Nt":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("seal",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":"SP6V","./_meta":"RGdG","./_object-sap":"GmOm"}],"vJzf":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_meta").onFreeze;require("./_object-sap")("preventExtensions",function(n){return function(t){return n&&e(t)?n(r(t)):t}});
},{"./_is-object":"SP6V","./_meta":"RGdG","./_object-sap":"GmOm"}],"UcEb":[function(require,module,exports) {
var r=require("./_is-object");require("./_object-sap")("isFrozen",function(e){return function(n){return!r(n)||!!e&&e(n)}});
},{"./_is-object":"SP6V","./_object-sap":"GmOm"}],"VI7w":[function(require,module,exports) {
var e=require("./_is-object");require("./_object-sap")("isSealed",function(r){return function(i){return!e(i)||!!r&&r(i)}});
},{"./_is-object":"SP6V","./_object-sap":"GmOm"}],"CvEg":[function(require,module,exports) {
var e=require("./_is-object");require("./_object-sap")("isExtensible",function(r){return function(i){return!!e(i)&&(!r||r(i))}});
},{"./_is-object":"SP6V","./_object-sap":"GmOm"}],"bBGE":[function(require,module,exports) {
"use strict";var e=require("./_descriptors"),r=require("./_object-keys"),t=require("./_object-gops"),o=require("./_object-pie"),i=require("./_to-object"),c=require("./_iobject"),n=Object.assign;module.exports=!n||require("./_fails")(function(){var e={},r={},t=Symbol(),o="abcdefghijklmnopqrst";return e[t]=7,o.split("").forEach(function(e){r[e]=e}),7!=n({},e)[t]||Object.keys(n({},r)).join("")!=o})?function(n,u){for(var s=i(n),a=arguments.length,f=1,b=t.f,j=o.f;a>f;)for(var l,q=c(arguments[f++]),_=b?r(q).concat(b(q)):r(q),p=_.length,g=0;p>g;)l=_[g++],e&&!j.call(q,l)||(s[l]=q[l]);return s}:n;
},{"./_descriptors":"ZJLI","./_object-keys":"kfVX","./_object-gops":"JErC","./_object-pie":"Blc0","./_to-object":"JfJ5","./_iobject":"kZKK","./_fails":"e5TU"}],"fRec":[function(require,module,exports) {
var e=require("./_export");e(e.S+e.F,"Object",{assign:require("./_object-assign")});
},{"./_export":"NjVL","./_object-assign":"bBGE"}],"YyyQ":[function(require,module,exports) {
module.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};
},{}],"GEUt":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{is:require("./_same-value")});
},{"./_export":"NjVL","./_same-value":"YyyQ"}],"Epal":[function(require,module,exports) {
var t=require("./_is-object"),e=require("./_an-object"),r=function(r,o){if(e(r),!t(o)&&null!==o)throw TypeError(o+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{(o=require("./_ctx")(Function.call,require("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(c){e=!0}return function(t,c){return r(t,c),e?t.__proto__=c:o(t,c),t}}({},!1):void 0),check:r};
},{"./_is-object":"SP6V","./_an-object":"DBsB","./_ctx":"N9ch","./_object-gopd":"SFON"}],"CQxr":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Object",{setPrototypeOf:require("./_set-proto").set});
},{"./_export":"NjVL","./_set-proto":"Epal"}],"jP8S":[function(require,module,exports) {
var e=require("./_cof"),t=require("./_wks")("toStringTag"),n="Arguments"==e(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(n){}};module.exports=function(u){var o,c,i;return void 0===u?"Undefined":null===u?"Null":"string"==typeof(c=r(o=Object(u),t))?c:n?e(o):"Object"==(i=e(o))&&"function"==typeof o.callee?"Arguments":i};
},{"./_cof":"viv7","./_wks":"MgdH"}],"tSZj":[function(require,module,exports) {
"use strict";var e=require("./_classof"),r={};r[require("./_wks")("toStringTag")]="z",r+""!="[object z]"&&require("./_redefine")(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0);
},{"./_classof":"jP8S","./_wks":"MgdH","./_redefine":"l2hW"}],"TTev":[function(require,module,exports) {
module.exports=function(e,r,l){var a=void 0===l;switch(r.length){case 0:return a?e():e.call(l);case 1:return a?e(r[0]):e.call(l,r[0]);case 2:return a?e(r[0],r[1]):e.call(l,r[0],r[1]);case 3:return a?e(r[0],r[1],r[2]):e.call(l,r[0],r[1],r[2]);case 4:return a?e(r[0],r[1],r[2],r[3]):e.call(l,r[0],r[1],r[2],r[3])}return e.apply(l,r)};
},{}],"nZQG":[function(require,module,exports) {
"use strict";var n=require("./_a-function"),t=require("./_is-object"),r=require("./_invoke"),e=[].slice,i={},o=function(n,t,r){if(!(t in i)){for(var e=[],o=0;o<t;o++)e[o]="a["+o+"]";i[t]=Function("F,a","return new F("+e.join(",")+")")}return i[t](n,r)};module.exports=Function.bind||function(i){var u=n(this),c=e.call(arguments,1),a=function(){var n=c.concat(e.call(arguments));return this instanceof a?o(u,n.length,n):r(u,n,i)};return t(u.prototype)&&(a.prototype=u.prototype),a};
},{"./_a-function":"L6p4","./_is-object":"SP6V","./_invoke":"TTev"}],"eBLX":[function(require,module,exports) {
var r=require("./_export");r(r.P,"Function",{bind:require("./_bind")});
},{"./_export":"NjVL","./_bind":"nZQG"}],"WtEG":[function(require,module,exports) {
var r=require("./_object-dp").f,t=Function.prototype,e=/^\s*function ([^ (]*)/,n="name";n in t||require("./_descriptors")&&r(t,n,{configurable:!0,get:function(){try{return(""+this).match(e)[1]}catch(r){return""}}});
},{"./_object-dp":"wvco","./_descriptors":"ZJLI"}],"YlR3":[function(require,module,exports) {
"use strict";var t=require("./_is-object"),e=require("./_object-gpo"),r=require("./_wks")("hasInstance"),i=Function.prototype;r in i||require("./_object-dp").f(i,r,{value:function(r){if("function"!=typeof this||!t(r))return!1;if(!t(this.prototype))return r instanceof this;for(;r=e(r);)if(this.prototype===r)return!0;return!1}});
},{"./_is-object":"SP6V","./_object-gpo":"kbAb","./_wks":"MgdH","./_object-dp":"wvco"}],"p585":[function(require,module,exports) {
module.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff";
},{}],"EWct":[function(require,module,exports) {
var r=require("./_export"),e=require("./_defined"),i=require("./_fails"),n=require("./_string-ws"),t="["+n+"]",u="​",o=RegExp("^"+t+t+"*"),p=RegExp(t+t+"*$"),a=function(e,t,o){var p={},a=i(function(){return!!n[e]()||u[e]()!=u}),f=p[e]=a?t(c):n[e];o&&(p[o]=f),r(r.P+r.F*a,"String",p)},c=a.trim=function(r,i){return r=String(e(r)),1&i&&(r=r.replace(o,"")),2&i&&(r=r.replace(p,"")),r};module.exports=a;
},{"./_export":"NjVL","./_defined":"Zcur","./_fails":"e5TU","./_string-ws":"p585"}],"m09p":[function(require,module,exports) {
var r=require("./_global").parseInt,e=require("./_string-trim").trim,t=require("./_string-ws"),i=/^[-+]?0[xX]/;module.exports=8!==r(t+"08")||22!==r(t+"0x16")?function(t,n){var s=e(String(t),3);return r(s,n>>>0||(i.test(s)?16:10))}:r;
},{"./_global":"kql1","./_string-trim":"EWct","./_string-ws":"p585"}],"OCDI":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-int");r(r.G+r.F*(parseInt!=e),{parseInt:e});
},{"./_export":"NjVL","./_parse-int":"m09p"}],"EZpC":[function(require,module,exports) {
var r=require("./_global").parseFloat,e=require("./_string-trim").trim;module.exports=1/r(require("./_string-ws")+"-0")!=-1/0?function(t){var i=e(String(t),3),a=r(i);return 0===a&&"-"==i.charAt(0)?-0:a}:r;
},{"./_global":"kql1","./_string-trim":"EWct","./_string-ws":"p585"}],"i7Me":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-float");r(r.G+r.F*(parseFloat!=e),{parseFloat:e});
},{"./_export":"NjVL","./_parse-float":"EZpC"}],"oEgy":[function(require,module,exports) {
var t=require("./_is-object"),o=require("./_set-proto").set;module.exports=function(r,e,p){var u,n=e.constructor;return n!==p&&"function"==typeof n&&(u=n.prototype)!==p.prototype&&t(u)&&o&&o(r,u),r};
},{"./_is-object":"SP6V","./_set-proto":"Epal"}],"uYep":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_has"),t=require("./_cof"),i=require("./_inherit-if-required"),a=require("./_to-primitive"),n=require("./_fails"),o=require("./_object-gopn").f,u=require("./_object-gopd").f,s=require("./_object-dp").f,c=require("./_string-trim").trim,f="Number",_=e[f],I=_,N=_.prototype,p=t(require("./_object-create")(N))==f,l="trim"in String.prototype,q=function(e){var r=a(e,!1);if("string"==typeof r&&r.length>2){var t,i,n,o=(r=l?r.trim():c(r,3)).charCodeAt(0);if(43===o||45===o){if(88===(t=r.charCodeAt(2))||120===t)return NaN}else if(48===o){switch(r.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+r}for(var u,s=r.slice(2),f=0,_=s.length;f<_;f++)if((u=s.charCodeAt(f))<48||u>n)return NaN;return parseInt(s,i)}}return+r};if(!_(" 0o1")||!_("0b1")||_("+0x1")){_=function(e){var r=arguments.length<1?0:e,a=this;return a instanceof _&&(p?n(function(){N.valueOf.call(a)}):t(a)!=f)?i(new I(q(r)),a,_):q(r)};for(var g,h=require("./_descriptors")?o(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;h.length>E;E++)r(I,g=h[E])&&!r(_,g)&&s(_,g,u(I,g));_.prototype=N,N.constructor=_,require("./_redefine")(e,f,_)}
},{"./_global":"kql1","./_has":"nW2g","./_cof":"viv7","./_inherit-if-required":"oEgy","./_to-primitive":"PUNq","./_fails":"e5TU","./_object-gopn":"yyyP","./_object-gopd":"SFON","./_object-dp":"wvco","./_string-trim":"EWct","./_object-create":"d4Ek","./_descriptors":"ZJLI","./_redefine":"l2hW"}],"zgKs":[function(require,module,exports) {
var r=require("./_cof");module.exports=function(e,o){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(o);return+e};
},{"./_cof":"viv7"}],"ezM6":[function(require,module,exports) {
"use strict";var r=require("./_to-integer"),e=require("./_defined");module.exports=function(t){var i=String(e(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(i+=i))1&o&&(n+=i);return n};
},{"./_to-integer":"cHfm","./_defined":"Zcur"}],"dVzo":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_to-integer"),i=require("./_a-number-value"),t=require("./_string-repeat"),n=1..toFixed,o=Math.floor,u=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",a="0",c=function(r,e){for(var i=-1,t=e;++i<6;)t+=r*u[i],u[i]=t%1e7,t=o(t/1e7)},l=function(r){for(var e=6,i=0;--e>=0;)i+=u[e],u[e]=o(i/r),i=i%r*1e7},v=function(){for(var r=6,e="";--r>=0;)if(""!==e||0===r||0!==u[r]){var i=String(u[r]);e=""===e?i:e+t.call(a,7-i.length)+i}return e},x=function(r,e,i){return 0===e?i:e%2==1?x(r,e-1,i*r):x(r*r,e/2,i)},d=function(r){for(var e=0,i=r;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e};r(r.P+r.F*(!!n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!require("./_fails")(function(){n.call({})})),"Number",{toFixed:function(r){var n,o,u,s,F=i(this,f),g=e(r),b="",h=a;if(g<0||g>20)throw RangeError(f);if(F!=F)return"NaN";if(F<=-1e21||F>=1e21)return String(F);if(F<0&&(b="-",F=-F),F>1e-21)if(o=(n=d(F*x(2,69,1))-69)<0?F*x(2,-n,1):F/x(2,n,1),o*=4503599627370496,(n=52-n)>0){for(c(0,o),u=g;u>=7;)c(1e7,0),u-=7;for(c(x(10,u,1),0),u=n-1;u>=23;)l(1<<23),u-=23;l(1<<u),c(1,1),l(2),h=v()}else c(0,o),c(1<<-n,0),h=v()+t.call(a,g);return h=g>0?b+((s=h.length)<=g?"0."+t.call(a,g-s)+h:h.slice(0,s-g)+"."+h.slice(s-g)):b+h}});
},{"./_export":"NjVL","./_to-integer":"cHfm","./_a-number-value":"zgKs","./_string-repeat":"ezM6","./_fails":"e5TU"}],"KwyH":[function(require,module,exports) {
"use strict";var r=require("./_export"),i=require("./_fails"),e=require("./_a-number-value"),n=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==n.call(1,void 0)})||!i(function(){n.call({})})),"Number",{toPrecision:function(r){var i=e(this,"Number#toPrecision: incorrect invocation!");return void 0===r?n.call(i):n.call(i,r)}});
},{"./_export":"NjVL","./_fails":"e5TU","./_a-number-value":"zgKs"}],"Decw":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{EPSILON:Math.pow(2,-52)});
},{"./_export":"NjVL"}],"oWwC":[function(require,module,exports) {
var e=require("./_export"),r=require("./_global").isFinite;e(e.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}});
},{"./_export":"NjVL","./_global":"kql1"}],"yEh5":[function(require,module,exports) {
var e=require("./_is-object"),r=Math.floor;module.exports=function(i){return!e(i)&&isFinite(i)&&r(i)===i};
},{"./_is-object":"SP6V"}],"N7Jd":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Number",{isInteger:require("./_is-integer")});
},{"./_export":"NjVL","./_is-integer":"yEh5"}],"RsrB":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{isNaN:function(r){return r!=r}});
},{"./_export":"NjVL"}],"fbTZ":[function(require,module,exports) {
var e=require("./_export"),r=require("./_is-integer"),i=Math.abs;e(e.S,"Number",{isSafeInteger:function(e){return r(e)&&i(e)<=9007199254740991}});
},{"./_export":"NjVL","./_is-integer":"yEh5"}],"JxHc":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991});
},{"./_export":"NjVL"}],"X6hw":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});
},{"./_export":"NjVL"}],"IKam":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-float");r(r.S+r.F*(Number.parseFloat!=e),"Number",{parseFloat:e});
},{"./_export":"NjVL","./_parse-float":"EZpC"}],"QjIW":[function(require,module,exports) {
var r=require("./_export"),e=require("./_parse-int");r(r.S+r.F*(Number.parseInt!=e),"Number",{parseInt:e});
},{"./_export":"NjVL","./_parse-int":"m09p"}],"u7lu":[function(require,module,exports) {
module.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)};
},{}],"FaF2":[function(require,module,exports) {
var a=require("./_export"),r=require("./_math-log1p"),t=Math.sqrt,h=Math.acosh;a(a.S+a.F*!(h&&710==Math.floor(h(Number.MAX_VALUE))&&h(1/0)==1/0),"Math",{acosh:function(a){return(a=+a)<1?NaN:a>94906265.62425156?Math.log(a)+Math.LN2:r(a-1+t(a-1)*t(a+1))}});
},{"./_export":"NjVL","./_math-log1p":"u7lu"}],"oL1m":[function(require,module,exports) {
var t=require("./_export"),a=Math.asinh;function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}t(t.S+t.F*!(a&&1/a(0)>0),"Math",{asinh:i});
},{"./_export":"NjVL"}],"PhwT":[function(require,module,exports) {
var a=require("./_export"),t=Math.atanh;a(a.S+a.F*!(t&&1/t(-0)<0),"Math",{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}});
},{"./_export":"NjVL"}],"KTfa":[function(require,module,exports) {
module.exports=Math.sign||function(n){return 0==(n=+n)||n!=n?n:n<0?-1:1};
},{}],"fi1h":[function(require,module,exports) {
var r=require("./_export"),t=require("./_math-sign");r(r.S,"Math",{cbrt:function(r){return t(r=+r)*Math.pow(Math.abs(r),1/3)}});
},{"./_export":"NjVL","./_math-sign":"KTfa"}],"fJAy":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{clz32:function(r){return(r>>>=0)?31-Math.floor(Math.log(r+.5)*Math.LOG2E):32}});
},{"./_export":"NjVL"}],"kseY":[function(require,module,exports) {
var r=require("./_export"),e=Math.exp;r(r.S,"Math",{cosh:function(r){return(e(r=+r)+e(-r))/2}});
},{"./_export":"NjVL"}],"FOcF":[function(require,module,exports) {
var e=Math.expm1;module.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||-2e-17!=e(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:e;
},{}],"hyI8":[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1");e(e.S+e.F*(r!=Math.expm1),"Math",{expm1:r});
},{"./_export":"NjVL","./_math-expm1":"FOcF"}],"uZFk":[function(require,module,exports) {
var r=require("./_math-sign"),t=Math.pow,n=t(2,-52),a=t(2,-23),u=t(2,127)*(2-a),e=t(2,-126),o=function(r){return r+1/n-1/n};module.exports=Math.fround||function(t){var h,i,f=Math.abs(t),s=r(t);return f<e?s*o(f/e/a)*e*a:(i=(h=(1+a/n)*f)-(h-f))>u||i!=i?s*(1/0):s*i};
},{"./_math-sign":"KTfa"}],"N7ZU":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{fround:require("./_math-fround")});
},{"./_export":"NjVL","./_math-fround":"uZFk"}],"HGHV":[function(require,module,exports) {
var r=require("./_export"),t=Math.abs;r(r.S,"Math",{hypot:function(r,a){for(var e,h,n=0,o=0,u=arguments.length,M=0;o<u;)M<(e=t(arguments[o++]))?(n=n*(h=M/e)*h+1,M=e):n+=e>0?(h=e/M)*h:e;return M===1/0?1/0:M*Math.sqrt(n)}});
},{"./_export":"NjVL"}],"Pasv":[function(require,module,exports) {
var r=require("./_export"),e=Math.imul;r(r.S+r.F*require("./_fails")(function(){return-5!=e(4294967295,5)||2!=e.length}),"Math",{imul:function(r,e){var t=+r,u=+e,i=65535&t,n=65535&u;return 0|i*n+((65535&t>>>16)*n+i*(65535&u>>>16)<<16>>>0)}});
},{"./_export":"NjVL","./_fails":"e5TU"}],"zlsv":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log10:function(r){return Math.log(r)*Math.LOG10E}});
},{"./_export":"NjVL"}],"RR3i":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log1p:require("./_math-log1p")});
},{"./_export":"NjVL","./_math-log1p":"u7lu"}],"b6PB":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{log2:function(r){return Math.log(r)/Math.LN2}});
},{"./_export":"NjVL"}],"BHWJ":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{sign:require("./_math-sign")});
},{"./_export":"NjVL","./_math-sign":"KTfa"}],"f0FZ":[function(require,module,exports) {
var e=require("./_export"),r=require("./_math-expm1"),t=Math.exp;e(e.S+e.F*require("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(r(e)-r(-e))/2:(t(e-1)-t(-e-1))*(Math.E/2)}});
},{"./_export":"NjVL","./_math-expm1":"FOcF","./_fails":"e5TU"}],"GaA9":[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-expm1"),t=Math.exp;r(r.S,"Math",{tanh:function(r){var a=e(r=+r),h=e(-r);return a==1/0?1:h==1/0?-1:(a-h)/(t(r)+t(-r))}});
},{"./_export":"NjVL","./_math-expm1":"FOcF"}],"qy71":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{trunc:function(r){return(r>0?Math.floor:Math.ceil)(r)}});
},{"./_export":"NjVL"}],"i8rB":[function(require,module,exports) {
var r=require("./_export"),o=require("./_to-absolute-index"),e=String.fromCharCode,n=String.fromCodePoint;r(r.S+r.F*(!!n&&1!=n.length),"String",{fromCodePoint:function(r){for(var n,t=[],i=arguments.length,a=0;i>a;){if(n=+arguments[a++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");t.push(n<65536?e(n):e(55296+((n-=65536)>>10),n%1024+56320))}return t.join("")}});
},{"./_export":"NjVL","./_to-absolute-index":"AXg2"}],"DtRm":[function(require,module,exports) {
var r=require("./_export"),e=require("./_to-iobject"),t=require("./_to-length");r(r.S,"String",{raw:function(r){for(var n=e(r.raw),i=t(n.length),o=arguments.length,u=[],g=0;i>g;)u.push(String(n[g++])),g<o&&u.push(String(arguments[g]));return u.join("")}});
},{"./_export":"NjVL","./_to-iobject":"mwRI","./_to-length":"HdKs"}],"Z1j3":[function(require,module,exports) {
"use strict";require("./_string-trim")("trim",function(r){return function(){return r(this,3)}});
},{"./_string-trim":"EWct"}],"BiTF":[function(require,module,exports) {
var e=require("./_to-integer"),r=require("./_defined");module.exports=function(t){return function(n,i){var o,u,c=String(r(n)),d=e(i),a=c.length;return d<0||d>=a?t?"":void 0:(o=c.charCodeAt(d))<55296||o>56319||d+1===a||(u=c.charCodeAt(d+1))<56320||u>57343?t?c.charAt(d):o:t?c.slice(d,d+2):u-56320+(o-55296<<10)+65536}};
},{"./_to-integer":"cHfm","./_defined":"Zcur"}],"oANp":[function(require,module,exports) {
module.exports={};
},{}],"O1PE":[function(require,module,exports) {
"use strict";var e=require("./_object-create"),r=require("./_property-desc"),t=require("./_set-to-string-tag"),i={};require("./_hide")(i,require("./_wks")("iterator"),function(){return this}),module.exports=function(o,u,s){o.prototype=e(i,{next:r(1,s)}),t(o,u+" Iterator")};
},{"./_object-create":"d4Ek","./_property-desc":"B9EI","./_set-to-string-tag":"iqAm","./_hide":"i5RL","./_wks":"MgdH"}],"kgNZ":[function(require,module,exports) {
"use strict";var e=require("./_library"),r=require("./_export"),t=require("./_redefine"),i=require("./_hide"),n=require("./_iterators"),u=require("./_iter-create"),o=require("./_set-to-string-tag"),s=require("./_object-gpo"),a=require("./_wks")("iterator"),c=!([].keys&&"next"in[].keys()),f="@@iterator",l="keys",q="values",y=function(){return this};module.exports=function(_,p,h,k,v,w,d){u(h,p,k);var x,b,g,j=function(e){if(!c&&e in I)return I[e];switch(e){case l:case q:return function(){return new h(this,e)}}return function(){return new h(this,e)}},m=p+" Iterator",A=v==q,F=!1,I=_.prototype,O=I[a]||I[f]||v&&I[v],P=O||j(v),z=v?A?j("entries"):P:void 0,B="Array"==p&&I.entries||O;if(B&&(g=s(B.call(new _)))!==Object.prototype&&g.next&&(o(g,m,!0),e||"function"==typeof g[a]||i(g,a,y)),A&&O&&O.name!==q&&(F=!0,P=function(){return O.call(this)}),e&&!d||!c&&!F&&I[a]||i(I,a,P),n[p]=P,n[m]=y,v)if(x={values:A?P:j(q),keys:w?P:j(l),entries:z},d)for(b in x)b in I||t(I,b,x[b]);else r(r.P+r.F*(c||F),p,x);return x};
},{"./_library":"Nw1e","./_export":"NjVL","./_redefine":"l2hW","./_hide":"i5RL","./_iterators":"oANp","./_iter-create":"O1PE","./_set-to-string-tag":"iqAm","./_object-gpo":"kbAb","./_wks":"MgdH"}],"Wu89":[function(require,module,exports) {
"use strict";var i=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(i){this._t=String(i),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})});
},{"./_string-at":"BiTF","./_iter-define":"kgNZ"}],"P7ku":[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_string-at")(!1);r(r.P,"String",{codePointAt:function(r){return t(this,r)}});
},{"./_export":"NjVL","./_string-at":"BiTF"}],"g8m6":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_cof"),i=require("./_wks")("match");module.exports=function(o){var u;return e(o)&&(void 0!==(u=o[i])?!!u:"RegExp"==r(o))};
},{"./_is-object":"SP6V","./_cof":"viv7","./_wks":"MgdH"}],"xRT2":[function(require,module,exports) {
var e=require("./_is-regexp"),r=require("./_defined");module.exports=function(i,t,n){if(e(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(i))};
},{"./_is-regexp":"g8m6","./_defined":"Zcur"}],"ed2d":[function(require,module,exports) {
var r=require("./_wks")("match");module.exports=function(t){var c=/./;try{"/./"[t](c)}catch(e){try{return c[r]=!1,!"/./"[t](c)}catch(a){}}return!0};
},{"./_wks":"MgdH"}],"MUpt":[function(require,module,exports) {
"use strict";var e=require("./_export"),t=require("./_to-length"),i=require("./_string-context"),r="endsWith",n=""[r];e(e.P+e.F*require("./_fails-is-regexp")(r),"String",{endsWith:function(e){var s=i(this,e,r),g=arguments.length>1?arguments[1]:void 0,h=t(s.length),l=void 0===g?h:Math.min(t(g),h),u=String(e);return n?n.call(s,u,l):s.slice(l-u.length,l)===u}});
},{"./_export":"NjVL","./_to-length":"HdKs","./_string-context":"xRT2","./_fails-is-regexp":"ed2d"}],"IvzQ":[function(require,module,exports) {
"use strict";var e=require("./_export"),i=require("./_string-context"),r="includes";e(e.P+e.F*require("./_fails-is-regexp")(r),"String",{includes:function(e){return!!~i(this,e,r).indexOf(e,arguments.length>1?arguments[1]:void 0)}});
},{"./_export":"NjVL","./_string-context":"xRT2","./_fails-is-regexp":"ed2d"}],"s8Pp":[function(require,module,exports) {
var r=require("./_export");r(r.P,"String",{repeat:require("./_string-repeat")});
},{"./_export":"NjVL","./_string-repeat":"ezM6"}],"hSvU":[function(require,module,exports) {
"use strict";var t=require("./_export"),r=require("./_to-length"),e=require("./_string-context"),i="startsWith",n=""[i];t(t.P+t.F*require("./_fails-is-regexp")(i),"String",{startsWith:function(t){var s=e(this,t,i),g=r(Math.min(arguments.length>1?arguments[1]:void 0,s.length)),h=String(t);return n?n.call(s,h,g):s.slice(g,g+h.length)===h}});
},{"./_export":"NjVL","./_to-length":"HdKs","./_string-context":"xRT2","./_fails-is-regexp":"ed2d"}],"SUan":[function(require,module,exports) {
var r=require("./_export"),e=require("./_fails"),t=require("./_defined"),n=/"/g,i=function(r,e,i,u){var o=String(t(r)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(u).replace(n,"&quot;")+'"'),a+">"+o+"</"+e+">"};module.exports=function(t,n){var u={};u[t]=n(i),r(r.P+r.F*e(function(){var r=""[t]('"');return r!==r.toLowerCase()||r.split('"').length>3}),"String",u)};
},{"./_export":"NjVL","./_fails":"e5TU","./_defined":"Zcur"}],"Qidu":[function(require,module,exports) {
"use strict";require("./_string-html")("anchor",function(n){return function(r){return n(this,"a","name",r)}});
},{"./_string-html":"SUan"}],"zi4A":[function(require,module,exports) {
"use strict";require("./_string-html")("big",function(t){return function(){return t(this,"big","","")}});
},{"./_string-html":"SUan"}],"tDaT":[function(require,module,exports) {
"use strict";require("./_string-html")("blink",function(n){return function(){return n(this,"blink","","")}});
},{"./_string-html":"SUan"}],"VlCA":[function(require,module,exports) {
"use strict";require("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}});
},{"./_string-html":"SUan"}],"BahM":[function(require,module,exports) {
"use strict";require("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}});
},{"./_string-html":"SUan"}],"f6mn":[function(require,module,exports) {
"use strict";require("./_string-html")("fontcolor",function(t){return function(r){return t(this,"font","color",r)}});
},{"./_string-html":"SUan"}],"Du0n":[function(require,module,exports) {
"use strict";require("./_string-html")("fontsize",function(t){return function(n){return t(this,"font","size",n)}});
},{"./_string-html":"SUan"}],"EmZX":[function(require,module,exports) {
"use strict";require("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}});
},{"./_string-html":"SUan"}],"mlNr":[function(require,module,exports) {
"use strict";require("./_string-html")("link",function(r){return function(t){return r(this,"a","href",t)}});
},{"./_string-html":"SUan"}],"QeD6":[function(require,module,exports) {
"use strict";require("./_string-html")("small",function(t){return function(){return t(this,"small","","")}});
},{"./_string-html":"SUan"}],"ny4U":[function(require,module,exports) {
"use strict";require("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}});
},{"./_string-html":"SUan"}],"Pvqx":[function(require,module,exports) {
"use strict";require("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}});
},{"./_string-html":"SUan"}],"mRpz":[function(require,module,exports) {
"use strict";require("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}});
},{"./_string-html":"SUan"}],"qW2d":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Date",{now:function(){return(new Date).getTime()}});
},{"./_export":"NjVL"}],"DLwC":[function(require,module,exports) {
"use strict";var t=require("./_export"),e=require("./_to-object"),r=require("./_to-primitive");t(t.P+t.F*require("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var i=e(this),n=r(i);return"number"!=typeof n||isFinite(n)?i.toISOString():null}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_to-primitive":"PUNq","./_fails":"e5TU"}],"L3vj":[function(require,module,exports) {
"use strict";var t=require("./_fails"),e=Date.prototype.getTime,i=Date.prototype.toISOString,n=function(t){return t>9?t:"0"+t};module.exports=t(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!t(function(){i.call(new Date(NaN))})?function(){if(!isFinite(e.call(this)))throw RangeError("Invalid time value");var t=this,i=t.getUTCFullYear(),r=t.getUTCMilliseconds(),a=i<0?"-":i>9999?"+":"";return a+("00000"+Math.abs(i)).slice(a?-6:-4)+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+(r>99?r:"0"+n(r))+"Z"}:i;
},{"./_fails":"e5TU"}],"Q9dY":[function(require,module,exports) {
var t=require("./_export"),r=require("./_date-to-iso-string");t(t.P+t.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r});
},{"./_export":"NjVL","./_date-to-iso-string":"L3vj"}],"A8WX":[function(require,module,exports) {
var e=Date.prototype,t="Invalid Date",a="toString",r=e[a],i=e.getTime;new Date(NaN)+""!=t&&require("./_redefine")(e,a,function(){var e=i.call(this);return e==e?r.call(this):t});
},{"./_redefine":"l2hW"}],"p7vl":[function(require,module,exports) {
"use strict";var r=require("./_an-object"),e=require("./_to-primitive"),t="number";module.exports=function(i){if("string"!==i&&i!==t&&"default"!==i)throw TypeError("Incorrect hint");return e(r(this),i!=t)};
},{"./_an-object":"DBsB","./_to-primitive":"PUNq"}],"jJtq":[function(require,module,exports) {
var e=require("./_wks")("toPrimitive"),i=Date.prototype;e in i||require("./_hide")(i,e,require("./_date-to-primitive"));
},{"./_wks":"MgdH","./_hide":"i5RL","./_date-to-primitive":"p7vl"}],"OdQU":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Array",{isArray:require("./_is-array")});
},{"./_export":"NjVL","./_is-array":"OsmR"}],"pqj2":[function(require,module,exports) {
var r=require("./_an-object");module.exports=function(t,e,o,a){try{return a?e(r(o)[0],o[1]):e(o)}catch(n){var c=t.return;throw void 0!==c&&r(c.call(t)),n}};
},{"./_an-object":"DBsB"}],"DsPZ":[function(require,module,exports) {
var r=require("./_iterators"),e=require("./_wks")("iterator"),t=Array.prototype;module.exports=function(o){return void 0!==o&&(r.Array===o||t[e]===o)};
},{"./_iterators":"oANp","./_wks":"MgdH"}],"WfCN":[function(require,module,exports) {
"use strict";var e=require("./_object-dp"),r=require("./_property-desc");module.exports=function(t,i,o){i in t?e.f(t,i,r(0,o)):t[i]=o};
},{"./_object-dp":"wvco","./_property-desc":"B9EI"}],"kX9y":[function(require,module,exports) {
var r=require("./_classof"),e=require("./_wks")("iterator"),t=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(o){if(null!=o)return o[e]||o["@@iterator"]||t[r(o)]};
},{"./_classof":"jP8S","./_wks":"MgdH","./_iterators":"oANp","./_core":"KVo1"}],"Pd7X":[function(require,module,exports) {
var r=require("./_wks")("iterator"),t=!1;try{var n=[7][r]();n.return=function(){t=!0},Array.from(n,function(){throw 2})}catch(e){}module.exports=function(n,u){if(!u&&!t)return!1;var o=!1;try{var c=[7],a=c[r]();a.next=function(){return{done:o=!0}},c[r]=function(){return a},n(c)}catch(e){}return o};
},{"./_wks":"MgdH"}],"hO05":[function(require,module,exports) {
"use strict";var e=require("./_ctx"),r=require("./_export"),t=require("./_to-object"),i=require("./_iter-call"),o=require("./_is-array-iter"),u=require("./_to-length"),n=require("./_create-property"),a=require("./core.get-iterator-method");r(r.S+r.F*!require("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(r){var l,c,f,q,_=t(r),h="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,d=void 0!==y,s=0,g=a(_);if(d&&(y=e(y,v>2?arguments[2]:void 0,2)),null==g||h==Array&&o(g))for(c=new h(l=u(_.length));l>s;s++)n(c,s,d?y(_[s],s):_[s]);else for(q=g.call(_),c=new h;!(f=q.next()).done;s++)n(c,s,d?i(q,y,[f.value,s],!0):f.value);return c.length=s,c}});
},{"./_ctx":"N9ch","./_export":"NjVL","./_to-object":"JfJ5","./_iter-call":"pqj2","./_is-array-iter":"DsPZ","./_to-length":"HdKs","./_create-property":"WfCN","./core.get-iterator-method":"kX9y","./_iter-detect":"Pd7X"}],"ARIR":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_create-property");r(r.S+r.F*require("./_fails")(function(){function r(){}return!(Array.of.call(r)instanceof r)}),"Array",{of:function(){for(var r=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>r;)e(n,r,arguments[r++]);return n.length=t,n}});
},{"./_export":"NjVL","./_create-property":"WfCN","./_fails":"e5TU"}],"FL6U":[function(require,module,exports) {
"use strict";var l=require("./_fails");module.exports=function(n,u){return!!n&&l(function(){u?n.call(null,function(){},1):n.call(null)})};
},{"./_fails":"e5TU"}],"e5fN":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_to-iobject"),i=[].join;r(r.P+r.F*(require("./_iobject")!=Object||!require("./_strict-method")(i)),"Array",{join:function(r){return i.call(e(this),void 0===r?",":r)}});
},{"./_export":"NjVL","./_to-iobject":"mwRI","./_iobject":"kZKK","./_strict-method":"FL6U"}],"TSa4":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_html"),i=require("./_cof"),t=require("./_to-absolute-index"),u=require("./_to-length"),a=[].slice;r(r.P+r.F*require("./_fails")(function(){e&&a.call(e)}),"Array",{slice:function(r,e){var l=u(this.length),n=i(this);if(e=void 0===e?l:e,"Array"==n)return a.call(this,r,e);for(var s=t(r,l),c=t(e,l),h=u(c-s),o=new Array(h),f=0;f<h;f++)o[f]="String"==n?this.charAt(s+f):this[s+f];return o}});
},{"./_export":"NjVL","./_html":"DBa9","./_cof":"viv7","./_to-absolute-index":"AXg2","./_to-length":"HdKs","./_fails":"e5TU"}],"xw8W":[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_a-function"),i=require("./_to-object"),e=require("./_fails"),o=[].sort,u=[1,2,3];r(r.P+r.F*(e(function(){u.sort(void 0)})||!e(function(){u.sort(null)})||!require("./_strict-method")(o)),"Array",{sort:function(r){return void 0===r?o.call(i(this)):o.call(i(this),t(r))}});
},{"./_export":"NjVL","./_a-function":"L6p4","./_to-object":"JfJ5","./_fails":"e5TU","./_strict-method":"FL6U"}],"UWRR":[function(require,module,exports) {
var r=require("./_is-object"),e=require("./_is-array"),o=require("./_wks")("species");module.exports=function(i){var t;return e(i)&&("function"!=typeof(t=i.constructor)||t!==Array&&!e(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t};
},{"./_is-object":"SP6V","./_is-array":"OsmR","./_wks":"MgdH"}],"yi52":[function(require,module,exports) {
var r=require("./_array-species-constructor");module.exports=function(e,n){return new(r(e))(n)};
},{"./_array-species-constructor":"UWRR"}],"H1nT":[function(require,module,exports) {
var e=require("./_ctx"),r=require("./_iobject"),t=require("./_to-object"),i=require("./_to-length"),u=require("./_array-species-create");module.exports=function(n,c){var s=1==n,a=2==n,o=3==n,f=4==n,l=6==n,q=5==n||l,_=c||u;return function(u,c,h){for(var v,p,b=t(u),d=r(b),g=e(c,h,3),j=i(d.length),x=0,m=s?_(u,j):a?_(u,0):void 0;j>x;x++)if((q||x in d)&&(p=g(v=d[x],x,b),n))if(s)m[x]=p;else if(p)switch(n){case 3:return!0;case 5:return v;case 6:return x;case 2:m.push(v)}else if(f)return!1;return l?-1:o||f?f:m}};
},{"./_ctx":"N9ch","./_iobject":"kZKK","./_to-object":"JfJ5","./_to-length":"HdKs","./_array-species-create":"yi52"}],"bomu":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(0),t=require("./_strict-method")([].forEach,!0);r(r.P+r.F*!t,"Array",{forEach:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"P4Vy":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(1);r(r.P+r.F*!require("./_strict-method")([].map,!0),"Array",{map:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"kLvk":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(2);r(r.P+r.F*!require("./_strict-method")([].filter,!0),"Array",{filter:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"jLap":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(3);r(r.P+r.F*!require("./_strict-method")([].some,!0),"Array",{some:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"KLYK":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(4);r(r.P+r.F*!require("./_strict-method")([].every,!0),"Array",{every:function(r){return e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-methods":"H1nT","./_strict-method":"FL6U"}],"vp63":[function(require,module,exports) {
var r=require("./_a-function"),e=require("./_to-object"),i=require("./_iobject"),o=require("./_to-length");module.exports=function(t,n,u,a,f){r(n);var c=e(t),l=i(c),h=o(c.length),q=f?h-1:0,_=f?-1:1;if(u<2)for(;;){if(q in l){a=l[q],q+=_;break}if(q+=_,f?q<0:h<=q)throw TypeError("Reduce of empty array with no initial value")}for(;f?q>=0:h>q;q+=_)q in l&&(a=n(a,l[q],q,c));return a};
},{"./_a-function":"L6p4","./_to-object":"JfJ5","./_iobject":"kZKK","./_to-length":"HdKs"}],"dZ7F":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-reduce");r(r.P+r.F*!require("./_strict-method")([].reduce,!0),"Array",{reduce:function(r){return e(this,r,arguments.length,arguments[1],!1)}});
},{"./_export":"NjVL","./_array-reduce":"vp63","./_strict-method":"FL6U"}],"Wzw6":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-reduce");r(r.P+r.F*!require("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(r){return e(this,r,arguments.length,arguments[1],!0)}});
},{"./_export":"NjVL","./_array-reduce":"vp63","./_strict-method":"FL6U"}],"jGln":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-includes")(!1),i=[].indexOf,t=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(t||!require("./_strict-method")(i)),"Array",{indexOf:function(r){return t?i.apply(this,arguments)||0:e(this,r,arguments[1])}});
},{"./_export":"NjVL","./_array-includes":"dIPJ","./_strict-method":"FL6U"}],"iGRw":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-iobject"),t=require("./_to-integer"),i=require("./_to-length"),n=[].lastIndexOf,u=!!n&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(u||!require("./_strict-method")(n)),"Array",{lastIndexOf:function(e){if(u)return n.apply(this,arguments)||0;var a=r(this),o=i(a.length),s=o-1;for(arguments.length>1&&(s=Math.min(s,t(arguments[1]))),s<0&&(s=o+s);s>=0;s--)if(s in a&&a[s]===e)return s||0;return-1}});
},{"./_export":"NjVL","./_to-iobject":"mwRI","./_to-integer":"cHfm","./_to-length":"HdKs","./_strict-method":"FL6U"}],"okFf":[function(require,module,exports) {
"use strict";var e=require("./_to-object"),t=require("./_to-absolute-index"),i=require("./_to-length");module.exports=[].copyWithin||function(r,o){var n=e(this),u=i(n.length),h=t(r,u),l=t(o,u),d=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===d?u:t(d,u))-l,u-h),a=1;for(l<h&&h<l+s&&(a=-1,l+=s-1,h+=s-1);s-- >0;)l in n?n[h]=n[l]:delete n[h],h+=a,l+=a;return n};
},{"./_to-object":"JfJ5","./_to-absolute-index":"AXg2","./_to-length":"HdKs"}],"PxQA":[function(require,module,exports) {
var e=require("./_wks")("unscopables"),r=Array.prototype;null==r[e]&&require("./_hide")(r,e,{}),module.exports=function(o){r[e][o]=!0};
},{"./_wks":"MgdH","./_hide":"i5RL"}],"vJRO":[function(require,module,exports) {
var r=require("./_export");r(r.P,"Array",{copyWithin:require("./_array-copy-within")}),require("./_add-to-unscopables")("copyWithin");
},{"./_export":"NjVL","./_array-copy-within":"okFf","./_add-to-unscopables":"PxQA"}],"UYMr":[function(require,module,exports) {
"use strict";var e=require("./_to-object"),t=require("./_to-absolute-index"),r=require("./_to-length");module.exports=function(o){for(var i=e(this),u=r(i.length),n=arguments.length,d=t(n>1?arguments[1]:void 0,u),l=n>2?arguments[2]:void 0,s=void 0===l?u:t(l,u);s>d;)i[d++]=o;return i};
},{"./_to-object":"JfJ5","./_to-absolute-index":"AXg2","./_to-length":"HdKs"}],"fHCf":[function(require,module,exports) {
var r=require("./_export");r(r.P,"Array",{fill:require("./_array-fill")}),require("./_add-to-unscopables")("fill");
},{"./_export":"NjVL","./_array-fill":"UYMr","./_add-to-unscopables":"PxQA"}],"HBFq":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(5),i="find",n=!0;i in[]&&Array(1)[i](function(){n=!1}),r(r.P+r.F*n,"Array",{find:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(i);
},{"./_export":"NjVL","./_array-methods":"H1nT","./_add-to-unscopables":"PxQA"}],"xRcq":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-methods")(6),n="findIndex",i=!0;n in[]&&Array(1)[n](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")(n);
},{"./_export":"NjVL","./_array-methods":"H1nT","./_add-to-unscopables":"PxQA"}],"Bn5Q":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_object-dp"),i=require("./_descriptors"),t=require("./_wks")("species");module.exports=function(u){var s=e[u];i&&s&&!s[t]&&r.f(s,t,{configurable:!0,get:function(){return this}})};
},{"./_global":"kql1","./_object-dp":"wvco","./_descriptors":"ZJLI","./_wks":"MgdH"}],"Smp7":[function(require,module,exports) {
require("./_set-species")("Array");
},{"./_set-species":"Bn5Q"}],"t4Zd":[function(require,module,exports) {
module.exports=function(e,n){return{value:n,done:!!e}};
},{}],"xsAw":[function(require,module,exports) {
"use strict";var e=require("./_add-to-unscopables"),r=require("./_iter-step"),t=require("./_iterators"),i=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(e,r){this._t=i(e),this._i=0,this._k=r},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),t.Arguments=t.Array,e("keys"),e("values"),e("entries");
},{"./_add-to-unscopables":"PxQA","./_iter-step":"t4Zd","./_iterators":"oANp","./_to-iobject":"mwRI","./_iter-define":"kgNZ"}],"aRjg":[function(require,module,exports) {
"use strict";var e=require("./_an-object");module.exports=function(){var i=e(this),r="";return i.global&&(r+="g"),i.ignoreCase&&(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),i.sticky&&(r+="y"),r};
},{"./_an-object":"DBsB"}],"hBwo":[function(require,module,exports) {

var e=require("./_global"),r=require("./_inherit-if-required"),i=require("./_object-dp").f,t=require("./_object-gopn").f,n=require("./_is-regexp"),o=require("./_flags"),u=e.RegExp,c=u,s=u.prototype,f=/a/g,a=/a/g,g=new u(f)!==f;if(require("./_descriptors")&&(!g||require("./_fails")(function(){return a[require("./_wks")("match")]=!1,u(f)!=f||u(a)==a||"/a/i"!=u(f,"i")}))){u=function(e,i){var t=this instanceof u,f=n(e),a=void 0===i;return!t&&f&&e.constructor===u&&a?e:r(g?new c(f&&!a?e.source:e,i):c((f=e instanceof u)?e.source:e,f&&a?o.call(e):i),t?this:s,u)};for(var p=function(e){e in u||i(u,e,{configurable:!0,get:function(){return c[e]},set:function(r){c[e]=r}})},q=t(c),_=0;q.length>_;)p(q[_++]);s.constructor=u,u.prototype=s,require("./_redefine")(e,"RegExp",u)}require("./_set-species")("RegExp");
},{"./_global":"kql1","./_inherit-if-required":"oEgy","./_object-dp":"wvco","./_object-gopn":"yyyP","./_is-regexp":"g8m6","./_flags":"aRjg","./_descriptors":"ZJLI","./_fails":"e5TU","./_wks":"MgdH","./_redefine":"l2hW","./_set-species":"Bn5Q"}],"a7p6":[function(require,module,exports) {
"use strict";var e=require("./_flags"),l=RegExp.prototype.exec,t=String.prototype.replace,r=l,a="lastIndex",n=function(){var e=/a/,t=/b*/g;return l.call(e,"a"),l.call(t,"a"),0!==e[a]||0!==t[a]}(),o=void 0!==/()??/.exec("")[1],c=n||o;c&&(r=function(r){var c,i,g,u,p=this;return o&&(i=new RegExp("^"+p.source+"$(?!\\s)",e.call(p))),n&&(c=p[a]),g=l.call(p,r),n&&g&&(p[a]=p.global?g.index+g[0].length:c),o&&g&&g.length>1&&t.call(g[0],i,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(g[u]=void 0)}),g}),module.exports=r;
},{"./_flags":"aRjg"}],"ej7E":[function(require,module,exports) {
"use strict";var e=require("./_regexp-exec");require("./_export")({target:"RegExp",proto:!0,forced:e!==/./.exec},{exec:e});
},{"./_regexp-exec":"a7p6","./_export":"NjVL"}],"SALB":[function(require,module,exports) {
require("./_descriptors")&&"g"!=/./g.flags&&require("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:require("./_flags")});
},{"./_descriptors":"ZJLI","./_object-dp":"wvco","./_flags":"aRjg"}],"yEH7":[function(require,module,exports) {

"use strict";require("./es6.regexp.flags");var e=require("./_an-object"),r=require("./_flags"),i=require("./_descriptors"),n="toString",t=/./[n],a=function(e){require("./_redefine")(RegExp.prototype,n,e,!0)};require("./_fails")(function(){return"/a/b"!=t.call({source:"a",flags:"b"})})?a(function(){var n=e(this);return"/".concat(n.source,"/","flags"in n?n.flags:!i&&n instanceof RegExp?r.call(n):void 0)}):t.name!=n&&a(function(){return t.call(this)});
},{"./es6.regexp.flags":"SALB","./_an-object":"DBsB","./_flags":"aRjg","./_descriptors":"ZJLI","./_redefine":"l2hW","./_fails":"e5TU"}],"aXIG":[function(require,module,exports) {
"use strict";var r=require("./_string-at")(!0);module.exports=function(t,e,n){return e+(n?r(t,e).length:1)};
},{"./_string-at":"BiTF"}],"G0TB":[function(require,module,exports) {
"use strict";var e=require("./_classof"),r=RegExp.prototype.exec;module.exports=function(t,o){var c=t.exec;if("function"==typeof c){var n=c.call(t,o);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==e(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,o)};
},{"./_classof":"jP8S"}],"w7ZK":[function(require,module,exports) {
"use strict";require("./es6.regexp.exec");var e=require("./_redefine"),r=require("./_hide"),n=require("./_fails"),t=require("./_defined"),u=require("./_wks"),i=require("./_regexp-exec"),c=u("species"),o=!n(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),a=function(){var e=/(?:)/,r=e.exec;e.exec=function(){return r.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();module.exports=function(l,f,p){var s=u(l),v=!n(function(){var e={};return e[s]=function(){return 7},7!=""[l](e)}),x=v?!n(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===l&&(r.constructor={},r.constructor[c]=function(){return r}),r[s](""),!e}):void 0;if(!v||!x||"replace"===l&&!o||"split"===l&&!a){var d=/./[s],q=p(t,s,""[l],function(e,r,n,t,u){return r.exec===i?v&&!u?{done:!0,value:d.call(r,n,t)}:{done:!0,value:e.call(n,r,t)}:{done:!1}}),g=q[0],_=q[1];e(String.prototype,l,g),r(RegExp.prototype,s,2==f?function(e,r){return _.call(e,this,r)}:function(e){return _.call(e,this)})}};
},{"./es6.regexp.exec":"ej7E","./_redefine":"l2hW","./_hide":"i5RL","./_fails":"e5TU","./_defined":"Zcur","./_wks":"MgdH","./_regexp-exec":"a7p6"}],"yikX":[function(require,module,exports) {
"use strict";var r=require("./_an-object"),e=require("./_to-length"),n=require("./_advance-string-index"),t=require("./_regexp-exec-abstract");require("./_fix-re-wks")("match",1,function(i,a,u,l){return[function(r){var e=i(this),n=null==r?void 0:r[a];return void 0!==n?n.call(r,e):new RegExp(r)[a](String(e))},function(i){var a=l(u,i,this);if(a.done)return a.value;var c=r(i),o=String(this);if(!c.global)return t(c,o);var s=c.unicode;c.lastIndex=0;for(var v,d=[],g=0;null!==(v=t(c,o));){var x=String(v[0]);d[g]=x,""===x&&(c.lastIndex=n(o,e(c.lastIndex),s)),g++}return 0===g?null:d}]});
},{"./_an-object":"DBsB","./_to-length":"HdKs","./_advance-string-index":"aXIG","./_regexp-exec-abstract":"G0TB","./_fix-re-wks":"w7ZK"}],"eUHu":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3],e=require("./_an-object"),t=require("./_to-object"),n=require("./_to-length"),i=require("./_to-integer"),a=require("./_advance-string-index"),u=require("./_regexp-exec-abstract"),c=Math.max,l=Math.min,o=Math.floor,v=/\$([$&`']|\d\d?|<[^>]*>)/g,s=/\$([$&`']|\d\d?)/g,g=function(r){return void 0===r?r:String(r)};require("./_fix-re-wks")("replace",2,function(r,d,f,h){return[function(e,t){var n=r(this),i=null==e?void 0:e[d];return void 0!==i?i.call(e,n,t):f.call(String(n),e,t)},function(r,t){var o=h(f,r,this,t);if(o.done)return o.value;var v=e(r),s=String(this),d="function"==typeof t;d||(t=String(t));var x=v.global;if(x){var b=v.unicode;v.lastIndex=0}for(var q=[];;){var S=u(v,s);if(null===S)break;if(q.push(S),!x)break;""===String(S[0])&&(v.lastIndex=a(s,n(v.lastIndex),b))}for(var _="",$=0,k=0;k<q.length;k++){S=q[k];for(var m=String(S[0]),A=c(l(i(S.index),s.length),0),I=[],M=1;M<S.length;M++)I.push(g(S[M]));var j=S.groups;if(d){var w=[m].concat(I,A,s);void 0!==j&&w.push(j);var y=String(t.apply(void 0,w))}else y=p(m,s,A,I,j,t);A>=$&&(_+=s.slice($,A)+y,$=A+m.length)}return _+s.slice($)}];function p(r,e,n,i,a,u){var c=n+r.length,l=i.length,g=s;return void 0!==a&&(a=t(a),g=v),f.call(u,g,function(t,u){var v;switch(u.charAt(0)){case"$":return"$";case"&":return r;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":v=a[u.slice(1,-1)];break;default:var s=+u;if(0===s)return t;if(s>l){var g=o(s/10);return 0===g?t:g<=l?void 0===i[g-1]?u.charAt(1):i[g-1]+u.charAt(1):t}v=i[s-1]}return void 0===v?"":v})}});
},{"./_an-object":"DBsB","./_to-object":"JfJ5","./_to-length":"HdKs","./_to-integer":"cHfm","./_advance-string-index":"aXIG","./_regexp-exec-abstract":"G0TB","./_fix-re-wks":"w7ZK"}],"iHvG":[function(require,module,exports) {
"use strict";var e=require("./_an-object"),r=require("./_same-value"),n=require("./_regexp-exec-abstract");require("./_fix-re-wks")("search",1,function(t,i,a,u){return[function(e){var r=t(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,r):new RegExp(e)[i](String(r))},function(t){var i=u(a,t,this);if(i.done)return i.value;var s=e(t),l=String(this),c=s.lastIndex;r(c,0)||(s.lastIndex=0);var v=n(s,l);return r(s.lastIndex,c)||(s.lastIndex=c),null===v?-1:v.index}]});
},{"./_an-object":"DBsB","./_same-value":"YyyQ","./_regexp-exec-abstract":"G0TB","./_fix-re-wks":"w7ZK"}],"pC8t":[function(require,module,exports) {
var r=require("./_an-object"),e=require("./_a-function"),u=require("./_wks")("species");module.exports=function(n,o){var i,t=r(n).constructor;return void 0===t||null==(i=r(t)[u])?o:e(i)};
},{"./_an-object":"DBsB","./_a-function":"L6p4","./_wks":"MgdH"}],"V8KN":[function(require,module,exports) {
"use strict";var e=require("./_is-regexp"),r=require("./_an-object"),i=require("./_species-constructor"),n=require("./_advance-string-index"),t=require("./_to-length"),u=require("./_regexp-exec-abstract"),l=require("./_regexp-exec"),s=require("./_fails"),c=Math.min,a=[].push,o="split",g="length",h="lastIndex",d=4294967295,f=!s(function(){RegExp(d,"y")});require("./_fix-re-wks")("split",2,function(s,v,p,x){var q;return q="c"=="abbc"[o](/(b)*/)[1]||4!="test"[o](/(?:)/,-1)[g]||2!="ab"[o](/(?:ab)*/)[g]||4!="."[o](/(.?)(.?)/)[g]||"."[o](/()()/)[g]>1||""[o](/.?/)[g]?function(r,i){var n=String(this);if(void 0===r&&0===i)return[];if(!e(r))return p.call(n,r,i);for(var t,u,s,c=[],o=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(r.sticky?"y":""),f=0,v=void 0===i?d:i>>>0,x=new RegExp(r.source,o+"g");(t=l.call(x,n))&&!((u=x[h])>f&&(c.push(n.slice(f,t.index)),t[g]>1&&t.index<n[g]&&a.apply(c,t.slice(1)),s=t[0][g],f=u,c[g]>=v));)x[h]===t.index&&x[h]++;return f===n[g]?!s&&x.test("")||c.push(""):c.push(n.slice(f)),c[g]>v?c.slice(0,v):c}:"0"[o](void 0,0)[g]?function(e,r){return void 0===e&&0===r?[]:p.call(this,e,r)}:p,[function(e,r){var i=s(this),n=null==e?void 0:e[v];return void 0!==n?n.call(e,i,r):q.call(String(i),e,r)},function(e,l){var s=x(q,e,this,l,q!==p);if(s.done)return s.value;var a=r(e),o=String(this),g=i(a,RegExp),h=a.unicode,v=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(f?"y":"g"),_=new g(f?a:"^(?:"+a.source+")",v),b=void 0===l?d:l>>>0;if(0===b)return[];if(0===o.length)return null===u(_,o)?[o]:[];for(var m=0,y=0,w=[];y<o.length;){_.lastIndex=f?y:0;var E,I=u(_,f?o:o.slice(y));if(null===I||(E=c(t(_.lastIndex+(f?0:y)),o.length))===m)y=n(o,y,h);else{if(w.push(o.slice(m,y)),w.length===b)return w;for(var R=1;R<=I.length-1;R++)if(w.push(I[R]),w.length===b)return w;y=m=E}}return w.push(o.slice(m)),w}]});
},{"./_is-regexp":"g8m6","./_an-object":"DBsB","./_species-constructor":"pC8t","./_advance-string-index":"aXIG","./_to-length":"HdKs","./_regexp-exec-abstract":"G0TB","./_regexp-exec":"a7p6","./_fails":"e5TU","./_fix-re-wks":"w7ZK"}],"XE1H":[function(require,module,exports) {
module.exports=function(o,n,r,i){if(!(o instanceof n)||void 0!==i&&i in o)throw TypeError(r+": incorrect invocation!");return o};
},{}],"Pqba":[function(require,module,exports) {
var e=require("./_ctx"),r=require("./_iter-call"),t=require("./_is-array-iter"),i=require("./_an-object"),o=require("./_to-length"),n=require("./core.get-iterator-method"),u={},a={},f=module.exports=function(f,l,c,q,_){var h,s,d,g,p=_?function(){return f}:n(f),v=e(c,q,l?2:1),x=0;if("function"!=typeof p)throw TypeError(f+" is not iterable!");if(t(p)){for(h=o(f.length);h>x;x++)if((g=l?v(i(s=f[x])[0],s[1]):v(f[x]))===u||g===a)return g}else for(d=p.call(f);!(s=d.next()).done;)if((g=r(d,v,s.value,l))===u||g===a)return g};f.BREAK=u,f.RETURN=a;
},{"./_ctx":"N9ch","./_iter-call":"pqj2","./_is-array-iter":"DsPZ","./_an-object":"DBsB","./_to-length":"HdKs","./core.get-iterator-method":"kX9y"}],"sbFn":[function(require,module,exports) {


var e,t,n,i=require("./_ctx"),o=require("./_invoke"),r=require("./_html"),s=require("./_dom-create"),a=require("./_global"),c=a.process,u=a.setImmediate,p=a.clearImmediate,f=a.MessageChannel,l=a.Dispatch,d=0,m={},h="onreadystatechange",g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},v=function(e){g.call(e.data)};u&&p||(u=function(t){for(var n=[],i=1;arguments.length>i;)n.push(arguments[i++]);return m[++d]=function(){o("function"==typeof t?t:Function(t),n)},e(d),d},p=function(e){delete m[e]},"process"==require("./_cof")(c)?e=function(e){c.nextTick(i(g,e,1))}:l&&l.now?e=function(e){l.now(i(g,e,1))}:f?(n=(t=new f).port2,t.port1.onmessage=v,e=i(n.postMessage,n,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts?(e=function(e){a.postMessage(e+"","*")},a.addEventListener("message",v,!1)):e=h in s("script")?function(e){r.appendChild(s("script"))[h]=function(){r.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),module.exports={set:u,clear:p};
},{"./_ctx":"N9ch","./_invoke":"TTev","./_html":"DBa9","./_dom-create":"dDni","./_global":"kql1","./_cof":"viv7"}],"i1HG":[function(require,module,exports) {


var e=require("./_global"),t=require("./_task").set,r=e.MutationObserver||e.WebKitMutationObserver,n=e.process,o=e.Promise,a="process"==require("./_cof")(n);module.exports=function(){var i,c,s,v=function(){var e,t;for(a&&(e=n.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(r){throw i?s():c=void 0,r}}c=void 0,e&&e.enter()};if(a)s=function(){n.nextTick(v)};else if(!r||e.navigator&&e.navigator.standalone)if(o&&o.resolve){var u=o.resolve(void 0);s=function(){u.then(v)}}else s=function(){t.call(e,v)};else{var f=!0,l=document.createTextNode("");new r(v).observe(l,{characterData:!0}),s=function(){l.data=f=!f}}return function(e){var t={fn:e,next:void 0};c&&(c.next=t),i||(i=t,s()),c=t}};
},{"./_global":"kql1","./_task":"sbFn","./_cof":"viv7"}],"Mdjk":[function(require,module,exports) {
"use strict";var r=require("./_a-function");function e(e){var o,t;this.promise=new e(function(r,e){if(void 0!==o||void 0!==t)throw TypeError("Bad Promise constructor");o=r,t=e}),this.resolve=r(o),this.reject=r(t)}module.exports.f=function(r){return new e(r)};
},{"./_a-function":"L6p4"}],"eKV1":[function(require,module,exports) {
module.exports=function(e){try{return{e:!1,v:e()}}catch(r){return{e:!0,v:r}}};
},{}],"SWOj":[function(require,module,exports) {

var e=require("./_global"),r=e.navigator;module.exports=r&&r.userAgent||"";
},{"./_global":"kql1"}],"bQCN":[function(require,module,exports) {
var r=require("./_an-object"),e=require("./_is-object"),i=require("./_new-promise-capability");module.exports=function(o,t){if(r(o),e(t)&&t.constructor===o)return t;var u=i.f(o);return(0,u.resolve)(t),u.promise};
},{"./_an-object":"DBsB","./_is-object":"SP6V","./_new-promise-capability":"Mdjk"}],"XX7Z":[function(require,module,exports) {
var r=require("./_redefine");module.exports=function(e,n,i){for(var o in n)r(e,o,n[o],i);return e};
},{"./_redefine":"l2hW"}],"ar2B":[function(require,module,exports) {


"use strict";var e,r,t,i,n=require("./_library"),o=require("./_global"),c=require("./_ctx"),s=require("./_classof"),u=require("./_export"),a=require("./_is-object"),_=require("./_a-function"),h=require("./_an-instance"),f=require("./_for-of"),l=require("./_species-constructor"),v=require("./_task").set,d=require("./_microtask")(),p=require("./_new-promise-capability"),m=require("./_perform"),q=require("./_user-agent"),y=require("./_promise-resolve"),j="Promise",w=o.TypeError,g=o.process,x=g&&g.versions,b=x&&x.v8||"",k=o[j],P="process"==s(g),F=function(){},S=r=p.f,E=!!function(){try{var e=k.resolve(1),r=(e.constructor={})[require("./_wks")("species")]=function(e){e(F,F)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(F)instanceof r&&0!==b.indexOf("6.6")&&-1===q.indexOf("Chrome/66")}catch(t){}}(),O=function(e){var r;return!(!a(e)||"function"!=typeof(r=e.then))&&r},R=function(e,r){if(!e._n){e._n=!0;var t=e._c;d(function(){for(var i=e._v,n=1==e._s,o=0,c=function(r){var t,o,c,s=n?r.ok:r.fail,u=r.resolve,a=r.reject,_=r.domain;try{s?(n||(2==e._h&&H(e),e._h=1),!0===s?t=i:(_&&_.enter(),t=s(i),_&&(_.exit(),c=!0)),t===r.promise?a(w("Promise-chain cycle")):(o=O(t))?o.call(t,u,a):u(t)):a(i)}catch(h){_&&!c&&_.exit(),a(h)}};t.length>o;)c(t[o++]);e._c=[],e._n=!1,r&&!e._h&&C(e)})}},C=function(e){v.call(o,function(){var r,t,i,n=e._v,c=G(e);if(c&&(r=m(function(){P?g.emit("unhandledRejection",n,e):(t=o.onunhandledrejection)?t({promise:e,reason:n}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",n)}),e._h=P||G(e)?2:1),e._a=void 0,c&&r.e)throw r.v})},G=function(e){return 1!==e._h&&0===(e._a||e._c).length},H=function(e){v.call(o,function(){var r;P?g.emit("rejectionHandled",e):(r=o.onrejectionhandled)&&r({promise:e,reason:e._v})})},T=function(e){var r=this;r._d||(r._d=!0,(r=r._w||r)._v=e,r._s=2,r._a||(r._a=r._c.slice()),R(r,!0))},U=function(e){var r,t=this;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw w("Promise can't be resolved itself");(r=O(e))?d(function(){var i={_w:t,_d:!1};try{r.call(e,c(U,i,1),c(T,i,1))}catch(n){T.call(i,n)}}):(t._v=e,t._s=1,R(t,!1))}catch(i){T.call({_w:t,_d:!1},i)}}};E||(k=function(r){h(this,k,j,"_h"),_(r),e.call(this);try{r(c(U,this,1),c(T,this,1))}catch(t){T.call(this,t)}},(e=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=require("./_redefine-all")(k.prototype,{then:function(e,r){var t=S(l(this,k));return t.ok="function"!=typeof e||e,t.fail="function"==typeof r&&r,t.domain=P?g.domain:void 0,this._c.push(t),this._a&&this._a.push(t),this._s&&R(this,!1),t.promise},catch:function(e){return this.then(void 0,e)}}),t=function(){var r=new e;this.promise=r,this.resolve=c(U,r,1),this.reject=c(T,r,1)},p.f=S=function(e){return e===k||e===i?new t(e):r(e)}),u(u.G+u.W+u.F*!E,{Promise:k}),require("./_set-to-string-tag")(k,j),require("./_set-species")(j),i=require("./_core")[j],u(u.S+u.F*!E,j,{reject:function(e){var r=S(this);return(0,r.reject)(e),r.promise}}),u(u.S+u.F*(n||!E),j,{resolve:function(e){return y(n&&this===i?k:this,e)}}),u(u.S+u.F*!(E&&require("./_iter-detect")(function(e){k.all(e).catch(F)})),j,{all:function(e){var r=this,t=S(r),i=t.resolve,n=t.reject,o=m(function(){var t=[],o=0,c=1;f(e,!1,function(e){var s=o++,u=!1;t.push(void 0),c++,r.resolve(e).then(function(e){u||(u=!0,t[s]=e,--c||i(t))},n)}),--c||i(t)});return o.e&&n(o.v),t.promise},race:function(e){var r=this,t=S(r),i=t.reject,n=m(function(){f(e,!1,function(e){r.resolve(e).then(t.resolve,i)})});return n.e&&i(n.v),t.promise}});
},{"./_library":"Nw1e","./_global":"kql1","./_ctx":"N9ch","./_classof":"jP8S","./_export":"NjVL","./_is-object":"SP6V","./_a-function":"L6p4","./_an-instance":"XE1H","./_for-of":"Pqba","./_species-constructor":"pC8t","./_task":"sbFn","./_microtask":"i1HG","./_new-promise-capability":"Mdjk","./_perform":"eKV1","./_user-agent":"SWOj","./_promise-resolve":"bQCN","./_wks":"MgdH","./_redefine-all":"XX7Z","./_set-to-string-tag":"iqAm","./_set-species":"Bn5Q","./_core":"KVo1","./_iter-detect":"Pd7X"}],"dVG8":[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e,i){if(!r(e)||e._t!==i)throw TypeError("Incompatible receiver, "+i+" required!");return e};
},{"./_is-object":"SP6V"}],"lQcB":[function(require,module,exports) {
"use strict";var e=require("./_object-dp").f,r=require("./_object-create"),t=require("./_redefine-all"),i=require("./_ctx"),n=require("./_an-instance"),_=require("./_for-of"),o=require("./_iter-define"),u=require("./_iter-step"),f=require("./_set-species"),s=require("./_descriptors"),l=require("./_meta").fastKey,c=require("./_validate-collection"),v=s?"_s":"size",a=function(e,r){var t,i=l(r);if("F"!==i)return e._i[i];for(t=e._f;t;t=t.n)if(t.k==r)return t};module.exports={getConstructor:function(o,u,f,l){var h=o(function(e,t){n(e,h,u,"_i"),e._t=u,e._i=r(null),e._f=void 0,e._l=void 0,e[v]=0,null!=t&&_(t,f,e[l],e)});return t(h.prototype,{clear:function(){for(var e=c(this,u),r=e._i,t=e._f;t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete r[t.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var r=c(this,u),t=a(r,e);if(t){var i=t.n,n=t.p;delete r._i[t.i],t.r=!0,n&&(n.n=i),i&&(i.p=n),r._f==t&&(r._f=i),r._l==t&&(r._l=n),r[v]--}return!!t},forEach:function(e){c(this,u);for(var r,t=i(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(t(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!a(c(this,u),e)}}),s&&e(h.prototype,"size",{get:function(){return c(this,u)[v]}}),h},def:function(e,r,t){var i,n,_=a(e,r);return _?_.v=t:(e._l=_={i:n=l(r,!0),k:r,v:t,p:i=e._l,n:void 0,r:!1},e._f||(e._f=_),i&&(i.n=_),e[v]++,"F"!==n&&(e._i[n]=_)),e},getEntry:a,setStrong:function(e,r,t){o(e,r,function(e,t){this._t=c(e,r),this._k=t,this._l=void 0},function(){for(var e=this._k,r=this._l;r&&r.r;)r=r.p;return this._t&&(this._l=r=r?r.n:this._t._f)?u(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(this._t=void 0,u(1))},t?"entries":"values",!t,!0),f(r)}};
},{"./_object-dp":"wvco","./_object-create":"d4Ek","./_redefine-all":"XX7Z","./_ctx":"N9ch","./_an-instance":"XE1H","./_for-of":"Pqba","./_iter-define":"kgNZ","./_iter-step":"t4Zd","./_set-species":"Bn5Q","./_descriptors":"ZJLI","./_meta":"RGdG","./_validate-collection":"dVG8"}],"K3M2":[function(require,module,exports) {

"use strict";var e=require("./_global"),r=require("./_export"),t=require("./_redefine"),n=require("./_redefine-all"),i=require("./_meta"),u=require("./_for-of"),o=require("./_an-instance"),c=require("./_is-object"),a=require("./_fails"),s=require("./_iter-detect"),l=require("./_set-to-string-tag"),f=require("./_inherit-if-required");module.exports=function(d,h,q,_,p,g){var v=e[d],w=v,y=p?"set":"add",x=w&&w.prototype,E={},b=function(e){var r=x[e];t(x,e,"delete"==e?function(e){return!(g&&!c(e))&&r.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:r.call(this,0===e?0:e)}:"add"==e?function(e){return r.call(this,0===e?0:e),this}:function(e,t){return r.call(this,0===e?0:e,t),this})};if("function"==typeof w&&(g||x.forEach&&!a(function(){(new w).entries().next()}))){var m=new w,j=m[y](g?{}:-0,1)!=m,C=a(function(){m.has(1)}),D=s(function(e){new w(e)}),F=!g&&a(function(){for(var e=new w,r=5;r--;)e[y](r,r);return!e.has(-0)});D||((w=h(function(e,r){o(e,w,d);var t=f(new v,e,w);return null!=r&&u(r,p,t[y],t),t})).prototype=x,x.constructor=w),(C||F)&&(b("delete"),b("has"),p&&b("get")),(F||j)&&b(y),g&&x.clear&&delete x.clear}else w=_.getConstructor(h,d,p,y),n(w.prototype,q),i.NEED=!0;return l(w,d),E[d]=w,r(r.G+r.W+r.F*(w!=v),E),g||_.setStrong(w,d,p),w};
},{"./_global":"kql1","./_export":"NjVL","./_redefine":"l2hW","./_redefine-all":"XX7Z","./_meta":"RGdG","./_for-of":"Pqba","./_an-instance":"XE1H","./_is-object":"SP6V","./_fails":"e5TU","./_iter-detect":"Pd7X","./_set-to-string-tag":"iqAm","./_inherit-if-required":"oEgy"}],"v0j2":[function(require,module,exports) {
"use strict";var t=require("./_collection-strong"),e=require("./_validate-collection"),r="Map";module.exports=require("./_collection")(r,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(n){var i=t.getEntry(e(this,r),n);return i&&i.v},set:function(n,i){return t.def(e(this,r),0===n?0:n,i)}},t,!0);
},{"./_collection-strong":"lQcB","./_validate-collection":"dVG8","./_collection":"K3M2"}],"igWm":[function(require,module,exports) {
"use strict";var e=require("./_collection-strong"),t=require("./_validate-collection"),r="Set";module.exports=require("./_collection")(r,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(i){return e.def(t(this,r),i=0===i?0:i,i)}},e);
},{"./_collection-strong":"lQcB","./_validate-collection":"dVG8","./_collection":"K3M2"}],"BPwe":[function(require,module,exports) {
"use strict";var e=require("./_redefine-all"),t=require("./_meta").getWeak,r=require("./_an-object"),i=require("./_is-object"),n=require("./_an-instance"),u=require("./_for-of"),o=require("./_array-methods"),s=require("./_has"),a=require("./_validate-collection"),c=o(5),f=o(6),_=0,h=function(e){return e._l||(e._l=new l)},l=function(){this.a=[]},d=function(e,t){return c(e.a,function(e){return e[0]===t})};l.prototype={get:function(e){var t=d(this,e);if(t)return t[1]},has:function(e){return!!d(this,e)},set:function(e,t){var r=d(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},module.exports={getConstructor:function(r,o,c,f){var l=r(function(e,t){n(e,l,o,"_i"),e._t=o,e._i=_++,e._l=void 0,null!=t&&u(t,c,e[f],e)});return e(l.prototype,{delete:function(e){if(!i(e))return!1;var r=t(e);return!0===r?h(a(this,o)).delete(e):r&&s(r,this._i)&&delete r[this._i]},has:function(e){if(!i(e))return!1;var r=t(e);return!0===r?h(a(this,o)).has(e):r&&s(r,this._i)}}),l},def:function(e,i,n){var u=t(r(i),!0);return!0===u?h(e).set(i,n):u[e._i]=n,e},ufstore:h};
},{"./_redefine-all":"XX7Z","./_meta":"RGdG","./_an-object":"DBsB","./_is-object":"SP6V","./_an-instance":"XE1H","./_for-of":"Pqba","./_array-methods":"H1nT","./_has":"nW2g","./_validate-collection":"dVG8"}],"yBwO":[function(require,module,exports) {

"use strict";var e,t=require("./_global"),r=require("./_array-methods")(0),i=require("./_redefine"),n=require("./_meta"),o=require("./_object-assign"),u=require("./_collection-weak"),c=require("./_is-object"),s=require("./_validate-collection"),a=require("./_validate-collection"),l=!t.ActiveXObject&&"ActiveXObject"in t,f="WeakMap",_=n.getWeak,h=Object.isExtensible,q=u.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(e){if(c(e)){var t=_(e);return!0===t?q(s(this,f)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(s(this,f),e,t)}},g=module.exports=require("./_collection")(f,v,d,u,!0,!0);a&&l&&(o((e=u.getConstructor(v,f)).prototype,d),n.NEED=!0,r(["delete","has","get","set"],function(t){var r=g.prototype,n=r[t];i(r,t,function(r,i){if(c(r)&&!h(r)){this._f||(this._f=new e);var o=this._f[t](r,i);return"set"==t?this:o}return n.call(this,r,i)})}));
},{"./_global":"kql1","./_array-methods":"H1nT","./_redefine":"l2hW","./_meta":"RGdG","./_object-assign":"bBGE","./_collection-weak":"BPwe","./_is-object":"SP6V","./_validate-collection":"dVG8","./_collection":"K3M2"}],"YtBU":[function(require,module,exports) {
"use strict";var e=require("./_collection-weak"),t=require("./_validate-collection"),i="WeakSet";require("./_collection")(i,function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(r){return e.def(t(this,i),r,!0)}},e,!1,!0);
},{"./_collection-weak":"BPwe","./_validate-collection":"dVG8","./_collection":"K3M2"}],"F7Ll":[function(require,module,exports) {

for(var r,a=require("./_global"),t=require("./_hide"),e=require("./_uid"),y=e("typed_array"),i=e("view"),A=!(!a.ArrayBuffer||!a.DataView),o=A,p=0,l=9,n="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");p<l;)(r=a[n[p++]])?(t(r.prototype,y,!0),t(r.prototype,i,!0)):o=!1;module.exports={ABV:A,CONSTR:o,TYPED:y,VIEW:i};
},{"./_global":"kql1","./_hide":"i5RL","./_uid":"f0sk"}],"JyiF":[function(require,module,exports) {
var r=require("./_to-integer"),e=require("./_to-length");module.exports=function(t){if(void 0===t)return 0;var n=r(t),o=e(n);if(n!==o)throw RangeError("Wrong length!");return o};
},{"./_to-integer":"cHfm","./_to-length":"HdKs"}],"DGXU":[function(require,module,exports) {

"use strict";var t=require("./_global"),n=require("./_descriptors"),r=require("./_library"),e=require("./_typed"),i=require("./_hide"),o=require("./_redefine-all"),u=require("./_fails"),f=require("./_an-instance"),s=require("./_to-integer"),c=require("./_to-length"),a=require("./_to-index"),h=require("./_object-gopn").f,l=require("./_object-dp").f,g=require("./_array-fill"),_=require("./_set-to-string-tag"),q="ArrayBuffer",v="DataView",w="prototype",I="Wrong length!",b="Wrong index!",y=t[q],p=t[v],d=t.Math,U=t.RangeError,N=t.Infinity,x=y,A=d.abs,F=d.pow,W=d.floor,V=d.log,j=d.LN2,B="buffer",E="byteLength",L="byteOffset",m=n?"_b":B,D=n?"_l":E,M=n?"_o":L;function O(t,n,r){var e,i,o,u=new Array(r),f=8*r-n-1,s=(1<<f)-1,c=s>>1,a=23===n?F(2,-24)-F(2,-77):0,h=0,l=t<0||0===t&&1/t<0?1:0;for((t=A(t))!=t||t===N?(i=t!=t?1:0,e=s):(e=W(V(t)/j),t*(o=F(2,-e))<1&&(e--,o*=2),(t+=e+c>=1?a/o:a*F(2,1-c))*o>=2&&(e++,o/=2),e+c>=s?(i=0,e=s):e+c>=1?(i=(t*o-1)*F(2,n),e+=c):(i=t*F(2,c-1)*F(2,n),e=0));n>=8;u[h++]=255&i,i/=256,n-=8);for(e=e<<n|i,f+=n;f>0;u[h++]=255&e,e/=256,f-=8);return u[--h]|=128*l,u}function R(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,f=i-7,s=r-1,c=t[s--],a=127&c;for(c>>=7;f>0;a=256*a+t[s],s--,f-=8);for(e=a&(1<<-f)-1,a>>=-f,f+=n;f>0;e=256*e+t[s],s--,f-=8);if(0===a)a=1-u;else{if(a===o)return e?NaN:c?-N:N;e+=F(2,n),a-=u}return(c?-1:1)*e*F(2,a-n)}function k(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function z(t){return[255&t]}function C(t){return[255&t,t>>8&255]}function G(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function H(t){return O(t,52,8)}function J(t){return O(t,23,4)}function K(t,n,r){l(t[w],n,{get:function(){return this[r]}})}function P(t,n,r,e){var i=a(+r);if(i+n>t[D])throw U(b);var o=t[m]._b,u=i+t[M],f=o.slice(u,u+n);return e?f:f.reverse()}function Q(t,n,r,e,i,o){var u=a(+r);if(u+n>t[D])throw U(b);for(var f=t[m]._b,s=u+t[M],c=e(+i),h=0;h<n;h++)f[s+h]=c[o?h:n-h-1]}if(e.ABV){if(!u(function(){y(1)})||!u(function(){new y(-1)})||u(function(){return new y,new y(1.5),new y(NaN),y.name!=q})){for(var S,T=(y=function(t){return f(this,y),new x(a(t))})[w]=x[w],X=h(x),Y=0;X.length>Y;)(S=X[Y++])in y||i(y,S,x[S]);r||(T.constructor=y)}var Z=new p(new y(2)),$=p[w].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||o(p[w],{setInt8:function(t,n){$.call(this,t,n<<24>>24)},setUint8:function(t,n){$.call(this,t,n<<24>>24)}},!0)}else y=function(t){f(this,y,q);var n=a(t);this._b=g.call(new Array(n),0),this[D]=n},p=function(t,n,r){f(this,p,v),f(t,y,v);var e=t[D],i=s(n);if(i<0||i>e)throw U("Wrong offset!");if(i+(r=void 0===r?e-i:c(r))>e)throw U(I);this[m]=t,this[M]=i,this[D]=r},n&&(K(y,E,"_l"),K(p,B,"_b"),K(p,E,"_l"),K(p,L,"_o")),o(p[w],{getInt8:function(t){return P(this,1,t)[0]<<24>>24},getUint8:function(t){return P(this,1,t)[0]},getInt16:function(t){var n=P(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=P(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return k(P(this,4,t,arguments[1]))},getUint32:function(t){return k(P(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return R(P(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return R(P(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){Q(this,1,t,z,n)},setUint8:function(t,n){Q(this,1,t,z,n)},setInt16:function(t,n){Q(this,2,t,C,n,arguments[2])},setUint16:function(t,n){Q(this,2,t,C,n,arguments[2])},setInt32:function(t,n){Q(this,4,t,G,n,arguments[2])},setUint32:function(t,n){Q(this,4,t,G,n,arguments[2])},setFloat32:function(t,n){Q(this,4,t,J,n,arguments[2])},setFloat64:function(t,n){Q(this,8,t,H,n,arguments[2])}});_(y,q),_(p,v),i(p[w],e.VIEW,!0),exports[q]=y,exports[v]=p;
},{"./_global":"kql1","./_descriptors":"ZJLI","./_library":"Nw1e","./_typed":"F7Ll","./_hide":"i5RL","./_redefine-all":"XX7Z","./_fails":"e5TU","./_an-instance":"XE1H","./_to-integer":"cHfm","./_to-length":"HdKs","./_to-index":"JyiF","./_object-gopn":"yyyP","./_object-dp":"wvco","./_array-fill":"UYMr","./_set-to-string-tag":"iqAm"}],"tZr0":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_typed"),i=require("./_typed-buffer"),t=require("./_an-object"),u=require("./_to-absolute-index"),n=require("./_to-length"),s=require("./_is-object"),o=require("./_global").ArrayBuffer,f=require("./_species-constructor"),c=i.ArrayBuffer,a=i.DataView,q=r.ABV&&o.isView,_=c.prototype.slice,l=r.VIEW,y="ArrayBuffer";e(e.G+e.W+e.F*(o!==c),{ArrayBuffer:c}),e(e.S+e.F*!r.CONSTR,y,{isView:function(e){return q&&q(e)||s(e)&&l in e}}),e(e.P+e.U+e.F*require("./_fails")(function(){return!new c(2).slice(1,void 0).byteLength}),y,{slice:function(e,r){if(void 0!==_&&void 0===r)return _.call(t(this),e);for(var i=t(this).byteLength,s=u(e,i),o=u(void 0===r?i:r,i),q=new(f(this,c))(n(o-s)),l=new a(this),y=new a(q),b=0;s<o;)y.setUint8(b++,l.getUint8(s++));return q}}),require("./_set-species")(y);
},{"./_export":"NjVL","./_typed":"F7Ll","./_typed-buffer":"DGXU","./_an-object":"DBsB","./_to-absolute-index":"AXg2","./_to-length":"HdKs","./_is-object":"SP6V","./_global":"kql1","./_species-constructor":"pC8t","./_fails":"e5TU","./_set-species":"Bn5Q"}],"s1Mz":[function(require,module,exports) {
var e=require("./_export");e(e.G+e.W+e.F*!require("./_typed").ABV,{DataView:require("./_typed-buffer").DataView});
},{"./_export":"NjVL","./_typed":"F7Ll","./_typed-buffer":"DGXU"}],"kRz2":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];if(require("./_descriptors")){var r=require("./_library"),t=(e=require("./_global"),require("./_fails")),n=require("./_export"),i=require("./_typed"),o=require("./_typed-buffer"),u=require("./_ctx"),c=require("./_an-instance"),f=require("./_property-desc"),a=require("./_hide"),l=require("./_redefine-all"),s=require("./_to-integer"),h=require("./_to-length"),d=require("./_to-index"),g=require("./_to-absolute-index"),_=require("./_to-primitive"),v=require("./_has"),p=require("./_classof"),y=require("./_is-object"),q=require("./_to-object"),w=require("./_is-array-iter"),b=require("./_object-create"),S=require("./_object-gpo"),E=require("./_object-gopn").f,m=require("./core.get-iterator-method"),x=require("./_uid"),L=require("./_wks"),P=require("./_array-methods"),j=require("./_array-includes"),T=require("./_species-constructor"),F=require("./es6.array.iterator"),O=require("./_iterators"),A=require("./_iter-detect"),R=require("./_set-species"),B=require("./_array-fill"),I=require("./_array-copy-within"),M=require("./_object-dp"),W=require("./_object-gopd"),N=M.f,Y=W.f,k=e.RangeError,D=e.TypeError,V=e.Uint8Array,C="ArrayBuffer",U="Shared"+C,G="BYTES_PER_ELEMENT",z="prototype",H=Array[z],J=o.ArrayBuffer,K=o.DataView,Q=P(0),X=P(2),Z=P(3),$=P(4),ee=P(5),re=P(6),te=j(!0),ne=j(!1),ie=F.values,oe=F.keys,ue=F.entries,ce=H.lastIndexOf,fe=H.reduce,ae=H.reduceRight,le=H.join,se=H.sort,he=H.slice,de=H.toString,ge=H.toLocaleString,_e=L("iterator"),ve=L("toStringTag"),pe=x("typed_constructor"),ye=x("def_constructor"),qe=i.CONSTR,we=i.TYPED,be=i.VIEW,Se="Wrong length!",Ee=P(1,function(e,r){return je(T(e,e[ye]),r)}),me=t(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),xe=!!V&&!!V[z].set&&t(function(){new V(1).set({})}),Le=function(e,r){var t=s(e);if(t<0||t%r)throw k("Wrong offset!");return t},Pe=function(e){if(y(e)&&we in e)return e;throw D(e+" is not a typed array!")},je=function(e,r){if(!(y(e)&&pe in e))throw D("It is not a typed array constructor!");return new e(r)},Te=function(e,r){return Fe(T(e,e[ye]),r)},Fe=function(e,r){for(var t=0,n=r.length,i=je(e,n);n>t;)i[t]=r[t++];return i},Oe=function(e,r,t){N(e,r,{get:function(){return this._d[t]}})},Ae=function(e){var r,t,n,i,o,c,f=q(e),a=arguments.length,l=a>1?arguments[1]:void 0,s=void 0!==l,d=m(f);if(null!=d&&!w(d)){for(c=d.call(f),n=[],r=0;!(o=c.next()).done;r++)n.push(o.value);f=n}for(s&&a>2&&(l=u(l,arguments[2],2)),r=0,t=h(f.length),i=je(this,t);t>r;r++)i[r]=s?l(f[r],r):f[r];return i},Re=function(){for(var e=0,r=arguments.length,t=je(this,r);r>e;)t[e]=arguments[e++];return t},Be=!!V&&t(function(){ge.call(new V(1))}),Ie=function(){return ge.apply(Be?he.call(Pe(this)):Pe(this),arguments)},Me={copyWithin:function(e,r){return I.call(Pe(this),e,r,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(Pe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return B.apply(Pe(this),arguments)},filter:function(e){return Te(this,X(Pe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return re(Pe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Q(Pe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Pe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Pe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Pe(this),arguments)},lastIndexOf:function(e){return ce.apply(Pe(this),arguments)},map:function(e){return Ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Pe(this),arguments)},reduceRight:function(e){return ae.apply(Pe(this),arguments)},reverse:function(){for(var e,r=Pe(this).length,t=Math.floor(r/2),n=0;n<t;)e=this[n],this[n++]=this[--r],this[r]=e;return this},some:function(e){return Z(Pe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return se.call(Pe(this),e)},subarray:function(e,r){var t=Pe(this),n=t.length,i=g(e,n);return new(T(t,t[ye]))(t.buffer,t.byteOffset+i*t.BYTES_PER_ELEMENT,h((void 0===r?n:g(r,n))-i))}},We=function(e,r){return Te(this,he.call(Pe(this),e,r))},Ne=function(e){Pe(this);var r=Le(arguments[1],1),t=this.length,n=q(e),i=h(n.length),o=0;if(i+r>t)throw k(Se);for(;o<i;)this[r+o]=n[o++]},Ye={entries:function(){return ue.call(Pe(this))},keys:function(){return oe.call(Pe(this))},values:function(){return ie.call(Pe(this))}},ke=function(e,r){return y(e)&&e[we]&&"symbol"!=typeof r&&r in e&&String(+r)==String(r)},De=function(e,r){return ke(e,r=_(r,!0))?f(2,e[r]):Y(e,r)},Ve=function(e,r,t){return!(ke(e,r=_(r,!0))&&y(t)&&v(t,"value"))||v(t,"get")||v(t,"set")||t.configurable||v(t,"writable")&&!t.writable||v(t,"enumerable")&&!t.enumerable?N(e,r,t):(e[r]=t.value,e)};qe||(W.f=De,M.f=Ve),n(n.S+n.F*!qe,"Object",{getOwnPropertyDescriptor:De,defineProperty:Ve}),t(function(){de.call({})})&&(de=ge=function(){return le.call(this)});var Ce=l({},Me);l(Ce,Ye),a(Ce,_e,Ye.values),l(Ce,{slice:We,set:Ne,constructor:function(){},toString:de,toLocaleString:Ie}),Oe(Ce,"buffer","b"),Oe(Ce,"byteOffset","o"),Oe(Ce,"byteLength","l"),Oe(Ce,"length","e"),N(Ce,ve,{get:function(){return this[we]}}),module.exports=function(o,u,f,l){var s=o+((l=!!l)?"Clamped":"")+"Array",g="get"+o,_="set"+o,v=e[s],q=v||{},w=v&&S(v),m=!v||!i.ABV,x={},L=v&&v[z],P=function(e,r){N(e,r,{get:function(){return function(e,r){var t=e._d;return t.v[g](r*u+t.o,me)}(this,r)},set:function(e){return function(e,r,t){var n=e._d;l&&(t=(t=Math.round(t))<0?0:t>255?255:255&t),n.v[_](r*u+n.o,t,me)}(this,r,e)},enumerable:!0})};m?(v=f(function(e,r,t,n){c(e,v,s,"_d");var i,o,f,l,g=0,_=0;if(y(r)){if(!(r instanceof J||(l=p(r))==C||l==U))return we in r?Fe(v,r):Ae.call(v,r);i=r,_=Le(t,u);var q=r.byteLength;if(void 0===n){if(q%u)throw k(Se);if((o=q-_)<0)throw k(Se)}else if((o=h(n)*u)+_>q)throw k(Se);f=o/u}else f=d(r),i=new J(o=f*u);for(a(e,"_d",{b:i,o:_,l:o,e:f,v:new K(i)});g<f;)P(e,g++)}),L=v[z]=b(Ce),a(L,"constructor",v)):t(function(){v(1)})&&t(function(){new v(-1)})&&A(function(e){new v,new v(null),new v(1.5),new v(e)},!0)||(v=f(function(e,r,t,n){var i;return c(e,v,s),y(r)?r instanceof J||(i=p(r))==C||i==U?void 0!==n?new q(r,Le(t,u),n):void 0!==t?new q(r,Le(t,u)):new q(r):we in r?Fe(v,r):Ae.call(v,r):new q(d(r))}),Q(w!==Function.prototype?E(q).concat(E(w)):E(q),function(e){e in v||a(v,e,q[e])}),v[z]=L,r||(L.constructor=v));var j=L[_e],T=!!j&&("values"==j.name||null==j.name),F=Ye.values;a(v,pe,!0),a(L,we,s),a(L,be,!0),a(L,ye,v),(l?new v(1)[ve]==s:ve in L)||N(L,ve,{get:function(){return s}}),x[s]=v,n(n.G+n.W+n.F*(v!=q),x),n(n.S,s,{BYTES_PER_ELEMENT:u}),n(n.S+n.F*t(function(){q.of.call(v,1)}),s,{from:Ae,of:Re}),G in L||a(L,G,u),n(n.P,s,Me),R(s),n(n.P+n.F*xe,s,{set:Ne}),n(n.P+n.F*!T,s,Ye),r||L.toString==de||(L.toString=de),n(n.P+n.F*t(function(){new v(1).slice()}),s,{slice:We}),n(n.P+n.F*(t(function(){return[1,2].toLocaleString()!=new v([1,2]).toLocaleString()})||!t(function(){L.toLocaleString.call([1,2])})),s,{toLocaleString:Ie}),O[s]=T?j:F,r||T||a(L,_e,F)}}else module.exports=function(){};
},{"./_descriptors":"ZJLI","./_library":"Nw1e","./_global":"kql1","./_fails":"e5TU","./_export":"NjVL","./_typed":"F7Ll","./_typed-buffer":"DGXU","./_ctx":"N9ch","./_an-instance":"XE1H","./_property-desc":"B9EI","./_hide":"i5RL","./_redefine-all":"XX7Z","./_to-integer":"cHfm","./_to-length":"HdKs","./_to-index":"JyiF","./_to-absolute-index":"AXg2","./_to-primitive":"PUNq","./_has":"nW2g","./_classof":"jP8S","./_is-object":"SP6V","./_to-object":"JfJ5","./_is-array-iter":"DsPZ","./_object-create":"d4Ek","./_object-gpo":"kbAb","./_object-gopn":"yyyP","./core.get-iterator-method":"kX9y","./_uid":"f0sk","./_wks":"MgdH","./_array-methods":"H1nT","./_array-includes":"dIPJ","./_species-constructor":"pC8t","./es6.array.iterator":"xsAw","./_iterators":"oANp","./_iter-detect":"Pd7X","./_set-species":"Bn5Q","./_array-fill":"UYMr","./_array-copy-within":"okFf","./_object-dp":"wvco","./_object-gopd":"SFON"}],"W7MG":[function(require,module,exports) {
require("./_typed-array")("Int8",1,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"n9td":[function(require,module,exports) {
require("./_typed-array")("Uint8",1,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"m71d":[function(require,module,exports) {
require("./_typed-array")("Uint8",1,function(r){return function(n,t,e){return r(this,n,t,e)}},!0);
},{"./_typed-array":"kRz2"}],"YGkr":[function(require,module,exports) {
require("./_typed-array")("Int16",2,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"OaOh":[function(require,module,exports) {
require("./_typed-array")("Uint16",2,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"sUYQ":[function(require,module,exports) {
require("./_typed-array")("Int32",4,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"XuMj":[function(require,module,exports) {
require("./_typed-array")("Uint32",4,function(r){return function(n,t,e){return r(this,n,t,e)}});
},{"./_typed-array":"kRz2"}],"V93U":[function(require,module,exports) {
require("./_typed-array")("Float32",4,function(r){return function(t,n,e){return r(this,t,n,e)}});
},{"./_typed-array":"kRz2"}],"KMMD":[function(require,module,exports) {
require("./_typed-array")("Float64",8,function(r){return function(t,n,e){return r(this,t,n,e)}});
},{"./_typed-array":"kRz2"}],"XlBZ":[function(require,module,exports) {
var e=require("./_export"),r=require("./_a-function"),n=require("./_an-object"),i=(require("./_global").Reflect||{}).apply,u=Function.apply;e(e.S+e.F*!require("./_fails")(function(){i(function(){})}),"Reflect",{apply:function(e,a,l){var t=r(e),c=n(l);return i?i(t,a,c):u.call(t,a,c)}});
},{"./_export":"NjVL","./_a-function":"L6p4","./_an-object":"DBsB","./_global":"kql1","./_fails":"e5TU"}],"JeCu":[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-create"),n=require("./_a-function"),t=require("./_an-object"),u=require("./_is-object"),c=require("./_fails"),i=require("./_bind"),o=(require("./_global").Reflect||{}).construct,a=c(function(){function e(){}return!(o(function(){},[],e)instanceof e)}),l=!c(function(){o(function(){})});e(e.S+e.F*(a||l),"Reflect",{construct:function(e,c){n(e),t(c);var f=arguments.length<3?e:n(arguments[2]);if(l&&!a)return o(e,c,f);if(e==f){switch(c.length){case 0:return new e;case 1:return new e(c[0]);case 2:return new e(c[0],c[1]);case 3:return new e(c[0],c[1],c[2]);case 4:return new e(c[0],c[1],c[2],c[3])}var p=[null];return p.push.apply(p,c),new(i.apply(e,p))}var s=f.prototype,q=r(u(s)?s:Object.prototype),_=Function.apply.call(e,q,c);return u(_)?_:q}});
},{"./_export":"NjVL","./_object-create":"d4Ek","./_a-function":"L6p4","./_an-object":"DBsB","./_is-object":"SP6V","./_fails":"e5TU","./_bind":"nZQG","./_global":"kql1"}],"VZPr":[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_export"),t=require("./_an-object"),i=require("./_to-primitive");r(r.S+r.F*require("./_fails")(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(r,u,f){t(r),u=i(u,!0),t(f);try{return e.f(r,u,f),!0}catch(n){return!1}}});
},{"./_object-dp":"wvco","./_export":"NjVL","./_an-object":"DBsB","./_to-primitive":"PUNq","./_fails":"e5TU"}],"kfrU":[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-gopd").f,t=require("./_an-object");e(e.S,"Reflect",{deleteProperty:function(e,o){var u=r(t(e),o);return!(u&&!u.configurable)&&delete e[o]}});
},{"./_export":"NjVL","./_object-gopd":"SFON","./_an-object":"DBsB"}],"pLCm":[function(require,module,exports) {
"use strict";var e=require("./_export"),t=require("./_an-object"),i=function(e){this._t=t(e),this._i=0;var i,r=this._k=[];for(i in e)r.push(i)};require("./_iter-create")(i,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),e(e.S,"Reflect",{enumerate:function(e){return new i(e)}});
},{"./_export":"NjVL","./_an-object":"DBsB","./_iter-create":"O1PE"}],"iEI9":[function(require,module,exports) {
var e=require("./_object-gopd"),r=require("./_object-gpo"),t=require("./_has"),i=require("./_export"),o=require("./_is-object"),u=require("./_an-object");function a(i,c){var v,g,l=arguments.length<3?i:arguments[2];return u(i)===l?i[c]:(v=e.f(i,c))?t(v,"value")?v.value:void 0!==v.get?v.get.call(l):void 0:o(g=r(i))?a(g,c,l):void 0}i(i.S,"Reflect",{get:a});
},{"./_object-gopd":"SFON","./_object-gpo":"kbAb","./_has":"nW2g","./_export":"NjVL","./_is-object":"SP6V","./_an-object":"DBsB"}],"eHzb":[function(require,module,exports) {
var e=require("./_object-gopd"),r=require("./_export"),t=require("./_an-object");r(r.S,"Reflect",{getOwnPropertyDescriptor:function(r,o){return e.f(t(r),o)}});
},{"./_object-gopd":"SFON","./_export":"NjVL","./_an-object":"DBsB"}],"wht9":[function(require,module,exports) {
var e=require("./_export"),r=require("./_object-gpo"),t=require("./_an-object");e(e.S,"Reflect",{getPrototypeOf:function(e){return r(t(e))}});
},{"./_export":"NjVL","./_object-gpo":"kbAb","./_an-object":"DBsB"}],"sj65":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Reflect",{has:function(e,r){return r in e}});
},{"./_export":"NjVL"}],"Nj86":[function(require,module,exports) {
var e=require("./_export"),r=require("./_an-object"),t=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(e){return r(e),!t||t(e)}});
},{"./_export":"NjVL","./_an-object":"DBsB"}],"jxFw":[function(require,module,exports) {
var e=require("./_object-gopn"),r=require("./_object-gops"),o=require("./_an-object"),t=require("./_global").Reflect;module.exports=t&&t.ownKeys||function(t){var c=e.f(o(t)),n=r.f;return n?c.concat(n(t)):c};
},{"./_object-gopn":"yyyP","./_object-gops":"JErC","./_an-object":"DBsB","./_global":"kql1"}],"wyLA":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Reflect",{ownKeys:require("./_own-keys")});
},{"./_export":"NjVL","./_own-keys":"jxFw"}],"y3HT":[function(require,module,exports) {
var e=require("./_export"),r=require("./_an-object"),t=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(e){r(e);try{return t&&t(e),!0}catch(n){return!1}}});
},{"./_export":"NjVL","./_an-object":"DBsB"}],"ndfm":[function(require,module,exports) {
var e=require("./_object-dp"),r=require("./_object-gopd"),t=require("./_object-gpo"),i=require("./_has"),u=require("./_export"),f=require("./_property-desc"),o=require("./_an-object"),a=require("./_is-object");function c(u,l,n){var q,s,_=arguments.length<4?u:arguments[3],b=r.f(o(u),l);if(!b){if(a(s=t(u)))return c(s,l,n,_);b=f(0)}if(i(b,"value")){if(!1===b.writable||!a(_))return!1;if(q=r.f(_,l)){if(q.get||q.set||!1===q.writable)return!1;q.value=n,e.f(_,l,q)}else e.f(_,l,f(0,n));return!0}return void 0!==b.set&&(b.set.call(_,n),!0)}u(u.S,"Reflect",{set:c});
},{"./_object-dp":"wvco","./_object-gopd":"SFON","./_object-gpo":"kbAb","./_has":"nW2g","./_export":"NjVL","./_property-desc":"B9EI","./_an-object":"DBsB","./_is-object":"SP6V"}],"olbq":[function(require,module,exports) {
var e=require("./_export"),r=require("./_set-proto");r&&e(e.S,"Reflect",{setPrototypeOf:function(e,t){r.check(e,t);try{return r.set(e,t),!0}catch(c){return!1}}});
},{"./_export":"NjVL","./_set-proto":"Epal"}],"EHCj":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_array-includes")(!0);r(r.P,"Array",{includes:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0)}}),require("./_add-to-unscopables")("includes");
},{"./_export":"NjVL","./_array-includes":"dIPJ","./_add-to-unscopables":"PxQA"}],"V4v3":[function(require,module,exports) {
"use strict";var r=require("./_is-array"),e=require("./_is-object"),i=require("./_to-length"),t=require("./_ctx"),o=require("./_wks")("isConcatSpreadable");function u(s,a,n,c,f,l,q,_){for(var d,h,p=f,v=0,b=!!q&&t(q,_,3);v<c;){if(v in n){if(d=b?b(n[v],v,a):n[v],h=!1,e(d)&&(h=void 0!==(h=d[o])?!!h:r(d)),h&&l>0)p=u(s,a,d,i(d.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError();s[p]=d}p++}v++}return p}module.exports=u;
},{"./_is-array":"OsmR","./_is-object":"SP6V","./_to-length":"HdKs","./_ctx":"N9ch","./_wks":"MgdH"}],"moLY":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_flatten-into-array"),t=require("./_to-object"),a=require("./_to-length"),i=require("./_a-function"),u=require("./_array-species-create");r(r.P,"Array",{flatMap:function(r){var n,o,c=t(this);return i(r),n=a(c.length),o=u(c,0),e(o,c,c,n,0,1,r,arguments[1]),o}}),require("./_add-to-unscopables")("flatMap");
},{"./_export":"NjVL","./_flatten-into-array":"V4v3","./_to-object":"JfJ5","./_to-length":"HdKs","./_a-function":"L6p4","./_array-species-create":"yi52","./_add-to-unscopables":"PxQA"}],"b3LS":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_flatten-into-array"),t=require("./_to-object"),i=require("./_to-length"),a=require("./_to-integer"),n=require("./_array-species-create");e(e.P,"Array",{flatten:function(){var e=arguments[0],u=t(this),o=i(u.length),q=n(u,0);return r(q,u,u,o,0,void 0===e?1:a(e)),q}}),require("./_add-to-unscopables")("flatten");
},{"./_export":"NjVL","./_flatten-into-array":"V4v3","./_to-object":"JfJ5","./_to-length":"HdKs","./_to-integer":"cHfm","./_array-species-create":"yi52","./_add-to-unscopables":"PxQA"}],"uHWZ":[function(require,module,exports) {
"use strict";var r=require("./_export"),t=require("./_string-at")(!0),e=require("./_fails"),i=e(function(){return"𠮷"!=="𠮷".at(0)});r(r.P+r.F*i,"String",{at:function(r){return t(this,r)}});
},{"./_export":"NjVL","./_string-at":"BiTF","./_fails":"e5TU"}],"GTWz":[function(require,module,exports) {
var e=require("./_to-length"),r=require("./_string-repeat"),t=require("./_defined");module.exports=function(i,n,l,g){var u=String(t(i)),a=u.length,h=void 0===l?" ":String(l),o=e(n);if(o<=a||""==h)return u;var c=o-a,d=r.call(h,Math.ceil(c/h.length));return d.length>c&&(d=d.slice(0,c)),g?d+u:u+d};
},{"./_to-length":"HdKs","./_string-repeat":"ezM6","./_defined":"Zcur"}],"fWC9":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_string-pad"),t=require("./_user-agent"),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t);r(r.P+r.F*i,"String",{padStart:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0,!0)}});
},{"./_export":"NjVL","./_string-pad":"GTWz","./_user-agent":"SWOj"}],"XG7E":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_string-pad"),i=require("./_user-agent"),t=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*t,"String",{padEnd:function(r){return e(this,r,arguments.length>1?arguments[1]:void 0,!1)}});
},{"./_export":"NjVL","./_string-pad":"GTWz","./_user-agent":"SWOj"}],"yPLu":[function(require,module,exports) {
"use strict";require("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart");
},{"./_string-trim":"EWct"}],"n2or":[function(require,module,exports) {
"use strict";require("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd");
},{"./_string-trim":"EWct"}],"U9WL":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_defined"),t=require("./_to-length"),i=require("./_is-regexp"),n=require("./_flags"),s=RegExp.prototype,g=function(e,r){this._r=e,this._s=r};require("./_iter-create")(g,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),e(e.P,"String",{matchAll:function(e){if(r(this),!i(e))throw TypeError(e+" is not a regexp!");var u=String(this),a="flags"in s?String(e.flags):n.call(e),l=new RegExp(e.source,~a.indexOf("g")?a:"g"+a);return l.lastIndex=t(e.lastIndex),new g(l,u)}});
},{"./_export":"NjVL","./_defined":"Zcur","./_to-length":"HdKs","./_is-regexp":"g8m6","./_flags":"aRjg","./_iter-create":"O1PE"}],"Iboh":[function(require,module,exports) {
require("./_wks-define")("asyncIterator");
},{"./_wks-define":"hijg"}],"CwRI":[function(require,module,exports) {
require("./_wks-define")("observable");
},{"./_wks-define":"hijg"}],"MZQr":[function(require,module,exports) {
var e=require("./_export"),r=require("./_own-keys"),t=require("./_to-iobject"),o=require("./_object-gopd"),i=require("./_create-property");e(e.S,"Object",{getOwnPropertyDescriptors:function(e){for(var u,c,n=t(e),p=o.f,q=r(n),_={},a=0;q.length>a;)void 0!==(c=p(n,u=q[a++]))&&i(_,u,c);return _}});
},{"./_export":"NjVL","./_own-keys":"jxFw","./_to-iobject":"mwRI","./_object-gopd":"SFON","./_create-property":"WfCN"}],"bMm7":[function(require,module,exports) {
var e=require("./_descriptors"),r=require("./_object-keys"),t=require("./_to-iobject"),o=require("./_object-pie").f;module.exports=function(u){return function(i){for(var c,n=t(i),s=r(n),f=s.length,l=0,p=[];f>l;)c=s[l++],e&&!o.call(n,c)||p.push(u?[c,n[c]]:n[c]);return p}};
},{"./_descriptors":"ZJLI","./_object-keys":"kfVX","./_to-iobject":"mwRI","./_object-pie":"Blc0"}],"cZE6":[function(require,module,exports) {
var r=require("./_export"),e=require("./_object-to-array")(!1);r(r.S,"Object",{values:function(r){return e(r)}});
},{"./_export":"NjVL","./_object-to-array":"bMm7"}],"beat":[function(require,module,exports) {
var r=require("./_export"),e=require("./_object-to-array")(!0);r(r.S,"Object",{entries:function(r){return e(r)}});
},{"./_export":"NjVL","./_object-to-array":"bMm7"}],"HOr2":[function(require,module,exports) {
"use strict";module.exports=require("./_library")||!require("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete require("./_global")[e]});
},{"./_library":"Nw1e","./_fails":"e5TU","./_global":"kql1"}],"mNK1":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_a-function"),i=require("./_object-dp");require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__defineGetter__:function(e,u){i.f(r(this),e,{get:t(u),enumerable:!0,configurable:!0})}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_a-function":"L6p4","./_object-dp":"wvco","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"DPSG":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_a-function"),i=require("./_object-dp");require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__defineSetter__:function(e,u){i.f(r(this),e,{set:t(u),enumerable:!0,configurable:!0})}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_a-function":"L6p4","./_object-dp":"wvco","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"Y0di":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_to-primitive"),i=require("./_object-gpo"),o=require("./_object-gopd").f;require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var u,_=r(this),c=t(e,!0);do{if(u=o(_,c))return u.get}while(_=i(_))}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_to-primitive":"PUNq","./_object-gpo":"kbAb","./_object-gopd":"SFON","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"biAK":[function(require,module,exports) {
"use strict";var e=require("./_export"),r=require("./_to-object"),t=require("./_to-primitive"),i=require("./_object-gpo"),o=require("./_object-gopd").f;require("./_descriptors")&&e(e.P+require("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var u,_=r(this),c=t(e,!0);do{if(u=o(_,c))return u.set}while(_=i(_))}});
},{"./_export":"NjVL","./_to-object":"JfJ5","./_to-primitive":"PUNq","./_object-gpo":"kbAb","./_object-gopd":"SFON","./_descriptors":"ZJLI","./_object-forced-pam":"HOr2"}],"Jmch":[function(require,module,exports) {
var r=require("./_for-of");module.exports=function(e,o){var u=[];return r(e,!1,u.push,u,o),u};
},{"./_for-of":"Pqba"}],"lQHC":[function(require,module,exports) {
var r=require("./_classof"),e=require("./_array-from-iterable");module.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return e(this)}};
},{"./_classof":"jP8S","./_array-from-iterable":"Jmch"}],"VZya":[function(require,module,exports) {
var e=require("./_export");e(e.P+e.R,"Map",{toJSON:require("./_collection-to-json")("Map")});
},{"./_export":"NjVL","./_collection-to-json":"lQHC"}],"omDO":[function(require,module,exports) {
var e=require("./_export");e(e.P+e.R,"Set",{toJSON:require("./_collection-to-json")("Set")});
},{"./_export":"NjVL","./_collection-to-json":"lQHC"}],"p4tr":[function(require,module,exports) {
"use strict";var r=require("./_export");module.exports=function(e){r(r.S,e,{of:function(){for(var r=arguments.length,e=new Array(r);r--;)e[r]=arguments[r];return new this(e)}})};
},{"./_export":"NjVL"}],"PjD2":[function(require,module,exports) {
require("./_set-collection-of")("Map");
},{"./_set-collection-of":"p4tr"}],"Z2Pq":[function(require,module,exports) {
require("./_set-collection-of")("Set");
},{"./_set-collection-of":"p4tr"}],"ByVw":[function(require,module,exports) {
require("./_set-collection-of")("WeakMap");
},{"./_set-collection-of":"p4tr"}],"CYPo":[function(require,module,exports) {
require("./_set-collection-of")("WeakSet");
},{"./_set-collection-of":"p4tr"}],"cZmF":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_a-function"),u=require("./_ctx"),i=require("./_for-of");module.exports=function(t){r(r.S,t,{from:function(r){var t,n,o,s,f=arguments[1];return e(this),(t=void 0!==f)&&e(f),null==r?new this:(n=[],t?(o=0,s=u(f,arguments[2],2),i(r,!1,function(r){n.push(s(r,o++))})):i(r,!1,n.push,n),new this(n))}})};
},{"./_export":"NjVL","./_a-function":"L6p4","./_ctx":"N9ch","./_for-of":"Pqba"}],"Swiz":[function(require,module,exports) {
require("./_set-collection-from")("Map");
},{"./_set-collection-from":"cZmF"}],"yWUZ":[function(require,module,exports) {
require("./_set-collection-from")("Set");
},{"./_set-collection-from":"cZmF"}],"X04t":[function(require,module,exports) {
require("./_set-collection-from")("WeakMap");
},{"./_set-collection-from":"cZmF"}],"Tbe6":[function(require,module,exports) {
require("./_set-collection-from")("WeakSet");
},{"./_set-collection-from":"cZmF"}],"SAyU":[function(require,module,exports) {
var r=require("./_export");r(r.G,{global:require("./_global")});
},{"./_export":"NjVL","./_global":"kql1"}],"ixkq":[function(require,module,exports) {
var e=require("./_export");e(e.S,"System",{global:require("./_global")});
},{"./_export":"NjVL","./_global":"kql1"}],"p9Qi":[function(require,module,exports) {
var r=require("./_export"),e=require("./_cof");r(r.S,"Error",{isError:function(r){return"Error"===e(r)}});
},{"./_export":"NjVL","./_cof":"viv7"}],"DPl4":[function(require,module,exports) {
var a=require("./_export");a(a.S,"Math",{clamp:function(a,r,t){return Math.min(t,Math.max(r,a))}});
},{"./_export":"NjVL"}],"qvLd":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{DEG_PER_RAD:Math.PI/180});
},{"./_export":"NjVL"}],"vOCQ":[function(require,module,exports) {
var e=require("./_export"),r=180/Math.PI;e(e.S,"Math",{degrees:function(e){return e*r}});
},{"./_export":"NjVL"}],"DBZ8":[function(require,module,exports) {
module.exports=Math.scale||function(e,t,n,a,l){return 0===arguments.length||e!=e||t!=t||n!=n||a!=a||l!=l?NaN:e===1/0||e===-1/0?e:(e-t)*(l-a)/(n-t)+a};
},{}],"bbog":[function(require,module,exports) {
var r=require("./_export"),e=require("./_math-scale"),a=require("./_math-fround");r(r.S,"Math",{fscale:function(r,t,u,i,n){return a(e(r,t,u,i,n))}});
},{"./_export":"NjVL","./_math-scale":"DBZ8","./_math-fround":"uZFk"}],"u35Z":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{iaddh:function(r,a,e,t){var i=r>>>0,n=e>>>0;return(a>>>0)+(t>>>0)+((i&n|(i|n)&~(i+n>>>0))>>>31)|0}});
},{"./_export":"NjVL"}],"AMAq":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{isubh:function(r,e,t,u){var a=r>>>0,i=t>>>0;return(e>>>0)-(u>>>0)-((~a&i|~(a^i)&a-i>>>0)>>>31)|0}});
},{"./_export":"NjVL"}],"PjOg":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{imulh:function(r,e){var t=+r,u=+e,a=65535&t,i=65535&u,n=t>>16,h=u>>16,o=(n*i>>>0)+(a*i>>>16);return n*h+(o>>16)+((a*h>>>0)+(65535&o)>>16)}});
},{"./_export":"NjVL"}],"MDih":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{RAD_PER_DEG:180/Math.PI});
},{"./_export":"NjVL"}],"kkYP":[function(require,module,exports) {
var r=require("./_export"),a=Math.PI/180;r(r.S,"Math",{radians:function(r){return r*a}});
},{"./_export":"NjVL"}],"h4TH":[function(require,module,exports) {
var e=require("./_export");e(e.S,"Math",{scale:require("./_math-scale")});
},{"./_export":"NjVL","./_math-scale":"DBZ8"}],"LfG8":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{umulh:function(r,u){var e=+r,t=+u,a=65535&e,n=65535&t,h=e>>>16,i=t>>>16,o=(h*n>>>0)+(a*n>>>16);return h*i+(o>>>16)+((a*i>>>0)+(65535&o)>>>16)}});
},{"./_export":"NjVL"}],"dibz":[function(require,module,exports) {
var r=require("./_export");r(r.S,"Math",{signbit:function(r){return(r=+r)!=r?r:0==r?1/r==1/0:r>0}});
},{"./_export":"NjVL"}],"PerR":[function(require,module,exports) {

"use strict";var r=require("./_export"),e=require("./_core"),t=require("./_global"),n=require("./_species-constructor"),i=require("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(r){var o=n(this,e.Promise||t.Promise),u="function"==typeof r;return this.then(u?function(e){return i(o,r()).then(function(){return e})}:r,u?function(e){return i(o,r()).then(function(){throw e})}:r)}});
},{"./_export":"NjVL","./_core":"KVo1","./_global":"kql1","./_species-constructor":"pC8t","./_promise-resolve":"bQCN"}],"vZUa":[function(require,module,exports) {
"use strict";var r=require("./_export"),e=require("./_new-promise-capability"),i=require("./_perform");r(r.S,"Promise",{try:function(r){var t=e.f(this),o=i(r);return(o.e?t.reject:t.resolve)(o.v),t.promise}});
},{"./_export":"NjVL","./_new-promise-capability":"Mdjk","./_perform":"eKV1"}],"pxMt":[function(require,module,exports) {
var e=require("./es6.map"),r=require("./_export"),t=require("./_shared")("metadata"),n=t.store||(t.store=new(require("./es6.weak-map"))),i=function(r,t,i){var o=n.get(r);if(!o){if(!i)return;n.set(r,o=new e)}var u=o.get(t);if(!u){if(!i)return;o.set(t,u=new e)}return u},o=function(e,r,t){var n=i(r,t,!1);return void 0!==n&&n.has(e)},u=function(e,r,t){var n=i(r,t,!1);return void 0===n?void 0:n.get(e)},a=function(e,r,t,n){i(t,n,!0).set(e,r)},s=function(e,r){var t=i(e,r,!1),n=[];return t&&t.forEach(function(e,r){n.push(r)}),n},f=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},c=function(e){r(r.S,"Reflect",e)};module.exports={store:n,map:i,has:o,get:u,set:a,keys:s,key:f,exp:c};
},{"./es6.map":"v0j2","./_export":"NjVL","./_shared":"sTGr","./es6.weak-map":"yBwO"}],"BSfr":[function(require,module,exports) {
var e=require("./_metadata"),a=require("./_an-object"),t=e.key,r=e.set;e.exp({defineMetadata:function(e,i,n,d){r(e,i,a(n),t(d))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"JW9N":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),r=e.key,a=e.map,i=e.store;e.exp({deleteMetadata:function(e,d){var n=arguments.length<3?void 0:r(arguments[2]),u=a(t(d),n,!1);if(void 0===u||!u.delete(e))return!1;if(u.size)return!0;var l=i.get(d);return l.delete(n),!!l.size||i.delete(d)}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"x5Yv":[function(require,module,exports) {
var e=require("./_metadata"),r=require("./_an-object"),t=require("./_object-gpo"),a=e.has,n=e.get,u=e.key,i=function(e,r,u){if(a(e,r,u))return n(e,r,u);var o=t(r);return null!==o?i(e,o,u):void 0};e.exp({getMetadata:function(e,t){return i(e,r(t),arguments.length<3?void 0:u(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB","./_object-gpo":"kbAb"}],"zaK7":[function(require,module,exports) {
var e=require("./es6.set"),r=require("./_array-from-iterable"),t=require("./_metadata"),a=require("./_an-object"),n=require("./_object-gpo"),u=t.keys,i=t.key,o=function(t,a){var i=u(t,a),c=n(t);if(null===c)return i;var l=o(c,a);return l.length?i.length?r(new e(i.concat(l))):l:i};t.exp({getMetadataKeys:function(e){return o(a(e),arguments.length<2?void 0:i(arguments[1]))}});
},{"./es6.set":"igWm","./_array-from-iterable":"Jmch","./_metadata":"pxMt","./_an-object":"DBsB","./_object-gpo":"kbAb"}],"Dz2Z":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=e.get,r=e.key;e.exp({getOwnMetadata:function(e,n){return a(e,t(n),arguments.length<3?void 0:r(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"sJYY":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=e.keys,r=e.key;e.exp({getOwnMetadataKeys:function(e){return a(t(e),arguments.length<2?void 0:r(arguments[1]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"T0JC":[function(require,module,exports) {
var e=require("./_metadata"),r=require("./_an-object"),t=require("./_object-gpo"),a=e.has,n=e.key,u=function(e,r,n){if(a(e,r,n))return!0;var i=t(r);return null!==i&&u(e,i,n)};e.exp({hasMetadata:function(e,t){return u(e,r(t),arguments.length<3?void 0:n(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB","./_object-gpo":"kbAb"}],"UCXJ":[function(require,module,exports) {
var e=require("./_metadata"),a=require("./_an-object"),t=e.has,r=e.key;e.exp({hasOwnMetadata:function(e,n){return t(e,a(n),arguments.length<3?void 0:r(arguments[2]))}});
},{"./_metadata":"pxMt","./_an-object":"DBsB"}],"iEkw":[function(require,module,exports) {
var e=require("./_metadata"),t=require("./_an-object"),a=require("./_a-function"),r=e.key,n=e.set;e.exp({metadata:function(e,i){return function(u,o){n(e,i,(void 0!==o?t:a)(u),r(o))}}});
},{"./_metadata":"pxMt","./_an-object":"DBsB","./_a-function":"L6p4"}],"OO50":[function(require,module,exports) {

var r=require("./_export"),e=require("./_microtask")(),i=require("./_global").process,o="process"==require("./_cof")(i);r(r.G,{asap:function(r){var a=o&&i.domain;e(a?a.bind(r):r)}});
},{"./_export":"NjVL","./_microtask":"i1HG","./_global":"kql1","./_cof":"viv7"}],"eRGJ":[function(require,module,exports) {

"use strict";var r=require("./_export"),t=require("./_global"),n=require("./_core"),e=require("./_microtask")(),i=require("./_wks")("observable"),o=require("./_a-function"),u=require("./_an-object"),c=require("./_an-instance"),f=require("./_redefine-all"),s=require("./_hide"),a=require("./_for-of"),v=a.RETURN,h=function(r){return null==r?void 0:o(r)},l=function(r){var t=r._c;t&&(r._c=void 0,t())},_=function(r){return void 0===r._o},b=function(r){_(r)||(r._o=void 0,l(r))},y=function(r,t){u(r),this._c=void 0,this._o=r,r=new p(this);try{var n=t(r),e=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){e.unsubscribe()}:o(n),this._c=n)}catch(i){return void r.error(i)}_(this)&&l(this)};y.prototype=f({},{unsubscribe:function(){b(this)}});var p=function(r){this._s=r};p.prototype=f({},{next:function(r){var t=this._s;if(!_(t)){var n=t._o;try{var e=h(n.next);if(e)return e.call(n,r)}catch(i){try{b(t)}finally{throw i}}}},error:function(r){var t=this._s;if(_(t))throw r;var n=t._o;t._o=void 0;try{var e=h(n.error);if(!e)throw r;r=e.call(n,r)}catch(i){try{l(t)}finally{throw i}}return l(t),r},complete:function(r){var t=this._s;if(!_(t)){var n=t._o;t._o=void 0;try{var e=h(n.complete);r=e?e.call(n,r):void 0}catch(i){try{l(t)}finally{throw i}}return l(t),r}}});var w=function(r){c(this,w,"Observable","_f")._f=o(r)};f(w.prototype,{subscribe:function(r){return new y(r,this._f)},forEach:function(r){var e=this;return new(n.Promise||t.Promise)(function(t,n){o(r);var i=e.subscribe({next:function(t){try{return r(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t})})}}),f(w,{from:function(r){var t="function"==typeof this?this:w,n=h(u(r)[i]);if(n){var o=u(n.call(r));return o.constructor===t?o:new t(function(r){return o.subscribe(r)})}return new t(function(t){var n=!1;return e(function(){if(!n){try{if(a(r,!1,function(r){if(t.next(r),n)return v})===v)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var r=0,t=arguments.length,n=new Array(t);r<t;)n[r]=arguments[r++];return new("function"==typeof this?this:w)(function(r){var t=!1;return e(function(){if(!t){for(var e=0;e<n.length;++e)if(r.next(n[e]),t)return;r.complete()}}),function(){t=!0}})}}),s(w.prototype,i,function(){return this}),r(r.G,{Observable:w}),require("./_set-species")("Observable");
},{"./_export":"NjVL","./_global":"kql1","./_core":"KVo1","./_microtask":"i1HG","./_wks":"MgdH","./_a-function":"L6p4","./_an-object":"DBsB","./_an-instance":"XE1H","./_redefine-all":"XX7Z","./_hide":"i5RL","./_for-of":"Pqba","./_set-species":"Bn5Q"}],"FL4b":[function(require,module,exports) {

var e=require("./_global"),t=require("./_export"),n=require("./_user-agent"),r=[].slice,u=/MSIE .\./.test(n),i=function(e){return function(t,n){var u=arguments.length>2,i=!!u&&r.call(arguments,2);return e(u?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};t(t.G+t.B+t.F*u,{setTimeout:i(e.setTimeout),setInterval:i(e.setInterval)});
},{"./_global":"kql1","./_export":"NjVL","./_user-agent":"SWOj"}],"hg3C":[function(require,module,exports) {
var e=require("./_export"),r=require("./_task");e(e.G+e.B,{setImmediate:r.set,clearImmediate:r.clear});
},{"./_export":"NjVL","./_task":"sbFn"}],"hFdU":[function(require,module,exports) {

for(var e=require("./es6.array.iterator"),t=require("./_object-keys"),i=require("./_redefine"),r=require("./_global"),s=require("./_hide"),L=require("./_iterators"),a=require("./_wks"),o=a("iterator"),l=a("toStringTag"),S=L.Array,n={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},u=t(n),T=0;T<u.length;T++){var c,g=u[T],M=n[g],y=r[g],f=y&&y.prototype;if(f&&(f[o]||s(f,o,S),f[l]||s(f,l,g),L[g]=S,M))for(c in e)f[c]||i(f,c,e[c],!0)}
},{"./es6.array.iterator":"xsAw","./_object-keys":"kfVX","./_redefine":"l2hW","./_global":"kql1","./_hide":"i5RL","./_iterators":"oANp","./_wks":"MgdH"}],"mRaX":[function(require,module,exports) {
require("./modules/es6.symbol"),require("./modules/es6.object.create"),require("./modules/es6.object.define-property"),require("./modules/es6.object.define-properties"),require("./modules/es6.object.get-own-property-descriptor"),require("./modules/es6.object.get-prototype-of"),require("./modules/es6.object.keys"),require("./modules/es6.object.get-own-property-names"),require("./modules/es6.object.freeze"),require("./modules/es6.object.seal"),require("./modules/es6.object.prevent-extensions"),require("./modules/es6.object.is-frozen"),require("./modules/es6.object.is-sealed"),require("./modules/es6.object.is-extensible"),require("./modules/es6.object.assign"),require("./modules/es6.object.is"),require("./modules/es6.object.set-prototype-of"),require("./modules/es6.object.to-string"),require("./modules/es6.function.bind"),require("./modules/es6.function.name"),require("./modules/es6.function.has-instance"),require("./modules/es6.parse-int"),require("./modules/es6.parse-float"),require("./modules/es6.number.constructor"),require("./modules/es6.number.to-fixed"),require("./modules/es6.number.to-precision"),require("./modules/es6.number.epsilon"),require("./modules/es6.number.is-finite"),require("./modules/es6.number.is-integer"),require("./modules/es6.number.is-nan"),require("./modules/es6.number.is-safe-integer"),require("./modules/es6.number.max-safe-integer"),require("./modules/es6.number.min-safe-integer"),require("./modules/es6.number.parse-float"),require("./modules/es6.number.parse-int"),require("./modules/es6.math.acosh"),require("./modules/es6.math.asinh"),require("./modules/es6.math.atanh"),require("./modules/es6.math.cbrt"),require("./modules/es6.math.clz32"),require("./modules/es6.math.cosh"),require("./modules/es6.math.expm1"),require("./modules/es6.math.fround"),require("./modules/es6.math.hypot"),require("./modules/es6.math.imul"),require("./modules/es6.math.log10"),require("./modules/es6.math.log1p"),require("./modules/es6.math.log2"),require("./modules/es6.math.sign"),require("./modules/es6.math.sinh"),require("./modules/es6.math.tanh"),require("./modules/es6.math.trunc"),require("./modules/es6.string.from-code-point"),require("./modules/es6.string.raw"),require("./modules/es6.string.trim"),require("./modules/es6.string.iterator"),require("./modules/es6.string.code-point-at"),require("./modules/es6.string.ends-with"),require("./modules/es6.string.includes"),require("./modules/es6.string.repeat"),require("./modules/es6.string.starts-with"),require("./modules/es6.string.anchor"),require("./modules/es6.string.big"),require("./modules/es6.string.blink"),require("./modules/es6.string.bold"),require("./modules/es6.string.fixed"),require("./modules/es6.string.fontcolor"),require("./modules/es6.string.fontsize"),require("./modules/es6.string.italics"),require("./modules/es6.string.link"),require("./modules/es6.string.small"),require("./modules/es6.string.strike"),require("./modules/es6.string.sub"),require("./modules/es6.string.sup"),require("./modules/es6.date.now"),require("./modules/es6.date.to-json"),require("./modules/es6.date.to-iso-string"),require("./modules/es6.date.to-string"),require("./modules/es6.date.to-primitive"),require("./modules/es6.array.is-array"),require("./modules/es6.array.from"),require("./modules/es6.array.of"),require("./modules/es6.array.join"),require("./modules/es6.array.slice"),require("./modules/es6.array.sort"),require("./modules/es6.array.for-each"),require("./modules/es6.array.map"),require("./modules/es6.array.filter"),require("./modules/es6.array.some"),require("./modules/es6.array.every"),require("./modules/es6.array.reduce"),require("./modules/es6.array.reduce-right"),require("./modules/es6.array.index-of"),require("./modules/es6.array.last-index-of"),require("./modules/es6.array.copy-within"),require("./modules/es6.array.fill"),require("./modules/es6.array.find"),require("./modules/es6.array.find-index"),require("./modules/es6.array.species"),require("./modules/es6.array.iterator"),require("./modules/es6.regexp.constructor"),require("./modules/es6.regexp.exec"),require("./modules/es6.regexp.to-string"),require("./modules/es6.regexp.flags"),require("./modules/es6.regexp.match"),require("./modules/es6.regexp.replace"),require("./modules/es6.regexp.search"),require("./modules/es6.regexp.split"),require("./modules/es6.promise"),require("./modules/es6.map"),require("./modules/es6.set"),require("./modules/es6.weak-map"),require("./modules/es6.weak-set"),require("./modules/es6.typed.array-buffer"),require("./modules/es6.typed.data-view"),require("./modules/es6.typed.int8-array"),require("./modules/es6.typed.uint8-array"),require("./modules/es6.typed.uint8-clamped-array"),require("./modules/es6.typed.int16-array"),require("./modules/es6.typed.uint16-array"),require("./modules/es6.typed.int32-array"),require("./modules/es6.typed.uint32-array"),require("./modules/es6.typed.float32-array"),require("./modules/es6.typed.float64-array"),require("./modules/es6.reflect.apply"),require("./modules/es6.reflect.construct"),require("./modules/es6.reflect.define-property"),require("./modules/es6.reflect.delete-property"),require("./modules/es6.reflect.enumerate"),require("./modules/es6.reflect.get"),require("./modules/es6.reflect.get-own-property-descriptor"),require("./modules/es6.reflect.get-prototype-of"),require("./modules/es6.reflect.has"),require("./modules/es6.reflect.is-extensible"),require("./modules/es6.reflect.own-keys"),require("./modules/es6.reflect.prevent-extensions"),require("./modules/es6.reflect.set"),require("./modules/es6.reflect.set-prototype-of"),require("./modules/es7.array.includes"),require("./modules/es7.array.flat-map"),require("./modules/es7.array.flatten"),require("./modules/es7.string.at"),require("./modules/es7.string.pad-start"),require("./modules/es7.string.pad-end"),require("./modules/es7.string.trim-left"),require("./modules/es7.string.trim-right"),require("./modules/es7.string.match-all"),require("./modules/es7.symbol.async-iterator"),require("./modules/es7.symbol.observable"),require("./modules/es7.object.get-own-property-descriptors"),require("./modules/es7.object.values"),require("./modules/es7.object.entries"),require("./modules/es7.object.define-getter"),require("./modules/es7.object.define-setter"),require("./modules/es7.object.lookup-getter"),require("./modules/es7.object.lookup-setter"),require("./modules/es7.map.to-json"),require("./modules/es7.set.to-json"),require("./modules/es7.map.of"),require("./modules/es7.set.of"),require("./modules/es7.weak-map.of"),require("./modules/es7.weak-set.of"),require("./modules/es7.map.from"),require("./modules/es7.set.from"),require("./modules/es7.weak-map.from"),require("./modules/es7.weak-set.from"),require("./modules/es7.global"),require("./modules/es7.system.global"),require("./modules/es7.error.is-error"),require("./modules/es7.math.clamp"),require("./modules/es7.math.deg-per-rad"),require("./modules/es7.math.degrees"),require("./modules/es7.math.fscale"),require("./modules/es7.math.iaddh"),require("./modules/es7.math.isubh"),require("./modules/es7.math.imulh"),require("./modules/es7.math.rad-per-deg"),require("./modules/es7.math.radians"),require("./modules/es7.math.scale"),require("./modules/es7.math.umulh"),require("./modules/es7.math.signbit"),require("./modules/es7.promise.finally"),require("./modules/es7.promise.try"),require("./modules/es7.reflect.define-metadata"),require("./modules/es7.reflect.delete-metadata"),require("./modules/es7.reflect.get-metadata"),require("./modules/es7.reflect.get-metadata-keys"),require("./modules/es7.reflect.get-own-metadata"),require("./modules/es7.reflect.get-own-metadata-keys"),require("./modules/es7.reflect.has-metadata"),require("./modules/es7.reflect.has-own-metadata"),require("./modules/es7.reflect.metadata"),require("./modules/es7.asap"),require("./modules/es7.observable"),require("./modules/web.timers"),require("./modules/web.immediate"),require("./modules/web.dom.iterable"),module.exports=require("./modules/_core");
},{"./modules/es6.symbol":"s5uV","./modules/es6.object.create":"ELq7","./modules/es6.object.define-property":"SeKy","./modules/es6.object.define-properties":"FFVz","./modules/es6.object.get-own-property-descriptor":"eObd","./modules/es6.object.get-prototype-of":"x4A6","./modules/es6.object.keys":"oiqN","./modules/es6.object.get-own-property-names":"NX5N","./modules/es6.object.freeze":"QMvv","./modules/es6.object.seal":"y8Nt","./modules/es6.object.prevent-extensions":"vJzf","./modules/es6.object.is-frozen":"UcEb","./modules/es6.object.is-sealed":"VI7w","./modules/es6.object.is-extensible":"CvEg","./modules/es6.object.assign":"fRec","./modules/es6.object.is":"GEUt","./modules/es6.object.set-prototype-of":"CQxr","./modules/es6.object.to-string":"tSZj","./modules/es6.function.bind":"eBLX","./modules/es6.function.name":"WtEG","./modules/es6.function.has-instance":"YlR3","./modules/es6.parse-int":"OCDI","./modules/es6.parse-float":"i7Me","./modules/es6.number.constructor":"uYep","./modules/es6.number.to-fixed":"dVzo","./modules/es6.number.to-precision":"KwyH","./modules/es6.number.epsilon":"Decw","./modules/es6.number.is-finite":"oWwC","./modules/es6.number.is-integer":"N7Jd","./modules/es6.number.is-nan":"RsrB","./modules/es6.number.is-safe-integer":"fbTZ","./modules/es6.number.max-safe-integer":"JxHc","./modules/es6.number.min-safe-integer":"X6hw","./modules/es6.number.parse-float":"IKam","./modules/es6.number.parse-int":"QjIW","./modules/es6.math.acosh":"FaF2","./modules/es6.math.asinh":"oL1m","./modules/es6.math.atanh":"PhwT","./modules/es6.math.cbrt":"fi1h","./modules/es6.math.clz32":"fJAy","./modules/es6.math.cosh":"kseY","./modules/es6.math.expm1":"hyI8","./modules/es6.math.fround":"N7ZU","./modules/es6.math.hypot":"HGHV","./modules/es6.math.imul":"Pasv","./modules/es6.math.log10":"zlsv","./modules/es6.math.log1p":"RR3i","./modules/es6.math.log2":"b6PB","./modules/es6.math.sign":"BHWJ","./modules/es6.math.sinh":"f0FZ","./modules/es6.math.tanh":"GaA9","./modules/es6.math.trunc":"qy71","./modules/es6.string.from-code-point":"i8rB","./modules/es6.string.raw":"DtRm","./modules/es6.string.trim":"Z1j3","./modules/es6.string.iterator":"Wu89","./modules/es6.string.code-point-at":"P7ku","./modules/es6.string.ends-with":"MUpt","./modules/es6.string.includes":"IvzQ","./modules/es6.string.repeat":"s8Pp","./modules/es6.string.starts-with":"hSvU","./modules/es6.string.anchor":"Qidu","./modules/es6.string.big":"zi4A","./modules/es6.string.blink":"tDaT","./modules/es6.string.bold":"VlCA","./modules/es6.string.fixed":"BahM","./modules/es6.string.fontcolor":"f6mn","./modules/es6.string.fontsize":"Du0n","./modules/es6.string.italics":"EmZX","./modules/es6.string.link":"mlNr","./modules/es6.string.small":"QeD6","./modules/es6.string.strike":"ny4U","./modules/es6.string.sub":"Pvqx","./modules/es6.string.sup":"mRpz","./modules/es6.date.now":"qW2d","./modules/es6.date.to-json":"DLwC","./modules/es6.date.to-iso-string":"Q9dY","./modules/es6.date.to-string":"A8WX","./modules/es6.date.to-primitive":"jJtq","./modules/es6.array.is-array":"OdQU","./modules/es6.array.from":"hO05","./modules/es6.array.of":"ARIR","./modules/es6.array.join":"e5fN","./modules/es6.array.slice":"TSa4","./modules/es6.array.sort":"xw8W","./modules/es6.array.for-each":"bomu","./modules/es6.array.map":"P4Vy","./modules/es6.array.filter":"kLvk","./modules/es6.array.some":"jLap","./modules/es6.array.every":"KLYK","./modules/es6.array.reduce":"dZ7F","./modules/es6.array.reduce-right":"Wzw6","./modules/es6.array.index-of":"jGln","./modules/es6.array.last-index-of":"iGRw","./modules/es6.array.copy-within":"vJRO","./modules/es6.array.fill":"fHCf","./modules/es6.array.find":"HBFq","./modules/es6.array.find-index":"xRcq","./modules/es6.array.species":"Smp7","./modules/es6.array.iterator":"xsAw","./modules/es6.regexp.constructor":"hBwo","./modules/es6.regexp.exec":"ej7E","./modules/es6.regexp.to-string":"yEH7","./modules/es6.regexp.flags":"SALB","./modules/es6.regexp.match":"yikX","./modules/es6.regexp.replace":"eUHu","./modules/es6.regexp.search":"iHvG","./modules/es6.regexp.split":"V8KN","./modules/es6.promise":"ar2B","./modules/es6.map":"v0j2","./modules/es6.set":"igWm","./modules/es6.weak-map":"yBwO","./modules/es6.weak-set":"YtBU","./modules/es6.typed.array-buffer":"tZr0","./modules/es6.typed.data-view":"s1Mz","./modules/es6.typed.int8-array":"W7MG","./modules/es6.typed.uint8-array":"n9td","./modules/es6.typed.uint8-clamped-array":"m71d","./modules/es6.typed.int16-array":"YGkr","./modules/es6.typed.uint16-array":"OaOh","./modules/es6.typed.int32-array":"sUYQ","./modules/es6.typed.uint32-array":"XuMj","./modules/es6.typed.float32-array":"V93U","./modules/es6.typed.float64-array":"KMMD","./modules/es6.reflect.apply":"XlBZ","./modules/es6.reflect.construct":"JeCu","./modules/es6.reflect.define-property":"VZPr","./modules/es6.reflect.delete-property":"kfrU","./modules/es6.reflect.enumerate":"pLCm","./modules/es6.reflect.get":"iEI9","./modules/es6.reflect.get-own-property-descriptor":"eHzb","./modules/es6.reflect.get-prototype-of":"wht9","./modules/es6.reflect.has":"sj65","./modules/es6.reflect.is-extensible":"Nj86","./modules/es6.reflect.own-keys":"wyLA","./modules/es6.reflect.prevent-extensions":"y3HT","./modules/es6.reflect.set":"ndfm","./modules/es6.reflect.set-prototype-of":"olbq","./modules/es7.array.includes":"EHCj","./modules/es7.array.flat-map":"moLY","./modules/es7.array.flatten":"b3LS","./modules/es7.string.at":"uHWZ","./modules/es7.string.pad-start":"fWC9","./modules/es7.string.pad-end":"XG7E","./modules/es7.string.trim-left":"yPLu","./modules/es7.string.trim-right":"n2or","./modules/es7.string.match-all":"U9WL","./modules/es7.symbol.async-iterator":"Iboh","./modules/es7.symbol.observable":"CwRI","./modules/es7.object.get-own-property-descriptors":"MZQr","./modules/es7.object.values":"cZE6","./modules/es7.object.entries":"beat","./modules/es7.object.define-getter":"mNK1","./modules/es7.object.define-setter":"DPSG","./modules/es7.object.lookup-getter":"Y0di","./modules/es7.object.lookup-setter":"biAK","./modules/es7.map.to-json":"VZya","./modules/es7.set.to-json":"omDO","./modules/es7.map.of":"PjD2","./modules/es7.set.of":"Z2Pq","./modules/es7.weak-map.of":"ByVw","./modules/es7.weak-set.of":"CYPo","./modules/es7.map.from":"Swiz","./modules/es7.set.from":"yWUZ","./modules/es7.weak-map.from":"X04t","./modules/es7.weak-set.from":"Tbe6","./modules/es7.global":"SAyU","./modules/es7.system.global":"ixkq","./modules/es7.error.is-error":"p9Qi","./modules/es7.math.clamp":"DPl4","./modules/es7.math.deg-per-rad":"qvLd","./modules/es7.math.degrees":"vOCQ","./modules/es7.math.fscale":"bbog","./modules/es7.math.iaddh":"u35Z","./modules/es7.math.isubh":"AMAq","./modules/es7.math.imulh":"PjOg","./modules/es7.math.rad-per-deg":"MDih","./modules/es7.math.radians":"kkYP","./modules/es7.math.scale":"h4TH","./modules/es7.math.umulh":"LfG8","./modules/es7.math.signbit":"dibz","./modules/es7.promise.finally":"PerR","./modules/es7.promise.try":"vZUa","./modules/es7.reflect.define-metadata":"BSfr","./modules/es7.reflect.delete-metadata":"JW9N","./modules/es7.reflect.get-metadata":"x5Yv","./modules/es7.reflect.get-metadata-keys":"zaK7","./modules/es7.reflect.get-own-metadata":"Dz2Z","./modules/es7.reflect.get-own-metadata-keys":"sJYY","./modules/es7.reflect.has-metadata":"T0JC","./modules/es7.reflect.has-own-metadata":"UCXJ","./modules/es7.reflect.metadata":"iEkw","./modules/es7.asap":"OO50","./modules/es7.observable":"eRGJ","./modules/web.timers":"FL4b","./modules/web.immediate":"hg3C","./modules/web.dom.iterable":"hFdU","./modules/_core":"KVo1"}],"KA2S":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];!function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof module,h=t.regeneratorRuntime;if(h)u&&(module.exports=h);else{(h=t.regeneratorRuntime=u?module.exports:{}).wrap=w;var s="suspendedStart",f="suspendedYield",l="executing",p="completed",y={},v={};v[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(P([])));g&&g!==e&&n.call(g,i)&&(v=g);var m=E.prototype=x.prototype=Object.create(v);b.prototype=m.constructor=E,E.constructor=b,E[c]=b.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},h.awrap=function(t){return{__await:t}},j(_.prototype),_.prototype[a]=function(){return this},h.AsyncIterator=_,h.async=function(t,r,e,n){var o=new _(w(t,r,e,n));return h.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},j(m),m[c]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},h.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},h.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(G),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function w(t,r,e,n){var o=r&&r.prototype instanceof x?r:x,i=Object.create(o.prototype),a=new N(n||[]);return i._invoke=function(t,r,e){var n=s;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return S()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===s)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=L(t,r,e);if("normal"===u.type){if(n=e.done?p:f,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function L(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}function x(){}function b(){}function E(){}function j(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function _(r){function e(t,o,i,a){var c=L(r[t],r,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},a)}a(c.arg)}var o;"object"==typeof t.process&&t.process.domain&&(e=t.process.domain.bind(e)),this._invoke=function(t,r){function n(){return new Promise(function(n,o){e(t,r,n,o)})}return o=o?o.then(n,n):n()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=L(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:S}}function S(){return{value:r,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this);
},{}],"b8Gs":[function(require,module,exports) {
module.exports=function(n,r){var t=r===Object(r)?function(n){return r[n]}:r;return function(r){return String(r).replace(n,t)}};
},{}],"M1NK":[function(require,module,exports) {
var e=require("./_export"),r=require("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(e){return r(e)}});
},{"./_export":"NjVL","./_replacer":"b8Gs"}],"p1zn":[function(require,module,exports) {
require("../../modules/core.regexp.escape"),module.exports=require("../../modules/_core").RegExp.escape;
},{"../../modules/core.regexp.escape":"M1NK","../../modules/_core":"KVo1"}],"JIy0":[function(require,module,exports) {
var global = arguments[3];

var e=arguments[3];if(require("core-js/shim"),require("regenerator-runtime/runtime"),require("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";function i(e,i,n){e[i]||Object[r](e,i,{writable:!0,configurable:!0,value:n})}i(String.prototype,"padLeft","".padStart),i(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&i(Array,e,Function.call.bind([][e]))});
},{"core-js/shim":"mRaX","regenerator-runtime/runtime":"KA2S","core-js/fn/regexp/escape":"p1zn"}],"AcBA":[function(require,module,exports) {
"use strict";function e(e,a){var s=r(e,a.customWeight),i=s[0],n=s[1],c=s[2];return[i=o(i=t(i,n)),c]}function r(e,r){var t,o,a=[],s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,c=0,p=[];if(r){if(!(t=r.mode)||"string"!=typeof t)throw new TypeError("[Bad customWeight option] A mode must be specified and should be either 'multiply', 'replace' or 'add'.");if("object"!=typeof(o=r.scores)&&!Array.isArray(o))throw new TypeError("[Bad customWeight option] scores must be Object or Number[].\n      Please refer the document https://github.com/freshsomebody/posenet-similarity to set it correctly.")}return e.keypoints.forEach(function(e,r){var u=e.position.x,m=e.position.y;a.push(u,m),s=Math.min(s,u),i=Math.min(i,m),n=Math.max(n,Math.max(u,m));var d=e.score;if(t&&o){var h=!1;if((o[e.part]||0===o[e.part])&&(h=o[e.part]),(o[r]||0===o[r])&&(h=o[r]),(h||0===h)&&"number"==typeof h)switch(t){case"multiply":d*=h;break;case"replace":d=h;break;case"add":d+=h;break;default:throw new Error("[Bad customWeight option] A mode must be specified and should be either 'multiply', 'replace' or 'add'")}}c+=d,p.push(d)}),p.push(c),[a,[s/n,i/n,n],p]}function t(e,r){var t=r[0],o=r[1],a=r[2];return e.map(function(e,r){return r%2==0?e/a-t:e/a-o})}function o(e){var r=0;return e.forEach(function(e){r+=Math.pow(e,2)}),r=Math.sqrt(r),e.map(function(e){return e/r})}exports.__esModule=!0,exports.L2Normalization=exports.scaleAndTranslate=exports.convertPoseToVectors=exports.vectorizeAndNormalize=void 0,exports.vectorizeAndNormalize=e,exports.convertPoseToVectors=r,exports.scaleAndTranslate=t,exports.L2Normalization=o;
},{}],"Kg9N":[function(require,module,exports) {
"use strict";function t(t,e){var i=0,r=0,n=0;return t.forEach(function(t,s){var a=e[s];i+=t*a,r+=t*t,n+=a*a}),r=Math.sqrt(r),n=Math.sqrt(n),i/(r*n)}function e(e,i){var r=t(e,i);return Math.sqrt(2*(1-r))}function i(t,e,i){for(var r=1/i[i.length-1],n=0,s=0;s<t.length;s++){n+=i[Math.floor(s/2)]*Math.abs(t[s]-e[s])}return r*n}exports.__esModule=!0,exports.weightedDistanceMatching=exports.cosineDistanceMatching=exports.cosineSimilarity=void 0,exports.cosineSimilarity=t,exports.cosineDistanceMatching=e,exports.weightedDistanceMatching=i;
},{}],"K5m4":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]});exports.__esModule=!0,exports.poseSimilarity=void 0;var t=require("./libs/vectorizeAndNormalize"),i=require("./libs/strategies");function r(e,r,o){if(!(e&&e.keypoints&&r&&r.keypoints))throw new Error("[Bad pose parameters] Please check your pose objects again.");if(0===e.keypoints.length||0===r.keypoints.length)throw new Error("[Bad pose parameters] Found pose object(s) with empty keypoint.");if(e.keypoints.length!==r.keypoints.length)throw new Error("[Bad pose parameters] The keypoint lengths of the two pose objects are not the same.");var s=Object.assign({},{strategy:"weightedDistance"},o),n=t.vectorizeAndNormalize(e,s),a=n[0],c=n[1],p=t.vectorizeAndNormalize(r,s)[0];if("string"!=typeof s.strategy){if("function"==typeof s.strategy)return s.strategy(a,p,c);throw new TypeError("[Bad strategy option] It only accepts string or function types of values.")}switch(s.strategy){case"cosineSimilarity":return i.cosineSimilarity(a,p);case"cosineDistance":return i.cosineDistanceMatching(a,p);case"weightedDistance":return i.weightedDistanceMatching(a,p,c);default:throw new Error("[Bad strategy option] It should be either 'cosineSimilarity', 'cosineDistance' or 'weightedDistance' (default).")}}exports.poseSimilarity=r;var o=require("./libs/vectorizeAndNormalize");e(exports,o,"vectorizeAndNormalize");var s=require("./libs/strategies");e(exports,s,"cosineSimilarity"),e(exports,s,"cosineDistanceMatching"),e(exports,s,"weightedDistanceMatching");
},{"./libs/vectorizeAndNormalize":"AcBA","./libs/strategies":"Kg9N"}],"IirR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawKeypoints=P,exports.drawPoint=b,exports.drawSegment=w,exports.drawSkeleton=x,exports.isMobile=g,exports.renderImageToCanvas=j,exports.setStatusText=I,exports.toggleLoadingUI=m;var t=r(require("@tensorflow-models/posenet")),e=r(require("@tensorflow/tfjs"));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(n=function(t){return t?r:e})(t)}function r(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=n(e);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var l=i?Object.getOwnPropertyDescriptor(t,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=t[a]}return o.default=t,r&&r.set(t,o),o}function o(t,e){return s(t)||u(t,e)||a(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}function s(t){if(Array.isArray(t))return t}var c="aqua",f="red",d=2;function y(){return/Android/i.test(navigator.userAgent)}function p(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function g(){return y()||p()}function v(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.getElementsByClassName("property-name"),o=0;o<r.length;o++){(r[o].textContent||r[o].innerText)==t&&(r[o].parentNode.parentNode.style=e,""!==n&&(r[o].style=n))}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";t?(document.getElementById(e).style.display="block",document.getElementById(n).style.display="none"):(document.getElementById(e).style.display="none",document.getElementById(n).style.display="block")}function h(t){return[t.y,t.x]}function b(t,e,n,r,o){t.beginPath(),t.arc(n,e,r,0,2*Math.PI),t.fillStyle=o,t.fill()}function w(t,e,n,r,i){var a=o(t,2),l=a[0],u=a[1],s=o(e,2),c=s[0],f=s[1];i.beginPath(),i.moveTo(u*r,l*r),i.lineTo(f*r,c*r),i.lineWidth=d,i.strokeStyle=n,i.stroke()}function x(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t.getAdjacentKeyPoints(e,n).forEach(function(t){w(h(t[0].position),h(t[1].position),c,o,r)})}function P(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=0;o<t.length;o++){var i=t[o];if(!(i.score<e)){var a=i.position;b(n,a.y*r,a.x*r,3,c)}}}function j(t,e,n){n.width=e[0],n.height=e[1],n.getContext("2d").drawImage(t,0,0)}function I(t){document.getElementById("status").innerText=t}
},{"@tensorflow-models/posenet":"yqJr","@tensorflow/tfjs":"cHV2"}],"aM2g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGUtils=void 0;var e=r(require("paper"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(o,i,u):o[i]=e[i]}return o.default=e,n&&n.set(e,o),o}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var i=function(){function t(){n(this,t)}return a(t,null,[{key:"importSVG",value:function(t){var r=new e.default.PaperScope,n=r.createCanvas(0,0);return r.setup(n),new Promise(function(e,n){r.project.importSVG(t,function(){console.log("** SVG imported **"),e(r)},function(e){console.log("** SVG improt error: ",e),n(r)})})}},{key:"drawEllipse",value:function(e,t,r,n,o,a,i){var u=t.multiply(-1),l=r.multiply(-1),p=e.add(t),c=e.add(r),f=e.add(u),s=e.add(l),m=new a.Path(i);return m.addSegment(p,l.normalize().multiply(o),r.normalize().multiply(o)),m.addSegment(c,t.normalize().multiply(n),u.normalize().multiply(n)),m.addSegment(f,r.normalize().multiply(o),l.normalize().multiply(o)),m.addSegment(s,u.normalize().multiply(n),t.normalize().multiply(n)),m.closePath(),m}},{key:"genPathWithSpline",value:function(e,t,r,n,o){var a=e.length;if(0==a)return e.clone();for(var i=[],u=[],l=Math.max(a/3,1),p=0;p<l;p++){var c=p/(l-1),f=e.getPointAt(c*a),s=e.getNormalAt(c*a),m=t.get(c);if(f&&s){var y=f.add(s.multiply(r*m)),d=f.subtract(s.multiply(r*m));i.push(y),u.unshift(d)}}var v=new o.Path(n);return v.addSegments(i.concat(u)),v.simplify(),v}},{key:"isPath",value:function(e){return e.constructor===e.project._scope.Path}},{key:"isShape",value:function(e){return e.constructor===e.project._scope.Shape}},{key:"isGroup",value:function(e){return e.constructor===e.project._scope.Group}},{key:"findFirstItemWithPrefix",value:function(e,t){for(var r=e.getItems({recursive:!0}),n=0;n<r.length;n++)if(r[n].name&&r[n].name.startsWith(t))return r[n];return null}}]),t}();exports.SVGUtils=i;
},{"paper":"kGI0"}],"ShWY":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultiSpline=exports.MathUtils=void 0;var i=function(){function e(){t(this,e)}return n(e,null,[{key:"lerp",value:function(t,e,n){return t+(e-t)*n}},{key:"random",value:function(t,e){return t+Math.random()*(e-t)}},{key:"smoothStep",value:function(t,e,n){var r=Math.max(0,Math.min(1,(t-e)/(n-e)));return r*r*(3-2*r)}},{key:"getTransformFunc",value:function(t,e,n){var r=e.subtract(t),i=r.normalize(),a=r.length,u=i.clone();u.angle+=90;var s=n.subtract(t),o=s.dot(i),l=s.dot(u);return function(t,e){var n=e.subtract(t);if(0===n.length)return t.clone();var r=n.length/a,i=n.normalize(),u=i.clone();return u.angle+=90,t.add(i.multiply(o*r)).add(u.multiply(l*r))}}},{key:"getClosestPointOnSegment",value:function(t,e,n){var r=e.subtract(t),i=n.subtract(t).dot(r)/r.dot(r);return i>=1?e.clone():i<=0?t.clone():t.add(r.multiply(i))}},{key:"isCollinear",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,r=!1;if(t&&e){var i=t.normalize(),a=e.normalize();r=Math.abs(i.dot(a))>1-n}return r}},{key:"gaussian",value:function(t,e){for(var n=0,r=0;0===n;)n=Math.random();for(;0===r;)r=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r)*e+t}},{key:"clamp",value:function(t,e,n){return Math.min(Math.max(t,e),n)}},{key:"selectSegments",value:function(t,n,r,i){for(var a=[],u=0,s=0;s<n;s++){var o=e.gaussian(1,i);a.push(o),u+=o}for(var l=0;l<a.length;l++)a[l]=a[l]/u;for(var h=0,c=[],f=0;f<n;f++){var v=h,m=h+a[f]*e.clamp(e.gaussian(1,r)*t,0,1);c.push([v,m]),h+=a[f]}return c}},{key:"isLeft",value:function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)>0}},{key:"packCircles",value:function(t,e,n,i,a){for(var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:10,s=[],o=0,l=function(){for(var u=function(){var n={x:e*(2*Math.random()-1)+t.x,y:e*(2*Math.random()-1)+t.y};if(r(n,t)>e||s.some(function(t){return r(t,n)<t.radius}))return"continue";s.push({c:n,r:0})};s.length<n;)u();for(var l=function(t,e){var n=r(t.c,e.c);return n<t.r+e.r&&n>Math.abs(t.r-e.r)},h={c:t,r:e},c=0;c<20;c++){var f=!1;if(s.forEach(function(t){!s.some(function(e){return t!==e&&(l(t,e)||l(t,h))})&&t.r<i&&(t.r+=i/20,f=!0)}),!f)break}s=s.filter(function(t){return t.r>=a}),o++};s.length<n&&o<u;)l();return s}}]),e}();exports.MathUtils=i;var a=function(){function e(n,r,i,a){t(this,e),this.mX1=n,this.mY1=r,this.mX2=i,this.mY2=a}return n(e,[{key:"get",value:function(t){return this.mX1==this.mY1&&this.mX2==this.mY2?t:this.CalcBezier(this.GetTForX(t),this.mY1,this.mY2)}},{key:"A",value:function(t,e){return 1-3*e+3*t}},{key:"B",value:function(t,e){return 3*e-6*t}},{key:"C",value:function(t){return 3*t}},{key:"CalcBezier",value:function(t,e,n){return((this.A(e,n)*t+this.B(e,n))*t+this.C(e))*t}},{key:"GetSlope",value:function(t,e,n){return 3*this.A(e,n)*t*t+2*this.B(e,n)*t+this.C(e)}},{key:"GetTForX",value:function(t){for(var e=t,n=0;n<4;++n){var r=this.GetSlope(e,this.mX1,this.mX2);if(0==r)return e;e-=(this.CalcBezier(e,this.mX1,this.mX2)-t)/r}return e}}]),e}(),u=function(){function e(){t(this,e),this.keySplines=[],this.segments=[],this.x0=0,this.y0=0}return n(e,[{key:"add",value:function(t,e,n,r,i,u){var s=new a(t,e,n,r),o=this.x0,l=this.y0;this.segments.length&&(o=this.segments[this.segments.length-1][1].x,l=this.segments[this.segments.length-1][1].y),this.keySplines.push(s),this.segments.push([{x:o,y:l},{x:i,y:u}])}},{key:"get",value:function(t){for(var e=-1,n=0;n<this.segments.length;n++)if(t>=this.segments[n][0].x&&t<this.segments[n][1].x){e=n;break}if(e<0)return 0;var r=this.segments[e],a=this.keySplines[e],u=(t-r[0].x)/(r[1].x-r[0].x);return e%2==0?i.lerp(r[0].y,r[1].y,a.get(u)):i.lerp(r[1].y,r[0].y,a.get(1-u))}}]),e}();exports.MultiSpline=u;
},{}],"wtNy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Palette=exports.ColorUtils=void 0;var e=require("./mathUtils"),t=n(require("paper"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=function(){function r(e){o(this,r);var n=t.default;this.colors=e.map(function(e){return{light:new n.Color(e[0]).convert("hsb"),dark:new n.Color(e[1]).convert("hsb")}})}return l(r,[{key:"select",value:function(r){var n=t.default,o=this.colors[Math.floor(Math.random()*this.colors.length)],a=function(t){return new n.Color({hue:t.hue+360*e.MathUtils.gaussian(0,r),saturation:t.saturation+e.MathUtils.gaussian(0,r),brightness:t.brightness+e.MathUtils.gaussian(0,r)})};return{light:a(o.light),dark:a(o.dark)}}}]),r}();exports.Palette=u;var i=function(){function r(){o(this,r)}return l(r,null,[{key:"addRGB",value:function(e,t,r,n){e.red=e.red+t,e.green=e.green+r,e.blue=e.blue+n}},{key:"lerp",value:function(r,n,o){return new t.default.Color(e.MathUtils.lerp(r.red,n.red,o),e.MathUtils.lerp(r.green,n.green,o),e.MathUtils.lerp(r.blue,n.blue,o))}},{key:"fromStringHash",value:function(e){var r,n=0;for(r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;var o=255&n,a=(65280&n)>>8,l=(n&255<<16)>>16;return new t.default.Color(o/255,a/255,l/255)}}]),r}();exports.ColorUtils=i;
},{"./mathUtils":"ShWY","paper":"kGI0"}],"CNpF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.facePartName2Index=exports.allPartNames=exports.Skeleton=exports.Bone=void 0;var t=s(require("paper")),e=require("../utils/svgUtils"),i=require("../utils/mathUtils"),o=require("../utils/colorUtils");function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}function s(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=r(e);if(i&&i.has(t))return i.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in t)if("default"!==h&&Object.prototype.hasOwnProperty.call(t,h)){var n=s?Object.getOwnPropertyDescriptor(t,h):null;n&&(n.get||n.set)?Object.defineProperty(o,h,n):o[h]=t[h]}return o.default=t,i&&i.set(t,o),o}function h(t){return f(t)||a(t)||p(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function a(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e,i){return e&&L(t.prototype,e),i&&L(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var c=.1,u=.8,b=["leftAnkle","leftKnee","leftHip","leftWrist","leftElbow","leftShoulder","rightAnkle","rightKnee","rightHip","rightWrist","rightElbow","rightShoulder","leftEar","rightEar"],d={topMid:10,rightTop0:67,rightTop1:54,leftTop0:297,leftTop1:284,rightJaw0:21,rightJaw1:162,rightJaw2:127,rightJaw3:234,rightJaw4:132,rightJaw5:172,rightJaw6:150,rightJaw7:176,jawMid:152,leftJaw7:400,leftJaw6:379,leftJaw5:397,leftJaw4:361,leftJaw3:454,leftJaw2:356,leftJaw1:389,leftJaw0:251,rightBrow0:46,rightBrow1:53,rightBrow2:52,rightBrow3:65,rightBrow4:55,leftBrow4:285,leftBrow3:295,leftBrow2:282,leftBrow1:283,leftBrow0:276,nose0:6,nose1:197,nose2:195,nose3:5,rightNose0:48,rightNose1:220,nose4:4,leftNose1:440,leftNose0:278,rightEye0:33,rightEye1:160,rightEye2:158,rightEye3:133,rightEye4:153,rightEye5:144,leftEye3:362,leftEye2:385,leftEye1:387,leftEye0:263,leftEye5:373,leftEye4:380,rightMouthCorner:61,rightUpperLipTop0:40,rightUpperLipTop1:37,upperLipTopMid:0,leftUpperLipTop1:267,leftUpperLipTop0:270,leftMouthCorner:291,leftLowerLipBottom0:321,leftLowerLipBottom1:314,lowerLipBottomMid:17,rightLowerLipBottom1:84,rightLowerLipBottom0:91,rightMiddleLip:78,rightUpperLipBottom1:81,upperLipBottomMid:13,leftUpperLipBottom1:311,leftMiddleLip:308,leftLowerLipTop0:402,lowerLipTopMid:14,rightLowerLipTop0:178};exports.facePartName2Index=d;var y=["topMid","rightTop0","rightTop1","leftTop0","leftTop1","rightJaw0","rightJaw1","rightJaw2","rightJaw3","rightJaw4","rightJaw5","rightJaw6","rightJaw7","jawMid","leftJaw7","leftJaw6","leftJaw5","leftJaw4","leftJaw3","leftJaw2","leftJaw1","leftJaw0","rightBrow0","rightBrow1","rightBrow2","rightBrow3","rightBrow4","leftBrow4","leftBrow3","leftBrow2","leftBrow1","leftBrow0","nose0","nose1","nose2","nose3","rightNose0","rightNose1","nose4","leftNose1","leftNose0","rightEye0","rightEye1","rightEye2","rightEye3","rightEye4","rightEye5","leftEye3","leftEye2","leftEye1","leftEye0","leftEye5","leftEye4","rightMouthCorner","rightUpperLipTop0","rightUpperLipTop1","upperLipTopMid","leftUpperLipTop1","leftUpperLipTop0","leftMouthCorner","leftLowerLipBottom0","leftLowerLipBottom1","lowerLipBottomMid","rightLowerLipBottom1","rightLowerLipBottom0","rightMiddleLip","rightUpperLipBottom1","upperLipBottomMid","leftUpperLipBottom1","leftMiddleLip","leftLowerLipTop0","lowerLipTopMid","rightLowerLipTop0"],R=b.concat(y);exports.allPartNames=R;var B=function(){function e(){w(this,e)}return g(e,[{key:"set",value:function(t,e,i,r){return this.name="".concat(t.name,"-").concat(e.name),this.kp0=t,this.kp1=e,this.skeleton=i,this.type=r,this.boneColor=o.ColorUtils.fromStringHash(this.name),this.boneColor.saturation+=.5,this}},{key:"getPointTransform",value:function(e){var o=this.kp1.position.subtract(this.kp0.position).normalize(),r=o.clone();r.angle+=90;var s=i.MathUtils.getClosestPointOnSegment(this.kp0.position,this.kp1.position,e),h=e.subtract(s),n=h.dot(o),p=h.dot(r),a=this.kp0.position.subtract(this.kp1.position).length,f=s.subtract(this.kp0.position).length/a;return{transform:new t.default.Point(n,p),anchorPerc:f}}},{key:"transform",value:function(t){if(this.kp1.currentPosition&&this.kp0.currentPosition){var e="face"===this.type?this.skeleton.currentFaceScale:this.skeleton.currentBodyScale,i=this.kp1.currentPosition.subtract(this.kp0.currentPosition).normalize(),o=i.clone();return o.angle+=90,this.kp0.currentPosition.multiply(1-t.anchorPerc).add(this.kp1.currentPosition.multiply(t.anchorPerc)).add(i.multiply(t.transform.x*e)).add(o.multiply(t.transform.y*e))}}}]),e}();function E(t,i){return{position:e.SVGUtils.findFirstItemWithPrefix(t,i).bounds.center,name:i}}function m(e,i){if(!e||!e.keypoints)return null;var o=e.keypoints.find(function(t){return t.part===i});return{position:new t.default.Point(o.position.x,o.position.y),score:o.score}}function M(e,i){return!e||!e.scaledMesh||e.scaledMesh.length,new t.default.Point(e.positions[2*i],e.positions[2*i+1])}exports.Bone=B;var J=function(){function o(t){var r=this;w(this,o);var s=e.SVGUtils.findFirstItemWithPrefix(t.project,"skeleton"),h=E(s,"leftAnkle"),n=E(s,"leftKnee"),p=E(s,"leftHip"),a=E(s,"leftWrist"),f=E(s,"leftElbow"),l=E(s,"leftShoulder"),L=E(s,"rightAnkle"),g=E(s,"rightKnee"),c=E(s,"rightHip"),u=E(s,"rightWrist"),b=E(s,"rightElbow"),d=E(s,"rightShoulder"),y=E(s,"topMid"),R=E(s,"rightTop0"),m=E(s,"rightTop1"),M=E(s,"leftTop0"),J=E(s,"leftTop1"),T=E(s,"leftJaw2"),k=E(s,"leftJaw3"),v=E(s,"leftJaw4"),P=E(s,"leftJaw5"),U=E(s,"leftJaw6"),N=E(s,"leftJaw7"),S=E(s,"jawMid"),C=E(s,"rightJaw2"),x=E(s,"rightJaw3"),F=E(s,"rightJaw4"),j=E(s,"rightJaw5"),H=E(s,"rightJaw6"),O=E(s,"rightJaw7"),A=E(s,"nose0"),W=E(s,"nose1"),K=E(s,"nose2"),V=E(s,"nose3"),I=E(s,"nose4"),G=E(s,"leftNose0"),D=E(s,"leftNose1"),q=E(s,"rightNose0"),z=E(s,"rightNose1"),_=E(s,"leftEye0"),$=E(s,"leftEye1"),Q=E(s,"leftEye2"),X=E(s,"leftEye3"),Y=E(s,"leftEye4"),Z=E(s,"leftEye5"),tt=E(s,"rightEye0"),et=E(s,"rightEye1"),it=E(s,"rightEye2"),ot=E(s,"rightEye3"),rt=E(s,"rightEye4"),st=E(s,"rightEye5"),ht=E(s,"leftBrow0"),nt=E(s,"leftBrow1"),pt=E(s,"leftBrow2"),at=E(s,"leftBrow3"),ft=E(s,"leftBrow4"),lt=E(s,"rightBrow0"),wt=E(s,"rightBrow1"),Lt=E(s,"rightBrow2"),gt=E(s,"rightBrow3"),ct=E(s,"rightBrow4"),ut=E(s,"leftMouthCorner"),bt=E(s,"leftUpperLipTop0"),dt=E(s,"leftUpperLipTop1"),yt=E(s,"upperLipTopMid"),Rt=E(s,"rightMouthCorner"),Bt=E(s,"rightUpperLipTop0"),Et=E(s,"rightUpperLipTop1"),mt=E(s,"rightMiddleLip"),Mt=E(s,"rightUpperLipBottom1"),Jt=E(s,"leftMiddleLip"),Tt=E(s,"leftUpperLipBottom1"),kt=E(s,"upperLipBottomMid"),vt=E(s,"rightLowerLipTop0"),Pt=E(s,"leftLowerLipTop0"),Ut=E(s,"lowerLipTopMid"),Nt=E(s,"rightLowerLipBottom0"),St=E(s,"rightLowerLipBottom1"),Ct=E(s,"leftLowerLipBottom0"),xt=E(s,"leftLowerLipBottom1"),Ft=E(s,"lowerLipBottomMid");this.bLeftShoulderRightShoulder=(new B).set(l,d,this,"body"),this.bRightShoulderRightHip=(new B).set(d,c,this,"body"),this.bLeftHipRightHip=(new B).set(p,c,this,"body"),this.bLeftShoulderLeftHip=(new B).set(l,p,this,"body"),this.bLeftShoulderLeftElbow=(new B).set(l,f,this,"body"),this.bLeftElbowLeftWrist=(new B).set(f,a,this,"body"),this.bRightShoulderRightElbow=(new B).set(d,b,this,"body"),this.bRightElbowRightWrist=(new B).set(b,u,this,"body"),this.bLeftHipLeftKnee=(new B).set(p,n,this,"body"),this.bLeftKneeLeftAnkle=(new B).set(n,h,this,"body"),this.bRightHipRightKnee=(new B).set(c,g,this,"body"),this.bRightKneeRightAnkle=(new B).set(g,L,this,"body"),this.bTopMidRightTop0=(new B).set(y,R,this,"face"),this.bTopMidLeftTop0=(new B).set(y,M,this,"face"),this.bLeftTop0LeftTop1=(new B).set(M,J,this,"face"),this.bLeftTop1LeftJaw2=(new B).set(J,T,this,"face"),this.bLeftJaw2LeftJaw3=(new B).set(T,k,this,"face"),this.bLeftJaw3LeftJaw4=(new B).set(k,v,this,"face"),this.bLeftJaw4LeftJaw5=(new B).set(v,P,this,"face"),this.bLeftJaw5LeftJaw6=(new B).set(P,U,this,"face"),this.bLeftJaw6LeftJaw7=(new B).set(U,N,this,"face"),this.bLeftJaw7JawMid=(new B).set(N,S,this,"face"),this.bRightTop0RightTop1=(new B).set(R,m,this,"face"),this.bRightTop1RightJaw2=(new B).set(m,C,this,"face"),this.bRightJaw2RightJaw3=(new B).set(C,x,this,"face"),this.bRightJaw3RightJaw4=(new B).set(x,F,this,"face"),this.bRightJaw4RightJaw5=(new B).set(F,j,this,"face"),this.bRightJaw5RightJaw6=(new B).set(j,H,this,"face"),this.bRightJaw6RightJaw7=(new B).set(H,O,this,"face"),this.bRightJaw7JawMid=(new B).set(O,S,this,"face"),this.bLeftEye0LeftEye1=(new B).set(_,$,this,"face"),this.bLeftEye1LeftEye2=(new B).set($,Q,this,"face"),this.bLeftEye2LeftEye3=(new B).set(Q,X,this,"face"),this.bLeftEye3LeftEye4=(new B).set(X,Y,this,"face"),this.bLeftEye4LeftEye5=(new B).set(Y,Z,this,"face"),this.bLeftEye5LeftEye0=(new B).set(Z,_,this,"face"),this.bRightEye0RightEye1=(new B).set(tt,et,this,"face"),this.bRightEye1RightEye2=(new B).set(et,it,this,"face"),this.bRightEye2RightEye3=(new B).set(it,ot,this,"face"),this.bRightEye3RightEye4=(new B).set(ot,rt,this,"face"),this.bRightEye4RightEye5=(new B).set(rt,st,this,"face"),this.bRightEye5RightEye0=(new B).set(st,tt,this,"face"),this.bLeftBrow0LeftBrow1=(new B).set(ht,nt,this,"face"),this.bLeftBrow1LeftBrow2=(new B).set(nt,pt,this,"face"),this.bLeftBrow2LeftBrow3=(new B).set(pt,at,this,"face"),this.bLeftBrow3LeftBrow4=(new B).set(at,ft,this,"face"),this.bRightBrow0RightBrow1=(new B).set(lt,wt,this,"face"),this.bRightBrow1RightBrow2=(new B).set(wt,Lt,this,"face"),this.bRightBrow2RightBrow3=(new B).set(Lt,gt,this,"face"),this.bRightBrow3RightBrow4=(new B).set(gt,ct,this,"face"),this.bNose0Nose1=(new B).set(A,W,this,"face"),this.bNose1Nose2=(new B).set(W,K,this,"face"),this.bNose2Nose3=(new B).set(K,V,this,"face"),this.bNose3Nose4=(new B).set(V,I,this,"face"),this.bLeftNose0LeftNose1=(new B).set(G,D,this,"face"),this.bLeftNose1Nose4=(new B).set(D,I,this,"face"),this.bRightNose0RightNose1=(new B).set(q,z,this,"face"),this.bRightNose1Nose4=(new B).set(z,I,this,"face"),this.bLeftMouthCornerLeftUpperLipTop0=(new B).set(ut,bt,this,"face"),this.bLeftUpperLipTop0LeftUpperLipTop1=(new B).set(bt,dt,this,"face"),this.bLeftUpperLipTop1UpperLipTopMid=(new B).set(dt,yt,this,"face"),this.bRigthMouthCornerRigthUpperLipTop0=(new B).set(Rt,Bt,this,"face"),this.bRigthUpperLipTop0RigthUpperLipTop1=(new B).set(Bt,Et,this,"face"),this.bRigthUpperLipTop1UpperLipTopMid=(new B).set(Et,yt,this,"face"),this.bLeftMouthCornerLeftMiddleLip=(new B).set(ut,Jt,this,"face"),this.bLeftMiddleLipLeftUpperLipBottom1=(new B).set(Jt,Tt,this,"face"),this.bLeftUpperLipBottom1UpperLipBottomMid=(new B).set(Tt,kt,this,"face"),this.bRightMouthCornerRightMiddleLip=(new B).set(Rt,mt,this,"face"),this.bRightMiddleLipRightUpperLipBottom1=(new B).set(mt,Mt,this,"face"),this.bRightUpperLipBottom1UpperLipBototmMid=(new B).set(Mt,kt,this,"face"),this.bLeftMiddleLipLeftLowerLipTop0=(new B).set(Jt,Pt,this,"face"),this.bLeftLowerLipTop0LowerLipTopMid=(new B).set(Pt,Ut,this,"face"),this.bRightMiddleLipRightLowerLipTop0=(new B).set(mt,vt,this,"face"),this.bRightLowerLipTop0LowerLipTopMid=(new B).set(vt,Ut,this,"face"),this.bLeftMouthCornerLeftLowerLipBottom0=(new B).set(ut,Ct,this,"face"),this.bLeftLowerLipBottom0LeftLowerLipBottom1=(new B).set(Ct,xt,this,"face"),this.bLeftLowerLipBottom1LowerLipBottomMid=(new B).set(xt,Ft,this,"face"),this.bRightMouthCornerRightLowerLipBottom0=(new B).set(Rt,Nt,this,"face"),this.bRightLowerLipBottom0RightLowerLipBottom1=(new B).set(Nt,St,this,"face"),this.bRightLowerLipBottom1LowerLipBottomMid=(new B).set(St,Ft,this,"face"),this.faceBones=[this.bTopMidRightTop0,this.bRightTop0RightTop1,this.bTopMidLeftTop0,this.bLeftTop0LeftTop1,this.bLeftTop1LeftJaw2,this.bLeftJaw2LeftJaw3,this.bLeftJaw3LeftJaw4,this.bLeftJaw4LeftJaw5,this.bLeftJaw5LeftJaw6,this.bLeftJaw6LeftJaw7,this.bLeftJaw7JawMid,this.bRightTop1RightJaw2,this.bRightJaw2RightJaw3,this.bRightJaw3RightJaw4,this.bRightJaw4RightJaw5,this.bRightJaw5RightJaw6,this.bRightJaw6RightJaw7,this.bRightJaw7JawMid,this.bLeftEye0LeftEye1,this.bLeftEye1LeftEye2,this.bLeftEye2LeftEye3,this.bLeftEye3LeftEye4,this.bLeftEye4LeftEye5,this.bLeftEye5LeftEye0,this.bRightEye0RightEye1,this.bRightEye1RightEye2,this.bRightEye2RightEye3,this.bRightEye3RightEye4,this.bRightEye4RightEye5,this.bRightEye5RightEye0,this.bLeftBrow0LeftBrow1,this.bLeftBrow1LeftBrow2,this.bLeftBrow2LeftBrow3,this.bLeftBrow3LeftBrow4,this.bRightBrow0RightBrow1,this.bRightBrow1RightBrow2,this.bRightBrow2RightBrow3,this.bRightBrow3RightBrow4,this.bNose0Nose1,this.bNose1Nose2,this.bNose2Nose3,this.bNose3Nose4,this.bLeftNose0LeftNose1,this.bLeftNose1Nose4,this.bRightNose0RightNose1,this.bRightNose1Nose4,this.bLeftMouthCornerLeftUpperLipTop0,this.bLeftUpperLipTop0LeftUpperLipTop1,this.bLeftUpperLipTop1UpperLipTopMid,this.bRigthMouthCornerRigthUpperLipTop0,this.bRigthUpperLipTop0RigthUpperLipTop1,this.bRigthUpperLipTop1UpperLipTopMid,this.bLeftMouthCornerLeftMiddleLip,this.bLeftMiddleLipLeftUpperLipBottom1,this.bLeftUpperLipBottom1UpperLipBottomMid,this.bRightMouthCornerRightMiddleLip,this.bRightMiddleLipRightUpperLipBottom1,this.bRightUpperLipBottom1UpperLipBototmMid,this.bLeftMiddleLipLeftLowerLipTop0,this.bLeftLowerLipTop0LowerLipTopMid,this.bRightMiddleLipRightLowerLipTop0,this.bRightLowerLipTop0LowerLipTopMid,this.bLeftMouthCornerLeftLowerLipBottom0,this.bLeftLowerLipBottom0LeftLowerLipBottom1,this.bLeftLowerLipBottom1LowerLipBottomMid,this.bRightMouthCornerRightLowerLipBottom0,this.bRightLowerLipBottom0RightLowerLipBottom1,this.bRightLowerLipBottom1LowerLipBottomMid],this.bodyBones=[this.bLeftShoulderRightShoulder,this.bRightShoulderRightHip,this.bLeftHipRightHip,this.bLeftShoulderLeftHip,this.bLeftShoulderLeftElbow,this.bLeftElbowLeftWrist,this.bRightShoulderRightElbow,this.bRightElbowRightWrist,this.bLeftHipLeftKnee,this.bLeftKneeLeftAnkle,this.bRightHipRightKnee,this.bRightKneeRightAnkle],this.bones=this.faceBones.concat(this.bodyBones),this.secondaryBones=[],this.parts={},this.bodyLen0=this.getTotalBoneLength(this.bodyBones),this.faceLen0=this.getTotalBoneLength(this.faceBones),this.boneGroups={torso:[this.bLeftShoulderRightShoulder,this.bRightShoulderRightHip,this.bLeftHipRightHip,this.bLeftShoulderLeftHip],leftLeg:[this.bLeftHipLeftKnee,this.bLeftKneeLeftAnkle],rightLeg:[this.bRightHipRightKnee,this.bRightKneeRightAnkle],leftArm:[this.bLeftShoulderLeftElbow,this.bLeftElbowLeftWrist],rightArm:[this.bRightElbowRightWrist,this.bRightShoulderRightElbow],face:this.faceBones},this.faceBones.forEach(function(t){[t.kp0,t.kp1].forEach(function(t){t.baseTransFunc=i.MathUtils.getTransformFunc(r.bLeftJaw2LeftJaw3.kp0.position,r.bRightJaw2RightJaw3.kp0.position,t.position)})})}return g(o,[{key:"update",value:function(t,e){var i=this;if(t.score<c)this.isValid=!1;else if(this.isValid=this.updatePoseParts(t),this.isValid&&(this.isValid=this.updateFaceParts(e),this.isValid)){this.bones.forEach(function(t){var e=i.parts[t.kp0.name],o=i.parts[t.kp1.name];t.kp0.currentPosition=e.position,t.kp1.currentPosition=o.position,t.score=(e.score+o.score)/2,t.latestCenter=t.kp1.currentPosition.add(t.kp0.currentPosition).divide(2)});var o=this.bNose3Nose4.kp1.currentPosition;this.secondaryBones.forEach(function(t){t.kp0.currentPosition=t.kp0.transformFunc(t.parent.kp0.currentPosition,o),t.kp1.currentPosition=t.kp1.transformFunc(t.parent.kp1.currentPosition,o),t.score=t.parent.score,t.latestCenter=t.kp1.currentPosition.add(t.kp0.currentPosition).divide(2)}),this.currentFaceScale=this.getTotalBoneLength(this.faceBones)/this.faceLen0,this.currentBodyScale=this.getTotalBoneLength(this.bodyBones)/this.bodyLen0,this.isValid=!0}}},{key:"updatePoseParts",value:function(t){var e=this;return b.forEach(function(i){var o=m(t,i),r=e.parts[i]||o,s=r.score/(o.score+r.score),h=o.score/(o.score+r.score),n=r.position.multiply(s).add(o.position.multiply(h));e.parts[i]={position:n,score:r.score*s+o.score*h}}),!(!this.parts.rightEar||!this.parts.leftEar)}},{key:"updateFaceParts",value:function(t){var e=this,o=this.parts.leftEar.position,r=this.parts.rightEar.position;if(t&&t.positions&&t.positions.length&&t.faceInViewConfidence>u){for(var s=0;s<y.length;s++){var h=y[s],n=M(t,s);n&&(this.parts[h]={position:n,score:t.faceInViewConfidence})}this.leftEarP2FFunc=i.MathUtils.getTransformFunc(o,r,this.parts.leftJaw2.position),this.rightEarP2FFunc=i.MathUtils.getTransformFunc(o,r,this.parts.rightJaw2.position)}else{var p=this.leftEarP2FFunc?this.leftEarP2FFunc(o,r):o,a=this.rightEarP2FFunc?this.rightEarP2FFunc(o,r):r;this.currentFaceScale=this.currentBodyScale,this.faceBones.forEach(function(t){[t.kp0,t.kp1].forEach(function(t){e.parts[t.name]={position:t.baseTransFunc(p,a),score:1}})})}return!0}},{key:"findBoneGroup",value:function(t){var e=this,o={};Object.keys(this.boneGroups).forEach(function(r){var s=1/0;e.boneGroups[r].forEach(function(e){var o=i.MathUtils.getClosestPointOnSegment(e.kp0.position,e.kp1.position,t).getDistance(t);s=Math.min(s,o)}),o[r]=s});var r=Math.min.apply(Math,h(Object.values(o))),s=[];return Object.keys(o).forEach(function(t){o[t]<=r&&s.push(e.boneGroups[t])}),s.flatten()}},{key:"getTotalBoneLength",value:function(t){var e=0;return t.forEach(function(t){var i=(t.kp0.currentPosition||t.kp0.position).subtract(t.kp1.currentPosition||t.kp1.position);e+=i.length}),e}},{key:"debugDraw",value:function(t){var e=new t.Group;t.project.activeLayer.addChild(e),this.bones.forEach(function(i){var o=new t.Path({segments:[i.kp0.currentPosition,i.kp1.currentPosition],strokeWidth:2,strokeColor:i.boneColor});e.addChild(o)})}},{key:"debugDrawLabels",value:function(t){var e=new t.Group;t.project.activeLayer.addChild(e),this.bones.forEach(function(i){var o=function(i,o){var r=new t.PointText({point:[i.currentPosition.x,i.currentPosition.y],content:o,fillColor:"black",fontSize:7});e.addChild(r)};o(i.kp0,i.kp0.name),o(i.kp1,i.kp1.name)})}},{key:"reset",value:function(){this.parts=[]}}],[{key:"getCurrentPosition",value:function(e){var i=new t.default.Point;return Object.keys(e.skinning).forEach(function(t){var o=e.skinning[t];i=i.add(o.bone.transform(o.transform).multiply(o.weight))}),i}},{key:"flipPose",value:function(t){t.keypoints.forEach(function(t){t.part&&t.part.startsWith("left")?t.part="right"+t.part.substring("left".length,t.part.length):t.part&&t.part.startsWith("right")&&(t.part="left"+t.part.substring("right".length,t.part.length))})}},{key:"flipFace",value:function(t){Object.keys(d).forEach(function(e){if(e.startsWith("left")){var i="right"+e.substr("left".length,e.length),o=t.scaledMesh[d[e]];t.scaledMesh[d[e]]=t.scaledMesh[d[i]],t.scaledMesh[d[i]]=o}})}},{key:"getBoundingBox",value:function(t){var e=1e5,i=-1e5,o=1e5,r=-1e5,s=function(t,s){e=Math.min(t,e),i=Math.max(t,i),o=Math.min(s,o),r=Math.max(s,r)};return t.frames.forEach(function(t){t.pose.keypoints.forEach(function(t){s(t.position.x,t.position.y)});for(var e=t.face.positions,i=0;i<e.length;i+=2)s(e[i],e[i+1])}),[e,i,o,r]}},{key:"translatePose",value:function(t,e){t.frames.forEach(function(t){t.pose.keypoints.forEach(function(t){t.position.x+=e.x,t.position.y+=e.y});for(var i=t.face.positions,o=0;o<i.length;o+=2)i[o]+=e.x,i[o+1]+=e.y})}},{key:"resizePose",value:function(t,e,i){t.frames.forEach(function(t){t.pose.keypoints.forEach(function(t){t.position.x=e.x+(t.position.x-e.x)*i.x,t.position.y=e.y+(t.position.y-e.y)*i.y});for(var o=t.face.positions,r=0;r<o.length;r+=2)o[r]=e.x+(o[r]-e.x)*i.x,o[r+1]=e.y+(o[r+1]-e.y)*i.y})}},{key:"toFaceFrame",value:function(t){for(var e={positions:[],faceInViewConfidence:t.faceInViewConfidence},i=0;i<y.length;i++){var o=y[i],r=t.scaledMesh[d[o]];e.positions.push(r[0]),e.positions.push(r[1])}return e}}]),o}();exports.Skeleton=J;
},{"paper":"kGI0","../utils/svgUtils":"aM2g","../utils/mathUtils":"ShWY","../utils/colorUtils":"wtNy"}],"HF0I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PoseIllustration=void 0;var n=require("./skeleton"),e=require("../utils/mathUtils"),t=require("../utils/svgUtils"),o=require("../utils/colorUtils");function i(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function r(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function s(n,e,t){return e&&r(n.prototype,e),t&&r(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var a={};n.allPartNames.forEach(function(n){return a[n]=1});var l=.3,u=function(){function r(n){i(this,r),this.scope=n,this.frames=[]}return s(r,[{key:"updateSkeleton",value:function(e,t){if(this.pose=e,this.face=t,this.skeleton.update(e,t),this.skeleton.isValid){this.skinnedPaths.forEach(function(e){var t=0;e.segments.forEach(function(e){var o;t+=(o=e.point,Object.keys(o.skinning).reduce(function(n,e){var t=o.skinning[e];return n+t.bone.score*t.weight},0)),e.point.currentPosition=n.Skeleton.getCurrentPosition(e.point),e.handleIn&&(e.handleIn.currentPosition=n.Skeleton.getCurrentPosition(e.handleIn)),e.handleOut&&(e.handleOut.currentPosition=n.Skeleton.getCurrentPosition(e.handleOut))}),e.confidenceScore=t/(e.segments.length||1)})}}},{key:"draw",value:function(){if(this.skeleton.isValid){var n=this.scope;this.skinnedPaths.forEach(function(e){if(e.confidenceScore&&!(e.confidenceScore<l)){var t=new n.Path({fillColor:e.fillColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,closed:e.closed});e.segments.forEach(function(n){t.addSegment(n.point.currentPosition,n.handleIn?n.handleIn.currentPosition.subtract(n.point.currentPosition):null,n.handleOut?n.handleOut.currentPosition.subtract(n.point.currentPosition):null)}),e.closed&&t.closePath(),n.project.activeLayer.addChild(t)}})}}},{key:"debugDraw",value:function(){var n=this.scope,e=new n.Group;n.project.activeLayer.addChild(e);var t=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.addChild(new n.Path.Circle({center:[t.x,t.y],radius:o.radius||2,fillColor:o.fillColor||"red"}))},i=function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.addChild(new n.Path({segments:[t,o],strokeColor:i.strokeColor||"red",strokeWidth:i.strokeWidth||1}))};this.skeleton.debugDraw(n),this.skinnedPaths.forEach(function(e){e.segments.forEach(function(e){var r=new n.Color(0);Object.keys(e.point.skinning).forEach(function(n){var t=e.point.skinning[n];o.ColorUtils.addRGB(r,t.weight*t.bone.boneColor.red,t.weight*t.bone.boneColor.green,t.weight*t.bone.boneColor.blue);var s=t.bone.kp0.currentPosition.multiply(1-t.transform.anchorPerc).add(t.bone.kp1.currentPosition.multiply(t.transform.anchorPerc));i(s,e.point.currentPosition,{strokeColor:"blue",strokeWidth:t.weight})}),t(e.point.currentPosition,{fillColor:r}),t(e.handleIn.currentPosition,{fillColor:r}),i(e.point.currentPosition,e.handleIn.currentPosition,{strokeColor:r}),t(e.handleOut.currentPosition,{fillColor:r},{strokeColor:r}),i(e.point.currentPosition,e.handleOut.currentPosition)})})}},{key:"debugDrawLabel",value:function(n){this.skeleton.debugDrawLabels(n)}},{key:"bindSkeleton",value:function(n,e){var o=e.project.getItems({recursive:!0});o=o.filter(function(n){return n.parent&&n.parent.name&&n.parent.name.startsWith("illustration")}),this.skeleton=n,this.skinnedPaths=[];for(var i=0;i<o.length;i++){var r=o[i];t.SVGUtils.isGroup(r)?this.bindGroup(r,n):t.SVGUtils.isPath(r)?this.bindPathToBones(r):t.SVGUtils.isShape(r)&&this.bindPathToBones(r.toPath())}}},{key:"bindGroup",value:function(o,i){var r=this,s=[],a={};o.getItems({recursive:!0}).forEach(function(e){var o=e.name?n.allPartNames.find(function(n){return e.name.startsWith(n)}):null;o?a[o]={position:e.bounds.center,name:o}:t.SVGUtils.isPath(e)?s.push(e):t.SVGUtils.isShape(e)&&s.push(e.toPath())});var l=[],u=i.bones.filter(function(n){return a[n.kp0.name]&&a[n.kp1.name]}),c=i.bNose3Nose4.kp1.position;u.length&&(u.forEach(function(t){var o=a[t.kp0.name],i=a[t.kp1.name],r=(new n.Bone).set(o,i,t.skeleton,t.type);o.transformFunc=e.MathUtils.getTransformFunc(t.kp0.position,c,o.position),i.transformFunc=e.MathUtils.getTransformFunc(t.kp1.position,c,i.position),r.parent=t,l.push(r)}),i.secondaryBones=i.secondaryBones.concat(l),s.forEach(function(n){r.bindPathToBones(n,l)}))}},{key:"getWeights",value:function(n,t){var o=0,i={};t.forEach(function(t){var o=e.MathUtils.getClosestPointOnSegment(t.kp0.position,t.kp1.position,n).getDistance(n),r=1/(o*o);i[t.name]={value:r,bone:t}});var r=Object.values(i).sort(function(n,e){return e.value-n.value});return i={},o=0,r.forEach(function(n){i[n.bone.name]=n,o+=n.value}),0===o?{}:(Object.values(i).forEach(function(n){n.value/=o}),i)}},{key:"bindPathToBones",value:function(n,t){var o=this,i=n.segments.map(function(n){var i=e.MathUtils.isCollinear(n.handleIn,n.handleOut),r=t||o.skeleton.findBoneGroup(n.point),s=o.getWeights(n.point,r),a={point:o.getSkinning(n.point,s)};if(n.handleIn){var l=n.handleIn.add(n.point);a.handleIn=o.getSkinning(l,i?s:o.getWeights(l,r))}if(n.handleOut){var u=n.handleOut.add(n.point);a.handleOut=o.getSkinning(u,i?s:o.getWeights(u,r))}return a});console.log(n.fillColor),n.fillColor&&(n.fillColor._alpha=.5),this.skinnedPaths.push({segments:i,fillColor:n.fillColor,strokeColor:n.strokeColor,strokeWidth:n.strokeWidth,closed:n.closed})}},{key:"getSkinning",value:function(n,e){var t={};return Object.keys(e).forEach(function(o){t[o]={bone:e[o].bone,weight:e[o].value,transform:e[o].bone.getPointTransform(n)}}),{skinning:t,position:n,currentPosition:new this.scope.Point(0,0)}}}]),r}();exports.PoseIllustration=u;
},{"./skeleton":"CNpF","../utils/mathUtils":"ShWY","../utils/svgUtils":"aM2g","../utils/colorUtils":"wtNy"}],"bn5e":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileUtils=void 0;var r=function(){function t(){e(this,t)}return n(t,null,[{key:"setDragDropHandler",value:function(e){window.addEventListener("dragover",function(e){(e=e||event).preventDefault()},!1),window.addEventListener("drop",function(t){if((t=t||event).preventDefault(),t.dataTransfer.items){if(t.dataTransfer.items.length<1)return;var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsText(t.dataTransfer.files[0])}},!1)}}]),t}();exports.FileUtils=r;
},{}],"pcCC":[function(require,module,exports) {
module.exports="girl.81046f5a.svg";
},{}],"zafw":[function(require,module,exports) {
module.exports="boy.7b929446.svg";
},{}],"dvZT":[function(require,module,exports) {
module.exports="abstract.340c849e.svg";
},{}],"jfJc":[function(require,module,exports) {
module.exports="blathers.83d59800.svg";
},{}],"XaSJ":[function(require,module,exports) {
module.exports="tom-nook.68c01a72.svg";
},{}],"NLgJ":[function(require,module,exports) {
module.exports="full-body.d63f9ff8.png";
},{}],"SOQY":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof e&&e.amd?e([],r):("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).p5=r()}(function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";r.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=function(e){var t,r,n=u(e),a=n[0],s=n[1],l=new i(3*(a+s)/4-s),c=0,d=0<s?a-4:a;for(r=0;r<d;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},r.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],a=0,s=r-o;a<s;a+=16383)i.push(c(e,a,s<a+16383?s:a+16383));return 1==o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2==o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],o[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var o,i,a=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(e,t,r){},{}],3:[function(e,t,r){arguments[4][2][0].apply(r,arguments)},{dup:2}],4:[function(e,t,r){(function(t){"use strict";var n=e("base64-js"),o=e("ieee754"),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=t,r.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},r.INSPECT_MAX_BYTES=50;var a=2147483647;function s(e){if(a<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,t.prototype),r}function t(e,t,r){if("number"!=typeof e)return l(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function l(e,r,n){if("string"==typeof e)return function(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|h(e,r),o=s(n),i=o.write(e,r);return i!==n&&(o=o.slice(0,i)),o}(e,r);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer))return function(e,r,n){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Object.setPrototypeOf(o,t.prototype),o}(e,r,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return t.from(o,r,n);var i=function(e){if(t.isBuffer(e)){var r=0|f(e.length),n=s(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||U(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|f(e))}function d(e){for(var t=e.length<0?0:0|f(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e){if(a<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function h(e,r){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,o=2<arguments.length&&!0===arguments[2];if(!o&&0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(i)return o?-1:A(e).length;r=(""+r).toLowerCase(),i=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,r,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),U(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof r&&(r=t.from(r,o)),t.isBuffer(r))return 0===r.length?-1:m(e,r,n,o,i);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):m(e,[r],n,o,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,o){var i,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=r;i<s;i++)if(u(e,i)===u(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(s<r+l&&(r=s-l),i=r;0<=i;i--){for(var d=!0,f=0;f<l;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function g(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?o<(n=Number(n))&&(n=o):n=o;var i=t.length;i/2<n&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(U(s))return a;e[r+a]=s}return a}function v(e,t,r,n){return D(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return D(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function _(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,l,u=e[o],c=null,d=239<u?4:223<u?3:191<u?2:1;if(o+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=e[o+1]))&&127<(l=(31&u)<<6|63&i)&&(c=l);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&i)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,d=1):65535<c&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=d}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=w));return r}(n)}r.kMaxLength=a,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,r){return o=t,i=r,u(n=e),n<=0?s(n):void 0!==o?"string"==typeof i?s(n).fill(o,i):s(n).fill(o):s(n);var n,o,i},t.allocUnsafe=function(e){return c(e)},t.allocUnsafeSlow=function(e){return c(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,r){if(I(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),I(r,Uint8Array)&&(r=t.from(r,r.offset,r.byteLength)),!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var n=e.length,o=r.length,i=0,a=Math.min(n,o);i<a;++i)if(e[i]!==r[i]){n=e[i],o=r[i];break}return n<o?-1:o<n?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(n=r=0;n<e.length;++n)r+=e[n].length;var o=t.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){var a=e[n];if(I(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,i),i+=a.length}return o},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return j(this,t,r);case"latin1":case"binary":return S(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i&&(t.prototype[i]=t.prototype.inspect),t.prototype.compare=function(e,r,n,o,i){if(I(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),r<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(i<=o&&n<=r)return 0;if(i<=o)return-1;if(n<=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(o>>>=0),s=(n>>>=0)-(r>>>=0),l=Math.min(a,s),u=this.slice(o,i),c=e.slice(r,n),d=0;d<l;++d)if(u[d]!==c[d]){a=u[d],s=c[d];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},t.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},t.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},t.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||o<r)&&(r=o),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,a,s,l,u=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return s=t,l=r,D(A(e,this.length-s),this,s,l);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return this,i=t,a=r,D(R(e),this,i,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function j(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var o="",i=t;i<r;++i)o+=N[e[i]];return o}function E(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function O(e,r,n,o,i,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<r||r<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,i){return t=+t,r>>>=0,i||C(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function P(e,t,r,n,i){return t=+t,r>>>=0,i||C(e,0,r,8),o.write(e,t,r,n,52,8),r+8}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):n<r&&(r=n),r<e&&(r=e);var o=this.subarray(e,r);return Object.setPrototypeOf(o,t.prototype),o},t.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},t.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},t.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*t)),n},t.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),o.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),o.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),o.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),o.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},t.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},t.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},t.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;0<=--i&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},t.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},t.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},t.prototype.writeDoubleLE=function(e,t,r){return P(this,e,t,!0,r)},t.prototype.writeDoubleBE=function(e,t,r){return P(this,e,t,!1,r)},t.prototype.copy=function(e,r,n,o){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,o||0===o||(o=this.length),r>=e.length&&(r=e.length),r=r||0,0<o&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);var i=o-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,o);else if(this===e&&n<r&&r<o)for(var a=i-1;0<=a;--a)e[a+r]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,o),r);return i},t.prototype.fill=function(e,r,n,o){if("string"==typeof e){if("string"==typeof r?(o=r,r=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!t.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var i=e.charCodeAt(0);("utf8"===o&&i<128||"latin1"===o)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var a;if(r>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=r;a<n;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,o),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%l]}return this};var k=/[^+/0-9A-Za-z-_]/g;function A(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function R(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function U(e){return e!=e}var N=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:236}],5:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],6:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},{"../internals/is-object":74}],7:[function(e,t,r){var n=e("../internals/well-known-symbol"),o=e("../internals/object-create"),i=e("../internals/object-define-property"),a=n("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),t.exports=function(e){s[a][e]=!0}},{"../internals/object-create":90,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],8:[function(e,t,r){"use strict";var n=e("../internals/string-multibyte").charAt;t.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},{"../internals/string-multibyte":123}],9:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},{}],10:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},{"../internals/is-object":74}],11:[function(e,t,r){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],12:[function(e,t,r){"use strict";function n(e){return l(e)&&u(L,c(e))}var o,i=e("../internals/array-buffer-native"),a=e("../internals/descriptors"),s=e("../internals/global"),l=e("../internals/is-object"),u=e("../internals/has"),c=e("../internals/classof"),d=e("../internals/create-non-enumerable-property"),f=e("../internals/redefine"),h=e("../internals/object-define-property").f,p=e("../internals/object-get-prototype-of"),y=e("../internals/object-set-prototype-of"),m=e("../internals/well-known-symbol"),g=e("../internals/uid"),v=s.Int8Array,b=v&&v.prototype,_=s.Uint8ClampedArray,x=_&&_.prototype,w=v&&p(v),j=b&&p(b),S=Object.prototype,M=S.isPrototypeOf,E=m("toStringTag"),T=g("TYPED_ARRAY_TAG"),O=i&&!!y&&"Opera"!==c(s.opera),C=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(o in L)s[o]||(O=!1);if((!O||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},O))for(o in L)s[o]&&y(s[o],w);if((!O||!j||j===S)&&(j=w.prototype,O))for(o in L)s[o]&&y(s[o].prototype,j);if(O&&p(x)!==j&&y(x,j),a&&!u(j,E))for(o in C=!0,h(j,E,{get:function(){return l(this)?this[T]:void 0}}),L)s[o]&&d(s[o],T,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:C&&T,aTypedArray:function(e){if(n(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(y){if(M.call(w,e))return e}else for(var t in L)if(u(L,o)){var r=s[t];if(r&&(e===r||M.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r){if(a){if(r)for(var n in L){var o=s[n];o&&u(o.prototype,e)&&delete o.prototype[e]}j[e]&&!r||f(j,e,r?t:O&&b[e]||t)}},exportTypedArrayStaticMethod:function(e,t,r){var n,o;if(a){if(y){if(r)for(n in L)(o=s[n])&&u(o,e)&&delete o[e];if(w[e]&&!r)return;try{return f(w,e,r?t:O&&v[e]||t)}catch(e){}}for(n in L)!(o=s[n])||o[e]&&!r||f(o,e,t)}},isView:function(e){var t=c(e);return"DataView"===t||u(L,t)},isTypedArray:n,TypedArray:w,TypedArrayPrototype:j}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/uid":143,"../internals/well-known-symbol":146}],13:[function(e,t,r){"use strict";function n(e){return[255&e]}function o(e){return[255&e,e>>8&255]}function i(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return V(e,23,4)}function l(e){return V(e,52,8)}function u(e,t){E(e[R],t,{get:function(){return L(this)[t]}})}function c(e,t,r,n){var o=x(r),i=L(e);if(o+t>i.byteLength)throw G(D);var a=L(i.buffer).bytes,s=o+i.byteOffset,l=a.slice(s,s+t);return n?l:l.reverse()}function d(e,t,r,n,o,i){var a=x(r),s=L(e);if(a+t>s.byteLength)throw G(D);for(var l=L(s.buffer).bytes,u=a+s.byteOffset,c=n(+o),d=0;d<t;d++)l[u+d]=c[i?d:t-d-1]}var f=e("../internals/global"),h=e("../internals/descriptors"),p=e("../internals/array-buffer-native"),y=e("../internals/create-non-enumerable-property"),m=e("../internals/redefine-all"),g=e("../internals/fails"),v=e("../internals/an-instance"),b=e("../internals/to-integer"),_=e("../internals/to-length"),x=e("../internals/to-index"),w=e("../internals/ieee754"),j=e("../internals/object-get-prototype-of"),S=e("../internals/object-set-prototype-of"),M=e("../internals/object-get-own-property-names").f,E=e("../internals/object-define-property").f,T=e("../internals/array-fill"),O=e("../internals/set-to-string-tag"),C=e("../internals/internal-state"),L=C.get,P=C.set,k="ArrayBuffer",A="DataView",R="prototype",D="Wrong index",I=f[k],U=I,N=f[A],F=N&&N[R],B=Object.prototype,G=f.RangeError,V=w.pack,z=w.unpack;if(p){if(!g(function(){I(1)})||!g(function(){new I(-1)})||g(function(){return new I,new I(1.5),new I(NaN),I.name!=k})){for(var H,W=(U=function(e){return v(this,U),new I(x(e))})[R]=I[R],q=M(I),X=0;q.length>X;)(H=q[X++])in U||y(U,H,I[H]);W.constructor=U}S&&j(F)!==B&&S(F,B);var Y=new N(new U(2)),Z=F.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||m(F,{setInt8:function(e,t){Z.call(this,e,t<<24>>24)},setUint8:function(e,t){Z.call(this,e,t<<24>>24)}},{unsafe:!0})}else U=function(e){v(this,U,k);var t=x(e);P(this,{bytes:T.call(new Array(t),0),byteLength:t}),h||(this.byteLength=t)},N=function(e,t,r){v(this,N,A),v(e,U,A);var n=L(e).byteLength,o=b(t);if(o<0||n<o)throw G("Wrong offset");if(n<o+(r=void 0===r?n-o:_(r)))throw G("Wrong length");P(this,{buffer:e,byteLength:r,byteOffset:o}),h||(this.buffer=e,this.byteLength=r,this.byteOffset=o)},h&&(u(U,"byteLength"),u(N,"buffer"),u(N,"byteLength"),u(N,"byteOffset")),m(N[R],{getInt8:function(e){return c(this,1,e)[0]<<24>>24},getUint8:function(e){return c(this,1,e)[0]},getInt16:function(e,t){var r=c(this,2,e,1<arguments.length?t:void 0);return(r[1]<<8|r[0])<<16>>16},getUint16:function(e,t){var r=c(this,2,e,1<arguments.length?t:void 0);return r[1]<<8|r[0]},getInt32:function(e,t){return a(c(this,4,e,1<arguments.length?t:void 0))},getUint32:function(e,t){return a(c(this,4,e,1<arguments.length?t:void 0))>>>0},getFloat32:function(e,t){return z(c(this,4,e,1<arguments.length?t:void 0),23)},getFloat64:function(e,t){return z(c(this,8,e,1<arguments.length?t:void 0),52)},setInt8:function(e,t){d(this,1,e,n,t)},setUint8:function(e,t){d(this,1,e,n,t)},setInt16:function(e,t,r){d(this,2,e,o,t,2<arguments.length?r:void 0)},setUint16:function(e,t,r){d(this,2,e,o,t,2<arguments.length?r:void 0)},setInt32:function(e,t,r){d(this,4,e,i,t,2<arguments.length?r:void 0)},setUint32:function(e,t,r){d(this,4,e,i,t,2<arguments.length?r:void 0)},setFloat32:function(e,t,r){d(this,4,e,s,t,2<arguments.length?r:void 0)},setFloat64:function(e,t,r){d(this,8,e,l,t,2<arguments.length?r:void 0)}});O(U,k),O(N,A),t.exports={ArrayBuffer:U,DataView:N}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":37,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/ieee754":65,"../internals/internal-state":70,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/to-index":131,"../internals/to-integer":133,"../internals/to-length":134}],14:[function(e,t,r){"use strict";var n=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/to-length"),a=Math.min;t.exports=[].copyWithin||function(e,t,r){var s=n(this),l=i(s.length),u=o(e,l),c=o(t,l),d=2<arguments.length?r:void 0,f=a((void 0===d?l:o(d,l))-c,l-u),h=1;for(c<u&&u<c+f&&(h=-1,c+=f-1,u+=f-1);0<f--;)c in s?s[u]=s[c]:delete s[u],u+=h,c+=h;return s}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],15:[function(e,t,r){"use strict";var n=e("../internals/to-object"),o=e("../internals/to-absolute-index"),i=e("../internals/to-length");t.exports=function(e,t,r){for(var a=n(this),s=i(a.length),l=arguments.length,u=o(1<l?t:void 0,s),c=2<l?r:void 0,d=void 0===c?s:o(c,s);u<d;)a[u++]=e;return a}},{"../internals/to-absolute-index":130,"../internals/to-length":134,"../internals/to-object":135}],16:[function(e,t,r){"use strict";var n=e("../internals/array-iteration").forEach,o=e("../internals/array-method-is-strict"),i=e("../internals/array-method-uses-to-length"),a=o("forEach"),s=i("forEach");t.exports=a&&s?[].forEach:function(e,t){return n(this,e,1<arguments.length?t:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,t,r){"use strict";var n=e("../internals/function-bind-context"),o=e("../internals/to-object"),i=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),s=e("../internals/to-length"),l=e("../internals/create-property"),u=e("../internals/get-iterator-method");t.exports=function(e,t,r){var c,d,f,h,p,y,m=o(e),g="function"==typeof this?this:Array,v=arguments.length,b=1<v?t:void 0,_=void 0!==b,x=u(m),w=0;if(_&&(b=n(b,2<v?r:void 0,2)),null==x||g==Array&&a(x))for(d=new g(c=s(m.length));w<c;w++)y=_?b(m[w],w):m[w],l(d,w,y);else for(p=(h=x.call(m)).next,d=new g;!(f=p.call(h)).done;w++)y=_?i(h,b,[f.value,w],!0):f.value,l(d,w,y);return d.length=w,d}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":39,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],18:[function(e,t,r){function n(e){return function(t,r,n){var s,l=o(t),u=i(l.length),c=a(n,u);if(e&&r!=r){for(;c<u;)if((s=l[c++])!=s)return!0}else for(;c<u;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}var o=e("../internals/to-indexed-object"),i=e("../internals/to-length"),a=e("../internals/to-absolute-index");t.exports={includes:n(!0),indexOf:n(!1)}},{"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134}],19:[function(e,t,r){function n(e){var t=1==e,r=2==e,n=3==e,c=4==e,d=6==e,f=5==e||d;return function(h,p,y,m){for(var g,v,b=a(h),_=i(b),x=o(p,y,3),w=s(_.length),j=0,S=m||l,M=t?S(h,w):r?S(h,0):void 0;j<w;j++)if((f||j in _)&&(v=x(g=_[j],j,b),e))if(t)M[j]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return j;case 2:u.call(M,g)}else if(c)return!1;return d?-1:n||c?c:M}}var o=e("../internals/function-bind-context"),i=e("../internals/indexed-object"),a=e("../internals/to-object"),s=e("../internals/to-length"),l=e("../internals/array-species-create"),u=[].push;t.exports={forEach:n(0),map:n(1),filter:n(2),some:n(3),every:n(4),find:n(5),findIndex:n(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":54,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],20:[function(e,t,r){"use strict";var n=e("../internals/to-indexed-object"),o=e("../internals/to-integer"),i=e("../internals/to-length"),a=e("../internals/array-method-is-strict"),s=e("../internals/array-method-uses-to-length"),l=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,d=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),h=c||!d||!f;t.exports=h?function(e,t){if(c)return u.apply(this,arguments)||0;var r=n(this),a=i(r.length),s=a-1;for(1<arguments.length&&(s=l(s,o(t))),s<0&&(s=a+s);0<=s;s--)if(s in r&&r[s]===e)return s||0;return-1}:u},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":132,"../internals/to-integer":133,"../internals/to-length":134}],21:[function(e,t,r){var n=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/engine-v8-version"),a=o("species");t.exports=function(e){return 51<=i||!n(function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},{"../internals/engine-v8-version":47,"../internals/fails":50,"../internals/well-known-symbol":146}],22:[function(e,t,r){"use strict";var n=e("../internals/fails");t.exports=function(e,t){var r=[][e];return!!r&&n(function(){r.call(null,t||function(){throw 1},1)})}},{"../internals/fails":50}],23:[function(e,t,r){function n(e){throw e}var o=e("../internals/descriptors"),i=e("../internals/fails"),a=e("../internals/has"),s=Object.defineProperty,l={};t.exports=function(e,t){if(a(l,e))return l[e];var r=[][e],u=!!a(t=t||{},"ACCESSORS")&&t.ACCESSORS,c=a(t,0)?t[0]:n,d=a(t,1)?t[1]:void 0;return l[e]=!!r&&!i(function(){if(u&&!o)return!0;var e={length:-1};u?s(e,1,{enumerable:!0,get:n}):e[1]=1,r.call(e,c,d)})}},{"../internals/descriptors":42,"../internals/fails":50,"../internals/has":60}],24:[function(e,t,r){function n(e){return function(t,r,n,l){o(r);var u=i(t),c=a(u),d=s(u.length),f=e?d-1:0,h=e?-1:1;if(n<2)for(;;){if(f in c){l=c[f],f+=h;break}if(f+=h,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=f:f<d;f+=h)f in c&&(l=r(l,c[f],f,u));return l}}var o=e("../internals/a-function"),i=e("../internals/to-object"),a=e("../internals/indexed-object"),s=e("../internals/to-length");t.exports={left:n(!1),right:n(!0)}},{"../internals/a-function":5,"../internals/indexed-object":66,"../internals/to-length":134,"../internals/to-object":135}],25:[function(e,t,r){var n=e("../internals/is-object"),o=e("../internals/is-array"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var r;return o(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},{"../internals/is-array":72,"../internals/is-object":74,"../internals/well-known-symbol":146}],26:[function(e,t,r){var n=e("../internals/an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"../internals/an-object":10}],27:[function(e,t,r){var n=e("../internals/well-known-symbol")("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(e){}return r}},{"../internals/well-known-symbol":146}],28:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],29:[function(e,t,r){var n=e("../internals/to-string-tag-support"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("toStringTag"),a="Arguments"==o(function(){return arguments}());t.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":139,"../internals/well-known-symbol":146}],30:[function(e,t,r){"use strict";var n=e("../internals/object-define-property").f,o=e("../internals/object-create"),i=e("../internals/redefine-all"),a=e("../internals/function-bind-context"),s=e("../internals/an-instance"),l=e("../internals/iterate"),u=e("../internals/define-iterator"),c=e("../internals/set-species"),d=e("../internals/descriptors"),f=e("../internals/internal-metadata").fastKey,h=e("../internals/internal-state"),p=h.set,y=h.getterFor;t.exports={getConstructor:function(e,t,r,u){function c(e,t,r){var n,o,i=m(e),a=g(e,t);return a?a.value=r:(i.last=a={index:o=f(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=a),n&&(n.next=a),d?i.size++:e.size++,"F"!==o&&(i.index[o]=a)),e}var h=e(function(e,n){s(e,h,t),p(e,{type:t,index:o(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=n&&l(n,e[u],e,r)}),m=y(t),g=function(e,t){var r,n=m(e),o=f(t);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==t)return r};return i(h.prototype,{clear:function(){for(var e=m(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=m(this),r=g(this,e);if(r){var n=r.next,o=r.previous;delete t.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),t.first==r&&(t.first=n),t.last==r&&(t.last=o),d?t.size--:this.size--}return!!r},forEach:function(e,t){for(var r,n=m(this),o=a(e,1<arguments.length?t:void 0,3);r=r?r.next:n.first;)for(o(r.value,r.key,this);r&&r.removed;)r=r.previous},has:function(e){return!!g(this,e)}}),i(h.prototype,r?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return c(this,0===e?0:e,t)}}:{add:function(e){return c(this,e=0===e?0:e,e)}}),d&&n(h.prototype,"size",{get:function(){return m(this).size}}),h},setStrong:function(e,t,r){var n=t+" Iterator",o=y(t),i=y(n);u(e,t,function(e,t){p(this,{type:n,target:e,state:o(e),kind:t,last:void 0})},function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:{value:e.target=void 0,done:!0}},r?"entries":"values",!r,!0),c(t)}}},{"../internals/an-instance":9,"../internals/define-iterator":40,"../internals/descriptors":42,"../internals/function-bind-context":54,"../internals/internal-metadata":69,"../internals/internal-state":70,"../internals/iterate":77,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/redefine-all":107,"../internals/set-species":116}],31:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/global"),i=e("../internals/is-forced"),a=e("../internals/redefine"),s=e("../internals/internal-metadata"),l=e("../internals/iterate"),u=e("../internals/an-instance"),c=e("../internals/is-object"),d=e("../internals/fails"),f=e("../internals/check-correctness-of-iteration"),h=e("../internals/set-to-string-tag"),p=e("../internals/inherit-if-required");t.exports=function(e,t,r){function y(e){var t=_[e];a(_,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!c(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!c(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})}var m=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),v=m?"set":"add",b=o[e],_=b&&b.prototype,x=b,w={};if(i(e,"function"!=typeof b||!(g||_.forEach&&!d(function(){(new b).entries().next()}))))x=r.getConstructor(t,e,m,v),s.REQUIRED=!0;else if(i(e,!0)){var j=new x,S=j[v](g?{}:-0,1)!=j,M=d(function(){j.has(1)}),E=f(function(e){new b(e)}),T=!g&&d(function(){for(var e=new b,t=5;t--;)e[v](t,t);return!e.has(-0)});E||(((x=t(function(t,r){u(t,x,e);var n=p(new b,t,x);return null!=r&&l(r,n[v],n,m),n})).prototype=_).constructor=x),(M||T)&&(y("delete"),y("has"),m&&y("get")),(T||S)&&y(v),g&&_.clear&&delete _.clear}return w[e]=x,n({global:!0,forced:x!=b},w),h(x,e),g||r.setStrong(x,e,m),x}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":49,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-metadata":69,"../internals/is-forced":73,"../internals/is-object":74,"../internals/iterate":77,"../internals/redefine":108,"../internals/set-to-string-tag":117}],32:[function(e,t,r){var n=e("../internals/has"),o=e("../internals/own-keys"),i=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");t.exports=function(e,t){for(var r=o(t),s=a.f,l=i.f,u=0;u<r.length;u++){var c=r[u];n(e,c)||s(e,c,l(t,c))}}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/own-keys":103}],33:[function(e,t,r){var n=e("../internals/well-known-symbol")("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[n]=!1,"/./"[t](r)}catch(e){}}return!1}},{"../internals/well-known-symbol":146}],34:[function(e,t,r){var n=e("../internals/fails");t.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},{"../internals/fails":50}],35:[function(e,t,r){var n=e("../internals/require-object-coercible"),o=/"/g;t.exports=function(e,t,r,i){var a=String(n(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+a+"</"+t+">"}},{"../internals/require-object-coercible":113}],36:[function(e,t,r){"use strict";function n(){return this}var o=e("../internals/iterators-core").IteratorPrototype,i=e("../internals/object-create"),a=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),l=e("../internals/iterators");t.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=i(o,{next:a(1,r)}),s(e,u,!1,!0),l[u]=n,e}},{"../internals/create-property-descriptor":38,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-create":90,"../internals/set-to-string-tag":117}],37:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/object-define-property":92}],38:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],39:[function(e,t,r){"use strict";var n=e("../internals/to-primitive"),o=e("../internals/object-define-property"),i=e("../internals/create-property-descriptor");t.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},{"../internals/create-property-descriptor":38,"../internals/object-define-property":92,"../internals/to-primitive":138}],40:[function(e,t,r){"use strict";function n(){return this}var o=e("../internals/export"),i=e("../internals/create-iterator-constructor"),a=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),l=e("../internals/set-to-string-tag"),u=e("../internals/create-non-enumerable-property"),c=e("../internals/redefine"),d=e("../internals/well-known-symbol"),f=e("../internals/is-pure"),h=e("../internals/iterators"),p=e("../internals/iterators-core"),y=p.IteratorPrototype,m=p.BUGGY_SAFARI_ITERATORS,g=d("iterator"),v="values",b="entries";t.exports=function(e,t,r,d,p,_,x){function w(e){if(e===p&&L)return L;if(!m&&e in O)return O[e];switch(e){case"keys":case v:case b:return function(){return new r(this,e)}}return function(){return new r(this)}}i(r,t,d);var j,S,M,E=t+" Iterator",T=!1,O=e.prototype,C=O[g]||O["@@iterator"]||p&&O[p],L=!m&&C||w(p),P="Array"==t&&O.entries||C;if(P&&(j=a(P.call(new e)),y!==Object.prototype&&j.next&&(f||a(j)===y||(s?s(j,y):"function"!=typeof j[g]&&u(j,g,n)),l(j,E,!0,!0),f&&(h[E]=n))),p==v&&C&&C.name!==v&&(T=!0,L=function(){return C.call(this)}),f&&!x||O[g]===L||u(O,g,L),h[t]=L,p)if(S={values:w(v),keys:_?L:w("keys"),entries:w(b)},x)for(M in S)!m&&!T&&M in O||c(O,M,S[M]);else o({target:t,proto:!0,forced:m||T},S);return S}},{"../internals/create-iterator-constructor":36,"../internals/create-non-enumerable-property":37,"../internals/export":49,"../internals/is-pure":75,"../internals/iterators":79,"../internals/iterators-core":78,"../internals/object-get-prototype-of":97,"../internals/object-set-prototype-of":101,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146}],41:[function(e,t,r){var n=e("../internals/path"),o=e("../internals/has"),i=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;t.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/path":104,"../internals/well-known-symbol-wrapped":145}],42:[function(e,t,r){var n=e("../internals/fails");t.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},{"../internals/fails":50}],43:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/is-object"),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}},{"../internals/global":59,"../internals/is-object":74}],44:[function(e,t,r){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],45:[function(e,t,r){var n=e("../internals/engine-user-agent");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},{"../internals/engine-user-agent":46}],46:[function(e,t,r){var n=e("../internals/get-built-in");t.exports=n("navigator","userAgent")||""},{"../internals/get-built-in":56}],47:[function(e,t,r){var n,o,i=e("../internals/global"),a=e("../internals/engine-user-agent"),s=i.process,l=s&&s.versions,u=l&&l.v8;u?o=(n=u.split("."))[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||74<=n[1])&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),t.exports=o&&+o},{"../internals/engine-user-agent":46,"../internals/global":59}],48:[function(e,t,r){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],49:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/object-get-own-property-descriptor").f,i=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),s=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),u=e("../internals/is-forced");t.exports=function(e,t){var r,c,d,f,h,p=e.target,y=e.global,m=e.stat;if(r=y?n:m?n[p]||s(p,{}):(n[p]||{}).prototype)for(c in t){if(f=t[c],d=e.noTargetGet?(h=o(r,c))&&h.value:r[c],!u(y?c:p+(m?".":"#")+c,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;l(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),a(r,c,f,e)}}},{"../internals/copy-constructor-properties":32,"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/is-forced":73,"../internals/object-get-own-property-descriptor":93,"../internals/redefine":108,"../internals/set-global":115}],50:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],51:[function(e,t,r){"use strict";e("../modules/es.regexp.exec");var n=e("../internals/redefine"),o=e("../internals/fails"),i=e("../internals/well-known-symbol"),a=e("../internals/regexp-exec"),s=e("../internals/create-non-enumerable-property"),l=i("species"),u=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),c="$0"==="a".replace(/./,"$0"),d=i("replace"),f=!!/./[d]&&""===/./[d]("a","$0"),h=!o(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]});t.exports=function(e,t,r,d){var p=i(e),y=!o(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),m=y&&!o(function(){var t=!1,r=/a/;return"split"===e&&((r={constructor:{}}).constructor[l]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t});if(!y||!m||"replace"===e&&(!u||!c||f)||"split"===e&&!h){var g=/./[p],v=r(p,""[e],function(e,t,r,n,o){return t.exec===a?y&&!o?{done:!0,value:g.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}},{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=v[0],_=v[1];n(String.prototype,e,b),n(RegExp.prototype,p,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},{"../internals/create-non-enumerable-property":37,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-exec":110,"../internals/well-known-symbol":146,"../modules/es.regexp.exec":181}],52:[function(e,t,r){"use strict";var n=e("../internals/is-array"),o=e("../internals/to-length"),i=e("../internals/function-bind-context"),a=function(e,t,r,s,l,u,c,d){for(var f,h=l,p=0,y=!!c&&i(c,d,3);p<s;){if(p in r){if(f=y?y(r[p],p,t):r[p],0<u&&n(f))h=a(e,t,f,o(f.length),h,u-1)-1;else{if(9007199254740991<=h)throw TypeError("Exceed the acceptable array length");e[h]=f}h++}p++}return h};t.exports=a},{"../internals/function-bind-context":54,"../internals/is-array":72,"../internals/to-length":134}],53:[function(e,t,r){var n=e("../internals/fails");t.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":50}],54:[function(e,t,r){var n=e("../internals/a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":5}],55:[function(e,t,r){"use strict";var n=e("../internals/a-function"),o=e("../internals/is-object"),i=[].slice,a={};t.exports=Function.bind||function(e){var t=n(this),r=i.call(arguments,1),s=function(){var n=r.concat(i.call(arguments));return this instanceof s?function(e,t,r){if(!(t in a)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";a[t]=Function("C,a","return new C("+n.join(",")+")")}return a[t](e,r)}(t,n.length,n):t.apply(e,n)};return o(t.prototype)&&(s.prototype=t.prototype),s}},{"../internals/a-function":5,"../internals/is-object":74}],56:[function(e,t,r){function n(e){return"function"==typeof e?e:void 0}var o=e("../internals/path"),i=e("../internals/global");t.exports=function(e,t){return arguments.length<2?n(o[e])||n(i[e]):o[e]&&o[e][t]||i[e]&&i[e][t]}},{"../internals/global":59,"../internals/path":104}],57:[function(e,t,r){var n=e("../internals/classof"),o=e("../internals/iterators"),i=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},{"../internals/classof":29,"../internals/iterators":79,"../internals/well-known-symbol":146}],58:[function(e,t,r){var n=e("../internals/an-object"),o=e("../internals/get-iterator-method");t.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},{"../internals/an-object":10,"../internals/get-iterator-method":57}],59:[function(e,r,n){(function(e){function t(e){return e&&e.Math==Math&&e}r.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||Function("return this")()}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],61:[function(e,t,r){t.exports={}},{}],62:[function(e,t,r){var n=e("../internals/global");t.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},{"../internals/global":59}],63:[function(e,t,r){var n=e("../internals/get-built-in");t.exports=n("document","documentElement")},{"../internals/get-built-in":56}],64:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/document-create-element");t.exports=!n&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},{"../internals/descriptors":42,"../internals/document-create-element":43,"../internals/fails":50}],65:[function(e,t,r){var n=Math.abs,o=Math.pow,i=Math.floor,a=Math.log,s=Math.LN2;t.exports={pack:function(e,t,r){var l,u,c,d=new Array(r),f=8*r-t-1,h=(1<<f)-1,p=h>>1,y=23===t?o(2,-24)-o(2,-77):0,m=e<0||0===e&&1/e<0?1:0,g=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,l=h):(l=i(a(e)/s),e*(c=o(2,-l))<1&&(l--,c*=2),2<=(e+=1<=l+p?y/c:y*o(2,1-p))*c&&(l++,c/=2),h<=l+p?(u=0,l=h):1<=l+p?(u=(e*c-1)*o(2,t),l+=p):(u=e*o(2,p-1)*o(2,t),l=0));8<=t;d[g++]=255&u,u/=256,t-=8);for(l=l<<t|u,f+=t;0<f;d[g++]=255&l,l/=256,f-=8);return d[--g]|=128*m,d},unpack:function(e,t){var r,n=e.length,i=8*n-t-1,a=(1<<i)-1,s=a>>1,l=i-7,u=n-1,c=e[u--],d=127&c;for(c>>=7;0<l;d=256*d+e[u],u--,l-=8);for(r=d&(1<<-l)-1,d>>=-l,l+=t;0<l;r=256*r+e[u],u--,l-=8);if(0===d)d=1-s;else{if(d===a)return r?NaN:c?-1/0:1/0;r+=o(2,t),d-=s}return(c?-1:1)*r*o(2,d-t)}}},{}],66:[function(e,t,r){var n=e("../internals/fails"),o=e("../internals/classof-raw"),i="".split;t.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},{"../internals/classof-raw":28,"../internals/fails":50}],67:[function(e,t,r){var n=e("../internals/is-object"),o=e("../internals/object-set-prototype-of");t.exports=function(e,t,r){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==r&&n(a=i.prototype)&&a!==r.prototype&&o(e,a),e}},{"../internals/is-object":74,"../internals/object-set-prototype-of":101}],68:[function(e,t,r){var n=e("../internals/shared-store"),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),t.exports=n.inspectSource},{"../internals/shared-store":119}],69:[function(e,t,r){function n(e){s(e,c,{value:{objectID:"O"+ ++d,weakData:{}}})}var o=e("../internals/hidden-keys"),i=e("../internals/is-object"),a=e("../internals/has"),s=e("../internals/object-define-property").f,l=e("../internals/uid"),u=e("../internals/freezing"),c=l("meta"),d=0,f=Object.isExtensible||function(){return!0},h=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,c)){if(!f(e))return"F";if(!t)return"E";n(e)}return e[c].objectID},getWeakData:function(e,t){if(!a(e,c)){if(!f(e))return!0;if(!t)return!1;n(e)}return e[c].weakData},onFreeze:function(e){return u&&h.REQUIRED&&f(e)&&!a(e,c)&&n(e),e}};o[c]=!0},{"../internals/freezing":53,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/object-define-property":92,"../internals/uid":143}],70:[function(e,t,r){var n,o,i,a=e("../internals/native-weak-map"),s=e("../internals/global"),l=e("../internals/is-object"),u=e("../internals/create-non-enumerable-property"),c=e("../internals/has"),d=e("../internals/shared-key"),f=e("../internals/hidden-keys"),h=s.WeakMap;if(a){var p=new h,y=p.get,m=p.has,g=p.set;n=function(e,t){return g.call(p,e,t),t},o=function(e){return y.call(p,e)||{}},i=function(e){return m.call(p,e)}}else{var v=d("state");f[v]=!0,n=function(e,t){return u(e,v,t),t},o=function(e){return c(e,v)?e[v]:{}},i=function(e){return c(e,v)}}t.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/is-object":74,"../internals/native-weak-map":85,"../internals/shared-key":118}],71:[function(e,t,r){var n=e("../internals/well-known-symbol"),o=e("../internals/iterators"),i=n("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},{"../internals/iterators":79,"../internals/well-known-symbol":146}],72:[function(e,t,r){var n=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"../internals/classof-raw":28}],73:[function(e,t,r){function n(e,t){var r=s[a(e)];return r==u||r!=l&&("function"==typeof t?o(t):!!t)}var o=e("../internals/fails"),i=/#|\.prototype\./,a=n.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=n.data={},l=n.NATIVE="N",u=n.POLYFILL="P";t.exports=n},{"../internals/fails":50}],74:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],75:[function(e,t,r){t.exports=!1},{}],76:[function(e,t,r){var n=e("../internals/is-object"),o=e("../internals/classof-raw"),i=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},{"../internals/classof-raw":28,"../internals/is-object":74,"../internals/well-known-symbol":146}],77:[function(e,t,r){function n(e,t){this.stopped=e,this.result=t}var o=e("../internals/an-object"),i=e("../internals/is-array-iterator-method"),a=e("../internals/to-length"),s=e("../internals/function-bind-context"),l=e("../internals/get-iterator-method"),u=e("../internals/call-with-safe-iteration-closing");(t.exports=function(e,t,r,c,d){var f,h,p,y,m,g,v,b=s(t,r,c?2:1);if(d)f=e;else{if("function"!=typeof(h=l(e)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,y=a(e.length);p<y;p++)if((m=c?b(o(v=e[p])[0],v[1]):b(e[p]))&&m instanceof n)return m;return new n(!1)}f=h.call(e)}for(g=f.next;!(v=g.call(f)).done;)if("object"==typeof(m=u(f,b,v.value,c))&&m&&m instanceof n)return m;return new n(!1)}).stop=function(e){return new n(!0,e)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134}],78:[function(e,t,r){"use strict";var n,o,i,a=e("../internals/object-get-prototype-of"),s=e("../internals/create-non-enumerable-property"),l=e("../internals/has"),u=e("../internals/well-known-symbol"),c=e("../internals/is-pure"),d=u("iterator"),f=!1;[].keys&&("next"in(i=[].keys())?(o=a(a(i)))!==Object.prototype&&(n=o):f=!0),null==n&&(n={}),c||l(n,d)||s(n,d,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},{"../internals/create-non-enumerable-property":37,"../internals/has":60,"../internals/is-pure":75,"../internals/object-get-prototype-of":97,"../internals/well-known-symbol":146}],79:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{dup:61}],80:[function(e,t,r){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],81:[function(e,t,r){var n,o,i,a,s,l,u,c,d=e("../internals/global"),f=e("../internals/object-get-own-property-descriptor").f,h=e("../internals/classof-raw"),p=e("../internals/task").set,y=e("../internals/engine-is-ios"),m=d.MutationObserver||d.WebKitMutationObserver,g=d.process,v=d.Promise,b="process"==h(g),_=f(d,"queueMicrotask"),x=_&&_.value;x||(n=function(){var e,t;for(b&&(e=g.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},a=b?function(){g.nextTick(n)}:m&&!y?(s=!0,l=document.createTextNode(""),new m(n).observe(l,{characterData:!0}),function(){l.data=s=!s}):v&&v.resolve?(u=v.resolve(void 0),c=u.then,function(){c.call(u,n)}):function(){p.call(d,n)}),t.exports=x||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},{"../internals/classof-raw":28,"../internals/engine-is-ios":45,"../internals/global":59,"../internals/object-get-own-property-descriptor":93,"../internals/task":128}],82:[function(e,t,r){var n=e("../internals/global");t.exports=n.Promise},{"../internals/global":59}],83:[function(e,t,r){var n=e("../internals/fails");t.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},{"../internals/fails":50}],84:[function(e,t,r){var n=e("../internals/fails"),o=e("../internals/well-known-symbol"),i=e("../internals/is-pure"),a=o("iterator");t.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach(function(e,n){t.delete("b"),r+=n+e}),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})},{"../internals/fails":50,"../internals/is-pure":75,"../internals/well-known-symbol":146}],85:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/inspect-source"),i=n.WeakMap;t.exports="function"==typeof i&&/native code/.test(o(i))},{"../internals/global":59,"../internals/inspect-source":68}],86:[function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=e("../internals/a-function");t.exports.f=function(e){return new n(e)}},{"../internals/a-function":5}],87:[function(e,t,r){var n=e("../internals/is-regexp");t.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":76}],88:[function(e,t,r){var n=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&n(e)}},{"../internals/global":59}],89:[function(e,t,r){"use strict";var n=e("../internals/descriptors"),o=e("../internals/fails"),i=e("../internals/object-keys"),a=e("../internals/object-get-own-property-symbols"),s=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),u=e("../internals/indexed-object"),c=Object.assign,d=Object.defineProperty;t.exports=!c||o(function(){if(n&&1!==c({b:1},c(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),o="abcdefghijklmnopqrst";return e[r]=7,o.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||i(c({},t)).join("")!=o})?function(e,t){for(var r=l(e),o=arguments.length,c=1,d=a.f,f=s.f;c<o;)for(var h,p=u(arguments[c++]),y=d?i(p).concat(d(p)):i(p),m=y.length,g=0;g<m;)h=y[g++],n&&!f.call(p,h)||(r[h]=p[h]);return r}:c},{"../internals/descriptors":42,"../internals/fails":50,"../internals/indexed-object":66,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/to-object":135}],90:[function(e,t,r){function n(){}function o(e){return"<script>"+e+"</"+p+">"}var i,a=e("../internals/an-object"),s=e("../internals/object-define-properties"),l=e("../internals/enum-bug-keys"),u=e("../internals/hidden-keys"),c=e("../internals/html"),d=e("../internals/document-create-element"),f=e("../internals/shared-key"),h="prototype",p="script",y=f("IE_PROTO"),m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;m=i?function(e){e.write(o("")),e.close();var t=e.parentWindow.Object;return e=null,t}(i):((t=d("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(o("document.F=Object")),e.close(),e.F);for(var r=l.length;r--;)delete m[h][l[r]];return m()};u[y]=!0,t.exports=Object.create||function(e,t){var r;return null!==e?(n[h]=a(e),r=new n,n[h]=null,r[y]=e):r=m(),void 0===t?r:s(r,t)}},{"../internals/an-object":10,"../internals/document-create-element":43,"../internals/enum-bug-keys":48,"../internals/hidden-keys":61,"../internals/html":63,"../internals/object-define-properties":91,"../internals/shared-key":118}],91:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/object-define-property"),i=e("../internals/an-object"),a=e("../internals/object-keys");t.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,l=0;l<s;)o.f(e,r=n[l++],t[r]);return e}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/object-define-property":92,"../internals/object-keys":99}],92:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/ie8-dom-define"),i=e("../internals/an-object"),a=e("../internals/to-primitive"),s=Object.defineProperty;r.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},{"../internals/an-object":10,"../internals/descriptors":42,"../internals/ie8-dom-define":64,"../internals/to-primitive":138}],93:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/object-property-is-enumerable"),i=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),s=e("../internals/to-primitive"),l=e("../internals/has"),u=e("../internals/ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=n?c:function(e,t){if(e=a(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return i(!o.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/has":60,"../internals/ie8-dom-define":64,"../internals/object-property-is-enumerable":100,"../internals/to-indexed-object":132,"../internals/to-primitive":138}],94:[function(e,t,r){var n=e("../internals/to-indexed-object"),o=e("../internals/object-get-own-property-names").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(n(e))}},{"../internals/object-get-own-property-names":95,"../internals/to-indexed-object":132}],95:[function(e,t,r){var n=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],96:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],97:[function(e,t,r){var n=e("../internals/has"),o=e("../internals/to-object"),i=e("../internals/shared-key"),a=e("../internals/correct-prototype-getter"),s=i("IE_PROTO"),l=Object.prototype;t.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},{"../internals/correct-prototype-getter":34,"../internals/has":60,"../internals/shared-key":118,"../internals/to-object":135}],98:[function(e,t,r){var n=e("../internals/has"),o=e("../internals/to-indexed-object"),i=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys");t.exports=function(e,t){var r,s=o(e),l=0,u=[];for(r in s)!n(a,r)&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~i(u,r)||u.push(r));return u}},{"../internals/array-includes":18,"../internals/has":60,"../internals/hidden-keys":61,"../internals/to-indexed-object":132}],99:[function(e,t,r){var n=e("../internals/object-keys-internal"),o=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"../internals/enum-bug-keys":48,"../internals/object-keys-internal":98}],100:[function(e,t,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);r.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},{}],101:[function(e,t,r){var n=e("../internals/an-object"),o=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(r){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],102:[function(e,t,r){"use strict";var n=e("../internals/to-string-tag-support"),o=e("../internals/classof");t.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":139}],103:[function(e,t,r){var n=e("../internals/get-built-in"),o=e("../internals/object-get-own-property-names"),i=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object");t.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},{"../internals/an-object":10,"../internals/get-built-in":56,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-symbols":96}],104:[function(e,t,r){var n=e("../internals/global");t.exports=n},{"../internals/global":59}],105:[function(e,t,r){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],106:[function(e,t,r){var n=e("../internals/an-object"),o=e("../internals/is-object"),i=e("../internals/new-promise-capability");t.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},{"../internals/an-object":10,"../internals/is-object":74,"../internals/new-promise-capability":86}],107:[function(e,t,r){var n=e("../internals/redefine");t.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},{"../internals/redefine":108}],108:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/create-non-enumerable-property"),i=e("../internals/has"),a=e("../internals/set-global"),s=e("../internals/inspect-source"),l=e("../internals/internal-state"),u=l.get,c=l.enforce,d=String(String).split("String");(t.exports=function(e,t,r,s){var l=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),c(r).source=d.join("string"==typeof t?t:"")),e!==n?(l?!f&&e[t]&&(u=!0):delete e[t],u?e[t]=r:o(e,t,r)):u?e[t]=r:a(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&u(this).source||s(this)})},{"../internals/create-non-enumerable-property":37,"../internals/global":59,"../internals/has":60,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/set-global":115}],109:[function(e,t,r){var n=e("./classof-raw"),o=e("./regexp-exec");t.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},{"./classof-raw":28,"./regexp-exec":110}],110:[function(e,t,r){"use strict";var n,o,i=e("./regexp-flags"),a=e("./regexp-sticky-helpers"),s=RegExp.prototype.exec,l=String.prototype.replace,u=s,c=(n=/a/,o=/b*/g,s.call(n,"a"),s.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),d=a.UNSUPPORTED_Y||a.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(c||f||d)&&(u=function(e){var t,r,n,o,a=this,u=d&&a.sticky,h=i.call(a),p=a.source,y=0,m=e;return u&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),m=String(e).slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,y++),r=new RegExp("^(?:"+p+")",h)),f&&(r=new RegExp("^"+p+"$(?!\\s)",h)),c&&(t=a.lastIndex),n=s.call(u?r:a,m),u?n?(n.input=n.input.slice(y),n[0]=n[0].slice(y),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:c&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),f&&n&&1<n.length&&l.call(n[0],r,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)}),n}),t.exports=u},{"./regexp-flags":111,"./regexp-sticky-helpers":112}],111:[function(e,t,r){"use strict";var n=e("../internals/an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":10}],112:[function(e,t,r){"use strict";var n=e("./fails");function o(e,t){return RegExp(e,t)}r.UNSUPPORTED_Y=n(function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),r.BROKEN_CARET=n(function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")})},{"./fails":50}],113:[function(e,t,r){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],114:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],115:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/create-non-enumerable-property");t.exports=function(t,r){try{o(n,t,r)}catch(e){n[t]=r}return r}},{"../internals/create-non-enumerable-property":37,"../internals/global":59}],116:[function(e,t,r){"use strict";var n=e("../internals/get-built-in"),o=e("../internals/object-define-property"),i=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),s=i("species");t.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":42,"../internals/get-built-in":56,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],117:[function(e,t,r){var n=e("../internals/object-define-property").f,o=e("../internals/has"),i=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"../internals/has":60,"../internals/object-define-property":92,"../internals/well-known-symbol":146}],118:[function(e,t,r){var n=e("../internals/shared"),o=e("../internals/uid"),i=n("keys");t.exports=function(e){return i[e]||(i[e]=o(e))}},{"../internals/shared":120,"../internals/uid":143}],119:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/set-global"),i="__core-js_shared__",a=n[i]||o(i,{});t.exports=a},{"../internals/global":59,"../internals/set-global":115}],120:[function(e,t,r){var n=e("../internals/is-pure"),o=e("../internals/shared-store");(t.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":75,"../internals/shared-store":119}],121:[function(e,t,r){var n=e("../internals/an-object"),o=e("../internals/a-function"),i=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[i])?t:o(r)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":146}],122:[function(e,t,r){var n=e("../internals/fails");t.exports=function(e){return n(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length})}},{"../internals/fails":50}],123:[function(e,t,r){function n(e){return function(t,r){var n,a,s=String(i(t)),l=o(r),u=s.length;return l<0||u<=l?e?"":void 0:(n=s.charCodeAt(l))<55296||56319<n||l+1===u||(a=s.charCodeAt(l+1))<56320||57343<a?e?s.charAt(l):n:e?s.slice(l,l+2):a-56320+(n-55296<<10)+65536}}var o=e("../internals/to-integer"),i=e("../internals/require-object-coercible");t.exports={codeAt:n(!1),charAt:n(!0)}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],124:[function(e,t,r){"use strict";function n(e){return e+22+75*(e<26)}function o(e,t,r){var n=0;for(e=r?c(e/700):e>>1,e+=c(e/t);455<e;n+=36)e=c(e/35);return c(n+36*e/(e+38))}function i(e){var t,r,i=[],s=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(55296<=o&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}(e)).length,l=128,f=0,h=72;for(t=0;t<e.length;t++)(r=e[t])<128&&i.push(d(r));var p=i.length,y=p;for(p&&i.push("-");y<s;){var m=a;for(t=0;t<e.length;t++)l<=(r=e[t])&&r<m&&(m=r);var g=y+1;if(m-l>c((a-f)/g))throw RangeError(u);for(f+=(m-l)*g,l=m,t=0;t<e.length;t++){if((r=e[t])<l&&++f>a)throw RangeError(u);if(r==l){for(var v=f,b=36;;b+=36){var _=b<=h?1:h+26<=b?26:b-h;if(v<_)break;var x=v-_,w=36-_;i.push(d(n(_+x%w))),v=c(x/w)}i.push(d(n(v))),h=o(f,g,y==p),f=0,++y}}++f,++l}return i.join("")}var a=2147483647,s=/[^\0-\u007E]/,l=/[.\u3002\uFF0E\uFF61]/g,u="Overflow: input needs wider integers to process",c=Math.floor,d=String.fromCharCode;t.exports=function(e){var t,r,n=[],o=e.toLowerCase().replace(l,".").split(".");for(t=0;t<o.length;t++)r=o[t],n.push(s.test(r)?"xn--"+i(r):r);return n.join(".")}},{}],125:[function(e,t,r){"use strict";var n=e("../internals/to-integer"),o=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(o(this)),r="",i=n(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;0<i;(i>>>=1)&&(t+=t))1&i&&(r+=t);return r}},{"../internals/require-object-coercible":113,"../internals/to-integer":133}],126:[function(e,t,r){var n=e("../internals/fails"),o=e("../internals/whitespaces");t.exports=function(e){return n(function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e})}},{"../internals/fails":50,"../internals/whitespaces":147}],127:[function(e,t,r){function n(e){return function(t){var r=String(o(t));return 1&e&&(r=r.replace(a,"")),2&e&&(r=r.replace(s,"")),r}}var o=e("../internals/require-object-coercible"),i="["+e("../internals/whitespaces")+"]",a=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$");t.exports={start:n(1),end:n(2),trim:n(3)}},{"../internals/require-object-coercible":113,"../internals/whitespaces":147}],128:[function(e,t,r){function n(e){if(S.hasOwnProperty(e)){var t=S[e];delete S[e],t()}}function o(e){return function(){n(e)}}function i(e){n(e.data)}function a(e){c.postMessage(e+"",g.protocol+"//"+g.host)}var s,l,u,c=e("../internals/global"),d=e("../internals/fails"),f=e("../internals/classof-raw"),h=e("../internals/function-bind-context"),p=e("../internals/html"),y=e("../internals/document-create-element"),m=e("../internals/engine-is-ios"),g=c.location,v=c.setImmediate,b=c.clearImmediate,_=c.process,x=c.MessageChannel,w=c.Dispatch,j=0,S={},M="onreadystatechange";v&&b||(v=function(e){for(var t=[],r=1;r<arguments.length;)t.push(arguments[r++]);return S[++j]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},s(j),j},b=function(e){delete S[e]},"process"==f(_)?s=function(e){_.nextTick(o(e))}:w&&w.now?s=function(e){w.now(o(e))}:x&&!m?(u=(l=new x).port2,l.port1.onmessage=i,s=h(u.postMessage,u,1)):!c.addEventListener||"function"!=typeof postMessage||c.importScripts||d(a)||"file:"===g.protocol?s=M in y("script")?function(e){p.appendChild(y("script"))[M]=function(){p.removeChild(this),n(e)}}:function(e){setTimeout(o(e),0)}:(s=a,c.addEventListener("message",i,!1))),t.exports={set:v,clear:b}},{"../internals/classof-raw":28,"../internals/document-create-element":43,"../internals/engine-is-ios":45,"../internals/fails":50,"../internals/function-bind-context":54,"../internals/global":59,"../internals/html":63}],129:[function(e,t,r){var n=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=n(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":28}],130:[function(e,t,r){var n=e("../internals/to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},{"../internals/to-integer":133}],131:[function(e,t,r){var n=e("../internals/to-integer"),o=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length or index");return r}},{"../internals/to-integer":133,"../internals/to-length":134}],132:[function(e,t,r){var n=e("../internals/indexed-object"),o=e("../internals/require-object-coercible");t.exports=function(e){return n(o(e))}},{"../internals/indexed-object":66,"../internals/require-object-coercible":113}],133:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?o:n)(e)}},{}],134:[function(e,t,r){var n=e("../internals/to-integer"),o=Math.min;t.exports=function(e){return 0<e?o(n(e),9007199254740991):0}},{"../internals/to-integer":133}],135:[function(e,t,r){var n=e("../internals/require-object-coercible");t.exports=function(e){return Object(n(e))}},{"../internals/require-object-coercible":113}],136:[function(e,t,r){var n=e("../internals/to-positive-integer");t.exports=function(e,t){var r=n(e);if(r%t)throw RangeError("Wrong offset");return r}},{"../internals/to-positive-integer":137}],137:[function(e,t,r){var n=e("../internals/to-integer");t.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},{"../internals/to-integer":133}],138:[function(e,t,r){var n=e("../internals/is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":74}],139:[function(e,t,r){var n={};n[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(n)},{"../internals/well-known-symbol":146}],140:[function(e,t,r){"use strict";function n(e,t){for(var r=0,n=t.length,o=new(X(e))(n);r<n;)o[r]=t[r++];return o}function o(e,t){U(e,t,{get:function(){return D(this)[t]}})}function i(e){var t;return e instanceof G||"ArrayBuffer"==(t=j(e))||"SharedArrayBuffer"==t}function a(e,t){return Y(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}function s(e,t){return a(e,t=x(t,!0))?m(2,e[t]):N(e,t)}function l(e,t,r){return!(a(e,t=x(t,!0))&&S(r)&&w(r,"value"))||w(r,"get")||w(r,"set")||r.configurable||w(r,"writable")&&!r.writable||w(r,"enumerable")&&!r.enumerable?U(e,t,r):(e[t]=r.value,e)}var u=e("../internals/export"),c=e("../internals/global"),d=e("../internals/descriptors"),f=e("../internals/typed-array-constructors-require-wrappers"),h=e("../internals/array-buffer-view-core"),p=e("../internals/array-buffer"),y=e("../internals/an-instance"),m=e("../internals/create-property-descriptor"),g=e("../internals/create-non-enumerable-property"),v=e("../internals/to-length"),b=e("../internals/to-index"),_=e("../internals/to-offset"),x=e("../internals/to-primitive"),w=e("../internals/has"),j=e("../internals/classof"),S=e("../internals/is-object"),M=e("../internals/object-create"),E=e("../internals/object-set-prototype-of"),T=e("../internals/object-get-own-property-names").f,O=e("../internals/typed-array-from"),C=e("../internals/array-iteration").forEach,L=e("../internals/set-species"),P=e("../internals/object-define-property"),k=e("../internals/object-get-own-property-descriptor"),A=e("../internals/internal-state"),R=e("../internals/inherit-if-required"),D=A.get,I=A.set,U=P.f,N=k.f,F=Math.round,B=c.RangeError,G=p.ArrayBuffer,V=p.DataView,z=h.NATIVE_ARRAY_BUFFER_VIEWS,H=h.TYPED_ARRAY_TAG,W=h.TypedArray,q=h.TypedArrayPrototype,X=h.aTypedArrayConstructor,Y=h.isTypedArray,Z="BYTES_PER_ELEMENT",Q="Wrong length";d?(z||(k.f=s,P.f=l,o(q,"buffer"),o(q,"byteOffset"),o(q,"byteLength"),o(q,"length")),u({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:s,defineProperty:l}),t.exports=function(e,t,r){function o(e,t){U(e,t,{get:function(){return e=t,(r=D(this)).view[l](e*a+r.byteOffset,!0);var e,r},set:function(e){return n=t,o=e,i=D(this),r&&(o=(o=F(o))<0?0:255<o?255:255&o),void i.view[d](n*a+i.byteOffset,o,!0);var n,o,i},enumerable:!0})}var a=e.match(/\d+$/)[0]/8,s=e+(r?"Clamped":"")+"Array",l="get"+e,d="set"+e,h=c[s],p=h,m=p&&p.prototype,x={};z?f&&(p=t(function(e,t,r,o){return y(e,p,s),R(S(t)?i(t)?void 0!==o?new h(t,_(r,a),o):void 0!==r?new h(t,_(r,a)):new h(t):Y(t)?n(p,t):O.call(p,t):new h(b(t)),e,p)}),E&&E(p,W),C(T(h),function(e){e in p||g(p,e,h[e])}),p.prototype=m):(p=t(function(e,t,r,l){y(e,p,s);var u,c,d,f=0,h=0;if(S(t)){if(!i(t))return Y(t)?n(p,t):O.call(p,t);u=t,h=_(r,a);var m=t.byteLength;if(void 0===l){if(m%a)throw B(Q);if((c=m-h)<0)throw B(Q)}else if(m<(c=v(l)*a)+h)throw B(Q);d=c/a}else d=b(t),u=new G(c=d*a);for(I(e,{buffer:u,byteOffset:h,byteLength:c,length:d,view:new V(u)});f<d;)o(e,f++)}),E&&E(p,W),m=p.prototype=M(q)),m.constructor!==p&&g(m,"constructor",p),H&&g(m,H,s),x[s]=p,u({global:!0,forced:p!=h,sham:!z},x),Z in p||g(p,Z,a),Z in m||g(m,Z,a),L(s)}):t.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-object":74,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-set-prototype-of":101,"../internals/set-species":116,"../internals/to-index":131,"../internals/to-length":134,"../internals/to-offset":136,"../internals/to-primitive":138,"../internals/typed-array-constructors-require-wrappers":141,"../internals/typed-array-from":142}],141:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/fails"),i=e("../internals/check-correctness-of-iteration"),a=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,s=n.ArrayBuffer,l=n.Int8Array;t.exports=!a||!o(function(){l(1)})||!o(function(){new l(-1)})||!i(function(e){new l,new l(null),new l(1.5),new l(e)},!0)||o(function(){return 1!==new l(new s(2),1,void 0).length})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":50,"../internals/global":59}],142:[function(e,t,r){var n=e("../internals/to-object"),o=e("../internals/to-length"),i=e("../internals/get-iterator-method"),a=e("../internals/is-array-iterator-method"),s=e("../internals/function-bind-context"),l=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e,t,r){var u,c,d,f,h,p,y=n(e),m=arguments.length,g=1<m?t:void 0,v=void 0!==g,b=i(y);if(null!=b&&!a(b))for(p=(h=b.call(y)).next,y=[];!(f=p.call(h)).done;)y.push(f.value);for(v&&2<m&&(g=s(g,r,2)),c=o(y.length),d=new(l(this))(c),u=0;u<c;u++)d[u]=v?g(y[u],u):y[u];return d}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":54,"../internals/get-iterator-method":57,"../internals/is-array-iterator-method":71,"../internals/to-length":134,"../internals/to-object":135}],143:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+o).toString(36)}},{}],144:[function(e,t,r){var n=e("../internals/native-symbol");t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":83}],145:[function(e,t,r){var n=e("../internals/well-known-symbol");r.f=n},{"../internals/well-known-symbol":146}],146:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/shared"),i=e("../internals/has"),a=e("../internals/uid"),s=e("../internals/native-symbol"),l=e("../internals/use-symbol-as-uid"),u=o("wks"),c=n.Symbol,d=l?c:c&&c.withoutSetter||a;t.exports=function(e){return i(u,e)||(s&&i(c,e)?u[e]=c[e]:u[e]=d("Symbol."+e)),u[e]}},{"../internals/global":59,"../internals/has":60,"../internals/native-symbol":83,"../internals/shared":120,"../internals/uid":143,"../internals/use-symbol-as-uid":144}],147:[function(e,t,r){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},{}],148:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/global"),i=e("../internals/array-buffer"),a=e("../internals/set-species"),s="ArrayBuffer",l=i[s];n({global:!0,forced:o[s]!==l},{ArrayBuffer:l}),a(s)},{"../internals/array-buffer":13,"../internals/export":49,"../internals/global":59,"../internals/set-species":116}],149:[function(e,t,r){"use strict";function n(e){if(!s(e))return!1;var t=e[y];return void 0!==t?!!t:a(e)}var o=e("../internals/export"),i=e("../internals/fails"),a=e("../internals/is-array"),s=e("../internals/is-object"),l=e("../internals/to-object"),u=e("../internals/to-length"),c=e("../internals/create-property"),d=e("../internals/array-species-create"),f=e("../internals/array-method-has-species-support"),h=e("../internals/well-known-symbol"),p=e("../internals/engine-v8-version"),y=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=51<=p||!i(function(){var e=[];return e[y]=!1,e.concat()[0]!==e}),b=f("concat");o({target:"Array",proto:!0,forced:!v||!b},{concat:function(e){var t,r,o,i,a,s=l(this),f=d(s,0),h=0;for(t=-1,o=arguments.length;t<o;t++)if(n(a=-1===t?s:arguments[t])){if(i=u(a.length),m<h+i)throw TypeError(g);for(r=0;r<i;r++,h++)r in a&&c(f,h,a[r])}else{if(m<=h)throw TypeError(g);c(f,h++,a)}return f.length=h,f}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/fails":50,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-length":134,"../internals/to-object":135,"../internals/well-known-symbol":146}],150:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-iteration").every,i=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),s=i("every"),l=a("every");n({target:"Array",proto:!0,forced:!s||!l},{every:function(e,t){return o(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],151:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/array-fill"),i=e("../internals/add-to-unscopables");n({target:"Array",proto:!0},{fill:o}),i("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":49}],152:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-iteration").filter,i=e("../internals/array-method-has-species-support"),a=e("../internals/array-method-uses-to-length"),s=i("filter"),l=a("filter");n({target:"Array",proto:!0,forced:!s||!l},{filter:function(e,t){return o(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],153:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/flatten-into-array"),i=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/a-function"),l=e("../internals/array-species-create");n({target:"Array",proto:!0},{flatMap:function(e,t){var r,n=i(this),u=a(n.length);return s(e),(r=l(n,0)).length=o(r,n,n,u,0,1,e,1<arguments.length?t:void 0),r}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":49,"../internals/flatten-into-array":52,"../internals/to-length":134,"../internals/to-object":135}],154:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-for-each");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},{"../internals/array-for-each":16,"../internals/export":49}],155:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/array-from");n({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")(function(e){Array.from(e)})},{from:o})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":49}],156:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-includes").includes,i=e("../internals/add-to-unscopables");n({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e,t){return o(this,e,1<arguments.length?t:void 0)}}),i("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":49}],157:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-includes").indexOf,i=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,u=i("indexOf"),c=a("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function(e,t){return l?s.apply(this,arguments)||0:o(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],158:[function(e,t,r){"use strict";var n=e("../internals/to-indexed-object"),o=e("../internals/add-to-unscopables"),i=e("../internals/iterators"),a=e("../internals/internal-state"),s=e("../internals/define-iterator"),l="Array Iterator",u=a.set,c=a.getterFor(l);t.exports=s(Array,"Array",function(e,t){u(this,{type:l,target:n(e),index:0,kind:t})},function(){var e=c(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/iterators":79,"../internals/to-indexed-object":132}],159:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/indexed-object"),i=e("../internals/to-indexed-object"),a=e("../internals/array-method-is-strict"),s=[].join,l=o!=Object,u=a("join",",");n({target:"Array",proto:!0,forced:l||!u},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":22,"../internals/export":49,"../internals/indexed-object":66,"../internals/to-indexed-object":132}],160:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/array-last-index-of");n({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},{"../internals/array-last-index-of":20,"../internals/export":49}],161:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-iteration").map,i=e("../internals/array-method-has-species-support"),a=e("../internals/array-method-uses-to-length"),s=i("map"),l=a("map");n({target:"Array",proto:!0,forced:!s||!l},{map:function(e,t){return o(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":49}],162:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/is-object"),i=e("../internals/is-array"),a=e("../internals/to-absolute-index"),s=e("../internals/to-length"),l=e("../internals/to-indexed-object"),u=e("../internals/create-property"),c=e("../internals/well-known-symbol"),d=e("../internals/array-method-has-species-support"),f=e("../internals/array-method-uses-to-length"),h=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),y=c("species"),m=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!h||!p},{slice:function(e,t){var r,n,c,d=l(this),f=s(d.length),h=a(e,f),p=a(void 0===t?f:t,f);if(i(d)&&("function"!=typeof(r=d.constructor)||r!==Array&&!i(r.prototype)?o(r)&&null===(r=r[y])&&(r=void 0):r=void 0,r===Array||void 0===r))return m.call(d,h,p);for(n=new(void 0===r?Array:r)(g(p-h,0)),c=0;h<p;h++,c++)h in d&&u(n,c,d[h]);return n.length=c,n}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":39,"../internals/export":49,"../internals/is-array":72,"../internals/is-object":74,"../internals/to-absolute-index":130,"../internals/to-indexed-object":132,"../internals/to-length":134,"../internals/well-known-symbol":146}],163:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/array-iteration").some,i=e("../internals/array-method-is-strict"),a=e("../internals/array-method-uses-to-length"),s=i("some"),l=a("some");n({target:"Array",proto:!0,forced:!s||!l},{some:function(e,t){return o(this,e,1<arguments.length?t:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":49}],164:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/to-absolute-index"),i=e("../internals/to-integer"),a=e("../internals/to-length"),s=e("../internals/to-object"),l=e("../internals/array-species-create"),u=e("../internals/create-property"),c=e("../internals/array-method-has-species-support"),d=e("../internals/array-method-uses-to-length"),f=c("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,y=Math.min;n({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var r,n,c,d,f,h,m=s(this),g=a(m.length),v=o(e,g),b=arguments.length;if(0===b?r=n=0:n=1===b?(r=0,g-v):(r=b-2,y(p(i(t),0),g-v)),9007199254740991<g+r-n)throw TypeError("Maximum allowed length exceeded");for(c=l(m,n),d=0;d<n;d++)(f=v+d)in m&&u(c,d,m[f]);if(r<(c.length=n)){for(d=v;d<g-n;d++)h=d+r,(f=d+n)in m?m[h]=m[f]:delete m[h];for(d=g;g-n+r<d;d--)delete m[d-1]}else if(n<r)for(d=g-n;v<d;d--)h=d+r-1,(f=d+n-1)in m?m[h]=m[f]:delete m[h];for(d=0;d<r;d++)m[d+v]=arguments[d+2];return m.length=g-n+r,c}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":39,"../internals/export":49,"../internals/to-absolute-index":130,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],165:[function(e,t,r){e("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],166:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/object-define-property").f,i=Function.prototype,a=i.toString,s=/^\s*function ([^ (]*)/;!n||"name"in i||o(i,"name",{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(e){return""}}})},{"../internals/descriptors":42,"../internals/object-define-property":92}],167:[function(e,t,r){"use strict";var n=e("../internals/collection"),o=e("../internals/collection-strong");t.exports=n("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},o)},{"../internals/collection":31,"../internals/collection-strong":30}],168:[function(e,t,r){var n=e("../internals/export"),o=Math.hypot,i=Math.abs,a=Math.sqrt;n({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var r,n,o=0,s=0,l=arguments.length,u=0;s<l;)u<(r=i(arguments[s++]))?(o=o*(n=u/r)*n+1,u=r):o+=0<r?(n=r/u)*n:r;return u===1/0?1/0:u*a(o)}})},{"../internals/export":49}],169:[function(e,t,r){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":49,"../internals/math-sign":80}],170:[function(e,t,r){"use strict";function n(e){var t,r,n,o,i,a,s,l,u=d(e,!1);if("string"==typeof u&&2<u.length)if(43===(t=(u=g(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((l=i.charCodeAt(s))<48||o<l)return NaN;return parseInt(i,n)}return+u}var o=e("../internals/descriptors"),i=e("../internals/global"),a=e("../internals/is-forced"),s=e("../internals/redefine"),l=e("../internals/has"),u=e("../internals/classof-raw"),c=e("../internals/inherit-if-required"),d=e("../internals/to-primitive"),f=e("../internals/fails"),h=e("../internals/object-create"),p=e("../internals/object-get-own-property-names").f,y=e("../internals/object-get-own-property-descriptor").f,m=e("../internals/object-define-property").f,g=e("../internals/string-trim").trim,v="Number",b=i[v],_=b.prototype,x=u(h(_))==v;if(a(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var w,j=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof j&&(x?f(function(){_.valueOf.call(r)}):u(r)!=v)?c(new b(n(t)),r,j):n(t)},S=o?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;S.length>M;M++)l(b,w=S[M])&&!l(j,w)&&m(j,w,y(b,w));(j.prototype=_).constructor=j,s(i,v,j)}},{"../internals/classof-raw":28,"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/has":60,"../internals/inherit-if-required":67,"../internals/is-forced":73,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/string-trim":127,"../internals/to-primitive":138}],171:[function(e,t,r){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":49,"../internals/number-is-finite":88}],172:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/to-integer"),i=e("../internals/this-number-value"),a=e("../internals/string-repeat"),s=e("../internals/fails"),l=1..toFixed,u=Math.floor,c=function(e,t,r){return 0===t?r:t%2==1?c(e,t-1,r*e):c(e*e,t/2,r)};n({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){l.call({})})},{toFixed:function(e){function t(e,t){for(var r=-1,n=t;++r<6;)n+=e*y[r],y[r]=n%1e7,n=u(n/1e7)}function r(e){for(var t=6,r=0;0<=--t;)r+=y[t],y[t]=u(r/e),r=r%e*1e7}function n(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==y[e]){var r=String(y[e]);t=""===t?r:t+a.call("0",7-r.length)+r}return t}var s,l,d,f,h=i(this),p=o(e),y=[0,0,0,0,0,0],m="",g="0";if(p<0||20<p)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||1e21<=h)return String(h);if(h<0&&(m="-",h=-h),1e-21<h)if(l=(s=function(e){for(var t=0,r=h*c(2,69,1);4096<=r;)t+=12,r/=4096;for(;2<=r;)t+=1,r/=2;return t}()-69)<0?h*c(2,-s,1):h/c(2,s,1),l*=4503599627370496,0<(s=52-s)){for(t(0,l),d=p;7<=d;)t(1e7,0),d-=7;for(t(c(10,d,1),0),d=s-1;23<=d;)r(1<<23),d-=23;r(1<<d),t(1,1),r(2),g=n()}else t(0,l),t(1<<-s,0),g=n()+a.call("0",p);return 0<p?m+((f=g.length)<=p?"0."+a.call("0",p-f)+g:g.slice(0,f-p)+"."+g.slice(f-p)):m+g}})},{"../internals/export":49,"../internals/fails":50,"../internals/string-repeat":125,"../internals/this-number-value":129,"../internals/to-integer":133}],173:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/object-assign");n({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},{"../internals/export":49,"../internals/object-assign":89}],174:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/object-get-own-property-names-external").f;n({target:"Object",stat:!0,forced:o(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:i})},{"../internals/export":49,"../internals/fails":50,"../internals/object-get-own-property-names-external":94}],175:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/fails"),i=e("../internals/to-object"),a=e("../internals/object-get-prototype-of"),s=e("../internals/correct-prototype-getter");n({target:"Object",stat:!0,forced:o(function(){a(1)}),sham:!s},{getPrototypeOf:function(e){return a(i(e))}})},{"../internals/correct-prototype-getter":34,"../internals/export":49,"../internals/fails":50,"../internals/object-get-prototype-of":97,"../internals/to-object":135}],176:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/to-object"),i=e("../internals/object-keys");n({target:"Object",stat:!0,forced:e("../internals/fails")(function(){i(1)})},{keys:function(e){return i(o(e))}})},{"../internals/export":49,"../internals/fails":50,"../internals/object-keys":99,"../internals/to-object":135}],177:[function(e,t,r){var n=e("../internals/to-string-tag-support"),o=e("../internals/redefine"),i=e("../internals/object-to-string");n||o(Object.prototype,"toString",i,{unsafe:!0})},{"../internals/object-to-string":102,"../internals/redefine":108,"../internals/to-string-tag-support":139}],178:[function(e,t,r){"use strict";function n(e){var t;return!(!x(e)||"function"!=typeof(t=e.then))&&t}function o(e,t,r){if(!t.notified){t.notified=!0;var o=t.reactions;L(function(){for(var i=t.value,a=1==t.state,s=0;o.length>s;){var l,u,c,d=o[s++],f=a?d.ok:d.fail,h=d.resolve,p=d.reject,y=d.domain;try{f?(a||(2===t.rejection&&oe(e,t),t.rejection=1),!0===f?l=i:(y&&y.enter(),l=f(i),y&&(y.exit(),c=!0)),l===d.promise?p(W("Promise-chain cycle")):(u=n(l))?u.call(l,h,p):h(l)):p(i)}catch(i){y&&!c&&y.exit(),p(i)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&re(e,t)})}}function i(e,t,r){var n,o;J?((n=q.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),p.dispatchEvent(n)):n={promise:t,reason:r},(o=p["on"+e])?o(n):e===$&&k("Unhandled promise rejection",r)}function a(e,t,r,n){return function(o){e(t,r,o,n)}}function s(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=2,o(e,t,!0))}var l,u,c,d,f=e("../internals/export"),h=e("../internals/is-pure"),p=e("../internals/global"),y=e("../internals/get-built-in"),m=e("../internals/native-promise-constructor"),g=e("../internals/redefine"),v=e("../internals/redefine-all"),b=e("../internals/set-to-string-tag"),_=e("../internals/set-species"),x=e("../internals/is-object"),w=e("../internals/a-function"),j=e("../internals/an-instance"),S=e("../internals/classof-raw"),M=e("../internals/inspect-source"),E=e("../internals/iterate"),T=e("../internals/check-correctness-of-iteration"),O=e("../internals/species-constructor"),C=e("../internals/task").set,L=e("../internals/microtask"),P=e("../internals/promise-resolve"),k=e("../internals/host-report-errors"),A=e("../internals/new-promise-capability"),R=e("../internals/perform"),D=e("../internals/internal-state"),I=e("../internals/is-forced"),U=e("../internals/well-known-symbol"),N=e("../internals/engine-v8-version"),F=U("species"),B="Promise",G=D.get,V=D.set,z=D.getterFor(B),H=m,W=p.TypeError,q=p.document,X=p.process,Y=y("fetch"),Z=A.f,Q=Z,K="process"==S(X),J=!!(q&&q.createEvent&&p.dispatchEvent),$="unhandledrejection",ee=I(B,function(){if(M(H)===String(H)){if(66===N)return!0;if(!K&&"function"!=typeof PromiseRejectionEvent)return!0}if(h&&!H.prototype.finally)return!0;if(51<=N&&/native code/.test(H))return!1;function e(e){e(function(){},function(){})}var t=H.resolve(1);return(t.constructor={})[F]=e,!(t.then(function(){})instanceof e)}),te=ee||!T(function(e){H.all(e).catch(function(){})}),re=function(e,t){C.call(p,function(){var r,n=t.value;if(ne(t)&&(r=R(function(){K?X.emit("unhandledRejection",n,e):i($,e,n)}),t.rejection=K||ne(t)?2:1,r.error))throw r.value})},ne=function(e){return 1!==e.rejection&&!e.parent},oe=function(e,t){C.call(p,function(){K?X.emit("rejectionHandled",e):i("rejectionhandled",e,t.value)})},ie=function(e,t,r,i){if(!t.done){t.done=!0,i&&(t=i);try{if(e===r)throw W("Promise can't be resolved itself");var l=n(r);l?L(function(){var n={done:!1};try{l.call(r,a(ie,e,n,t),a(s,e,n,t))}catch(r){s(e,n,r,t)}}):(t.value=r,t.state=1,o(e,t,!1))}catch(r){s(e,{done:!1},r,t)}}};ee&&(H=function(e){j(this,H,B),w(e),l.call(this);var t=G(this);try{e(a(ie,this,t),a(s,this,t))}catch(e){s(this,t,e)}},(l=function(){V(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=v(H.prototype,{then:function(e,t){var r=z(this),n=Z(O(this,H));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=K?X.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&o(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),u=function(){var e=new l,t=G(e);this.promise=e,this.resolve=a(ie,e,t),this.reject=a(s,e,t)},A.f=Z=function(e){return e===H||e===c?new u(e):Q(e)},h||"function"!=typeof m||(d=m.prototype.then,g(m.prototype,"then",function(e,t){var r=this;return new H(function(e,t){d.call(r,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof Y&&f({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return P(H,Y.apply(p,arguments))}}))),f({global:!0,wrap:!0,forced:ee},{Promise:H}),b(H,B,!1,!0),_(B),c=y(B),f({target:B,stat:!0,forced:ee},{reject:function(e){var t=Z(this);return t.reject.call(void 0,e),t.promise}}),f({target:B,stat:!0,forced:h||ee},{resolve:function(e){return P(h&&this===c?H:this,e)}}),f({target:B,stat:!0,forced:te},{all:function(e){var t=this,r=Z(t),n=r.resolve,o=r.reject,i=R(function(){var r=w(t.resolve),i=[],a=0,s=1;E(e,function(e){var l=a++,u=!1;i.push(void 0),s++,r.call(t,e).then(function(e){u||(u=!0,i[l]=e,--s||n(i))},o)}),--s||n(i)});return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=Z(t),n=r.reject,o=R(function(){var o=w(t.resolve);E(e,function(e){o.call(t,e).then(r.resolve,n)})});return o.error&&n(o.value),r.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":47,"../internals/export":49,"../internals/get-built-in":56,"../internals/global":59,"../internals/host-report-errors":62,"../internals/inspect-source":68,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-object":74,"../internals/is-pure":75,"../internals/iterate":77,"../internals/microtask":81,"../internals/native-promise-constructor":82,"../internals/new-promise-capability":86,"../internals/perform":105,"../internals/promise-resolve":106,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-species":116,"../internals/set-to-string-tag":117,"../internals/species-constructor":121,"../internals/task":128,"../internals/well-known-symbol":146}],179:[function(e,t,r){var n=e("../internals/export"),o=e("../internals/get-built-in"),i=e("../internals/a-function"),a=e("../internals/an-object"),s=e("../internals/is-object"),l=e("../internals/object-create"),u=e("../internals/function-bind"),c=e("../internals/fails"),d=o("Reflect","construct"),f=c(function(){function e(){}return!(d(function(){},[],e)instanceof e)}),h=!c(function(){d(function(){})}),p=f||h;n({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t,r){i(e),a(t);var n=arguments.length<3?e:i(r);if(h&&!f)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var o=[null];return o.push.apply(o,t),new(u.apply(e,o))}var c=n.prototype,p=l(s(c)?c:Object.prototype),y=Function.apply.call(e,p,t);return s(y)?y:p}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":49,"../internals/fails":50,"../internals/function-bind":55,"../internals/get-built-in":56,"../internals/is-object":74,"../internals/object-create":90}],180:[function(e,t,r){var n=e("../internals/descriptors"),o=e("../internals/global"),i=e("../internals/is-forced"),a=e("../internals/inherit-if-required"),s=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,u=e("../internals/is-regexp"),c=e("../internals/regexp-flags"),d=e("../internals/regexp-sticky-helpers"),f=e("../internals/redefine"),h=e("../internals/fails"),p=e("../internals/internal-state").set,y=e("../internals/set-species"),m=e("../internals/well-known-symbol")("match"),g=o.RegExp,v=g.prototype,b=/a/g,_=/a/g,x=new g(b)!==b,w=d.UNSUPPORTED_Y;if(n&&i("RegExp",!x||w||h(function(){return _[m]=!1,g(b)!=b||g(_)==_||"/a/i"!=g(b,"i")}))){let e=function(e){e in j||s(j,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})};for(var j=function(e,t){var r,n=this instanceof j,o=u(e),i=void 0===t;if(!n&&o&&e.constructor===j&&i)return e;x?o&&!i&&(e=e.source):e instanceof j&&(i&&(t=c.call(e)),e=e.source),w&&(r=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,""));var s=a(x?new g(e,t):g(e,t),n?this:v,j);return w&&r&&p(s,{sticky:r}),s},S=l(g),M=0;S.length>M;)e(S[M++]);(v.constructor=j).prototype=v,f(o,"RegExp",j)}y("RegExp")},{"../internals/descriptors":42,"../internals/fails":50,"../internals/global":59,"../internals/inherit-if-required":67,"../internals/internal-state":70,"../internals/is-forced":73,"../internals/is-regexp":76,"../internals/object-define-property":92,"../internals/object-get-own-property-names":95,"../internals/redefine":108,"../internals/regexp-flags":111,"../internals/regexp-sticky-helpers":112,"../internals/set-species":116,"../internals/well-known-symbol":146}],181:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/regexp-exec");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},{"../internals/export":49,"../internals/regexp-exec":110}],182:[function(e,t,r){"use strict";var n=e("../internals/redefine"),o=e("../internals/an-object"),i=e("../internals/fails"),a=e("../internals/regexp-flags"),s="toString",l=RegExp.prototype,u=l[s],c=i(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),d=u.name!=s;(c||d)&&n(RegExp.prototype,s,function(){var e=o(this),t=String(e.source),r=e.flags;return"/"+t+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in l)?a.call(e):r)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":50,"../internals/redefine":108,"../internals/regexp-flags":111}],183:[function(e,t,r){"use strict";var n=e("../internals/collection"),o=e("../internals/collection-strong");t.exports=n("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},o)},{"../internals/collection":31,"../internals/collection-strong":30}],184:[function(e,t,r){"use strict";var n,o=e("../internals/export"),i=e("../internals/object-get-own-property-descriptor").f,a=e("../internals/to-length"),s=e("../internals/not-a-regexp"),l=e("../internals/require-object-coercible"),u=e("../internals/correct-is-regexp-logic"),c=e("../internals/is-pure"),d="".endsWith,f=Math.min,h=u("endsWith");o({target:"String",proto:!0,forced:!(!c&&!h&&(n=i(String.prototype,"endsWith"))&&!n.writable||h)},{endsWith:function(e,t){var r=String(l(this));s(e);var n=1<arguments.length?t:void 0,o=a(r.length),i=void 0===n?o:f(a(n),o),u=String(e);return d?d.call(r,u,i):r.slice(i-u.length,i)===u}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/is-pure":75,"../internals/not-a-regexp":87,"../internals/object-get-own-property-descriptor":93,"../internals/require-object-coercible":113,"../internals/to-length":134}],185:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/not-a-regexp"),i=e("../internals/require-object-coercible");n({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e,t){return!!~String(i(this)).indexOf(o(e),1<arguments.length?t:void 0)}})},{"../internals/correct-is-regexp-logic":33,"../internals/export":49,"../internals/not-a-regexp":87,"../internals/require-object-coercible":113}],186:[function(e,t,r){"use strict";var n=e("../internals/string-multibyte").charAt,o=e("../internals/internal-state"),i=e("../internals/define-iterator"),a="String Iterator",s=o.set,l=o.getterFor(a);i(String,"String",function(e){s(this,{type:a,string:String(e),index:0})},function(){var e,t=l(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=n(r,o),t.index+=e.length,{value:e,done:!1})})},{"../internals/define-iterator":40,"../internals/internal-state":70,"../internals/string-multibyte":123}],187:[function(e,t,r){"use strict";var n=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/to-length"),a=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract");n("match",1,function(e,t,r){return[function(t){var r=a(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var a=o(e),u=String(this);if(!a.global)return l(a,u);for(var c,d=a.unicode,f=[],h=a.lastIndex=0;null!==(c=l(a,u));){var p=String(c[0]);""===(f[h]=p)&&(a.lastIndex=s(u,i(a.lastIndex),d)),h++}return 0===h?null:f}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-length":134}],188:[function(e,t,r){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":49,"../internals/string-repeat":125}],189:[function(e,t,r){"use strict";var n=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/to-integer"),l=e("../internals/require-object-coercible"),u=e("../internals/advance-string-index"),c=e("../internals/regexp-exec-abstract"),d=Math.max,f=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,y=/\$([$&'`]|\d\d?)/g;n("replace",2,function(e,t,r,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,v=m?"$":"$0";return[function(r,n){var o=l(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,o,n):t.call(String(o),r,n)},function(e,n){if(!m&&g||"string"==typeof n&&-1===n.indexOf(v)){var i=r(t,e,this,n);if(i.done)return i.value}var l=o(e),h=String(this),p="function"==typeof n;p||(n=String(n));var y=l.global;if(y){var _=l.unicode;l.lastIndex=0}for(var x=[];;){var w=c(l,h);if(null===w)break;if(x.push(w),!y)break;""===String(w[0])&&(l.lastIndex=u(h,a(l.lastIndex),_))}for(var j,S="",M=0,E=0;E<x.length;E++){w=x[E];for(var T=String(w[0]),O=d(f(s(w.index),h.length),0),C=[],L=1;L<w.length;L++)C.push(void 0===(j=w[L])?j:String(j));var P=w.groups;if(p){var k=[T].concat(C,O,h);void 0!==P&&k.push(P);var A=String(n.apply(void 0,k))}else A=b(T,h,O,C,P,n);M<=O&&(S+=h.slice(M,O)+A,M=O+T.length)}return S+h.slice(M)}];function b(e,r,n,o,a,s){var l=n+e.length,u=o.length,c=y;return void 0!==a&&(a=i(a),c=p),t.call(s,c,function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0==c)return t;if(u<c){var d=h(c/10);return 0===d?t:d<=u?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):t}s=o[c-1]}return void 0===s?"":s})}})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/to-integer":133,"../internals/to-length":134,"../internals/to-object":135}],190:[function(e,t,r){"use strict";var n=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/an-object"),i=e("../internals/require-object-coercible"),a=e("../internals/same-value"),s=e("../internals/regexp-exec-abstract");n("search",1,function(e,t,r){return[function(t){var r=i(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var i=o(e),l=String(this),u=i.lastIndex;a(u,0)||(i.lastIndex=0);var c=s(i,l);return a(i.lastIndex,u)||(i.lastIndex=u),null===c?-1:c.index}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/same-value":114}],191:[function(e,t,r){"use strict";var n=e("../internals/fix-regexp-well-known-symbol-logic"),o=e("../internals/is-regexp"),i=e("../internals/an-object"),a=e("../internals/require-object-coercible"),s=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),u=e("../internals/to-length"),c=e("../internals/regexp-exec-abstract"),d=e("../internals/regexp-exec"),f=e("../internals/fails"),h=[].push,p=Math.min,y=4294967295,m=!f(function(){return!RegExp(y,"y")});n("split",2,function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,r){var n=String(a(this)),i=void 0===r?y:r>>>0;if(0==i)return[];if(void 0===e)return[n];if(!o(e))return t.call(n,e,i);for(var s,l,u,c=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,f+"g");(s=d.call(m,n))&&!(p<(l=m.lastIndex)&&(c.push(n.slice(p,s.index)),1<s.length&&s.index<n.length&&h.apply(c,s.slice(1)),u=s[0].length,p=l,c.length>=i));)m.lastIndex===s.index&&m.lastIndex++;return p===n.length?!u&&m.test("")||c.push(""):c.push(n.slice(p)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var o=a(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,r):n.call(String(o),t,r)},function(e,o){var a=r(n,e,this,o,n!==t);if(a.done)return a.value;var d=i(e),f=String(this),h=s(d,RegExp),g=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),b=new h(m?d:"^(?:"+d.source+")",v),_=void 0===o?y:o>>>0;if(0==_)return[];if(0===f.length)return null===c(b,f)?[f]:[];for(var x=0,w=0,j=[];w<f.length;){b.lastIndex=m?w:0;var S,M=c(b,m?f:f.slice(w));if(null===M||(S=p(u(b.lastIndex+(m?0:w)),f.length))===x)w=l(f,w,g);else{if(j.push(f.slice(x,w)),j.length===_)return j;for(var E=1;E<=M.length-1;E++)if(j.push(M[E]),j.length===_)return j;w=x=S}}return j.push(f.slice(x)),j}]},!m)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":50,"../internals/fix-regexp-well-known-symbol-logic":51,"../internals/is-regexp":76,"../internals/regexp-exec":110,"../internals/regexp-exec-abstract":109,"../internals/require-object-coercible":113,"../internals/species-constructor":121,"../internals/to-length":134}],192:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/create-html");n({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return o(this,"sub","","")}})},{"../internals/create-html":35,"../internals/export":49,"../internals/string-html-forced":122}],193:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/string-trim").trim;n({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return o(this)}})},{"../internals/export":49,"../internals/string-trim":127,"../internals/string-trim-forced":126}],194:[function(e,t,r){"use strict";var n=e("../internals/export"),o=e("../internals/descriptors"),i=e("../internals/global"),a=e("../internals/has"),s=e("../internals/is-object"),l=e("../internals/object-define-property").f,u=e("../internals/copy-constructor-properties"),c=i.Symbol;if(o&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var d={},f=function(e){var t=arguments.length<1||void 0===e?void 0:String(e),r=this instanceof f?new c(t):void 0===t?c():c(t);return""===t&&(d[r]=!0),r};u(f,c);var h=f.prototype=c.prototype;h.constructor=f;var p=h.toString,y="Symbol(test)"==String(c("test")),m=/^Symbol\((.*)\)[^)]+$/;l(h,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(d,e))return"";var r=y?t.slice(7,-1):t.replace(m,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:f})}},{"../internals/copy-constructor-properties":32,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/is-object":74,"../internals/object-define-property":92}],195:[function(e,t,r){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":41}],196:[function(e,t,r){"use strict";function n(e,t){var r=re[e]=j(Q[W]);return X(r,{type:H,tag:e,description:t}),d||(r.description=t),r}function o(e,t){v(e);var r=_(t),n=S(r).concat(he(r));return V(n,function(t){d&&!fe.call(r,t)||de(e,t,r[t])}),e}function i(e,t){var r=_(e),n=x(t,!0);if(r!==Z||!y(re,n)||y(ne,n)){var o=J(r,n);return!o||!y(re,n)||y(r,z)&&r[z][n]||(o.enumerable=!0),o}}function a(e){var t=ee(_(e)),r=[];return V(t,function(e){y(re,e)||y(D,e)||r.push(e)}),r}var s=e("../internals/export"),l=e("../internals/global"),u=e("../internals/get-built-in"),c=e("../internals/is-pure"),d=e("../internals/descriptors"),f=e("../internals/native-symbol"),h=e("../internals/use-symbol-as-uid"),p=e("../internals/fails"),y=e("../internals/has"),m=e("../internals/is-array"),g=e("../internals/is-object"),v=e("../internals/an-object"),b=e("../internals/to-object"),_=e("../internals/to-indexed-object"),x=e("../internals/to-primitive"),w=e("../internals/create-property-descriptor"),j=e("../internals/object-create"),S=e("../internals/object-keys"),M=e("../internals/object-get-own-property-names"),E=e("../internals/object-get-own-property-names-external"),T=e("../internals/object-get-own-property-symbols"),O=e("../internals/object-get-own-property-descriptor"),C=e("../internals/object-define-property"),L=e("../internals/object-property-is-enumerable"),P=e("../internals/create-non-enumerable-property"),k=e("../internals/redefine"),A=e("../internals/shared"),R=e("../internals/shared-key"),D=e("../internals/hidden-keys"),I=e("../internals/uid"),U=e("../internals/well-known-symbol"),N=e("../internals/well-known-symbol-wrapped"),F=e("../internals/define-well-known-symbol"),B=e("../internals/set-to-string-tag"),G=e("../internals/internal-state"),V=e("../internals/array-iteration").forEach,z=R("hidden"),H="Symbol",W="prototype",q=U("toPrimitive"),X=G.set,Y=G.getterFor(H),Z=Object[W],Q=l.Symbol,K=u("JSON","stringify"),J=O.f,$=C.f,ee=E.f,te=L.f,re=A("symbols"),ne=A("op-symbols"),oe=A("string-to-symbol-registry"),ie=A("symbol-to-string-registry"),ae=A("wks"),se=l.QObject,le=!se||!se[W]||!se[W].findChild,ue=d&&p(function(){return 7!=j($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=J(Z,t);n&&delete Z[t],$(e,t,r),n&&e!==Z&&$(Z,t,n)}:$,ce=h?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Q},de=function(e,t,r){e===Z&&de(ne,t,r),v(e);var n=x(t,!0);return v(r),y(re,n)?(r.enumerable?(y(e,z)&&e[z][n]&&(e[z][n]=!1),r=j(r,{enumerable:w(0,!1)})):(y(e,z)||$(e,z,w(1,{})),e[z][n]=!0),ue(e,n,r)):$(e,n,r)},fe=function(e){var t=x(e,!0),r=te.call(this,t);return!(this===Z&&y(re,t)&&!y(ne,t))&&(!(r||!y(this,t)||!y(re,t)||y(this,z)&&this[z][t])||r)},he=function(e){var t=e===Z,r=ee(t?ne:_(e)),n=[];return V(r,function(e){!y(re,e)||t&&!y(Z,e)||n.push(re[e])}),n};f||(k((Q=function(e){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==e?String(e):void 0,r=I(t),o=function(e){this===Z&&o.call(ne,e),y(this,z)&&y(this[z],r)&&(this[z][r]=!1),ue(this,r,w(1,e))};return d&&le&&ue(Z,r,{configurable:!0,set:o}),n(r,t)})[W],"toString",function(){return Y(this).tag}),k(Q,"withoutSetter",function(e){return n(I(e),e)}),L.f=fe,C.f=de,O.f=i,M.f=E.f=a,T.f=he,N.f=function(e){return n(U(e),e)},d&&($(Q[W],"description",{configurable:!0,get:function(){return Y(this).description}}),c||k(Z,"propertyIsEnumerable",fe,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Q}),V(S(ae),function(e){F(e)}),s({target:H,stat:!0,forced:!f},{for:function(e){var t=String(e);if(y(oe,t))return oe[t];var r=Q(t);return oe[t]=r,ie[r]=t,r},keyFor:function(e){if(!ce(e))throw TypeError(e+" is not a symbol");if(y(ie,e))return ie[e]},useSetter:function(){le=!0},useSimple:function(){le=!1}}),s({target:"Object",stat:!0,forced:!f,sham:!d},{create:function(e,t){return void 0===t?j(e):o(j(e),t)},defineProperty:de,defineProperties:o,getOwnPropertyDescriptor:i}),s({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:a,getOwnPropertySymbols:he}),s({target:"Object",stat:!0,forced:p(function(){T.f(1)})},{getOwnPropertySymbols:function(e){return T.f(b(e))}}),K&&s({target:"JSON",stat:!0,forced:!f||p(function(){var e=Q();return"[null]"!=K([e])||"{}"!=K({a:e})||"{}"!=K(Object(e))})},{stringify:function(e,t,r){for(var n,o=[e],i=1;i<arguments.length;)o.push(arguments[i++]);if((g(n=t)||void 0!==e)&&!ce(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ce(t))return t}),o[1]=t,K.apply(null,o)}}),Q[W][q]||P(Q[W],q,Q[W].valueOf),B(Q,H),D[z]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":37,"../internals/create-property-descriptor":38,"../internals/define-well-known-symbol":41,"../internals/descriptors":42,"../internals/export":49,"../internals/fails":50,"../internals/get-built-in":56,"../internals/global":59,"../internals/has":60,"../internals/hidden-keys":61,"../internals/internal-state":70,"../internals/is-array":72,"../internals/is-object":74,"../internals/is-pure":75,"../internals/native-symbol":83,"../internals/object-create":90,"../internals/object-define-property":92,"../internals/object-get-own-property-descriptor":93,"../internals/object-get-own-property-names":95,"../internals/object-get-own-property-names-external":94,"../internals/object-get-own-property-symbols":96,"../internals/object-keys":99,"../internals/object-property-is-enumerable":100,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/shared":120,"../internals/shared-key":118,"../internals/to-indexed-object":132,"../internals/to-object":135,"../internals/to-primitive":138,"../internals/uid":143,"../internals/use-symbol-as-uid":144,"../internals/well-known-symbol":146,"../internals/well-known-symbol-wrapped":145}],197:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-copy-within"),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("copyWithin",function(e,t,r){return o.call(i(this),e,t,2<arguments.length?r:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],198:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").every,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("every",function(e,t){return o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],199:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-fill"),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("fill",function(e){return o.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],200:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").filter,i=e("../internals/species-constructor"),a=n.aTypedArray,s=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("filter",function(e,t){for(var r=o(a(this),e,1<arguments.length?t:void 0),n=i(this,this.constructor),l=0,u=r.length,c=new(s(n))(u);l<u;)c[l]=r[l++];return c})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],201:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").findIndex,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("findIndex",function(e,t){return o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],202:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").find,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("find",function(e,t){return o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],203:[function(e,t,r){e("../internals/typed-array-constructor")("Float32",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],204:[function(e,t,r){e("../internals/typed-array-constructor")("Float64",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],205:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").forEach,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("forEach",function(e,t){o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],206:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-includes").includes,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("includes",function(e,t){return o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],207:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-includes").indexOf,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("indexOf",function(e,t){return o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],208:[function(e,t,r){e("../internals/typed-array-constructor")("Int16",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],209:[function(e,t,r){e("../internals/typed-array-constructor")("Int32",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],210:[function(e,t,r){"use strict";function n(){return u.call(f(this))}var o=e("../internals/global"),i=e("../internals/array-buffer-view-core"),a=e("../modules/es.array.iterator"),s=e("../internals/well-known-symbol")("iterator"),l=o.Uint8Array,u=a.values,c=a.keys,d=a.entries,f=i.aTypedArray,h=i.exportTypedArrayMethod,p=l&&l.prototype[s],y=!!p&&("values"==p.name||null==p.name);h("entries",function(){return d.call(f(this))}),h("keys",function(){return c.call(f(this))}),h("values",n,!y),h(s,n,!y)},{"../internals/array-buffer-view-core":12,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],211:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=n.aTypedArray,i=n.exportTypedArrayMethod,a=[].join;i("join",function(e){return a.apply(o(this),arguments)})},{"../internals/array-buffer-view-core":12}],212:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-last-index-of"),i=n.aTypedArray;(0,n.exportTypedArrayMethod)("lastIndexOf",function(e){return o.apply(i(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],213:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").map,i=e("../internals/species-constructor"),a=n.aTypedArray,s=n.aTypedArrayConstructor;(0,n.exportTypedArrayMethod)("map",function(e,t){return o(a(this),e,1<arguments.length?t:void 0,function(e,t){return new(s(i(e,e.constructor)))(t)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":121}],214:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-reduce").right,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduceRight",function(e,t){return o(i(this),e,arguments.length,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],215:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-reduce").left,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("reduce",function(e,t){return o(i(this),e,arguments.length,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],216:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=n.aTypedArray,i=n.exportTypedArrayMethod,a=Math.floor;i("reverse",function(){for(var e,t=o(this).length,r=a(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this})},{"../internals/array-buffer-view-core":12}],217:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/to-length"),i=e("../internals/to-offset"),a=e("../internals/to-object"),s=e("../internals/fails"),l=n.aTypedArray;(0,n.exportTypedArrayMethod)("set",function(e,t){l(this);var r=i(1<arguments.length?t:void 0,1),n=this.length,s=a(e),u=o(s.length),c=0;if(n<u+r)throw RangeError("Wrong length");for(;c<u;)this[r+c]=s[c++]},s(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/to-length":134,"../internals/to-object":135,"../internals/to-offset":136}],218:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/species-constructor"),i=e("../internals/fails"),a=n.aTypedArray,s=n.aTypedArrayConstructor,l=n.exportTypedArrayMethod,u=[].slice;l("slice",function(e,t){for(var r=u.call(a(this),e,t),n=o(this,this.constructor),i=0,l=r.length,c=new(s(n))(l);i<l;)c[i]=r[i++];return c},i(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/species-constructor":121}],219:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/array-iteration").some,i=n.aTypedArray;(0,n.exportTypedArrayMethod)("some",function(e,t){return o(i(this),e,1<arguments.length?t:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],220:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=n.aTypedArray,i=n.exportTypedArrayMethod,a=[].sort;i("sort",function(e){return a.call(o(this),e)})},{"../internals/array-buffer-view-core":12}],221:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core"),o=e("../internals/to-length"),i=e("../internals/to-absolute-index"),a=e("../internals/species-constructor"),s=n.aTypedArray;(0,n.exportTypedArrayMethod)("subarray",function(e,t){var r=s(this),n=r.length,l=i(e,n);return new(a(r,r.constructor))(r.buffer,r.byteOffset+l*r.BYTES_PER_ELEMENT,o((void 0===t?n:i(t,n))-l))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":121,"../internals/to-absolute-index":130,"../internals/to-length":134}],222:[function(e,t,r){"use strict";var n=e("../internals/global"),o=e("../internals/array-buffer-view-core"),i=e("../internals/fails"),a=n.Int8Array,s=o.aTypedArray,l=o.exportTypedArrayMethod,u=[].toLocaleString,c=[].slice,d=!!a&&i(function(){u.call(new a(1))});l("toLocaleString",function(){return u.apply(d?c.call(s(this)):s(this),arguments)},i(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!i(function(){a.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],223:[function(e,t,r){"use strict";var n=e("../internals/array-buffer-view-core").exportTypedArrayMethod,o=e("../internals/fails"),i=e("../internals/global").Uint8Array,a=i&&i.prototype||{},s=[].toString,l=[].join;o(function(){s.call({})})&&(s=function(){return l.call(this)}),n("toString",s,a.toString!=s)},{"../internals/array-buffer-view-core":12,"../internals/fails":50,"../internals/global":59}],224:[function(e,t,r){e("../internals/typed-array-constructor")("Uint16",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],225:[function(e,t,r){e("../internals/typed-array-constructor")("Uint32",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],226:[function(e,t,r){e("../internals/typed-array-constructor")("Uint8",function(e){return function(t,r,n){return e(this,t,r,n)}})},{"../internals/typed-array-constructor":140}],227:[function(e,t,r){e("../internals/typed-array-constructor")("Uint8",function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},{"../internals/typed-array-constructor":140}],228:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../internals/array-for-each"),a=e("../internals/create-non-enumerable-property");for(var s in o){var l=n[s],u=l&&l.prototype;if(u&&u.forEach!==i)try{a(u,"forEach",i)}catch(e){u.forEach=i}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59}],229:[function(e,t,r){var n=e("../internals/global"),o=e("../internals/dom-iterables"),i=e("../modules/es.array.iterator"),a=e("../internals/create-non-enumerable-property"),s=e("../internals/well-known-symbol"),l=s("iterator"),u=s("toStringTag"),c=i.values;for(var d in o){var f=n[d],h=f&&f.prototype;if(h){if(h[l]!==c)try{a(h,l,c)}catch(e){h[l]=c}if(h[u]||a(h,u,d),o[d])for(var p in i)if(h[p]!==i[p])try{a(h,p,i[p])}catch(e){h[p]=i[p]}}}},{"../internals/create-non-enumerable-property":37,"../internals/dom-iterables":44,"../internals/global":59,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],230:[function(e,t,r){"use strict";function n(t){try{return decodeURIComponent(t)}catch(e){return t}}function o(e){var t,r=e.replace(U," "),o=4;try{return decodeURIComponent(r)}catch(e){for(;o;)r=r.replace((t=o--,N[t-1]||(N[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),n);return r}}function i(e){return B[e]}function a(e){return encodeURIComponent(e).replace(F,i)}function s(e,t){if(t)for(var r,n,i=t.split("&"),a=0;a<i.length;)(r=i[a++]).length&&(n=r.split("="),e.push({key:o(n.shift()),value:o(n.join("="))}))}function l(e){this.entries.length=0,s(this.entries,e)}function u(e,t){if(e<t)throw TypeError("Not enough arguments")}e("../modules/es.array.iterator");var c=e("../internals/export"),d=e("../internals/get-built-in"),f=e("../internals/native-url"),h=e("../internals/redefine"),p=e("../internals/redefine-all"),y=e("../internals/set-to-string-tag"),m=e("../internals/create-iterator-constructor"),g=e("../internals/internal-state"),v=e("../internals/an-instance"),b=e("../internals/has"),_=e("../internals/function-bind-context"),x=e("../internals/classof"),w=e("../internals/an-object"),j=e("../internals/is-object"),S=e("../internals/object-create"),M=e("../internals/create-property-descriptor"),E=e("../internals/get-iterator"),T=e("../internals/get-iterator-method"),O=e("../internals/well-known-symbol"),C=d("fetch"),L=d("Headers"),P=O("iterator"),k="URLSearchParams",A=k+"Iterator",R=g.set,D=g.getterFor(k),I=g.getterFor(A),U=/\+/g,N=Array(4),F=/[!'()~]|%20/g,B={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},G=m(function(e,t){R(this,{type:A,iterator:E(D(e).entries),kind:t})},"Iterator",function(){var e=I(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),V=function(e){v(this,V,k);var t,r,n,o,i,a,u,c,d,f=0<arguments.length?e:void 0,h=[];if(R(this,{type:k,entries:h,updateURL:function(){},updateSearchParams:l}),void 0!==f)if(j(f))if("function"==typeof(t=T(f)))for(n=(r=t.call(f)).next;!(o=n.call(r)).done;){if((u=(a=(i=E(w(o.value))).next).call(i)).done||(c=a.call(i)).done||!a.call(i).done)throw TypeError("Expected sequence with length 2");h.push({key:u.value+"",value:c.value+""})}else for(d in f)b(f,d)&&h.push({key:d,value:f[d]+""});else s(h,"string"==typeof f?"?"===f.charAt(0)?f.slice(1):f:f+"")},z=V.prototype;p(z,{append:function(e,t){u(arguments.length,2);var r=D(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){u(arguments.length,1);for(var t=D(this),r=t.entries,n=e+"",o=0;o<r.length;)r[o].key===n?r.splice(o,1):o++;t.updateURL()},get:function(e){u(arguments.length,1);for(var t=D(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){u(arguments.length,1);for(var t=D(this).entries,r=e+"",n=[],o=0;o<t.length;o++)t[o].key===r&&n.push(t[o].value);return n},has:function(e){u(arguments.length,1);for(var t=D(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){u(arguments.length,1);for(var r,n=D(this),o=n.entries,i=!1,a=e+"",s=t+"",l=0;l<o.length;l++)(r=o[l]).key===a&&(i?o.splice(l--,1):(i=!0,r.value=s));i||o.push({key:a,value:s}),n.updateURL()},sort:function(){var e,t,r,n=D(this),o=n.entries,i=o.slice();for(r=o.length=0;r<i.length;r++){for(e=i[r],t=0;t<r;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===r&&o.push(e)}n.updateURL()},forEach:function(e,t){for(var r,n=D(this).entries,o=_(e,1<arguments.length?t:void 0,3),i=0;i<n.length;)o((r=n[i++]).value,r.key,this)},keys:function(){return new G(this,"keys")},values:function(){return new G(this,"values")},entries:function(){return new G(this,"entries")}},{enumerable:!0}),h(z,P,z.entries),h(z,"toString",function(){for(var e,t=D(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(a(e.key)+"="+a(e.value));return r.join("&")},{enumerable:!0}),y(V,k),c({global:!0,forced:!f},{URLSearchParams:V}),f||"function"!=typeof C||"function"!=typeof L||c({global:!0,enumerable:!0,forced:!0},{fetch:function(e,t){var r,n,o,i=[e];return 1<arguments.length&&(j(r=t)&&(n=r.body,x(n)===k&&((o=r.headers?new L(r.headers):new L).has("content-type")||o.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),r=S(r,{body:M(0,String(n)),headers:M(0,o)}))),i.push(r)),C.apply(this,i)}}),t.exports={URLSearchParams:V,getState:D}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":36,"../internals/create-property-descriptor":38,"../internals/export":49,"../internals/function-bind-context":54,"../internals/get-built-in":56,"../internals/get-iterator":58,"../internals/get-iterator-method":57,"../internals/has":60,"../internals/internal-state":70,"../internals/is-object":74,"../internals/native-url":84,"../internals/object-create":90,"../internals/redefine":108,"../internals/redefine-all":107,"../internals/set-to-string-tag":117,"../internals/well-known-symbol":146,"../modules/es.array.iterator":158}],231:[function(e,t,r){"use strict";function n(e,t){var r,n,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return I;if(!(r=Q(t.slice(1,-1))))return I;e.host=r}else if(ne(e)){if(t=S(t),W.test(t))return I;if(null===(r=Z(t)))return I;e.host=r}else{if(q.test(t))return I;for(r="",n=w(t),o=0;o<n.length;o++)r+=te(n[o],K);e.host=r}}function o(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=A(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(r<o&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return r<o&&(t=n,r=o),t}(e),r=0;r<8;r++)o&&0===e[r]||(o=o&&!1,n===r?(t+=r?":":"::",o=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}function i(e){return""!=e.username||""!=e.password}function a(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function s(e,t){var r;return 2==e.length&&N.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)}function l(e){var t;return 1<e.length&&s(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)}function u(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&s(t[0],!0)||t.pop()}function c(e,t,r,o){var a,c,d,h,p,y,m=r||oe,g=0,v="",b=!1,x=!1,j=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(X,"")),t=t.replace(Y,""),a=w(t);g<=a.length;){switch(c=a[g],m){case oe:if(!c||!N.test(c)){if(r)return D;m=ae;continue}v+=c.toLowerCase(),m=ie;break;case ie:if(c&&(F.test(c)||"+"==c||"-"==c||"."==c))v+=c.toLowerCase();else{if(":"!=c){if(r)return D;v="",m=ae,g=0;continue}if(r&&(ne(e)!=_(re,v)||"file"==v&&(i(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=v,r)return void(ne(e)&&re[e.scheme]==e.port&&(e.port=null));v="","file"==e.scheme?m=ge:ne(e)&&o&&o.scheme==e.scheme?m=se:ne(e)?m=de:"/"==a[g+1]?(m=le,g++):(e.cannotBeABaseURL=!0,e.path.push(""),m=we)}break;case ae:if(!o||o.cannotBeABaseURL&&"#"!=c)return D;if(o.cannotBeABaseURL&&"#"==c){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,m=Se;break}m="file"==o.scheme?ge:ue;continue;case se:if("/"!=c||"/"!=a[g+1]){m=ue;continue}m=fe,g++;break;case le:if("/"==c){m=he;break}m=xe;continue;case ue:if(e.scheme=o.scheme,c==f)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==c||"\\"==c&&ne(e))m=ce;else if("?"==c)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",m=je;else{if("#"!=c){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),m=xe;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",m=Se}break;case ce:if(!ne(e)||"/"!=c&&"\\"!=c){if("/"!=c){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,m=xe;continue}m=he}else m=fe;break;case de:if(m=fe,"/"!=c||"/"!=v.charAt(g+1))continue;g++;break;case fe:if("/"==c||"\\"==c)break;m=he;continue;case he:if("@"==c){b&&(v="%40"+v),b=!0,d=w(v);for(var S=0;S<d.length;S++){var M=d[S];if(":"!=M||j){var E=te(M,ee);j?e.password+=E:e.username+=E}else j=!0}v=""}else if(c==f||"/"==c||"?"==c||"#"==c||"\\"==c&&ne(e)){if(b&&""==v)return"Invalid authority";g-=w(v).length+1,v="",m=pe}else v+=c;break;case pe:case ye:if(r&&"file"==e.scheme){m=be;continue}if(":"!=c||x){if(c==f||"/"==c||"?"==c||"#"==c||"\\"==c&&ne(e)){if(ne(e)&&""==v)return I;if(r&&""==v&&(i(e)||null!==e.port))return;if(h=n(e,v))return h;if(v="",m=_e,r)return;continue}"["==c?x=!0:"]"==c&&(x=!1),v+=c}else{if(""==v)return I;if(h=n(e,v))return h;if(v="",m=me,r==ye)return}break;case me:if(!B.test(c)){if(c==f||"/"==c||"?"==c||"#"==c||"\\"==c&&ne(e)||r){if(""!=v){var T=parseInt(v,10);if(65535<T)return U;e.port=ne(e)&&T===re[e.scheme]?null:T,v=""}if(r)return;m=_e;continue}return U}v+=c;break;case ge:if(e.scheme="file","/"==c||"\\"==c)m=ve;else{if(!o||"file"!=o.scheme){m=xe;continue}if(c==f)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==c)e.host=o.host,e.path=o.path.slice(),e.query="",m=je;else{if("#"!=c){l(a.slice(g).join(""))||(e.host=o.host,e.path=o.path.slice(),u(e)),m=xe;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",m=Se}}break;case ve:if("/"==c||"\\"==c){m=be;break}o&&"file"==o.scheme&&!l(a.slice(g).join(""))&&(s(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),m=xe;continue;case be:if(c==f||"/"==c||"\\"==c||"?"==c||"#"==c){if(!r&&s(v))m=xe;else if(""==v){if(e.host="",r)return;m=_e}else{if(h=n(e,v))return h;if("localhost"==e.host&&(e.host=""),r)return;v="",m=_e}continue}v+=c;break;case _e:if(ne(e)){if(m=xe,"/"!=c&&"\\"!=c)continue}else if(r||"?"!=c)if(r||"#"!=c){if(c!=f&&(m=xe,"/"!=c))continue}else e.fragment="",m=Se;else e.query="",m=je;break;case xe:if(c==f||"/"==c||"\\"==c&&ne(e)||!r&&("?"==c||"#"==c)){if(".."===(y=(y=v).toLowerCase())||"%2e."===y||".%2e"===y||"%2e%2e"===y?(u(e),"/"==c||"\\"==c&&ne(e)||e.path.push("")):"."===(p=v)||"%2e"===p.toLowerCase()?"/"==c||"\\"==c&&ne(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&s(v)&&(e.host&&(e.host=""),v=v.charAt(0)+":"),e.path.push(v)),v="","file"==e.scheme&&(c==f||"?"==c||"#"==c))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==c?(e.query="",m=je):"#"==c&&(e.fragment="",m=Se)}else v+=te(c,$);break;case we:"?"==c?(e.query="",m=je):"#"==c?(e.fragment="",m=Se):c!=f&&(e.path[0]+=te(c,K));break;case je:r||"#"!=c?c!=f&&("'"==c&&ne(e)?e.query+="%27":e.query+="#"==c?"%23":te(c,K)):(e.fragment="",m=Se);break;case Se:c!=f&&(e.fragment+=te(c,J))}g++}}function d(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}}e("../modules/es.string.iterator");var f,h=e("../internals/export"),p=e("../internals/descriptors"),y=e("../internals/native-url"),m=e("../internals/global"),g=e("../internals/object-define-properties"),v=e("../internals/redefine"),b=e("../internals/an-instance"),_=e("../internals/has"),x=e("../internals/object-assign"),w=e("../internals/array-from"),j=e("../internals/string-multibyte").codeAt,S=e("../internals/string-punycode-to-ascii"),M=e("../internals/set-to-string-tag"),E=e("../modules/web.url-search-params"),T=e("../internals/internal-state"),O=m.URL,C=E.URLSearchParams,L=E.getState,P=T.set,k=T.getterFor("URL"),A=Math.floor,R=Math.pow,D="Invalid scheme",I="Invalid host",U="Invalid port",N=/[A-Za-z]/,F=/[\d+-.A-Za-z]/,B=/\d/,G=/^(0x|0X)/,V=/^[0-7]+$/,z=/^\d+$/,H=/^[\dA-Fa-f]+$/,W=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,q=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,X=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Y=/[\u0009\u000A\u000D]/g,Z=function(e){var t,r,n,o,i,a,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),4<(t=l.length))return e;for(r=[],n=0;n<t;n++){if(""==(o=l[n]))return e;if(i=10,1<o.length&&"0"==o.charAt(0)&&(i=G.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?z:8==i?V:H).test(o))return e;a=parseInt(o,i)}r.push(a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=R(256,5-t))return null}else if(255<a)return null;for(s=r.pop(),n=0;n<r.length;n++)s+=r[n]*R(256,3-n);return s},Q=function(e){function t(){return e.charAt(f)}var r,n,o,i,a,s,l,u=[0,0,0,0,0,0,0,0],c=0,d=null,f=0;if(":"==t()){if(":"!=e.charAt(1))return;f+=2,d=++c}for(;t();){if(8==c)return;if(":"!=t()){for(r=n=0;n<4&&H.test(t());)r=16*r+parseInt(t(),16),f++,n++;if("."==t()){if(0==n)return;if(f-=n,6<c)return;for(o=0;t();){if(i=null,0<o){if(!("."==t()&&o<4))return;f++}if(!B.test(t()))return;for(;B.test(t());){if(a=parseInt(t(),10),null===i)i=a;else{if(0==i)return;i=10*i+a}if(255<i)return;f++}u[c]=256*u[c]+i,2!=++o&&4!=o||c++}if(4!=o)return;break}if(":"==t()){if(f++,!t())return}else if(t())return;u[c++]=r}else{if(null!==d)return;f++,d=++c}}if(null!==d)for(s=c-d,c=7;0!=c&&0<s;)l=u[c],u[c--]=u[d+s-1],u[d+--s]=l;else if(8!=c)return;return u},K={},J=x({},K,{" ":1,'"':1,"<":1,">":1,"`":1}),$=x({},J,{"#":1,"?":1,"{":1,"}":1}),ee=x({},$,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),te=function(e,t){var r=j(e,0);return 32<r&&r<127&&!_(t,e)?e:encodeURIComponent(e)},re={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ne=function(e){return _(re,e.scheme)},oe={},ie={},ae={},se={},le={},ue={},ce={},de={},fe={},he={},pe={},ye={},me={},ge={},ve={},be={},_e={},xe={},we={},je={},Se={},Me=function(e,t){var r,n,o=b(this,Me,"URL"),i=1<arguments.length?t:void 0,a=String(e),s=P(o,{type:"URL"});if(void 0!==i)if(i instanceof Me)r=k(i);else if(n=c(r={},String(i)))throw TypeError(n);if(n=c(s,a,null,r))throw TypeError(n);var l=s.searchParams=new C,u=L(l);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(l)||null},p||(o.href=Te.call(o),o.origin=Oe.call(o),o.protocol=Ce.call(o),o.username=Le.call(o),o.password=Pe.call(o),o.host=ke.call(o),o.hostname=Ae.call(o),o.port=Re.call(o),o.pathname=De.call(o),o.search=Ie.call(o),o.searchParams=Ue.call(o),o.hash=Ne.call(o))},Ee=Me.prototype,Te=function(){var e=k(this),t=e.scheme,r=e.username,n=e.password,a=e.host,s=e.port,l=e.path,u=e.query,c=e.fragment,d=t+":";return null!==a?(d+="//",i(e)&&(d+=r+(n?":"+n:"")+"@"),d+=o(a),null!==s&&(d+=":"+s)):"file"==t&&(d+="//"),d+=e.cannotBeABaseURL?l[0]:l.length?"/"+l.join("/"):"",null!==u&&(d+="?"+u),null!==c&&(d+="#"+c),d},Oe=function(){var e=k(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&ne(e)?t+"://"+o(e.host)+(null!==r?":"+r:""):"null"},Ce=function(){return k(this).scheme+":"},Le=function(){return k(this).username},Pe=function(){return k(this).password},ke=function(){var e=k(this),t=e.host,r=e.port;return null===t?"":null===r?o(t):o(t)+":"+r},Ae=function(){var e=k(this).host;return null===e?"":o(e)},Re=function(){var e=k(this).port;return null===e?"":String(e)},De=function(){var e=k(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ie=function(){var e=k(this).query;return e?"?"+e:""},Ue=function(){return k(this).searchParams},Ne=function(){var e=k(this).fragment;return e?"#"+e:""};if(p&&g(Ee,{href:d(Te,function(e){var t=k(this),r=c(t,String(e));if(r)throw TypeError(r);L(t.searchParams).updateSearchParams(t.query)}),origin:d(Oe),protocol:d(Ce,function(e){c(k(this),String(e)+":",oe)}),username:d(Le,function(e){var t=k(this),r=w(String(e));if(!a(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=te(r[n],ee)}}),password:d(Pe,function(e){var t=k(this),r=w(String(e));if(!a(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=te(r[n],ee)}}),host:d(ke,function(e){var t=k(this);t.cannotBeABaseURL||c(t,String(e),pe)}),hostname:d(Ae,function(e){var t=k(this);t.cannotBeABaseURL||c(t,String(e),ye)}),port:d(Re,function(e){var t=k(this);a(t)||(""==(e=String(e))?t.port=null:c(t,e,me))}),pathname:d(De,function(e){var t=k(this);t.cannotBeABaseURL||(t.path=[],c(t,e+"",_e))}),search:d(Ie,function(e){var t=k(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",c(t,e,je)),L(t.searchParams).updateSearchParams(t.query)}),searchParams:d(Ue),hash:d(Ne,function(e){var t=k(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",c(t,e,Se)):t.fragment=null})}),v(Ee,"toJSON",function(){return Te.call(this)},{enumerable:!0}),v(Ee,"toString",function(){return Te.call(this)},{enumerable:!0}),O){var Fe=O.createObjectURL,Be=O.revokeObjectURL;Fe&&v(Me,"createObjectURL",function(e){return Fe.apply(O,arguments)}),Be&&v(Me,"revokeObjectURL",function(e){return Be.apply(O,arguments)})}M(Me,"URL"),h({global:!0,forced:!y,sham:!p},{URL:Me})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":42,"../internals/export":49,"../internals/global":59,"../internals/has":60,"../internals/internal-state":70,"../internals/native-url":84,"../internals/object-assign":89,"../internals/object-define-properties":91,"../internals/redefine":108,"../internals/set-to-string-tag":117,"../internals/string-multibyte":123,"../internals/string-punycode-to-ascii":124,"../modules/es.string.iterator":186,"../modules/web.url-search-params":230}],232:[function(e,t,r){"use strict";t.exports=e("./").polyfill()},{"./":233}],233:[function(e,r,n){(function(t,o){var i;i=function(){"use strict";function r(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,a=void 0,s=void 0,l=function(e,t){y[i]=e,y[i+1]=t,2===(i+=2)&&(s?s(m):x())},u="undefined"!=typeof window?window:void 0,c=u||{},d=c.MutationObserver||c.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(m,1)}}var y=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,y[e])(y[e+1]),y[e]=void 0,y[e+1]=void 0;i=0}var g,v,b,_,x=void 0;function w(e,t){var r=this,n=new this.constructor(M);void 0===n[S]&&N(n);var o=r._state;if(o){var i=arguments[o-1];l(function(){return I(o,n,i,r._result)})}else R(r,n,e,t);return n}function j(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(M);return L(t,e),t}x=f?function(){return t.nextTick(m)}:d?(v=0,b=new d(m),_=document.createTextNode(""),b.observe(_,{characterData:!0}),function(){_.data=v=++v%2}):h?((g=new MessageChannel).port1.onmessage=m,function(){return g.port2.postMessage(0)}):void 0===u&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(m)}:p()}catch(e){return p()}}():p();var S=Math.random().toString(36).substring(2);function M(){}var E=void 0,T=1,O=2;function C(e,t,n){var o,i;t.constructor===e.constructor&&n===w&&t.constructor.resolve===j?(o=e,(i=t)._state===T?k(o,i._result):i._state===O?A(o,i._result):R(i,void 0,function(e){return L(o,e)},function(e){return A(o,e)})):void 0===n?k(e,t):r(n)?function(e,t,r){l(function(e){var n=!1,o=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?L(e,r):k(e,r))},function(t){n||(n=!0,A(e,t))},e._label);!n&&o&&(n=!0,A(e,o))},e)}(e,t,n):k(e,t)}function L(e,t){if(e===t)A(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(n=t),null===n||"object"!=o&&"function"!=o)k(e,t);else{var r=void 0;try{r=t.then}catch(t){return void A(e,t)}C(e,t,r)}var n,o}function P(e){e._onerror&&e._onerror(e._result),D(e)}function k(e,t){e._state===E&&(e._result=t,e._state=T,0!==e._subscribers.length&&l(D,e))}function A(e,t){e._state===E&&(e._state=O,e._result=t,l(P,e))}function R(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+T]=r,o[i+O]=n,0===i&&e._state&&l(D,e)}function D(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?I(r,n,o,i):o(i);e._subscribers.length=0}}function I(e,t,n,o){var i=r(n),a=void 0,s=void 0,l=!0;if(i){try{a=n(o)}catch(e){l=!1,s=e}if(t===a)return void A(t,new TypeError("A promises callback cannot return that same promise."))}else a=o;t._state!==E||(i&&l?L(t,a):!1===l?A(t,s):e===T?k(t,a):e===O&&A(t,a))}var U=0;function N(e){e[S]=U++,e._state=void 0,e._result=void 0,e._subscribers=[]}var F=(B.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},B.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===j){var o=void 0,i=void 0,a=!1;try{o=e.then}catch(t){a=!0,i=t}if(o===w&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===G){var s=new r(M);a?A(s,i):C(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},B.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===E&&(this._remaining--,e===O?A(n,r):this._result[t]=r),0===this._remaining&&k(n,this._result)},B.prototype._willSettleAt=function(e,t){var r=this;R(e,void 0,function(e){return r._settledAt(T,t,e)},function(e){return r._settledAt(O,t,e)})},B);function B(e,t){this._instanceConstructor=e,this.promise=new e(M),this.promise[S]||N(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&k(this.promise,this._result))):A(this.promise,new Error("Array Methods must be provided an Array"))}var G=(V.prototype.catch=function(e){return this.then(null,e)},V.prototype.finally=function(e){var t=this.constructor;return r(e)?this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})}):this.then(e,e)},V);function V(e){this[S]=U++,this._result=this._state=void 0,this._subscribers=[],M!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof V?function(e,t){try{t(function(t){L(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return G.prototype.then=w,G.all=function(e){return new F(this,e).promise},G.race=function(e){var t=this;return n(e)?new t(function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},G.resolve=j,G.reject=function(e){var t=new this(M);return A(t,e),t},G._setScheduler=function(e){s=e},G._setAsap=function(e){l=e},G._asap=l,G.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=G},G.Promise=G},"object"==typeof n&&void 0!==r?r.exports=i():this.ES6Promise=i()}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:241}],234:[function(e,t,r){!function(e,n){if(void 0!==r&&void 0!==t)n(r,t);else{var o={exports:{}};n(o.exports,o),e.fetchJsonp=o.exports}}(this,function(e,t){"use strict";function r(t){try{delete window[t]}catch(e){window[t]=void 0}}function n(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,i=t.timeout||5e3,a=t.jsonpCallback||"callback",s=void 0;return new Promise(function(l,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),d=a+"_"+c;window[c]=function(e){l({ok:!0,json:function(){return Promise.resolve(e)}}),s&&clearTimeout(s),n(d),r(c)},o+=-1===o.indexOf("?")?"?":"&";var f=document.createElement("script");f.setAttribute("src",""+o+a+"="+c),t.charset&&f.setAttribute("charset",t.charset),f.id=d,document.getElementsByTagName("head")[0].appendChild(f),s=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),r(c),n(d),window[c]=function(){r(c)}},i),f.onerror=function(){u(new Error("JSONP request to "+e+" failed")),r(c),n(d),s&&clearTimeout(s)}})}})},{}],235:[function(e,t,r){var n=n||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l=function(e){setTimeout(function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()},4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},c=function(t,c,d){function f(){!function(e,t,r){for(var n=(t=[].concat(t)).length;n--;){var o=e["on"+t[n]];if("function"==typeof o)try{o.call(e,e)}catch(e){s(e)}}}(p,"writestart progress write writeend".split(" "))}d||(t=u(t));var h,p=this,y="application/octet-stream"===t.type;if(p.readyState=p.INIT,o)return h=r().createObjectURL(t),void setTimeout(function(){var e,t;n.href=h,n.download=c,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),f(),l(h),p.readyState=p.DONE});!function(){if((a||y&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,f()},n.readAsDataURL(t),p.readyState=p.INIT}h=h||r().createObjectURL(t),y?e.location.href=h:e.open(h,"_blank")||(e.location.href=h),p.readyState=p.DONE,f(),l(h)}()},d=c.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,r){return new c(e,t||e.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=n)},{}],236:[function(e,t,r){r.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?o-1:0,f=r?-1:1,h=e[t+d];for(d+=f,i=h&(1<<-c)-1,h>>=-c,c+=s;0<c;i=256*i+e[t+d],d+=f,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;0<c;a=256*a+e[t+d],d+=f,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+d?f/l:f*Math.pow(2,1-d))*l&&(a++,l/=2),c<=a+d?(s=0,a=c):1<=a+d?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));8<=o;e[r+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;0<u;e[r+h]=255&a,h+=p,a/=256,u-=8);e[r+h-p]|=128*y}},{}],237:[function(e,t,r){"use strict";var n;function o(e,t){return e.b===t.b&&e.a===t.a}function i(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function a(e,t,r){var n=t.b-e.b,o=r.b-t.b;return 0<n+o?n<o?t.a-e.a+n/(n+o)*(e.a-r.a):t.a-r.a+o/(n+o)*(r.a-e.a):0}function s(e,t,r){var n=t.b-e.b,o=r.b-t.b;return 0<n+o?(t.a-r.a)*n+(t.a-e.a)*o:0}function l(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function u(e,t,r){var n=t.a-e.a,o=r.a-t.a;return 0<n+o?n<o?t.b-e.b+n/(n+o)*(e.b-r.b):t.b-r.b+o/(n+o)*(r.b-e.b):0}function c(e,t,r){var n=t.a-e.a,o=r.a-t.a;return 0<n+o?(t.b-r.b)*n+(t.b-e.b)*o:0}function d(e,t,r,n){return(e=e<0?0:e)<=(r=r<0?0:r)?0===r?(t+n)/2:t+e/(e+r)*(n-t):n+r/(e+r)*(t-n)}function f(e){var t=g(e.b);return b(t,e.c),b(t.b,e.c),_(t,e.a),t}function h(e,t){var r=!1,n=!1;e!==t&&(t.a!==e.a&&(n=!0,w(t.a,e.a)),t.d!==e.d&&(r=!0,j(t.d,e.d)),v(t,e),n||(b(t,e.a),e.a.c=e),r||(_(t,e.d),e.d.a=e))}function p(e){var t=e.b,r=!1;e.d!==e.b.d&&(r=!0,j(e.d,e.b.d)),e.c===e?w(e.a,null):(e.b.d.a=K(e),e.a.c=e.c,v(e,K(e)),r||_(e,e.d)),t.c===t?(w(t.a,null),j(t.d,null)):(e.d.a=K(t),t.a.c=t.c,v(t,K(t))),x(e)}function y(e){var t=g(e),r=t.b;return v(t,e.e),t.a=e.b.a,b(r,t.a),t.d=r.d=e.d,t=t.b,v(e.b,K(e.b)),v(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function m(e,t){var r=!1,n=g(e),o=n.b;return t.d!==e.d&&(r=!0,j(t.d,e.d)),v(n,e.e),v(o,t),n.a=e.b.a,o.a=t.a,n.d=o.d=e.d,e.d.a=o,r||_(n,e.d),n}function g(e){var t=new Q,r=new Q,n=e.b.h;return(((r.h=n).b.h=t).h=e).b.h=r,t.b=r,((t.c=t).e=r).b=t,(r.c=r).e=t}function v(e,t){var r=e.c,n=t.c;r.b.e=t,(n.b.e=e).c=n,t.c=r}function b(e,t){var r=t.f,n=new $(t,r);for(r.e=n,r=(t.f=n).c=e;r.a=n,(r=r.c)!==e;);}function _(e,t){var r=t.d,n=new Z(t,r);for(r.b=n,(t.d=n).a=e,n.c=t.c,r=e;r.d=n,(r=r.e)!==e;);}function x(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function w(e,t){for(var r=e.c,n=r;n.a=t,(n=n.c)!==r;);r=e.f,((n=e.e).f=r).e=n}function j(e,t){for(var r=e.a,n=r;n.d=t,(n=n.e)!==r;);r=e.d,((n=e.b).d=r).b=n}function S(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t}function M(e,t){e.f+=t.f,e.b.f+=t.b.f}function E(e,t,r){return e=e.a,t=t.a,r=r.a,t.b.a===e?r.b.a===e?i(t.a,r.a)?s(r.b.a,t.a,r.a)<=0:0<=s(t.b.a,r.a,t.a):s(r.b.a,e,r.a)<=0:r.b.a===e?0<=s(t.b.a,e,t.a):(t=a(t.b.a,e,t.a),(e=a(r.b.a,e,r.a))<=t)}function T(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function O(e,t){p(e.a),e.c=!1,(e.a=t).i=e}function C(e){for(var t=e.a.a;(e=de(e)).a.a===t;);return e.c&&(O(e,t=m(ce(e).a.b,e.a.e)),e=de(e)),e}function L(e,t,r){var n=new ue;return n.a=r,n.e=H(e.f,t.e,n),r.i=n}function P(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function k(e){var t=e.a,r=t.d;r.c=e.d,r.a=t,T(e)}function A(e,t,r){for(t=(e=t).a;e!==r;){e.c=!1;var n=ce(e),o=n.a;if(o.a!==t.a){if(!n.c){k(e);break}O(n,o=m(t.c.b,o.b))}t.c!==o&&(h(K(o),o),h(t,o)),k(e),t=n.a,e=n}return t}function R(e,t,r,n,o,i){for(var a=!0;L(e,t,r.b),(r=r.c)!==n;);for(null===o&&(o=ce(t).a.b.c);(r=(n=ce(t)).a.b).a===o.a;)r.c!==o&&(h(K(r),r),h(K(o),r)),n.f=t.f-r.f,n.d=P(e,n.f),t.b=!0,!a&&N(e,t)&&(M(r,o),T(t),p(o)),a=!1,t=n,o=r;t.b=!0,i&&B(e,t)}function D(e,t,r,n,o){var i=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(i,r,n,e.c)||null,null===t.d&&(o?e.n||(Y(e,100156),e.n=!0):t.d=r[0])}function I(e,t,r){var n=[null,null,null,null];n[0]=t.a.d,n[1]=r.a.d,D(e,t.a,n,[.5,.5,0,0],!1),h(t,r)}function U(e,t,r,n,o){var i=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(r.b-e.b)+Math.abs(r.a-e.a),s=o+1;n[o]=.5*a/(i+a),n[s]=.5*i/(i+a),e.g[0]+=n[o]*t.g[0]+n[s]*r.g[0],e.g[1]+=n[o]*t.g[1]+n[s]*r.g[1],e.g[2]+=n[o]*t.g[2]+n[s]*r.g[2]}function N(e,t){var r=ce(t),n=t.a,a=r.a;if(i(n.a,a.a)){if(0<s(a.b.a,n.a,a.a))return!1;if(o(n.a,a.a)){if(n.a!==a.a){r=e.e;var l=n.a.h;if(0<=l){var u=(r=r.b).d,c=r.e,d=r.c,f=d[l];u[f]=u[r.a],(d[u[f]]=f)<=--r.a&&(f<=1?se(r,f):i(c[u[f>>1]],c[u[f]])?se(r,f):le(r,f)),c[l]=null,d[l]=r.b,r.b=l}else for(r.c[-(l+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;I(e,K(a),n)}}else y(a.b),h(n,K(a)),t.b=r.b=!0}else{if(s(n.b.a,a.a,n.a)<0)return!1;de(t).b=t.b=!0,y(n.b),h(K(a),n)}return!0}function F(e,t){var r=ce(t),n=t.a,f=r.a,p=n.a,m=f.a,g=n.b.a,v=f.b.a,b=new $;if(s(g,e.a,p),s(v,e.a,m),p===m||Math.min(p.a,g.a)>Math.max(m.a,v.a))return!1;if(i(p,m)){if(0<s(v,p,m))return!1}else if(s(g,m,p)<0)return!1;var _,x,w=g,j=p,S=v,M=m;if(i(w,j)||(_=w,w=j,j=_),i(S,M)||(_=S,S=M,M=_),i(w,S)||(_=w,w=S,S=_,_=j,j=M,M=_),i(S,j)?i(j,M)?((_=a(w,S,j))+(x=a(S,j,M))<0&&(_=-_,x=-x),b.b=d(_,S.b,x,j.b)):((_=s(w,S,j))+(x=-s(w,M,j))<0&&(_=-_,x=-x),b.b=d(_,S.b,x,M.b)):b.b=(S.b+j.b)/2,l(w,j)||(_=w,w=j,j=_),l(S,M)||(_=S,S=M,M=_),l(w,S)||(_=w,w=S,S=_,_=j,j=M,M=_),l(S,j)?l(j,M)?((_=u(w,S,j))+(x=u(S,j,M))<0&&(_=-_,x=-x),b.a=d(_,S.a,x,j.a)):((_=c(w,S,j))+(x=-c(w,M,j))<0&&(_=-_,x=-x),b.a=d(_,S.a,x,M.a)):b.a=(S.a+j.a)/2,i(b,e.a)&&(b.b=e.a.b,b.a=e.a.a),w=i(p,m)?p:m,i(w,b)&&(b.b=w.b,b.a=w.a),o(b,p)||o(b,m))return N(e,t),!1;if(!o(g,e.a)&&0<=s(g,e.a,b)||!o(v,e.a)&&s(v,e.a,b)<=0){if(v===e.a)return y(n.b),h(f.b,n),n=ce(t=C(t)).a,A(e,ce(t),r),R(e,t,K(n),n,n,!0),!0;if(g!==e.a)return 0<=s(g,e.a,b)&&(de(t).b=t.b=!0,y(n.b),n.a.b=e.a.b,n.a.a=e.a.a),s(v,e.a,b)<=0&&(t.b=r.b=!0,y(f.b),f.a.b=e.a.b,f.a.a=e.a.a),!1;for(y(f.b),h(n.e,K(f)),m=(p=r=t).a.b.a;(p=de(p)).a.b.a===m;);return p=ce(t=p).a.b.c,r.a=K(f),R(e,t,(f=A(e,r,null)).c,n.b.c,p,!0),!0}return y(n.b),y(f.b),h(K(f),n),n.a.b=b.b,n.a.a=b.a,n.a.h=te(e.e,n.a),n=n.a,f=[0,0,0,0],b=[p.d,g.d,m.d,v.d],n.g[0]=n.g[1]=n.g[2]=0,U(n,p,g,f,0),U(n,m,v,f,2),D(e,n,b,f,!0),de(t).b=t.b=r.b=!0,!1}function B(e,t){for(var r=ce(t);;){for(;r.b;)r=ce(t=r);if(!(t.b||null!==(t=de(r=t))&&t.b))break;t.b=!1;var n,o=t.a,a=r.a;if(n=o.b.a!==a.b.a)e:{var l=ce(n=t),u=n.a,c=l.a,d=void 0;if(i(u.b.a,c.b.a)){if(s(u.b.a,c.b.a,u.a)<0){n=!1;break e}de(n).b=n.b=!0,d=y(u),h(c.b,d),d.d.c=n.d}else{if(0<s(c.b.a,u.b.a,c.a)){n=!1;break e}n.b=l.b=!0,d=y(c),h(u.e,c.b),d.b.d.c=n.d}n=!0}if(n&&(r.c?(T(r),p(a),a=(r=ce(t)).a):t.c&&(T(t),p(o),o=(t=de(r)).a)),o.a!==a.a)if(o.b.a===a.b.a||t.c||r.c||o.b.a!==e.a&&a.b.a!==e.a)N(e,t);else if(F(e,t))break;o.a===a.a&&o.b.a===a.b.a&&(M(a,o),T(t),p(o),t=de(r))}}function G(e,t){for(var r=(e.a=t).c;null===r.i;)if((r=r.c)===t.c){r=e;var n=t;(u=new ue).a=n.c.b;for(var a=(d=r.f).a;null!==(a=a.a).b&&!d.c(d.b,u,a.b););var l=ce(d=a.b),u=d.a;if(a=l.a,0===s(u.b.a,n,u.a))o((u=d.a).a,n)||o(u.b.a,n)||(y(u.b),d.c&&(p(u.c),d.c=!1),h(n.c,u),G(r,n));else{var c=i(a.b.a,u.b.a)?d:l;l=void 0,d.d||c.c?(l=c===d?m(n.c.b,u.e):m(a.b.c.b,n.c).b,c.c?O(c,l):((d=L(u=r,d,l)).f=de(d).f+d.a.f,d.d=P(u,d.f)),G(r,n)):R(r,d,n.c,n.c,null,!0)}return}if(d=(u=ce(r=C(r.i))).a,(u=A(e,u,null)).c===d){u=(d=u).c,a=ce(r),l=r.a,c=a.a;var d,f=!1;l.b.a!==c.b.a&&F(e,r),o(l.a,e.a)&&(h(K(u),l),u=ce(r=C(r)).a,A(e,ce(r),a),f=!0),o(c.a,e.a)&&(h(d,K(c)),d=A(e,a,null),f=!0),f?R(e,r,d.c,u,u,!0):(n=i(c.a,l.a)?K(c):l,R(e,r,n=m(d.c.b,n),n.c,n.c,!1),n.b.i.c=!0,B(e,r))}else R(e,r,u.c,d,d,!0)}function V(e,t){var r=new ue,n=f(e.b);n.a.b=4e150,n.a.a=t,n.b.a.b=-4e150,n.b.a.a=t,e.a=n.b.a,r.a=n,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,n=H(n=e.f,n.a,r),r.e=n}function z(e){this.a=new W,this.b=e,this.c=E}function H(e,t,r){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,r););return e=new W(r,t.a,t),t.a.c=e,t.a=e}function W(e,t,r){this.b=e||null,this.a=t||this,this.c=r||this}function q(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function X(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:Y(e,100151),e.u(null);break;case 1:Y(e,100152),e.t()}else switch(e.d){case 2:Y(e,100154),e.v();break;case 1:Y(e,100153),e.w()}}function Y(e,t){e.p&&e.p(t,e.c)}function Z(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function Q(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function K(e){return e.b.e}function J(){this.c=new $,this.a=new Z,this.b=new Q,this.d=new Q,this.b.b=this.d,this.d.b=this.b}function $(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function ee(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new ne}function te(e,t){if(e.e){var r,n=e.b,o=++n.a;return 2*o>n.f&&(n.f*=2,n.c=oe(n.c,n.f+1)),0===n.b?r=o:(r=n.b,n.b=n.c[n.b]),n.e[r]=t,n.c[r]=o,n.d[o]=r,n.h&&le(n,o),r}return n=e.a++,e.c[n]=t,-(n+1)}function re(e){if(0===e.a)return ae(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&i(ie(e.b),t))return ae(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function ne(){this.d=oe([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function oe(e,t){for(var r=Array(t),n=0;n<e.length;n++)r[n]=e[n];for(;n<t;n++)r[n]=0;return r}function ie(e){return e.e[e.d[1]]}function ae(e){var t=e.d,r=e.e,n=e.c,o=t[1],i=r[o];return 0<e.a&&(t[1]=t[e.a],n[t[1]]=1,r[o]=null,n[o]=e.b,e.b=o,0<--e.a&&se(e,1)),i}function se(e,t){for(var r=e.d,n=e.e,o=e.c,a=t,s=r[a];;){var l=a<<1;l<e.a&&i(n[r[l+1]],n[r[l]])&&(l+=1);var u=r[l];if(l>e.a||i(n[s],n[u])){o[r[a]=s]=a;break}o[r[a]=u]=a,a=l}}function le(e,t){for(var r=e.d,n=e.e,o=e.c,a=t,s=r[a];;){var l=a>>1,u=r[l];if(0==l||i(n[u],n[s])){o[r[a]=s]=a;break}o[r[a]=u]=a,a=l}}function ue(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ce(e){return e.e.c.b}function de(e){return e.e.a.b}(n=q.prototype).x=function(){X(this,0)},n.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void Y(this,100900)}Y(this,100901)},n.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Y(this,100900)}return!1},n.A=function(e,t,r){this.j[0]=e,this.j[1]=t,this.j[2]=r},n.z=function(e,t){var r=t||null;switch(e){case 100100:case 100106:this.h=r;break;case 100104:case 100110:this.l=r;break;case 100101:case 100107:this.k=r;break;case 100102:case 100108:this.i=r;break;case 100103:case 100109:this.p=r;break;case 100105:case 100111:this.o=r;break;case 100112:this.r=r;break;default:Y(this,100900)}},n.C=function(e,t){var r=!1,n=[0,0,0];X(this,2);for(var o=0;o<3;++o){var i=e[o];i<-1e150&&(i=-1e150,r=!0),1e150<i&&(i=1e150,r=!0),n[o]=i}r&&Y(this,100155),null===(r=this.q)?h(r=f(this.b),r.b):(y(r),r=r.e),r.a.d=t,r.a.g[0]=n[0],r.a.g[1]=n[1],r.a.g[2]=n[2],r.f=1,r.b.f=-1,this.q=r},n.u=function(e){X(this,0),this.d=1,this.b=new J,this.c=e},n.t=function(){X(this,1),this.d=2,this.q=null},n.v=function(){X(this,2),this.d=1},n.w=function(){X(this,1),this.d=0;var e,t,r=!1,n=[d=this.j[0],a=this.j[1],u=this.j[2]];if(0===d&&0===a&&0===u){for(var a=[-2e150,-2e150,-2e150],l=[2e150,2e150,2e150],u=[],c=[],d=(r=this.b.c).e;d!==r;d=d.e)for(var f=0;f<3;++f){var h=d.g[f];h<l[f]&&(l[f]=h,c[f]=d),h>a[f]&&(a[f]=h,u[f]=d)}if(d=0,a[1]-l[1]>a[0]-l[0]&&(d=1),a[2]-l[2]>a[d]-l[d]&&(d=2),l[d]>=a[d])n[0]=0,n[1]=0,n[2]=1;else{for(a=0,l=c[d],u=u[d],c=[0,0,0],l=[l.g[0]-u.g[0],l.g[1]-u.g[1],l.g[2]-u.g[2]],f=[0,0,0],d=r.e;d!==r;d=d.e)f[0]=d.g[0]-u.g[0],f[1]=d.g[1]-u.g[1],f[2]=d.g[2]-u.g[2],c[0]=l[1]*f[2]-l[2]*f[1],c[1]=l[2]*f[0]-l[0]*f[2],c[2]=l[0]*f[1]-l[1]*f[0],a<(h=c[0]*c[0]+c[1]*c[1]+c[2]*c[2])&&(a=h,n[0]=c[0],n[1]=c[1],n[2]=c[2]);a<=0&&(n[0]=n[1]=n[2]=0,n[S(l)]=1)}r=!0}for(c=S(n),d=this.b.c,a=(c+1)%3,u=(c+2)%3,c=0<n[c]?1:-1,n=d.e;n!==d;n=n.e)n.b=n.g[a],n.a=c*n.g[u];if(r){for(n=0,d=(r=this.b.a).b;d!==r;d=d.b)if(!((a=d.a).f<=0))for(;n+=(a.a.b-a.b.a.b)*(a.a.a+a.b.a.a),(a=a.e)!==d.a;);if(n<0)for(r=(n=this.b.c).e;r!==n;r=r.e)r.a=-r.a}for(this.n=!1,d=(n=this.b.b).h;d!==n;d=r)r=d.h,a=d.e,o(d.a,d.b.a)&&d.e.e!==d&&(I(this,a,d),p(d),a=(d=a).e),a.e===d&&(a!==d&&(a!==r&&a!==r.b||(r=r.h),p(a)),d!==r&&d!==r.b||(r=r.h),p(d));for(this.e=n=new ee,d=(r=this.b.c).e;d!==r;d=d.e)d.h=te(n,d);for(function(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;var r;e.d.sort((r=e.c,function(e,t){return i(r[e],r[t])?1:-1})),e.e=!0,function(e){for(var t=e.a;1<=t;--t)se(e,t);e.h=!0}(e.b)}(n),this.f=new z(this),V(this,-4e150),V(this,4e150);null!==(n=re(this.e));){for(;;){e:if(d=this.e,0===d.a)r=ie(d.b);else if(r=d.c[d.d[d.a-1]],0!==d.b.a&&(d=ie(d.b),i(d,r))){r=d;break e}if(null===r||!o(r,n))break;r=re(this.e),I(this,n.c,r.c)}G(this,n)}for(this.a=this.f.a.a.b.a.a,n=0;null!==(r=this.f.a.a.b);)r.h||++n,T(r);for(this.f=null,(n=this.e).b=null,n.d=null,this.e=n.c=null,d=(n=this.b).a.b;d!==n.a;d=r)r=d.b,(d=d.a).e.e===d&&(M(d.c,d),p(d));if(!this.n){if(n=this.b,this.m)for(d=n.b.h;d!==n.b;d=r)r=d.h,d.b.d.c!==d.d.c?d.f=d.d.c?1:-1:p(d);else for(d=n.a.b;d!==n.a;d=r)if(r=d.b,d.c){for(d=d.a;i(d.b.a,d.a);d=d.c.b);for(;i(d.a,d.b.a);d=d.e);for(a=d.c.b,u=void 0;d.e!==a;)if(i(d.b.a,a.a)){for(;a.e!==d&&(i((t=a.e).b.a,t.a)||s(a.a,a.b.a,a.e.b.a)<=0);)a=(u=m(a.e,a)).b;a=a.c.b}else{for(;a.e!==d&&(i((e=d.c.b).a,e.b.a)||0<=s(d.b.a,d.a,d.c.b.a));)d=(u=m(d,d.c.b)).b;d=d.e}for(;a.e.e!==d;)a=(u=m(a.e,a)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(r=(n=this.b).a.b;r!==n.a;r=r.b)if(r.c){for(this.h&&this.h(2,this.c),d=r.a;this.k&&this.k(d.a.d,this.c),(d=d.e)!==r.a;);this.i&&this.i(this.c)}}else{for(n=this.b,r=!!this.l,d=!1,a=-1,u=n.a.d;u!==n.a;u=u.d)if(u.c)for(d||(this.h&&this.h(4,this.c),d=!0),c=u.a;r&&a!==(l=c.b.d.c?0:1)&&(a=l,this.l&&this.l(!!a,this.c)),this.k&&this.k(c.a.d,this.c),(c=c.e)!==u.a;);d&&this.i&&this.i(this.c)}if(this.r){for(d=(n=this.b).a.b;d!==n.a;d=r)if(r=d.b,!d.c){for(u=(a=d.a).e,c=void 0;u=(c=u).e,(c.d=null)===c.b.d&&(c.c===c?w(c.a,null):(c.a.c=c.c,v(c,K(c))),(l=c.b).c===l?w(l.a,null):(l.a.c=l.c,v(l,K(l))),x(c)),c!==a;);a=d.d,((d=d.b).d=a).b=d}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:q,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},q.prototype.gluDeleteTess=q.prototype.x,q.prototype.gluTessProperty=q.prototype.B,q.prototype.gluGetTessProperty=q.prototype.y,q.prototype.gluTessNormal=q.prototype.A,q.prototype.gluTessCallback=q.prototype.z,q.prototype.gluTessVertex=q.prototype.C,q.prototype.gluTessBeginPolygon=q.prototype.u,q.prototype.gluTessBeginContour=q.prototype.t,q.prototype.gluTessEndContour=q.prototype.v,q.prototype.gluTessEndPolygon=q.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],238:[function(e,t,r){"use strict";function n(e,t,r,n){for(var o=e[t++],i=1<<o,a=1+i,s=1+a,l=o+1,u=(1<<l)-1,c=0,d=0,f=0,h=e[t++],p=new Int32Array(4096),y=null;;){for(;c<16&&0!==h;)d|=e[t++]<<c,c+=8,1===h?h=e[t++]:--h;if(c<l)break;var m=d&u;if(d>>=l,c-=l,m!=i){if(m==a)break;for(var g=m<s?m:y,v=0,b=g;i<b;)b=p[b]>>8,++v;var _=b;if(n<f+v+(g!==m?1:0))return void console.log("Warning, gif stream longer than expected.");r[f++]=_;var x=f+=v;for(g!==m&&(r[f++]=_),b=g;v--;)b=p[b],r[--x]=255&b,b>>=8;null!==y&&s<4096&&(p[s++]=y<<8|_,u+1<=s&&l<12&&(++l,u=u<<1|1)),y=m}else s=1+a,u=(1<<(l=o+1))-1,y=null}return f!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=function(e,t,r,n){var o=0,i=void 0===(n=void 0===n?{}:n).loop?null:n.loop,a=void 0===n.palette?null:n.palette;if(t<=0||r<=0||65535<t||65535<r)throw new Error("Width/Height invalid.");function s(e){var t=e.length;if(t<2||256<t||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}e[o++]=71,e[o++]=73,e[o++]=70,e[o++]=56,e[o++]=57,e[o++]=97;var l=0,u=0;if(null!==a){for(var c=s(a);c>>=1;)++l;if(c=1<<l,--l,void 0!==n.background){if(c<=(u=n.background))throw new Error("Background index out of range.");if(0===u)throw new Error("Background index explicitly passed as 0.")}}if(e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=(null!==a?128:0)|l,e[o++]=u,e[o++]=0,null!==a)for(var d=0,f=a.length;d<f;++d){var h=a[d];e[o++]=h>>16&255,e[o++]=h>>8&255,e[o++]=255&h}if(null!==i){if(i<0||65535<i)throw new Error("Loop count invalid.");e[o++]=33,e[o++]=255,e[o++]=11,e[o++]=78,e[o++]=69,e[o++]=84,e[o++]=83,e[o++]=67,e[o++]=65,e[o++]=80,e[o++]=69,e[o++]=50,e[o++]=46,e[o++]=48,e[o++]=3,e[o++]=1,e[o++]=255&i,e[o++]=i>>8&255,e[o++]=0}var p=!1;this.addFrame=function(t,r,n,i,l,u){if(!0===p&&(--o,p=!1),u=void 0===u?{}:u,t<0||r<0||65535<t||65535<r)throw new Error("x/y invalid.");if(n<=0||i<=0||65535<n||65535<i)throw new Error("Width/Height invalid.");if(l.length<n*i)throw new Error("Not enough pixels for the frame size.");var c=!0,d=u.palette;if(null==d&&(c=!1,d=a),null==d)throw new Error("Must supply either a local or global palette.");for(var f=s(d),h=0;f>>=1;)++h;f=1<<h;var y=void 0===u.delay?0:u.delay,m=void 0===u.disposal?0:u.disposal;if(m<0||3<m)throw new Error("Disposal out of range.");var g=!1,v=0;if(void 0!==u.transparent&&null!==u.transparent&&(g=!0,(v=u.transparent)<0||f<=v))throw new Error("Transparent color index.");if(0===m&&!g&&0===y||(e[o++]=33,e[o++]=249,e[o++]=4,e[o++]=m<<2|(!0===g?1:0),e[o++]=255&y,e[o++]=y>>8&255,e[o++]=v,e[o++]=0),e[o++]=44,e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=255&i,e[o++]=i>>8&255,e[o++]=!0===c?128|h-1:0,!0===c)for(var b=0,_=d.length;b<_;++b){var x=d[b];e[o++]=x>>16&255,e[o++]=x>>8&255,e[o++]=255&x}return o=function(e,t,r,n){e[t++]=r;var o=t++,i=1<<r,a=i-1,s=1+i,l=1+s,u=r+1,c=0,d=0;function f(r){for(;r<=c;)e[t++]=255&d,d>>=8,c-=8,t===o+256&&(e[o]=255,o=t++)}function h(e){d|=e<<c,c+=u,f(8)}var p=n[0]&a,y={};h(i);for(var m=1,g=n.length;m<g;++m){var v=n[m]&a,b=p<<8|v,_=y[b];if(void 0===_){for(d|=p<<c,c+=u;8<=c;)e[t++]=255&d,d>>=8,c-=8,t===o+256&&(e[o]=255,o=t++);4096===l?(h(i),l=1+s,u=r+1,y={}):(1<<u<=l&&++u,y[b]=l++),p=v}else p=_}return h(p),h(s),f(1),o+1===t?e[o]=0:(e[o]=t-o-1,e[t++]=0),t}(e,o,h<2?2:h,l)},this.end=function(){return!1===p&&(e[o++]=59,p=!0),o},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return o},this.setOutputBufferPosition=function(e){o=e}},r.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,o=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,s=1<<1+(7&i);e[t++],e[t++];var l=null,u=null;a&&(l=t,t+=3*(u=s));var c=!0,d=[],f=0,h=null,p=0,y=null;for(this.width=r,this.height=o;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(T=e[t++])))throw Error("Invalid block size");if(0===T)break;t+=T}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],0==(1&m)&&(h=null),p=m>>2&7,t++;break;case 254:for(;;){if(!(0<=(T=e[t++])))throw Error("Invalid block size");if(0===T)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,x=e[t++],w=x>>6&1,j=l,S=u,M=!1;x>>7&&(M=!0,j=t,t+=3*(S=1<<1+(7&x)));var E=t;for(t++;;){var T;if(!(0<=(T=e[t++])))throw Error("Invalid block size");if(0===T)break;t+=T}d.push({x:g,y:v,width:b,height:_,has_local_palette:M,palette_offset:j,palette_size:S,data_offset:E,data_length:t-E,transparent_index:h,interlaced:!!w,delay:f,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return y},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,o){var i=this.frameInfo(t),a=i.width*i.height,s=new Uint8Array(a);n(e,i.data_offset,s,a);var l=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var c=i.width,d=r-c,f=c,h=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),y=h,m=4*d;!0===i.interlaced&&(m+=4*r*7);for(var g=8,v=0,b=s.length;v<b;++v){var _=s[v];if(0===f&&(f=c,p<=(y+=m)&&(m=4*d+4*r*(g-1),y=h+(c+d)*(g<<1),g>>=1)),_===u)y+=4;else{var x=e[l+3*_],w=e[l+3*_+1],j=e[l+3*_+2];o[y++]=j,o[y++]=w,o[y++]=x,o[y++]=255}--f}},this.decodeAndBlitFrameRGBA=function(t,o){var i=this.frameInfo(t),a=i.width*i.height,s=new Uint8Array(a);n(e,i.data_offset,s,a);var l=i.palette_offset,u=i.transparent_index;null===u&&(u=256);var c=i.width,d=r-c,f=c,h=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),y=h,m=4*d;!0===i.interlaced&&(m+=4*r*7);for(var g=8,v=0,b=s.length;v<b;++v){var _=s[v];if(0===f&&(f=c,p<=(y+=m)&&(m=4*d+4*r*(g-1),y=h+(c+d)*(g<<1),g>>=1)),_===u)y+=4;else{var x=e[l+3*_],w=e[l+3*_+1],j=e[l+3*_+2];o[y++]=x,o[y++]=w,o[y++]=j,o[y++]=255}--f}}}}catch(e){}},{}],239:[function(e,t,r){(function(n){(function(t){"use strict";function r(e){if(null==this)throw TypeError();var t=String(this),r=t.length,n=e?Number(e):0;if(n!=n&&(n=0),!(n<0||r<=n)){var o,i=t.charCodeAt(n);return 55296<=i&&i<=56319&&n+1<r&&56320<=(o=t.charCodeAt(n+1))&&o<=57343?1024*(i-55296)+o-56320+65536:i}}var o;String.prototype.codePointAt||((o=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}())?o(String.prototype,"codePointAt",{value:r,configurable:!0,writable:!0}):String.prototype.codePointAt=r);var i=0,a=-3;function s(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function l(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new s,this.dtree=new s}var u=new s,c=new s,d=new Uint8Array(30),f=new Uint16Array(30),h=new Uint8Array(30),p=new Uint16Array(30),y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=new s,g=new Uint8Array(320);function v(e,t,r,n){var o,i;for(o=0;o<r;++o)e[o]=0;for(o=0;o<30-r;++o)e[o+r]=o/r|0;for(i=n,o=0;o<30;++o)t[o]=i,i+=1<<e[o]}var b=new Uint16Array(16);function _(e,t,r,n){var o,i;for(o=0;o<16;++o)e.table[o]=0;for(o=0;o<n;++o)e.table[t[r+o]]++;for(o=i=e.table[0]=0;o<16;++o)b[o]=i,i+=e.table[o];for(o=0;o<n;++o)t[r+o]&&(e.trans[b[t[r+o]]++]=o)}function x(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function w(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function j(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var r=0,n=0,o=0,i=e.tag;n=2*n+(1&i),i>>>=1,++o,r+=t.table[o],0<=(n-=t.table[o]););return e.tag=i,e.bitcount-=o,t.trans[r+n]}function S(e,t,r){var n,o,i,a,s,l;for(n=w(e,5,257),o=w(e,5,1),i=w(e,4,4),a=0;a<19;++a)g[a]=0;for(a=0;a<i;++a){var u=w(e,3,0);g[y[a]]=u}for(_(m,g,0,19),s=0;s<n+o;){var c=j(e,m);switch(c){case 16:var d=g[s-1];for(l=w(e,2,3);l;--l)g[s++]=d;break;case 17:for(l=w(e,3,3);l;--l)g[s++]=0;break;case 18:for(l=w(e,7,11);l;--l)g[s++]=0;break;default:g[s++]=c}}_(t,g,0,n),_(r,g,n,o)}function M(e,t,r){for(;;){var n,o,a,s,l=j(e,t);if(256===l)return i;if(l<256)e.dest[e.destLen++]=l;else for(n=w(e,d[l-=257],f[l]),o=j(e,r),s=a=e.destLen-w(e,h[o],p[o]);s<a+n;++s)e.dest[e.destLen++]=e.dest[s]}}function E(e){for(var t,r;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return a;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,i}!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(u,c),v(d,f,4,3),v(h,p,2,1),d[28]=0,f[28]=258;var T=function(e,t){var r,n,o=new l(e,t);do{switch(r=x(o),w(o,2,0)){case 0:n=E(o);break;case 1:n=M(o,u,c);break;case 2:S(o,o.ltree,o.dtree),n=M(o,o.ltree,o.dtree);break;default:n=a}if(n!==i)throw new Error("Data error")}while(!r);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest};function O(e,t,r,n,o){return Math.pow(1-o,3)*e+3*Math.pow(1-o,2)*o*t+3*(1-o)*Math.pow(o,2)*r+Math.pow(o,3)*n}function C(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function L(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function P(e){throw new Error(e)}function k(e,t){e||P(t)}C.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},C.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},C.prototype.addX=function(e){this.addPoint(e,null)},C.prototype.addY=function(e){this.addPoint(null,e)},C.prototype.addBezier=function(e,t,r,n,o,i,a,s){var l=[e,t],u=[r,n],c=[o,i],d=[a,s];this.addPoint(e,t),this.addPoint(a,s);for(var f=0;f<=1;f++){var h=6*l[f]-12*u[f]+6*c[f],p=-3*l[f]+9*u[f]-9*c[f]+3*d[f],y=3*u[f]-3*l[f];if(0!=p){var m=Math.pow(h,2)-4*y*p;if(!(m<0)){var g=(-h+Math.sqrt(m))/(2*p);0<g&&g<1&&(0===f&&this.addX(O(l[f],u[f],c[f],d[f],g)),1===f&&this.addY(O(l[f],u[f],c[f],d[f],g)));var v=(-h-Math.sqrt(m))/(2*p);0<v&&v<1&&(0===f&&this.addX(O(l[f],u[f],c[f],d[f],v)),1===f&&this.addY(O(l[f],u[f],c[f],d[f],v)))}}else{if(0==h)continue;var b=-y/h;0<b&&b<1&&(0===f&&this.addX(O(l[f],u[f],c[f],d[f],b)),1===f&&this.addY(O(l[f],u[f],c[f],d[f],b)))}}},C.prototype.addQuad=function(e,t,r,n,o,i){var a=e+2/3*(r-e),s=t+2/3*(n-t),l=a+1/3*(o-e),u=s+1/3*(i-t);this.addBezier(e,t,a,s,l,u,o,i)},L.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},L.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},L.prototype.curveTo=L.prototype.bezierCurveTo=function(e,t,r,n,o,i){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:o,y:i})},L.prototype.quadTo=L.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},L.prototype.close=L.prototype.closePath=function(){this.commands.push({type:"Z"})},L.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof C){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},L.prototype.getBoundingBox=function(){for(var e=new C,t=0,r=0,n=0,o=0,i=0;i<this.commands.length;i++){var a=this.commands[i];switch(a.type){case"M":e.addPoint(a.x,a.y),t=n=a.x,r=o=a.y;break;case"L":e.addPoint(a.x,a.y),n=a.x,o=a.y;break;case"Q":e.addQuad(n,o,a.x1,a.y1,a.x,a.y),n=a.x,o=a.y;break;case"C":e.addBezier(n,o,a.x1,a.y1,a.x2,a.y2,a.x,a.y),n=a.x,o=a.y;break;case"Z":n=t,o=r;break;default:throw new Error("Unexpected path command "+a.type)}}return e.isEmpty()&&e.addPoint(0,0),e},L.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},L.prototype.toPathData=function(e){function t(){for(var t,r=arguments,n="",o=0;o<arguments.length;o+=1){var i=r[o];0<=i&&0<o&&(n+=" "),n+=(t=i,Math.round(t)===t?""+Math.round(t):t.toFixed(e))}return n}e=void 0!==e?e:2;for(var r="",n=0;n<this.commands.length;n+=1){var o=this.commands[n];"M"===o.type?r+="M"+t(o.x,o.y):"L"===o.type?r+="L"+t(o.x,o.y):"C"===o.type?r+="C"+t(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?r+="Q"+t(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(r+="Z")}return r},L.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},L.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var A={fail:P,argument:k,assert:k},R={},D={},I={};function U(e){return function(){return e}}D.BYTE=function(e){return A.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},I.BYTE=U(1),D.CHAR=function(e){return[e.charCodeAt(0)]},I.CHAR=U(1),D.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},I.CHARARRAY=function(e){return e.length},D.USHORT=function(e){return[e>>8&255,255&e]},I.USHORT=U(2),D.SHORT=function(e){return 32768<=e&&(e=-(65536-e)),[e>>8&255,255&e]},I.SHORT=U(2),D.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},I.UINT24=U(3),D.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},I.ULONG=U(4),D.LONG=function(e){return 2147483648<=e&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},I.LONG=U(4),D.FIXED=D.ULONG,I.FIXED=I.ULONG,D.FWORD=D.SHORT,I.FWORD=I.SHORT,D.UFWORD=D.USHORT,I.UFWORD=I.USHORT,D.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},I.LONGDATETIME=U(8),D.TAG=function(e){return A.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},I.TAG=U(4),D.Card8=D.BYTE,I.Card8=I.BYTE,D.Card16=D.USHORT,I.Card16=I.USHORT,D.OffSize=D.BYTE,I.OffSize=I.BYTE,D.SID=D.USHORT,I.SID=I.USHORT,D.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?D.NUMBER16(e):D.NUMBER32(e)},I.NUMBER=function(e){return D.NUMBER(e).length},D.NUMBER16=function(e){return[28,e>>8&255,255&e]},I.NUMBER16=U(3),D.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},I.NUMBER32=U(5),D.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}for(var o="",i=0,a=t.length;i<a;i+=1){var s=t[i];o+="e"===s?"-"===t[++i]?"c":"b":"."===s?"a":"-"===s?"e":s}for(var l=[30],u=0,c=(o+=1&o.length?"f":"ff").length;u<c;u+=2)l.push(parseInt(o.substr(u,2),16));return l},I.REAL=function(e){return D.REAL(e).length},D.NAME=D.CHARARRAY,I.NAME=I.CHARARRAY,D.STRING=D.CHARARRAY,I.STRING=I.CHARARRAY,R.UTF8=function(e,t,r){for(var n=[],o=r,i=0;i<o;i++,t+=1)n[i]=e.getUint8(t);return String.fromCharCode.apply(null,n)},R.UTF16=function(e,t,r){for(var n=[],o=r/2,i=0;i<o;i++,t+=2)n[i]=e.getUint16(t);return String.fromCharCode.apply(null,n)},D.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e.charCodeAt(r);t[t.length]=n>>8&255,t[t.length]=255&n}return t},I.UTF16=function(e){return 2*e.length};var N={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};R.MACSTRING=function(e,t,r,n){var o=N[n];if(void 0!==o){for(var i="",a=0;a<r;a++){var s=e.getUint8(t+a);i+=s<=127?String.fromCharCode(s):o[127&s]}return i}};var F,B="function"==typeof WeakMap&&new WeakMap;function G(e){return-128<=e&&e<=127}function V(e,t,r){for(var n=0,o=e.length;t<o&&n<64&&0===e[t];)++t,++n;return r.push(128|n-1),t}function z(e,t,r){for(var n=0,o=e.length,i=t;i<o&&n<64;){var a=e[i];if(!G(a))break;if(0===a&&i+1<o&&0===e[i+1])break;++i,++n}r.push(n-1);for(var s=t;s<i;++s)r.push(e[s]+256&255);return i}function H(e,t,r){for(var n=0,o=e.length,i=t;i<o&&n<64;){var a=e[i];if(0===a)break;if(G(a)&&i+1<o&&G(e[i+1]))break;++i,++n}r.push(64|n-1);for(var s=t;s<i;++s){var l=e[s];r.push(l+65536>>8&255,l+256&255)}return i}D.MACSTRING=function(e,t){var r=function(e){if(!F)for(var t in F={},N)F[t]=new String(t);var r=F[e];if(void 0!==r){if(B){var n=B.get(r);if(void 0!==n)return n}var o=N[e];if(void 0!==o){for(var i={},a=0;a<o.length;a++)i[o.charCodeAt(a)]=a+128;return B&&B.set(r,i),i}}}(t);if(void 0!==r){for(var n=[],o=0;o<e.length;o++){var i=e.charCodeAt(o);if(128<=i&&void 0===(i=r[i]))return;n[o]=i}return n}},I.MACSTRING=function(e,t){var r=D.MACSTRING(e,t);return void 0!==r?r.length:0},D.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var n=e[t];t=0===n?V(e,t,r):-128<=n&&n<=127?z(e,t,r):H(e,t,r)}return r},D.INDEX=function(e){for(var t=1,r=[t],n=[],o=0;o<e.length;o+=1){var i=D.OBJECT(e[o]);Array.prototype.push.apply(n,i),t+=i.length,r.push(t)}if(0===n.length)return[0,0];for(var a=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,D.BYTE,D.USHORT,D.UINT24,D.ULONG][s],u=0;u<r.length;u+=1){var c=l(r[u]);Array.prototype.push.apply(a,c)}return Array.prototype.concat(D.Card16(e.length),D.OffSize(s),a,n)},I.INDEX=function(e){return D.INDEX(e).length},D.DICT=function(e){for(var t=[],r=Object.keys(e),n=r.length,o=0;o<n;o+=1){var i=parseInt(r[o],0),a=e[i];t=(t=t.concat(D.OPERAND(a.value,a.type))).concat(D.OPERATOR(i))}return t},I.DICT=function(e){return D.DICT(e).length},D.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},D.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)A.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(D.OPERAND(e[n],t[n]));else if("SID"===t)r=r.concat(D.NUMBER(e));else if("offset"===t)r=r.concat(D.NUMBER32(e));else if("number"===t)r=r.concat(D.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(D.REAL(e))}return r},D.OP=D.BYTE,I.OP=I.BYTE;var W="function"==typeof WeakMap&&new WeakMap;function q(e,t,r){for(var n=0;n<t.length;n+=1){var o=t[n];this[o.name]=o.value}if(this.tableName=e,this.fields=t,r)for(var i=Object.keys(r),a=0;a<i.length;a+=1){var s=i[a],l=r[s];void 0!==this[s]&&(this[s]=l)}}function X(e,t,r){void 0===r&&(r=t.length);var n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<t.length;o++)n[o+1]={name:e+o,type:"USHORT",value:t[o]};return n}function Y(e,t,r){var n=t.length,o=new Array(n+1);o[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<n;i++)o[i+1]={name:e+i,type:"TABLE",value:r(t[i],i)};return o}function Z(e,t,r){var n=t.length,o=[];o[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<n;i++)o=o.concat(r(t[i],i));return o}function Q(e){1===e.format?q.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(X("glyph",e.glyphs))):A.assert(!1,"Can't create coverage table format 2 yet.")}function K(e){q.call(this,"scriptListTable",Z("scriptRecord",e,function(e,t){var r=e.script,n=r.defaultLangSys;return A.assert(!!n,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new q("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new q("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(X("featureIndex",n.featureIndexes)))}].concat(Z("langSys",r.langSysRecords,function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new q("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(X("featureIndex",r.featureIndexes)))}]})))}]}))}function J(e){q.call(this,"featureListTable",Z("featureRecord",e,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new q("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(X("lookupListIndex",r.lookupListIndexes)))}]}))}function $(e,t){q.call(this,"lookupListTable",Y("lookup",e,function(e){var r=t[e.lookupType];return A.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new q("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(Y("subtable",e.subtables,r)))}))}D.CHARSTRING=function(e){if(W){var t=W.get(e);if(void 0!==t)return t}for(var r=[],n=e.length,o=0;o<n;o+=1){var i=e[o];r=r.concat(D[i.type](i.value))}return W&&W.set(e,r),r},I.CHARSTRING=function(e){return D.CHARSTRING(e).length},D.OBJECT=function(e){var t=D[e.type];return A.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},I.OBJECT=function(e){var t=I[e.type];return A.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},D.TABLE=function(e){for(var t=[],r=e.fields.length,n=[],o=[],i=0;i<r;i+=1){var a=e.fields[i],s=D[a.type];A.argument(void 0!==s,"No encoding function for field type "+a.type+" ("+a.name+")");var l=e[a.name];void 0===l&&(l=a.value);var u=s(l);"TABLE"===a.type?(o.push(t.length),t=t.concat([0,0]),n.push(u)):t=t.concat(u)}for(var c=0;c<n.length;c+=1){var d=o[c],f=t.length;A.argument(f<65536,"Table "+e.tableName+" too big."),t[d]=f>>8,t[d+1]=255&f,t=t.concat(n[c])}return t},I.TABLE=function(e){for(var t=0,r=e.fields.length,n=0;n<r;n+=1){var o=e.fields[n],i=I[o.type];A.argument(void 0!==i,"No sizeOf function for field type "+o.type+" ("+o.name+")");var a=e[o.name];void 0===a&&(a=o.value),t+=i(a),"TABLE"===o.type&&(t+=2)}return t},D.RECORD=D.TABLE,I.RECORD=I.TABLE,D.LITERAL=function(e){return e},I.LITERAL=function(e){return e.length},q.prototype.encode=function(){return D.TABLE(this)},q.prototype.sizeOf=function(){return I.TABLE(this)};var ee={Table:q,Record:q,Coverage:(Q.prototype=Object.create(q.prototype)).constructor=Q,ScriptList:(K.prototype=Object.create(q.prototype)).constructor=K,FeatureList:(J.prototype=Object.create(q.prototype)).constructor=J,LookupList:($.prototype=Object.create(q.prototype)).constructor=$,ushortList:X,tableList:Y,recordList:Z};function te(e,t){return e.getUint8(t)}function re(e,t){return e.getUint16(t,!1)}function ne(e,t){return e.getUint32(t,!1)}function oe(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var ie={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ae(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ae.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseCard8=ae.prototype.parseByte,ae.prototype.parseCard16=ae.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseSID=ae.prototype.parseUShort,ae.prototype.parseOffset16=ae.prototype.parseUShort,ae.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ae.prototype.parseOffset32=ae.prototype.parseULong=function(){var e=ne(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseFixed=function(){var e=oe(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var o=0;o<e;o++)n+=String.fromCharCode(t.getUint8(r+o));return n},ae.prototype.parseTag=function(){return this.parseString(4)},ae.prototype.parseLongDateTime=function(){var e=ne(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ae.prototype.parseVersion=function(e){var t=re(this.data,this.offset+this.relativeOffset),r=re(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},ae.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=ie[e]*t},ae.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUint32(n),n+=4;return this.relativeOffset+=4*e,t},ae.prototype.parseOffset16List=ae.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUint16(n),n+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getInt16(n),n+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUint8(n++);return this.relativeOffset+=e,t},ae.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},ae.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},ae.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=Object.keys(t),o=0;o<e;o++){for(var i={},a=0;a<n.length;a++){var s=n[a],l=t[s];i[s]=l.call(this)}r[o]=i}return r},ae.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),n=Object.keys(t),o=0;o<e;o++){for(var i={},a=0;a<n.length;a++){var s=n[a],l=t[s];i[s]=l.call(this)}r[o]=i}return r},ae.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n],i=e[o];r[o]=i.call(this)}return r},ae.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ae.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),n=0;n<t;n++)r[n]=this.parseValueRecord(e);return r},ae.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,n=this.relativeOffset,o=new Array(r),i=0;i<r;i++){var a=t[i];if(0!==a)if(this.relativeOffset=a,e){for(var s=this.parseOffset16List(),l=new Array(s.length),u=0;u<s.length;u++)this.relativeOffset=a+s[u],l[u]=e.call(this);o[i]=l}else o[i]=this.parseUShortList();else o[i]=void 0}return this.relativeOffset=n,o},ae.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var n=new Array(r),o=0;o<r;o++)n[o]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}},ae.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ae.uShort,end:ae.uShort,classId:ae.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ae.list=function(e,t){return function(){return this.parseList(e,t)}},ae.list32=function(e,t){return function(){return this.parseList32(e,t)}},ae.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ae.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ae.pointer=function(e){return function(){return this.parsePointer(e)}},ae.pointer32=function(e){return function(){return this.parsePointer32(e)}},ae.tag=ae.prototype.parseTag,ae.byte=ae.prototype.parseByte,ae.uShort=ae.offset16=ae.prototype.parseUShort,ae.uShortList=ae.prototype.parseUShortList,ae.uLong=ae.offset32=ae.prototype.parseULong,ae.uLongList=ae.prototype.parseULongList,ae.struct=ae.prototype.parseStruct,ae.coverage=ae.prototype.parseCoverage,ae.classDef=ae.prototype.parseClassDef;var se={reserved:ae.uShort,reqFeatureIndex:ae.uShort,featureIndexes:ae.uShortList};ae.prototype.parseScriptList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,script:ae.pointer({defaultLangSys:ae.pointer(se),langSysRecords:ae.recordList({tag:ae.tag,langSys:ae.pointer(se)})})}))||[]},ae.prototype.parseFeatureList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,feature:ae.pointer({featureParams:ae.offset16,lookupListIndexes:ae.uShortList})}))||[]},ae.prototype.parseLookupList=function(e){return this.parsePointer(ae.list(ae.pointer(function(){var t=this.parseUShort();A.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),n=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(ae.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}})))||[]},ae.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var e=this.parseUShort(),t=this.parseUShort();return A.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ae.offset32,featureTableSubstitutionOffset:ae.offset32})})||[]};var le={getByte:te,getCard8:te,getUShort:re,getCard16:re,getShort:function(e,t){return e.getInt16(t,!1)},getULong:ne,getFixed:oe,getTag:function(e,t){for(var r="",n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r},getOffset:function(e,t,r){for(var n=0,o=0;o<r;o+=1)n<<=8,n+=e.getUint8(t+o);return n},getBytes:function(e,t,r){for(var n=[],o=t;o<r;o+=1)n.push(e.getUint8(o));return n},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:ae},ue={parse:function(e,t){var r={};r.version=le.getUShort(e,t),A.argument(0===r.version,"cmap table version should be 0."),r.numTables=le.getUShort(e,t+2);for(var n=-1,o=r.numTables-1;0<=o;--o){var i=le.getUShort(e,t+4+8*o),a=le.getUShort(e,t+4+8*o+2);if(3===i&&(0===a||1===a||10===a)||0===i&&(0===a||1===a||2===a||3===a||4===a)){n=le.getULong(e,t+4+8*o+4);break}}if(-1===n)throw new Error("No valid cmap sub-tables found.");var s=new le.Parser(e,t+n);if(r.format=s.parseUShort(),12===r.format)!function(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var n=0;n<r;n+=1)for(var o=t.parseULong(),i=t.parseULong(),a=t.parseULong(),s=o;s<=i;s+=1)e.glyphIndexMap[s]=a,a++}(r,s);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");!function(e,t,r,n,o){var i;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=i=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var a=new le.Parser(r,n+o+14),s=new le.Parser(r,n+o+16+2*i),l=new le.Parser(r,n+o+16+4*i),u=new le.Parser(r,n+o+16+6*i),c=n+o+16+8*i,d=0;d<i-1;d+=1)for(var f=void 0,h=a.parseUShort(),p=s.parseUShort(),y=l.parseShort(),m=u.parseUShort(),g=p;g<=h;g+=1)0!==m?(c=u.offset+u.relativeOffset-2,c+=m,c+=2*(g-p),0!==(f=le.getUShort(r,c))&&(f=f+y&65535)):f=g+y&65535,e.glyphIndexMap[g]=f}(r,s,e,t,n)}return r},make:function(e){var t,r=!0;for(t=e.length-1;0<t;--t)if(65535<e.get(t).unicode){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}var n=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(n=n.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),n=n.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var o,i,a,s=new ee.Table("cmap",n);for(s.segments=[],t=0;t<e.length;t+=1){for(var l=e.get(t),u=0;u<l.unicodes.length;u+=1)o=s,i=l.unicodes[u],a=t,o.segments.push({end:i,start:i,delta:-(i-a),offset:0,glyphIndex:a});s.segments=s.segments.sort(function(e,t){return e.start-t.start})}s.segments.push({end:65535,start:65535,delta:1,offset:0});var c=s.segments.length,d=0,f=[],h=[],p=[],y=[],m=[],g=[];for(t=0;t<c;t+=1){var v=s.segments[t];v.end<=65535&&v.start<=65535?(f=f.concat({name:"end_"+t,type:"USHORT",value:v.end}),h=h.concat({name:"start_"+t,type:"USHORT",value:v.start}),p=p.concat({name:"idDelta_"+t,type:"SHORT",value:v.delta}),y=y.concat({name:"idRangeOffset_"+t,type:"USHORT",value:v.offset}),void 0!==v.glyphId&&(m=m.concat({name:"glyph_"+t,type:"USHORT",value:v.glyphId}))):d+=1,r||void 0===v.glyphIndex||(g=(g=(g=g.concat({name:"cmap12Start_"+t,type:"ULONG",value:v.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:v.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:v.glyphIndex}))}if(s.segCountX2=2*(c-d),s.searchRange=2*Math.pow(2,Math.floor(Math.log(c-d)/Math.log(2))),s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(f),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(h),s.fields=s.fields.concat(p),s.fields=s.fields.concat(y),s.fields=s.fields.concat(m),s.cmap4Length=14+2*f.length+2+2*h.length+2*p.length+2*y.length+2*m.length,!r){var b=16+4*g.length;s.cmap12Offset=20+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:b},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),s.fields=s.fields.concat(g)}return s}},ce=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],de=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],fe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],he=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function pe(e){this.font=e}function ye(e){this.cmap=e}function me(e,t){this.encoding=e,this.charset=t}function ge(e){switch(e.version){case 1:this.names=he.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<he.length?this.names[t]=he[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-he.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=he[r+e.glyphNameIndex[r]];break;case 3:default:this.names=[]}}pe.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var n=0;n<r.length;n+=1)for(var o=r.get(n),i=0;i<o.unicodes.length;i+=1)if(o.unicodes[i]===t)return n;return null},ye.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},me.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},ge.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},ge.prototype.glyphIndexToName=function(e){return this.names[e]};var ve=function(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(n,o),e.stroke()};function be(e){this.bindConstructorValues(e)}function _e(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function xe(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++)this.glyphs[r]=t[r];this.length=t&&t.length||0}be.prototype.bindConstructorValues=function(e){var t,r;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,r=t||new L,{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}))},be.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},be.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},be.prototype.getPath=function(e,t,r,n,o){var i,a;e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72;var s=(n=n||{}).xScale,l=n.yScale;if(n.hinting&&o&&o.hinting&&(a=this.path&&o.hinting.exec(this,r)),a)i=o.hinting.getCommands(a),e=Math.round(e),t=Math.round(t),s=l=1;else{i=this.path.commands;var u=1/this.path.unitsPerEm*r;void 0===s&&(s=u),void 0===l&&(l=u)}for(var c=new L,d=0;d<i.length;d+=1){var f=i[d];"M"===f.type?c.moveTo(e+f.x*s,t+-f.y*l):"L"===f.type?c.lineTo(e+f.x*s,t+-f.y*l):"Q"===f.type?c.quadraticCurveTo(e+f.x1*s,t+-f.y1*l,e+f.x*s,t+-f.y*l):"C"===f.type?c.curveTo(e+f.x1*s,t+-f.y1*l,e+f.x2*s,t+-f.y2*l,e+f.x*s,t+-f.y*l):"Z"===f.type&&c.closePath()}return c},be.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var n=this.points[r];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return A.argument(0===t.length,"There are still points left in the current contour."),e},be.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var o=e[n];"Z"!==o.type&&(t.push(o.x),r.push(o.y)),"Q"!==o.type&&"C"!==o.type||(t.push(o.x1),r.push(o.y1)),"C"===o.type&&(t.push(o.x2),r.push(o.y2))}var i={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},be.prototype.draw=function(e,t,r,n,o){this.getPath(t,r,n,o).draw(e)},be.prototype.drawPoints=function(e,t,r,n){function o(t,r,n,o){var i=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(r+t[a].x*o,n+t[a].y*o),e.arc(r+t[a].x*o,n+t[a].y*o,2,0,i,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var i=1/this.path.unitsPerEm*n,a=[],s=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];void 0!==c.x&&a.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",o(a,t,r,i),e.fillStyle="red",o(s,t,r,i)},be.prototype.drawMetrics=function(e,t,r,n){var o;t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24,o=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",ve(e,t,-1e4,t,1e4),ve(e,-1e4,r,1e4,r);var i=this.xMin||0,a=this.yMin||0,s=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;e.strokeStyle="blue",ve(e,t+i*o,-1e4,t+i*o,1e4),ve(e,t+s*o,-1e4,t+s*o,1e4),ve(e,-1e4,r+-a*o,1e4,r+-a*o),ve(e,-1e4,r+-l*o,1e4,r+-l*o),e.strokeStyle="green",ve(e,t+u*o,-1e4,t+u*o,1e4)},xe.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},xe.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var we={GlyphSet:xe,glyphLoader:function(e,t){return new be({index:t,font:e})},ttfGlyphLoader:function(e,t,r,n,o,i){return function(){var a=new be({index:t,font:e});return a.path=function(){r(a,n,o);var t=i(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},_e(a,"xMin","_xMin"),_e(a,"xMax","_xMax"),_e(a,"yMin","_yMin"),_e(a,"yMax","_yMax"),a}},cffGlyphLoader:function(e,t,r,n){return function(){var o=new be({index:t,font:e});return o.path=function(){var t=r(e,o,n);return t.unitsPerEm=e.unitsPerEm,t},o}}};function je(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!je(e[r],t[r]))return!1;return!0}return!1}function Se(e){return e.length<1240?107:e.length<33900?1131:32768}function Me(e,t,r){var n,o,i=[],a=[],s=le.getCard16(e,t);if(0!==s){var l=le.getByte(e,t+2);n=t+(s+1)*l+2;for(var u=t+3,c=0;c<s+1;c+=1)i.push(le.getOffset(e,u,l)),u+=l;o=n+i[s]}else o=t+2;for(var d=0;d<i.length-1;d+=1){var f=le.getBytes(e,n+i[d],n+i[d+1]);r&&(f=r(f)),a.push(f)}return{objects:a,startOffset:t,endOffset:o}}function Ee(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=e.parseByte(),o=n>>4,i=15&n;if(15==o)break;if(t+=r[o],15==i)break;t+=r[i]}return parseFloat(t)}(e);if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Te(e,t,r){t=void 0!==t?t:0;var n=new le.Parser(e,t),o=[],i=[];for(r=void 0!==r?r:e.length;n.relativeOffset<r;){var a=n.parseByte();a<=21?(12===a&&(a=1200+n.parseByte()),o.push([a,i]),i=[]):i.push(Ee(n,a))}return function(e){for(var t={},r=0;r<e.length;r+=1){var n,o=e[r][0],i=e[r][1];if(n=1===i.length?i[0]:i,t.hasOwnProperty(o)&&!isNaN(t[o]))throw new Error("Object "+t+" already has key "+o);t[o]=n}return t}(o)}function Oe(e,t){return t<=390?ce[t]:e[t-391]}function Ce(e,t,r){for(var n,o={},i=0;i<t.length;i+=1){var a=t[i];if(Array.isArray(a.type)){var s=[];s.length=a.type.length;for(var l=0;l<a.type.length;l++)void 0===(n=void 0!==e[a.op]?e[a.op][l]:void 0)&&(n=void 0!==a.value&&void 0!==a.value[l]?a.value[l]:null),"SID"===a.type[l]&&(n=Oe(r,n)),s[l]=n;o[a.name]=s}else void 0===(n=e[a.op])&&(n=void 0!==a.value?a.value:null),"SID"===a.type&&(n=Oe(r,n)),o[a.name]=n}return o}var Le=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Pe=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function ke(e,t,r,n){return Ce(Te(e,t,r),Pe,n)}function Ae(e,t,r,n){for(var o,i,a=[],s=0;s<r.length;s+=1){var l=(i=n,Ce(Te(o=new DataView(new Uint8Array(r[s]).buffer),0,o.byteLength),Le,i));l._subrs=[],l._subrsBias=0;var u=l.private[0],c=l.private[1];if(0!==u&&0!==c){var d=ke(e,c+t,u,n);if(l._defaultWidthX=d.defaultWidthX,l._nominalWidthX=d.nominalWidthX,0!==d.subrs){var f=Me(e,c+d.subrs+t);l._subrs=f.objects,l._subrsBias=Se(l._subrs)}l._privateDict=d}a.push(l)}return a}function Re(e,t,r){var n,o,i,a,s,l,u,c,d=new L,f=[],h=0,p=!1,y=!1,m=0,g=0;if(e.isCIDFont){var v=e.tables.cff.topDict._fdSelect[t.index],b=e.tables.cff.topDict._fdArray[v];s=b._subrs,l=b._subrsBias,u=b._defaultWidthX,c=b._nominalWidthX}else s=e.tables.cff.topDict._subrs,l=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,c=e.tables.cff.topDict._nominalWidthX;var _=u;function x(e,t){y&&d.closePath(),d.moveTo(e,t),y=!0}function w(){f.length%2==0||p||(_=f.shift()+c),h+=f.length>>1,f.length=0,p=!0}return function r(u){for(var v,b,j,S,M,E,T,O,C,L,P,k,A=0;A<u.length;){var R=u[A];switch(A+=1,R){case 1:case 3:w();break;case 4:1<f.length&&!p&&(_=f.shift()+c,p=!0),g+=f.pop(),x(m,g);break;case 5:for(;0<f.length;)m+=f.shift(),g+=f.shift(),d.lineTo(m,g);break;case 6:for(;0<f.length&&(m+=f.shift(),d.lineTo(m,g),0!==f.length);)g+=f.shift(),d.lineTo(m,g);break;case 7:for(;0<f.length&&(g+=f.shift(),d.lineTo(m,g),0!==f.length);)m+=f.shift(),d.lineTo(m,g);break;case 8:for(;0<f.length;)n=m+f.shift(),o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),m=i+f.shift(),g=a+f.shift(),d.curveTo(n,o,i,a,m,g);break;case 10:M=f.pop()+l,(E=s[M])&&r(E);break;case 11:return;case 12:switch(R=u[A],A+=1,R){case 35:n=m+f.shift(),o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),T=i+f.shift(),O=a+f.shift(),C=T+f.shift(),L=O+f.shift(),P=C+f.shift(),k=L+f.shift(),m=P+f.shift(),g=k+f.shift(),f.shift(),d.curveTo(n,o,i,a,T,O),d.curveTo(C,L,P,k,m,g);break;case 34:n=m+f.shift(),o=g,i=n+f.shift(),a=o+f.shift(),T=i+f.shift(),O=a,C=T+f.shift(),L=a,P=C+f.shift(),k=g,m=P+f.shift(),d.curveTo(n,o,i,a,T,O),d.curveTo(C,L,P,k,m,g);break;case 36:n=m+f.shift(),o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),T=i+f.shift(),O=a,C=T+f.shift(),L=a,P=C+f.shift(),k=L+f.shift(),m=P+f.shift(),d.curveTo(n,o,i,a,T,O),d.curveTo(C,L,P,k,m,g);break;case 37:n=m+f.shift(),o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),T=i+f.shift(),O=a+f.shift(),C=T+f.shift(),L=O+f.shift(),P=C+f.shift(),k=L+f.shift(),Math.abs(P-m)>Math.abs(k-g)?m=P+f.shift():g=k+f.shift(),d.curveTo(n,o,i,a,T,O),d.curveTo(C,L,P,k,m,g);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+R),f.length=0}break;case 14:0<f.length&&!p&&(_=f.shift()+c,p=!0),y&&(d.closePath(),y=!1);break;case 18:w();break;case 19:case 20:w(),A+=h+7>>3;break;case 21:2<f.length&&!p&&(_=f.shift()+c,p=!0),g+=f.pop(),x(m+=f.pop(),g);break;case 22:1<f.length&&!p&&(_=f.shift()+c,p=!0),x(m+=f.pop(),g);break;case 23:w();break;case 24:for(;2<f.length;)n=m+f.shift(),o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),m=i+f.shift(),g=a+f.shift(),d.curveTo(n,o,i,a,m,g);m+=f.shift(),g+=f.shift(),d.lineTo(m,g);break;case 25:for(;6<f.length;)m+=f.shift(),g+=f.shift(),d.lineTo(m,g);n=m+f.shift(),o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),m=i+f.shift(),g=a+f.shift(),d.curveTo(n,o,i,a,m,g);break;case 26:for(f.length%2&&(m+=f.shift());0<f.length;)n=m,o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),m=i,g=a+f.shift(),d.curveTo(n,o,i,a,m,g);break;case 27:for(f.length%2&&(g+=f.shift());0<f.length;)n=m+f.shift(),o=g,i=n+f.shift(),a=o+f.shift(),m=i+f.shift(),g=a,d.curveTo(n,o,i,a,m,g);break;case 28:v=u[A],b=u[A+1],f.push((v<<24|b<<16)>>16),A+=2;break;case 29:M=f.pop()+e.gsubrsBias,(E=e.gsubrs[M])&&r(E);break;case 30:for(;0<f.length&&(n=m,o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),m=i+f.shift(),g=a+(1===f.length?f.shift():0),d.curveTo(n,o,i,a,m,g),0!==f.length);)n=m+f.shift(),o=g,i=n+f.shift(),a=o+f.shift(),g=a+f.shift(),m=i+(1===f.length?f.shift():0),d.curveTo(n,o,i,a,m,g);break;case 31:for(;0<f.length&&(n=m+f.shift(),o=g,i=n+f.shift(),a=o+f.shift(),g=a+f.shift(),m=i+(1===f.length?f.shift():0),d.curveTo(n,o,i,a,m,g),0!==f.length);)n=m,o=g+f.shift(),i=n+f.shift(),a=o+f.shift(),m=i+f.shift(),g=a+(1===f.length?f.shift():0),d.curveTo(n,o,i,a,m,g);break;default:R<32?console.log("Glyph "+t.index+": unknown operator "+R):R<247?f.push(R-139):R<251?(v=u[A],A+=1,f.push(256*(R-247)+v+108)):R<255?(v=u[A],A+=1,f.push(256*-(R-251)-v-108)):(v=u[A],b=u[A+1],j=u[A+2],S=u[A+3],A+=4,f.push((v<<24|b<<16|j<<8|S)/65536))}}}(r),t.advanceWidth=_,d}function De(e,t){var r,n=ce.indexOf(e);return 0<=n&&(r=n),0<=(n=t.indexOf(e))?r=n+ce.length:(r=ce.length+t.length,t.push(e)),r}function Ie(e,t,r){for(var n={},o=0;o<e.length;o+=1){var i=e[o],a=t[i.name];void 0===a||je(a,i.value)||("SID"===i.type&&(a=De(a,r)),n[i.op]={name:i.name,type:i.type,value:a})}return n}function Ue(e,t){var r=new ee.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Ie(Le,e,t),r}function Ne(e){var t=new ee.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Fe(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,o=0,i=0;i<r.commands.length;i+=1){var a=void 0,s=void 0,l=r.commands[i];if("Q"===l.type&&(l={type:"C",x:l.x,y:l.y,x1:1/3*n+2/3*l.x1,y1:1/3*o+2/3*l.y1,x2:1/3*l.x+2/3*l.x1,y2:1/3*l.y+2/3*l.y1}),"M"===l.type)a=Math.round(l.x-n),s=Math.round(l.y-o),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(l.x),o=Math.round(l.y);else if("L"===l.type)a=Math.round(l.x-n),s=Math.round(l.y-o),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(l.x),o=Math.round(l.y);else if("C"===l.type){var u=Math.round(l.x1-n),c=Math.round(l.y1-o),d=Math.round(l.x2-l.x1),f=Math.round(l.y2-l.y1);a=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:c}),t.push({name:"dx2",type:"NUMBER",value:d}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:a}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(l.x),o=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var Be={parse:function(e,t,r){r.tables.cff={};var n,o,i,a=Me(e,(n=e,o=t,(i={}).formatMajor=le.getCard8(n,o),i.formatMinor=le.getCard8(n,o+1),i.size=le.getCard8(n,o+2),i.offsetSize=le.getCard8(n,o+3),i.startOffset=o,i.endOffset=o+4,i).endOffset,le.bytesToString),s=Me(e,a.endOffset),l=Me(e,s.endOffset,le.bytesToString),u=Me(e,l.endOffset);r.gsubrs=u.objects,r.gsubrsBias=Se(r.gsubrs);var c=Ae(e,t,s.objects,l.objects);if(1!==c.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var d=c[0];if((r.tables.cff.topDict=d)._privateDict&&(r.defaultWidthX=d._privateDict.defaultWidthX,r.nominalWidthX=d._privateDict.nominalWidthX),void 0!==d.ros[0]&&void 0!==d.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var f=d.fdArray,h=d.fdSelect;if(0===f||0===h)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=Ae(e,t,Me(e,f+=t).objects,l.objects);d._fdArray=p,h+=t,d._fdSelect=function(e,t,r,n){var o,i=[],a=new le.Parser(e,t),s=a.parseCard8();if(0===s)for(var l=0;l<r;l++){if(n<=(o=a.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+n+")");i.push(o)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var u,c=a.parseCard16(),d=a.parseCard16();if(0!==d)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+d);for(var f=0;f<c;f++){if(o=a.parseCard8(),u=a.parseCard16(),n<=o)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+n+")");if(r<u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+u);for(;d<u;d++)i.push(o);d=u}if(u!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+u)}return i}(e,h,r.numGlyphs,p.length)}var y=t+d.private[1],m=ke(e,y,d.private[0],l.objects);if(r.defaultWidthX=m.defaultWidthX,r.nominalWidthX=m.nominalWidthX,0!==m.subrs){var g=Me(e,y+m.subrs);r.subrs=g.objects,r.subrsBias=Se(r.subrs)}else r.subrs=[],r.subrsBias=0;var v=Me(e,t+d.charStrings);r.nGlyphs=v.objects.length;var b=function(e,t,r,n){var o,i,a=new le.Parser(e,t);--r;var s=[".notdef"],l=a.parseCard8();if(0===l)for(var u=0;u<r;u+=1)o=a.parseSID(),s.push(Oe(n,o));else if(1===l)for(;s.length<=r;){o=a.parseSID(),i=a.parseCard8();for(var c=0;c<=i;c+=1)s.push(Oe(n,o)),o+=1}else{if(2!==l)throw new Error("Unknown charset format "+l);for(;s.length<=r;){o=a.parseSID(),i=a.parseCard16();for(var d=0;d<=i;d+=1)s.push(Oe(n,o)),o+=1}}return s}(e,t+d.charset,r.nGlyphs,l.objects);0===d.encoding?r.cffEncoding=new me(de,b):1===d.encoding?r.cffEncoding=new me(fe,b):r.cffEncoding=function(e,t,r){var n,o={},i=new le.Parser(e,t),a=i.parseCard8();if(0===a)for(var s=i.parseCard8(),l=0;l<s;l+=1)o[n=i.parseCard8()]=l;else{if(1!==a)throw new Error("Unknown encoding format "+a);var u=i.parseCard8();n=1;for(var c=0;c<u;c+=1)for(var d=i.parseCard8(),f=i.parseCard8(),h=d;h<=d+f;h+=1)o[h]=n,n+=1}return new me(o,r)}(e,t+d.encoding,b),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new we.GlyphSet(r);for(var _=0;_<r.nGlyphs;_+=1){var x=v.objects[_];r.glyphs.push(_,we.cffGlyphLoader(r,_,Re,x))}},make:function(e,t){for(var r,n=new ee.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),o=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[o,0,0,o,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a=[],s=1;s<e.length;s+=1)r=e.get(s),a.push(r.name);var l=[];n.header=new ee.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),n.nameIndex=function(e){var t=new ee.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]);var u,c,d,f=Ue(i,l);n.topDictIndex=Ne(f),n.globalSubrIndex=new ee.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),n.charsets=function(e,t){for(var r=new ee.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var o=De(e[n],t);r.fields.push({name:"glyph_"+n,type:"SID",value:o})}return r}(a,l),n.charStringsIndex=function(e){for(var t=new ee.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),o=Fe(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:o})}return t}(e),n.privateDict=(u={},c=l,(d=new ee.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Ie(Pe,u,c),d),n.stringIndex=function(e){var t=new ee.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(l);var h=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+n.charsets.sizeOf(),i.private[1]=i.charStrings+n.charStringsIndex.sizeOf(),f=Ue(i,l),n.topDictIndex=Ne(f),n}},Ge={parse:function(e,t){var r={},n=new le.Parser(e,t);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),A.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new ee.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},Ve={parse:function(e,t){var r={},n=new le.Parser(e,t);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r},make:function(e){return new ee.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},ze={parse:function(e,t,r,n,o){for(var i,a,s=new le.Parser(e,t),l=0;l<n;l+=1){l<r&&(i=s.parseUShort(),a=s.parseShort());var u=o.get(l);u.advanceWidth=i,u.leftSideBearing=a}},make:function(e){for(var t=new ee.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),o=n.advanceWidth||0,i=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:o}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:i})}return t}},He={make:function(e){for(var t=new ee.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",n=12+4*e.length,o=0;o<e.length;++o){var i=r.indexOf(e[o]);i<0&&(i=r.length,r+=e[o]),t.fields.push({name:"offset "+o,type:"USHORT",value:n+i}),t.fields.push({name:"length "+o,type:"USHORT",value:e[o].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){var r=new le.Parser(e,t),n=r.parseULong();A.argument(1===n,"Unsupported ltag table version."),r.skip("uLong",1);for(var o=r.parseULong(),i=[],a=0;a<o;a++){for(var s="",l=t+r.parseUShort(),u=r.parseUShort(),c=l;c<l+u;++c)s+=String.fromCharCode(e.getInt8(c));i.push(s)}return i}},We={parse:function(e,t){var r={},n=new le.Parser(e,t);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r},make:function(e){return new ee.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},qe=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Xe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ye={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Ze={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Qe(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return Xe[t];case 3:return Ze[t]}}var Ke="utf-16",Je={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},$e={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function et(e,t,r){switch(e){case 0:return Ke;case 1:return $e[r]||Je[t];case 3:if(1===t||10===t)return Ke}}function tt(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function rt(e,t,r,n,o,i){return new ee.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:i}])}function nt(e,t){var r=function(e,t){var r=e.length,n=t.length-r+1;e:for(var o=0;o<n;o++)for(;o<n;o++){for(var i=0;i<r;i++)if(t[o+i]!==e[i])continue e;return o}return-1}(e,t);if(r<0){r=t.length;for(var n=0,o=e.length;n<o;++n)t.push(e[n])}return r}var ot={parse:function(e,t,r){for(var n={},o=new le.Parser(e,t),i=o.parseUShort(),a=o.parseUShort(),s=o.offset+o.parseUShort(),l=0;l<a;l++){var u=o.parseUShort(),c=o.parseUShort(),d=o.parseUShort(),f=o.parseUShort(),h=qe[f]||f,p=o.parseUShort(),y=o.parseUShort(),m=Qe(u,d,r),g=et(u,c,d);if(void 0!==g&&void 0!==m){var v;if(v=g===Ke?R.UTF16(e,s+y,p):R.MACSTRING(e,s+y,p,g)){var b=n[h];void 0===b&&(b=n[h]={}),b[m]=v}}}return 1===i&&o.parseUShort(),n},make:function(e,t){var r,n=[],o={},i=tt(qe);for(var a in e){var s=i[a];if(void 0===s&&(s=a),r=parseInt(s),isNaN(r))throw new Error('Name table entry "'+a+'" does not exist, see nameTableNames for complete list.');o[r]=e[a],n.push(r)}for(var l=tt(Xe),u=tt(Ze),c=[],d=[],f=0;f<n.length;f++){var h=o[r=n[f]];for(var p in h){var y=h[p],m=1,g=l[p],v=Ye[g],b=et(m,v,g),_=D.MACSTRING(y,b);void 0===_&&(m=0,(g=t.indexOf(p))<0&&(g=t.length,t.push(p)),v=4,_=D.UTF16(y));var x=nt(_,d);c.push(rt(m,v,g,r,_.length,x));var w=u[p];if(void 0!==w){var j=D.UTF16(y),S=nt(j,d);c.push(rt(3,1,w,r,j.length,S))}}}c.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var M=new ee.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),E=0;E<c.length;E++)M.fields.push({name:"record_"+E,type:"RECORD",value:c[E]});return M.fields.push({name:"strings",type:"LITERAL",value:d}),M}},it=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],at={parse:function(e,t){var r={},n=new le.Parser(e,t);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var o=0;o<10;o++)r.panose[o]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),1<=r.version&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),2<=r.version&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r},make:function(e){return new ee.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:it,getUnicodeRange:function(e){for(var t=0;t<it.length;t+=1){var r=it[t];if(e>=r.begin&&e<r.end)return t}return-1}},st={parse:function(e,t){var r={},n=new le.Parser(e,t);switch(r.version=n.parseVersion(),r.italicAngle=n.parseFixed(),r.underlinePosition=n.parseShort(),r.underlineThickness=n.parseShort(),r.isFixedPitch=n.parseULong(),r.minMemType42=n.parseULong(),r.maxMemType42=n.parseULong(),r.minMemType1=n.parseULong(),r.maxMemType1=n.parseULong(),r.version){case 1:r.names=he.slice();break;case 2:r.numberOfGlyphs=n.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var o=0;o<r.numberOfGlyphs;o++)r.glyphNameIndex[o]=n.parseUShort();r.names=[];for(var i=0;i<r.numberOfGlyphs;i++)if(r.glyphNameIndex[i]>=he.length){var a=n.parseChar();r.names.push(n.parseString(a))}break;case 2.5:r.numberOfGlyphs=n.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var s=0;s<r.numberOfGlyphs;s++)r.offset[s]=n.parseChar()}return r},make:function(){return new ee.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},lt=new Array(9);lt[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),substitute:this.parseOffset16List()}:void A.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},lt[2]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),sequences:this.parseListOfLists()}},lt[3]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),alternateSets:this.parseListOfLists()}},lt[4]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var ut={sequenceIndex:ae.uShort,lookupListIndex:ae.uShort};lt[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),ruleSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}})};if(2===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),classDef:this.parsePointer(ae.classDef),classSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}})};if(3===t){var r=this.parseUShort(),n=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(n,ut)}}A.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},lt[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}})}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),backtrackClassDef:this.parsePointer(ae.classDef),inputClassDef:this.parsePointer(ae.classDef),lookaheadClassDef:this.parsePointer(ae.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}})}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),inputCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(ut)}:void A.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},lt[7]=function(){var e=this.parseUShort();A.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new ae(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:lt[t].call(r)}},lt[8]=function(){var e=this.parseUShort();return A.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),substitutes:this.parseUShortList()}};var ct=new Array(9);ct[1]=function(e){return 1===e.substFormat?new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.ushortList("substitute",e.substitute)))},ct[3]=function(e){return A.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.tableList("altSet",e.alternateSets,function(e){return new ee.Table("alternateSetTable",ee.ushortList("alternate",e))})))},ct[4]=function(e){return A.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new ee.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new ee.Coverage(e.coverage)}].concat(ee.tableList("ligSet",e.ligatureSets,function(e){return new ee.Table("ligatureSetTable",ee.tableList("ligature",e,function(e){return new ee.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(ee.ushortList("component",e.components,e.components.length+1)))}))})))};var dt={parse:function(e,t){var r=new ae(e,t=t||0),n=r.parseVersion(1);return A.argument(1===n||1.1===n,"Unsupported GSUB table version."),1===n?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(lt)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(lt),variations:r.parseFeatureVariationsList()}},make:function(e){return new ee.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ee.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ee.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ee.LookupList(e.lookups,ct)}])}},ft={parse:function(e,t){var r=new le.Parser(e,t),n=r.parseULong();A.argument(1===n,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var o=r.parseULong(),i={},a=0;a<o;a++){var s=r.parseTag(),l=r.parseULong(),u=r.parseULong(),c=R.UTF8(e,t+l,u);i[s]=c}return i},make:function(e){var t=Object.keys(e).length,r="",n=16+12*t,o=new ee.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:t}]);for(var i in e){var a=r.length;r+=e[i],o.fields.push({name:"tag "+i,type:"TAG",value:i}),o.fields.push({name:"offset "+i,type:"ULONG",value:n+a}),o.fields.push({name:"length "+i,type:"ULONG",value:e[i].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),o}};function ht(e){return Math.log(e)/Math.log(2)|0}function pt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%Math.pow(2,32)}function yt(e,t,r,n){return new ee.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function mt(e){var t=new ee.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,ht(t.numTables));t.searchRange=16*r,t.entrySelector=ht(r),t.rangeShift=16*t.numTables-t.searchRange;for(var n=[],o=[],i=t.sizeOf()+yt().sizeOf()*t.numTables;i%4!=0;)i+=1,o.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<e.length;a+=1){var s=e[a];A.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid.");var l=s.sizeOf(),u=yt(s.tableName,pt(s.encode()),i,l);for(n.push({name:u.tag+" Table Record",type:"RECORD",value:u}),o.push({name:s.tableName+" table",type:"RECORD",value:s}),i+=l,A.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!=0;)i+=1,o.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(n),t.fields=t.fields.concat(o),t}function gt(e,t,r){for(var n=0;n<t.length;n+=1){var o=e.charToGlyphIndex(t[n]);if(0<o)return e.glyphs.get(o).getMetrics()}return r}var vt=function(e){for(var t,r=[],n=[],o=[],i=[],a=[],s=[],l=[],u=0,c=0,d=0,f=0,h=0,p=0;p<e.glyphs.length;p+=1){var y=e.glyphs.get(p),m=0|y.unicode;if(isNaN(y.advanceWidth))throw new Error("Glyph "+y.name+" ("+p+"): advanceWidth is not a number.");(m<t||void 0===t)&&0<m&&(t=m),u<m&&(u=m);var g=at.getUnicodeRange(m);if(g<32)c|=1<<g;else if(g<64)d|=1<<g-32;else if(g<96)f|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");h|=1<<g-96}if(".notdef"!==y.name){var v=y.getMetrics();r.push(v.xMin),n.push(v.yMin),o.push(v.xMax),i.push(v.yMax),s.push(v.leftSideBearing),l.push(v.rightSideBearing),a.push(y.advanceWidth)}}var b={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:function(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)};b.ascender=e.ascender,b.descender=e.descender;var _=Ge.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:b.xMin,yMin:b.yMin,xMax:b.xMax,yMax:b.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),x=Ve.make({ascender:b.ascender,descender:b.descender,advanceWidthMax:b.advanceWidthMax,minLeftSideBearing:b.minLeftSideBearing,minRightSideBearing:b.minRightSideBearing,xMaxExtent:b.maxLeftSideBearing+(b.xMax-b.xMin),numberOfHMetrics:e.glyphs.length}),w=We.make(e.glyphs.length),j=at.make({xAvgCharWidth:Math.round(b.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:d,ulUnicodeRange3:f,ulUnicodeRange4:h,fsSelection:e.tables.os2.fsSelection,sTypoAscender:b.ascender,sTypoDescender:b.descender,sTypoLineGap:0,usWinAscent:b.yMax,usWinDescent:Math.abs(b.yMin),ulCodePageRange1:1,sxHeight:gt(e,"xyvw",{yMax:Math.round(b.ascender/2)}).yMax,sCapHeight:gt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",b).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),S=ze.make(e.glyphs),M=ue.make(e.glyphs),E=e.getEnglishName("fontFamily"),T=e.getEnglishName("fontSubfamily"),O=E+" "+T,C=e.getEnglishName("postScriptName");C=C||E.replace(/\s/g,"")+"-"+T;var L={};for(var P in e.names)L[P]=e.names[P];L.uniqueID||(L.uniqueID={en:e.getEnglishName("manufacturer")+":"+O}),L.postScriptName||(L.postScriptName={en:C}),L.preferredFamily||(L.preferredFamily=e.names.fontFamily),L.preferredSubfamily||(L.preferredSubfamily=e.names.fontSubfamily);var k=[],A=ot.make(L,k),R=0<k.length?He.make(k):void 0,D=st.make(),I=Be.make(e.glyphs,{version:e.getEnglishName("version"),fullName:O,familyName:E,weightName:T,postScriptName:C,unitsPerEm:e.unitsPerEm,fontBBox:[0,b.yMin,b.ascender,b.advanceWidthMax]}),U=e.metas&&0<Object.keys(e.metas).length?ft.make(e.metas):void 0,N=[_,x,w,j,A,M,D,I,S];R&&N.push(R),e.tables.gsub&&N.push(dt.make(e.tables.gsub)),U&&N.push(U);for(var F=mt(N),B=pt(F.encode()),G=F.fields,V=!1,z=0;z<G.length;z+=1)if("head table"===G[z].name){G[z].value.checkSumAdjustment=2981146554-B,V=!0;break}if(!V)throw new Error("Could not find head table with checkSum to adjust.");return F};function bt(e,t){for(var r=0,n=e.length-1;r<=n;){var o=r+n>>>1,i=e[o].tag;if(i===t)return o;i<t?r=1+o:n=o-1}return-r-1}function _t(e,t){for(var r=0,n=e.length-1;r<=n;){var o=r+n>>>1,i=e[o];if(i===t)return o;i<t?r=1+o:n=o-1}return-r-1}function xt(e,t){for(var r,n=0,o=e.length-1;n<=o;){var i=n+o>>>1,a=(r=e[i]).start;if(a===t)return r;a<t?n=1+i:o=i-1}if(0<n)return t>(r=e[n-1]).end?0:r}function wt(e,t){this.font=e,this.tableName=t}function jt(e){wt.call(this,e,"gpos")}function St(e){wt.call(this,e,"gsub")}function Mt(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Et(e,t,r){for(var n=e.subtables,o=0;o<n.length;o++){var i=n[o];if(i.substFormat===t)return i}if(r)return n.push(r),r}function Tt(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}function Ot(e,t){if(!e)throw t}function Ct(e,t,r,n,o){var i;return 0<(t&n)?(i=e.parseByte(),0==(t&o)&&(i=-i),r+i):0<(t&o)?r:r+e.parseShort()}function Lt(e,t,r){var n,o,i=new le.Parser(t,r);if(e.numberOfContours=i.parseShort(),e._xMin=i.parseShort(),e._yMin=i.parseShort(),e._xMax=i.parseShort(),e._yMax=i.parseShort(),0<e.numberOfContours){for(var a=e.endPointIndices=[],s=0;s<e.numberOfContours;s+=1)a.push(i.parseUShort());e.instructionLength=i.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(i.parseByte());var u=a[a.length-1]+1;n=[];for(var c=0;c<u;c+=1)if(o=i.parseByte(),n.push(o),0<(8&o))for(var d=i.parseByte(),f=0;f<d;f+=1)n.push(o),c+=1;if(A.argument(n.length===u,"Bad flags."),0<a.length){var h,p=[];if(0<u){for(var y=0;y<u;y+=1)o=n[y],(h={}).onCurve=!!(1&o),h.lastPointOfContour=0<=a.indexOf(y),p.push(h);for(var m=0,g=0;g<u;g+=1)o=n[g],(h=p[g]).x=Ct(i,o,m,2,16),m=h.x;for(var v=0,b=0;b<u;b+=1)o=n[b],(h=p[b]).y=Ct(i,o,v,4,32),v=h.y}e.points=p}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var _=!0;_;){n=i.parseUShort();var x={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&n)?0<(2&n)?(x.dx=i.parseShort(),x.dy=i.parseShort()):x.matchedPoints=[i.parseUShort(),i.parseUShort()]:0<(2&n)?(x.dx=i.parseChar(),x.dy=i.parseChar()):x.matchedPoints=[i.parseByte(),i.parseByte()],0<(8&n)?x.xScale=x.yScale=i.parseF2Dot14():0<(64&n)?(x.xScale=i.parseF2Dot14(),x.yScale=i.parseF2Dot14()):0<(128&n)&&(x.xScale=i.parseF2Dot14(),x.scale01=i.parseF2Dot14(),x.scale10=i.parseF2Dot14(),x.yScale=i.parseF2Dot14()),e.components.push(x),_=!!(32&n)}if(256&n){e.instructionLength=i.parseUShort(),e.instructions=[];for(var w=0;w<e.instructionLength;w+=1)e.instructions.push(i.parseByte())}}}function Pt(e,t){for(var r=[],n=0;n<e.length;n+=1){var o=e[n],i={x:t.xScale*o.x+t.scale01*o.y+t.dx,y:t.scale10*o.x+t.yScale*o.y+t.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour};r.push(i)}return r}function kt(e){var t=new L;if(!e)return t;for(var r=function(e){for(var t=[],r=[],n=0;n<e.length;n+=1){var o=e[n];r.push(o),o.lastPointOfContour&&(t.push(r),r=[])}return A.argument(0===r.length,"There are still points left in the current contour."),t}(e),n=0;n<r.length;++n){var o=r[n],i=null,a=o[o.length-1],s=o[0];if(a.onCurve)t.moveTo(a.x,a.y);else if(s.onCurve)t.moveTo(s.x,s.y);else{var l={x:.5*(a.x+s.x),y:.5*(a.y+s.y)};t.moveTo(l.x,l.y)}for(var u=0;u<o.length;++u)if(i=a,a=s,s=o[(u+1)%o.length],a.onCurve)t.lineTo(a.x,a.y);else{var c=s;i.onCurve||(a.x,i.x,a.y,i.y),s.onCurve||(c={x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),t.quadraticCurveTo(a.x,a.y,c.x,c.y)}t.closePath()}return t}function At(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],o=e.get(n.glyphIndex);if(o.getPath(),o.points){var i=void 0;if(void 0===n.matchedPoints)i=Pt(o.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>o.points.length-1)throw Error("Matched points out of range in "+t.name);var a=t.points[n.matchedPoints[0]],s=o.points[n.matchedPoints[1]],l={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};s=Pt([s],l)[0],l.dx=a.x-s.x,l.dy=a.y-s.y,i=Pt(o.points,l)}t.points=t.points.concat(i)}}return kt(t.points)}(jt.prototype=wt.prototype={searchTag:bt,binSearch:_t,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var n=e.scripts[r].tag;if("DFLT"===n)return n;"latn"===n&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var n=r.scripts,o=bt(r.scripts,e);if(0<=o)return n[o].script;if(t){var i={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-o,0,i),i.script}}},getLangSysTable:function(e,t,r){var n=this.getScriptTable(e,r);if(n){if(!t||"dflt"===t||"DFLT"===t)return n.defaultLangSys;var o=bt(n.langSysRecords,t);if(0<=o)return n.langSysRecords[o].langSys;if(r){var i={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-o,0,i),i.langSys}}},getFeatureTable:function(e,t,r,n){var o=this.getLangSysTable(e,t,n);if(o){for(var i,a=o.featureIndexes,s=this.font.tables[this.tableName].features,l=0;l<a.length;l++)if((i=s[a[l]]).tag===r)return i.feature;if(n){var u=s.length;return A.assert(0===u||r>=s[u-1].tag,"Features must be added in alphabetical order."),i={tag:r,feature:{params:0,lookupListIndexes:[]}},s.push(i),a.push(u),i.feature}}},getLookupTables:function(e,t,r,n,o){var i=this.getFeatureTable(e,t,r,o),a=[];if(i){for(var s,l=i.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)(s=u[l[c]]).lookupType===n&&a.push(s);if(0===a.length&&o){s={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var d=u.length;return u.push(s),l.push(d),[s]}}return a},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=xt(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=_t(e.glyphs,t);return 0<=r?r:-1;case 2:var n=xt(e.ranges,t);return n?n.index+t-n.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,n=0;n<r.length;n++)for(var o=r[n],i=o.start,a=o.end,s=i;s<=a;s++)t.push(s);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},jt.prototype.getKerningValue=function(e,t,r){for(var n=0;n<e.length;n++)for(var o=e[n].subtables,i=0;i<o.length;i++){var a=o[i],s=this.getCoverageIndex(a.coverage,t);if(!(s<0))switch(a.posFormat){case 1:for(var l=a.pairSets[s],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===r)return c.value1&&c.value1.xAdvance||0}break;case 2:var d=this.getGlyphClass(a.classDef1,t),f=this.getGlyphClass(a.classDef2,r),h=a.classRecords[d][f];return h.value1&&h.value1.xAdvance||0}}return 0},jt.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(St.prototype=wt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},St.prototype.getSingle=function(e,t,r){for(var n=[],o=this.getLookupTables(t,r,e,1),i=0;i<o.length;i++)for(var a=o[i].subtables,s=0;s<a.length;s++){var l=a[s],u=this.expandCoverage(l.coverage),c=void 0;if(1===l.substFormat){var d=l.deltaGlyphId;for(c=0;c<u.length;c++){var f=u[c];n.push({sub:f,by:f+d})}}else{var h=l.substitute;for(c=0;c<u.length;c++)n.push({sub:u[c],by:h[c]})}}return n},St.prototype.getAlternates=function(e,t,r){for(var n=[],o=this.getLookupTables(t,r,e,3),i=0;i<o.length;i++)for(var a=o[i].subtables,s=0;s<a.length;s++)for(var l=a[s],u=this.expandCoverage(l.coverage),c=l.alternateSets,d=0;d<u.length;d++)n.push({sub:u[d],by:c[d]});return n},St.prototype.getLigatures=function(e,t,r){for(var n=[],o=this.getLookupTables(t,r,e,4),i=0;i<o.length;i++)for(var a=o[i].subtables,s=0;s<a.length;s++)for(var l=a[s],u=this.expandCoverage(l.coverage),c=l.ligatureSets,d=0;d<u.length;d++)for(var f=u[d],h=c[d],p=0;p<h.length;p++){var y=h[p];n.push({sub:[f].concat(y.components),by:y.ligGlyph})}return n},St.prototype.addSingle=function(e,t,r,n){var o=Et(this.getLookupTables(r,n,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});A.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var i=t.sub,a=this.binSearch(o.coverage.glyphs,i);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,i),o.substitute.splice(a,0,0)),o.substitute[a]=t.by},St.prototype.addAlternate=function(e,t,r,n){var o=Et(this.getLookupTables(r,n,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});A.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var i=t.sub,a=this.binSearch(o.coverage.glyphs,i);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,i),o.alternateSets.splice(a,0,0)),o.alternateSets[a]=t.by},St.prototype.addLigature=function(e,t,r,n){var o=this.getLookupTables(r,n,e,4,!0)[0],i=o.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=i),A.assert(1===i.coverage.format,"Ligature: unable to modify coverage table format "+i.coverage.format);var a=t.sub[0],s=t.sub.slice(1),l={ligGlyph:t.by,components:s},u=this.binSearch(i.coverage.glyphs,a);if(0<=u){for(var c=i.ligatureSets[u],d=0;d<c.length;d++)if(Mt(c[d].components,s))return;c.push(l)}else u=-1-u,i.coverage.glyphs.splice(u,0,a),i.ligatureSets.splice(u,0,[l])},St.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}},St.prototype.add=function(e,t,r,n){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,n):this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n)}};var Rt,Dt,It,Ut,Nt={getPath:kt,parse:function(e,t,r,n){for(var o=new we.GlyphSet(n),i=0;i<r.length-1;i+=1){var a=r[i];a!==r[i+1]?o.push(i,we.ttfGlyphLoader(n,i,Lt,e,t+a,At)):o.push(i,we.glyphLoader(n,i))}return o}};function Ft(e){this.font=e,this.getCommands=function(e){return Nt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Bt(e){return e}function Gt(e){return Math.sign(e)*Math.round(Math.abs(e))}function Vt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function zt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Ht(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Wt(e){return Math.sign(e)*Math.floor(Math.abs(e))}function qt(e){var t=this.srPeriod,r=this.srPhase,n=1;return e<0&&(e=-e,n=-1),e+=this.srThreshold-r,e=Math.trunc(e/t)*t,(e+=r)<0?r*n:e*n}var Xt={x:1,y:0,axis:"x",distance:function(e,t,r,n){return(r?e.xo:e.x)-(n?t.xo:t.x)},interpolate:function(e,t,r,n){var o,i,a,s,l,u,c;if(!n||n===this)return o=e.xo-t.xo,i=e.xo-r.xo,l=t.x-t.xo,u=r.x-r.xo,0===(c=(a=Math.abs(o))+(s=Math.abs(i)))?void(e.x=e.xo+(l+u)/2):void(e.x=e.xo+(l*s+u*a)/c);o=n.distance(e,t,!0,!0),i=n.distance(e,r,!0,!0),l=n.distance(t,t,!1,!0),u=n.distance(r,r,!1,!0),0!==(c=(a=Math.abs(o))+(s=Math.abs(i)))?Xt.setRelative(e,e,(l*s+u*a)/c,n,!0):Xt.setRelative(e,e,(l+u)/2,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,n,o){if(n&&n!==this){var i=o?t.xo:t.x,a=o?t.yo:t.y,s=i+r*n.x,l=a+r*n.y;e.x=s+(e.y-l)/n.normalSlope}else e.x=(o?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Yt={x:0,y:1,axis:"y",distance:function(e,t,r,n){return(r?e.yo:e.y)-(n?t.yo:t.y)},interpolate:function(e,t,r,n){var o,i,a,s,l,u,c;if(!n||n===this)return o=e.yo-t.yo,i=e.yo-r.yo,l=t.y-t.yo,u=r.y-r.yo,0===(c=(a=Math.abs(o))+(s=Math.abs(i)))?void(e.y=e.yo+(l+u)/2):void(e.y=e.yo+(l*s+u*a)/c);o=n.distance(e,t,!0,!0),i=n.distance(e,r,!0,!0),l=n.distance(t,t,!1,!0),u=n.distance(r,r,!1,!0),0!==(c=(a=Math.abs(o))+(s=Math.abs(i)))?Yt.setRelative(e,e,(l*s+u*a)/c,n,!0):Yt.setRelative(e,e,(l+u)/2,n,!0)},normalSlope:0,setRelative:function(e,t,r,n,o){if(n&&n!==this){var i=o?t.xo:t.x,a=o?t.yo:t.y,s=i+r*n.x,l=a+r*n.y;e.y=l+n.normalSlope*(e.x-s)}else e.y=(o?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Zt(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Qt(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1==(e/=r)&&0===t?Xt:0===e&&1===t?Yt:new Zt(e,t)}function Kt(e,t,r,n){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Xt),Object.freeze(Yt),Zt.prototype.distance=function(e,t,r,n){return this.x*Xt.distance(e,t,r,n)+this.y*Yt.distance(e,t,r,n)},Zt.prototype.interpolate=function(e,t,r,n){var o,i,a,s,l,u,c;a=n.distance(e,t,!0,!0),s=n.distance(e,r,!0,!0),o=n.distance(t,t,!1,!0),i=n.distance(r,r,!1,!0),0!==(c=(l=Math.abs(a))+(u=Math.abs(s)))?this.setRelative(e,e,(o*u+i*l)/c,n,!0):this.setRelative(e,e,(o+i)/2,n,!0)},Zt.prototype.setRelative=function(e,t,r,n,o){n=n||this;var i=o?t.xo:t.x,a=o?t.yo:t.y,s=i+r*n.x,l=a+r*n.y,u=n.normalSlope,c=this.slope,d=e.x,f=e.y;e.x=(c*d-u*s+l-f)/(c-u),e.y=c*(e.x-d)+f},Zt.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Kt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Kt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Jt=Object.freeze(new Kt(0,0)),$t={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function er(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Xt,this.round=Gt}}function tr(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new Kt(0,0)}function rr(e,t){var r,n=e.prog,o=e.ip,i=1;do{if(88===(r=n[++o]))i++;else if(89===r)i--;else if(64===r)o+=n[o+1]+1;else if(65===r)o+=2*n[o+1]+1;else if(176<=r&&r<=183)o+=r-176+1;else if(184<=r&&r<=191)o+=2*(r-184+1);else if(t&&1===i&&27===r)break}while(0<i);e.ip=o}function nr(e,r){t.DEBUG&&console.log(r.step,"SVTCA["+e.axis+"]"),r.fv=r.pv=r.dpv=e}function or(e,r){t.DEBUG&&console.log(r.step,"SPVTCA["+e.axis+"]"),r.pv=r.dpv=e}function ir(e,r){t.DEBUG&&console.log(r.step,"SFVTCA["+e.axis+"]"),r.fv=e}function ar(e,r){var n,o,i=r.stack,a=i.pop(),s=i.pop(),l=r.z2[a],u=r.z1[s];t.DEBUG&&console.log("SPVTL["+e+"]",a,s),o=e?(n=l.y-u.y,u.x-l.x):(n=u.x-l.x,u.y-l.y),r.pv=r.dpv=Qt(n,o)}function sr(e,r){var n,o,i=r.stack,a=i.pop(),s=i.pop(),l=r.z2[a],u=r.z1[s];t.DEBUG&&console.log("SFVTL["+e+"]",a,s),o=e?(n=l.y-u.y,u.x-l.x):(n=u.x-l.x,u.y-l.y),r.fv=Qt(n,o)}function lr(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function ur(e,r){var n=r.stack.pop(),o=r.z0[n],i=r.fv,a=r.pv;t.DEBUG&&console.log(r.step,"MDAP["+e+"]",n);var s=a.distance(o,Jt);e&&(s=r.round(s)),i.setRelative(o,Jt,s,a),i.touch(o),r.rp0=r.rp1=n}function cr(e,r){var n,o,i,a=r.z2,s=a.length-2;t.DEBUG&&console.log(r.step,"IUP["+e.axis+"]");for(var l=0;l<s;l++)n=a[l],e.touched(n)||(o=n.prevTouched(e))!==n&&(o===(i=n.nextTouched(e))&&e.setRelative(n,n,e.distance(o,o,!1,!0),e,!0),e.interpolate(n,o,i,e))}function dr(e,r){for(var n=r.stack,o=e?r.rp1:r.rp2,i=(e?r.z0:r.z1)[o],a=r.fv,s=r.pv,l=r.loop,u=r.z2;l--;){var c=n.pop(),d=u[c],f=s.distance(i,i,!1,!0);a.setRelative(d,d,f,s),a.touch(d),t.DEBUG&&console.log(r.step,(1<r.loop?"loop "+(r.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}r.loop=1}function fr(e,r){var n=r.stack,o=e?r.rp1:r.rp2,i=(e?r.z0:r.z1)[o],a=r.fv,s=r.pv,l=n.pop(),u=r.z2[r.contours[l]],c=u;t.DEBUG&&console.log(r.step,"SHC["+e+"]",l);for(var d=s.distance(i,i,!1,!0);c!==i&&a.setRelative(c,c,d,s),(c=c.nextPointOnContour)!==u;);}function hr(e,r){var n,o,i=r.stack,a=e?r.rp1:r.rp2,s=(e?r.z0:r.z1)[a],l=r.fv,u=r.pv,c=i.pop();switch(t.DEBUG&&console.log(r.step,"SHZ["+e+"]",c),c){case 0:n=r.tZone;break;case 1:n=r.gZone;break;default:throw new Error("Invalid zone")}for(var d=u.distance(s,s,!1,!0),f=n.length-2,h=0;h<f;h++)o=n[h],l.setRelative(o,o,d,u)}function pr(e,r){var n=r.stack,o=n.pop()/64,i=n.pop(),a=r.z1[i],s=r.z0[r.rp0],l=r.fv,u=r.pv;l.setRelative(a,s,o,u),l.touch(a),t.DEBUG&&console.log(r.step,"MSIRP["+e+"]",o,i),r.rp1=r.rp0,r.rp2=i,e&&(r.rp0=i)}function yr(e,r){var n=r.stack,o=n.pop(),i=n.pop(),a=r.z0[i],s=r.fv,l=r.pv,u=r.cvt[o];t.DEBUG&&console.log(r.step,"MIAP["+e+"]",o,"(",u,")",i);var c=l.distance(a,Jt);e&&(Math.abs(c-u)<r.cvCutIn&&(c=u),c=r.round(c)),s.setRelative(a,Jt,c,l),0===r.zp0&&(a.xo=a.x,a.yo=a.y),s.touch(a),r.rp0=r.rp1=i}function mr(e,r){var n=r.stack,o=n.pop(),i=r.z2[o];t.DEBUG&&console.log(r.step,"GC["+e+"]",o),n.push(64*r.dpv.distance(i,Jt,e,!1))}function gr(e,r){var n=r.stack,o=n.pop(),i=n.pop(),a=r.z1[o],s=r.z0[i],l=r.dpv.distance(s,a,e,e);t.DEBUG&&console.log(r.step,"MD["+e+"]",o,i,"->",l),r.stack.push(Math.round(64*l))}function vr(e,r){var n=r.stack,o=n.pop(),i=r.fv,a=r.pv,s=r.ppem,l=r.deltaBase+16*(e-1),u=r.deltaShift,c=r.z0;t.DEBUG&&console.log(r.step,"DELTAP["+e+"]",o,n);for(var d=0;d<o;d++){var f=n.pop(),h=n.pop();if(l+((240&h)>>4)===s){var p=(15&h)-8;0<=p&&p++,t.DEBUG&&console.log(r.step,"DELTAPFIX",f,"by",p*u);var y=c[f];i.setRelative(y,y,p*u,a)}}}function br(e,r){var n=r.stack,o=n.pop();t.DEBUG&&console.log(r.step,"ROUND[]"),n.push(64*r.round(o/64))}function _r(e,r){var n=r.stack,o=n.pop(),i=r.ppem,a=r.deltaBase+16*(e-1),s=r.deltaShift;t.DEBUG&&console.log(r.step,"DELTAC["+e+"]",o,n);for(var l=0;l<o;l++){var u=n.pop(),c=n.pop();if(a+((240&c)>>4)===i){var d=(15&c)-8;0<=d&&d++;var f=d*s;t.DEBUG&&console.log(r.step,"DELTACFIX",u,"by",f),r.cvt[u]+=f}}}function xr(e,r){var n,o,i=r.stack,a=i.pop(),s=i.pop(),l=r.z2[a],u=r.z1[s];t.DEBUG&&console.log(r.step,"SDPVTL["+e+"]",a,s),o=e?(n=l.y-u.y,u.x-l.x):(n=u.x-l.x,u.y-l.y),r.dpv=Qt(n,o)}function wr(e,r){var n=r.stack,o=r.prog,i=r.ip;t.DEBUG&&console.log(r.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)n.push(o[++i]);r.ip=i}function jr(e,r){var n=r.ip,o=r.prog,i=r.stack;t.DEBUG&&console.log(r.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var s=o[++n]<<8|o[++n];32768&s&&(s=-(1+(65535^s))),i.push(s)}r.ip=n}function Sr(e,r,n,o,i,a){var s,l,u,c,d=a.stack,f=e&&d.pop(),h=d.pop(),p=a.rp0,y=a.z0[p],m=a.z1[h],g=a.minDis,v=a.fv,b=a.dpv;u=0<=(l=s=b.distance(m,y,!0,!0))?1:-1,l=Math.abs(l),e&&(c=a.cvt[f],o&&Math.abs(l-c)<a.cvCutIn&&(l=c)),n&&l<g&&(l=g),o&&(l=a.round(l)),v.setRelative(m,y,u*l,b),v.touch(m),t.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(r?"M":"m")+(n?">":"_")+(o?"R":"_")+(0===i?"Gr":1===i?"Bl":2===i?"Wh":"")+"]",e?f+"("+a.cvt[f]+","+c+")":"",h,"(d =",s,"->",u*l,")"),a.rp1=a.rp0,a.rp2=h,r&&(a.rp0=h)}Ft.prototype.exec=function(e,r){if("number"!=typeof r)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var n=this.font,o=this._prepState;if(!o||o.ppem!==r){var i=this._fpgmState;if(!i){er.prototype=$t,(i=this._fpgmState=new er("fpgm",n.tables.fpgm)).funcs=[],i.font=n,t.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Dt(i)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}er.prototype=i,(o=this._prepState=new er("prep",n.tables.prep)).ppem=r;var a=n.tables.cvt;if(a)for(var s=o.cvt=new Array(a.length),l=r/n.unitsPerEm,u=0;u<a.length;u++)s[u]=a[u]*l;else o.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),o.step=-1);try{Dt(o)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return It(e,o)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},It=function(e,r){var n,o,i,a=r.ppem/r.font.unitsPerEm,s=a,l=e.components;if(er.prototype=r,l){var u=r.font;o=[],n=[];for(var c=0;c<l.length;c++){var d=l[c],f=u.glyphs.get(d.glyphIndex);i=new er("glyf",f.instructions),t.DEBUG&&(console.log("---EXEC COMP "+c+"---"),i.step=-1),Ut(f,i,a,s);for(var h=Math.round(d.dx*a),p=Math.round(d.dy*s),y=i.gZone,m=i.contours,g=0;g<y.length;g++){var v=y[g];v.xTouched=v.yTouched=!1,v.xo=v.x=v.x+h,v.yo=v.y=v.y+p}var b=o.length;o.push.apply(o,y);for(var _=0;_<m.length;_++)n.push(m[_]+b)}e.instructions&&!i.inhibitGridFit&&((i=new er("glyf",e.instructions)).gZone=i.z0=i.z1=i.z2=o,i.contours=n,o.push(new Kt(0,0),new Kt(Math.round(e.advanceWidth*a),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),i.step=-1),Dt(i),o.length-=2)}else i=new er("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),i.step=-1),Ut(e,i,a,s),o=i.gZone;return o},Ut=function(e,r,n,o){for(var i,a,s,l=e.points||[],u=l.length,c=r.gZone=r.z0=r.z1=r.z2=[],d=r.contours=[],f=0;f<u;f++)i=l[f],c[f]=new Kt(i.x*n,i.y*o,i.lastPointOfContour,i.onCurve);for(var h=0;h<u;h++)i=c[h],a||(a=i,d.push(h)),i.lastPointOfContour?((i.nextPointOnContour=a).prevPointOnContour=i,a=void 0):(s=c[h+1],(i.nextPointOnContour=s).prevPointOnContour=i);if(!r.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",r.stack);for(var p=0;p<u;p++)console.log(p,c[p].x,c[p].y)}if(c.push(new Kt(0,0),new Kt(Math.round(e.advanceWidth*n),0)),Dt(r),c.length-=2,t.DEBUG){console.log("FINISHED GLYPH",r.stack);for(var y=0;y<u;y++)console.log(y,c[y].x,c[y].y)}}},Dt=function(e){var r=e.prog;if(r){var n,o=r.length;for(e.ip=0;e.ip<o;e.ip++){if(t.DEBUG&&e.step++,!(n=Rt[r[e.ip]]))throw new Error("unknown instruction: 0x"+Number(r[e.ip]).toString(16));n(e)}}},Rt=[nr.bind(void 0,Yt),nr.bind(void 0,Xt),or.bind(void 0,Yt),or.bind(void 0,Xt),ir.bind(void 0,Yt),ir.bind(void 0,Xt),ar.bind(void 0,0),ar.bind(void 0,1),sr.bind(void 0,0),sr.bind(void 0,1),function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,o),e.pv=e.dpv=Qt(o,n)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,o),e.fv=Qt(o,n)},function(e){var r=e.stack,n=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),r.push(16384*n.x),r.push(16384*n.y)},function(e){var r=e.stack,n=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),r.push(16384*n.x),r.push(16384*n.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var r=e.stack,n=r.pop(),o=r.pop(),i=r.pop(),a=r.pop(),s=r.pop(),l=e.z0,u=e.z1,c=l[n],d=l[o],f=u[i],h=u[a],p=e.z2[s];t.DEBUG&&console.log("ISECT[], ",n,o,i,a,s);var y=c.x,m=c.y,g=d.x,v=d.y,b=f.x,_=f.y,x=h.x,w=h.y,j=(y-g)*(_-w)-(m-v)*(b-x),S=y*v-m*g,M=b*w-_*x;p.x=(S*(b-x)-M*(y-g))/j,p.y=(S*(_-w)-M*(m-v))/j},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",r),e.zp0=r){case 0:e.tZone||tr(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",r),e.zp1=r){case 0:e.tZone||tr(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",r),e.zp2=r){case 0:e.tZone||tr(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",r),e.zp0=e.zp1=e.zp2=r,r){case 0:e.tZone||tr(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Gt},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=zt},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",r),e.minDis=r/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),rr(e,!1)},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",r),e.ip+=r-1},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",r),e.cvCutIn=r/64},void 0,void 0,function(e){var r=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),r.push(r[r.length-1])},lr,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),r.push(n),r.push(o)},function(e){var r=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),r.push(r.length)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",n),r.push(r[r.length-n])},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",n),r.push(r.splice(r.length-n,1)[0])},void 0,void 0,void 0,function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",n,o);var i=e.ip,a=e.prog;e.prog=e.funcs[n];for(var s=0;s<o;s++)Dt(e),t.DEBUG&&console.log(++e.step,s+1<o?"next loopcall":"done loopcall",s);e.ip=i,e.prog=a},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",r);var n=e.ip,o=e.prog;e.prog=e.funcs[r],Dt(e),e.ip=n,e.prog=o,t.DEBUG&&console.log(++e.step,"returning from",r)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var r=e.stack,n=e.prog,o=e.ip,i=r.pop(),a=o;for(t.DEBUG&&console.log(e.step,"FDEF[]",i);45!==n[++o];);e.ip=o,e.funcs[i]=n.slice(a+1,o)},void 0,ur.bind(void 0,0),ur.bind(void 0,1),cr.bind(void 0,Yt),cr.bind(void 0,Xt),dr.bind(void 0,0),dr.bind(void 0,1),fr.bind(void 0,0),fr.bind(void 0,1),hr.bind(void 0,0),hr.bind(void 0,1),function(e){for(var r=e.stack,n=e.loop,o=e.fv,i=r.pop()/64,a=e.z2;n--;){var s=r.pop(),l=a[s];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",s,i),o.setRelative(l,l,i),o.touch(l)}e.loop=1},function(e){for(var r=e.stack,n=e.rp1,o=e.rp2,i=e.loop,a=e.z0[n],s=e.z1[o],l=e.fv,u=e.dpv,c=e.z2;i--;){var d=r.pop(),f=c[d];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"IP[]",d,n,"<->",o),l.interpolate(f,a,s,u),l.touch(f)}e.loop=1},pr.bind(void 0,0),pr.bind(void 0,1),function(e){for(var r=e.stack,n=e.rp0,o=e.z0[n],i=e.loop,a=e.fv,s=e.pv,l=e.z1;i--;){var u=r.pop(),c=l[u];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-i)+": ":"")+"ALIGNRP[]",u),a.setRelative(c,o,0,s),a.touch(c)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Vt},yr.bind(void 0,0),yr.bind(void 0,1),function(e){var r=e.prog,n=e.ip,o=e.stack,i=r[++n];t.DEBUG&&console.log(e.step,"NPUSHB[]",i);for(var a=0;a<i;a++)o.push(r[++n]);e.ip=n},function(e){var r=e.ip,n=e.prog,o=e.stack,i=n[++r];t.DEBUG&&console.log(e.step,"NPUSHW[]",i);for(var a=0;a<i;a++){var s=n[++r]<<8|n[++r];32768&s&&(s=-(1+(65535^s))),o.push(s)}e.ip=r},function(e){var r=e.stack,n=e.store;n=n||(e.store=[]);var o=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"WS",o,i),n[i]=o},function(e){var r=e.stack,n=e.store,o=r.pop();t.DEBUG&&console.log(e.step,"RS",o);var i=n&&n[o]||0;r.push(i)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"WCVTP",n,o),e.cvt[o]=n/64},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"RCVT",n),r.push(64*e.cvt[n])},mr.bind(void 0,0),mr.bind(void 0,1),void 0,gr.bind(void 0,0),gr.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"LT[]",n,o),r.push(o<n?1:0)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",n,o),r.push(o<=n?1:0)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"GT[]",n,o),r.push(n<o?1:0)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",n,o),r.push(n<=o?1:0)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"EQ[]",n,o),r.push(n===o?1:0)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"NEQ[]",n,o),r.push(n!==o?1:0)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"ODD[]",n),r.push(Math.trunc(n)%2?1:0)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"EVEN[]",n),r.push(Math.trunc(n)%2?0:1)},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",r),r||(rr(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"AND[]",n,o),r.push(n&&o?1:0)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"OR[]",n,o),r.push(n||o?1:0)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"NOT[]",n),r.push(n?0:1)},vr.bind(void 0,1),function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",r),e.deltaBase=r},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",r),e.deltaShift=Math.pow(.5,r)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"ADD[]",n,o),r.push(o+n)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"SUB[]",n,o),r.push(o-n)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"DIV[]",n,o),r.push(64*o/n)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"MUL[]",n,o),r.push(o*n/64)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"ABS[]",n),r.push(Math.abs(n))},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"NEG[]",n),r.push(-n)},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",n),r.push(64*Math.floor(n/64))},function(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"CEILING[]",n),r.push(64*Math.ceil(n/64))},br.bind(void 0,0),br.bind(void 0,1),br.bind(void 0,2),br.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",n,o),e.cvt[o]=n*e.ppem/e.font.unitsPerEm},vr.bind(void 0,2),vr.bind(void 0,3),_r.bind(void 0,1),_r.bind(void 0,2),_r.bind(void 0,3),function(e){var r,n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",n),e.round=qt,192&n){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=r,48&n){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid SROUND value")}n&=15,e.srThreshold=0===n?0:(n/8-.5)*r},function(e){var r,n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",n),e.round=qt,192&n){case 0:r=Math.sqrt(2)/2;break;case 64:r=Math.sqrt(2);break;case 128:r=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=r,48&n){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value")}n&=15,e.srThreshold=0===n?0:(n/8-.5)*r},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Bt},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Ht},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Wt},lr,lr,void 0,void 0,void 0,void 0,void 0,function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",r)},xr.bind(void 0,0),xr.bind(void 0,1),function(e){var r=e.stack,n=r.pop(),o=0;t.DEBUG&&console.log(e.step,"GETINFO[]",n),1&n&&(o=35),32&n&&(o|=4096),r.push(o)},void 0,function(e){var r=e.stack,n=r.pop(),o=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),r.push(o),r.push(n),r.push(i)},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"MAX[]",n,o),r.push(Math.max(o,n))},function(e){var r=e.stack,n=r.pop(),o=r.pop();t.DEBUG&&console.log(e.step,"MIN[]",n,o),r.push(Math.min(o,n))},function(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",r)},function(e){var r=e.stack.pop(),n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",r,n),r){case 1:return void(e.inhibitGridFit=!!n);case 2:return void(e.ignoreCvt=!!n);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,wr.bind(void 0,1),wr.bind(void 0,2),wr.bind(void 0,3),wr.bind(void 0,4),wr.bind(void 0,5),wr.bind(void 0,6),wr.bind(void 0,7),wr.bind(void 0,8),jr.bind(void 0,1),jr.bind(void 0,2),jr.bind(void 0,3),jr.bind(void 0,4),jr.bind(void 0,5),jr.bind(void 0,6),jr.bind(void 0,7),jr.bind(void 0,8),Sr.bind(void 0,0,0,0,0,0),Sr.bind(void 0,0,0,0,0,1),Sr.bind(void 0,0,0,0,0,2),Sr.bind(void 0,0,0,0,0,3),Sr.bind(void 0,0,0,0,1,0),Sr.bind(void 0,0,0,0,1,1),Sr.bind(void 0,0,0,0,1,2),Sr.bind(void 0,0,0,0,1,3),Sr.bind(void 0,0,0,1,0,0),Sr.bind(void 0,0,0,1,0,1),Sr.bind(void 0,0,0,1,0,2),Sr.bind(void 0,0,0,1,0,3),Sr.bind(void 0,0,0,1,1,0),Sr.bind(void 0,0,0,1,1,1),Sr.bind(void 0,0,0,1,1,2),Sr.bind(void 0,0,0,1,1,3),Sr.bind(void 0,0,1,0,0,0),Sr.bind(void 0,0,1,0,0,1),Sr.bind(void 0,0,1,0,0,2),Sr.bind(void 0,0,1,0,0,3),Sr.bind(void 0,0,1,0,1,0),Sr.bind(void 0,0,1,0,1,1),Sr.bind(void 0,0,1,0,1,2),Sr.bind(void 0,0,1,0,1,3),Sr.bind(void 0,0,1,1,0,0),Sr.bind(void 0,0,1,1,0,1),Sr.bind(void 0,0,1,1,0,2),Sr.bind(void 0,0,1,1,0,3),Sr.bind(void 0,0,1,1,1,0),Sr.bind(void 0,0,1,1,1,1),Sr.bind(void 0,0,1,1,1,2),Sr.bind(void 0,0,1,1,1,3),Sr.bind(void 0,1,0,0,0,0),Sr.bind(void 0,1,0,0,0,1),Sr.bind(void 0,1,0,0,0,2),Sr.bind(void 0,1,0,0,0,3),Sr.bind(void 0,1,0,0,1,0),Sr.bind(void 0,1,0,0,1,1),Sr.bind(void 0,1,0,0,1,2),Sr.bind(void 0,1,0,0,1,3),Sr.bind(void 0,1,0,1,0,0),Sr.bind(void 0,1,0,1,0,1),Sr.bind(void 0,1,0,1,0,2),Sr.bind(void 0,1,0,1,0,3),Sr.bind(void 0,1,0,1,1,0),Sr.bind(void 0,1,0,1,1,1),Sr.bind(void 0,1,0,1,1,2),Sr.bind(void 0,1,0,1,1,3),Sr.bind(void 0,1,1,0,0,0),Sr.bind(void 0,1,1,0,0,1),Sr.bind(void 0,1,1,0,0,2),Sr.bind(void 0,1,1,0,0,3),Sr.bind(void 0,1,1,0,1,0),Sr.bind(void 0,1,1,0,1,1),Sr.bind(void 0,1,1,0,1,2),Sr.bind(void 0,1,1,0,1,3),Sr.bind(void 0,1,1,1,0,0),Sr.bind(void 0,1,1,1,0,1),Sr.bind(void 0,1,1,1,0,2),Sr.bind(void 0,1,1,1,0,3),Sr.bind(void 0,1,1,1,1,0),Sr.bind(void 0,1,1,1,1,1),Sr.bind(void 0,1,1,1,1,2),Sr.bind(void 0,1,1,1,1,3)];var Mr=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function Er(e){(e=e||{}).empty||(Ot(e.familyName,"When creating a new Font object, familyName is required."),Ot(e.styleName,"When creating a new Font object, styleName is required."),Ot(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ot(e.ascender,"When creating a new Font object, ascender is required."),Ot(e.descender,"When creating a new Font object, descender is required."),Ot(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new we.GlyphSet(this,e.glyphs||[]),this.encoding=new pe(this),this.position=new jt(this),this.substitution=new St(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Ft(this):void 0}})}function Tr(e,t){var r=JSON.stringify(e),n=256;for(var o in t){var i=parseInt(o);if(i&&!(i<256)){if(JSON.stringify(t[o])===r)return i;n<=i&&(n=i+1)}}return t[n]=e,n}function Or(e,t,r,n){for(var o=[{name:"nameID_"+e,type:"USHORT",value:Tr(t.name,n)},{name:"flags_"+e,type:"USHORT",value:0}],i=0;i<r.length;++i){var a=r[i].tag;o.push({name:"axis_"+e+" "+a,type:"FIXED",value:t.coordinates[a]<<16})}return o}function Cr(e,t,r,n){var o={},i=new le.Parser(e,t);o.name=n[i.parseUShort()]||{},i.skip("uShort",1),o.coordinates={};for(var a=0;a<r.length;++a)o.coordinates[r[a].tag]=i.parseFixed();return o}Er.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Er.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Er.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||this.glyphs.get(0)},Er.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var r=Mr(e),n=[],o=0;o<r.length;o+=1){var i=r[o];n.push(this.charToGlyphIndex(i))}var a=n.length;if(t.features){var s=t.script||this.substitution.getDefaultScriptName(),l=[];t.features.liga&&(l=l.concat(this.substitution.getFeature("liga",s,t.language))),t.features.rlig&&(l=l.concat(this.substitution.getFeature("rlig",s,t.language)));for(var u=0;u<a;u+=1)for(var c=0;c<l.length;c++){for(var d=l[c],f=d.sub,h=f.length,p=0;p<h&&f[p]===n[u+p];)p++;p===h&&(n.splice(u,h,d.by),a=a-h+1)}}for(var y=new Array(a),m=this.glyphs.get(0),g=0;g<a;g+=1)y[g]=this.glyphs.get(n[g])||m;return y},Er.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Er.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||this.glyphs.get(0)},Er.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Er.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},Er.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Er.prototype.forEachGlyph=function(e,t,r,n,o,i){t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:72,o=o||this.defaultRenderOptions;var a,s=1/this.unitsPerEm*n,l=this.stringToGlyphs(e,o);if(o.kerning){var u=o.script||this.position.getDefaultScriptName();a=this.position.getKerningTables(u,o.language)}for(var c=0;c<l.length;c+=1){var d=l[c];i.call(this,d,t,r,n,o),d.advanceWidth&&(t+=d.advanceWidth*s),o.kerning&&c<l.length-1&&(t+=(a?this.position.getKerningValue(a,d.index,l[c+1].index):this.getKerningValue(d,l[c+1]))*s),o.letterSpacing?t+=o.letterSpacing*n:o.tracking&&(t+=o.tracking/1e3*n)}return t},Er.prototype.getPath=function(e,t,r,n,o){var i=new L;return this.forEachGlyph(e,t,r,n,o,function(e,t,r,n){var a=e.getPath(t,r,n,o,this);i.extend(a)}),i},Er.prototype.getPaths=function(e,t,r,n,o){var i=[];return this.forEachGlyph(e,t,r,n,o,function(e,t,r,n){var a=e.getPath(t,r,n,o,this);i.push(a)}),i},Er.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},Er.prototype.draw=function(e,t,r,n,o,i){this.getPath(t,r,n,o,i).draw(e)},Er.prototype.drawPoints=function(e,t,r,n,o,i){this.forEachGlyph(t,r,n,o,i,function(t,r,n,o){t.drawPoints(e,r,n,o)})},Er.prototype.drawMetrics=function(e,t,r,n,o,i){this.forEachGlyph(t,r,n,o,i,function(t,r,n,o){t.drawMetrics(e,r,n,o)})},Er.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Er.prototype.validate=function(){var e=this;function t(t){var r=e.getEnglishName(t);r&&r.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},Er.prototype.toTables=function(){return vt(this)},Er.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Er.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e[n];return t},Er.prototype.download=function(t){var r=this.getEnglishName("fontFamily"),o=this.getEnglishName("fontSubfamily");t=t||r.replace(/\s/g,"")+"-"+o+".otf";var i=this.toArrayBuffer();if("undefined"!=typeof window)window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,function(e){e.root.getFile(t,{create:!0},function(e){e.createWriter(function(t){var r=new DataView(i),n=new Blob([r],{type:"font/opentype"});t.write(n),t.addEventListener("writeend",function(){location.href=e.toURL()},!1)})})},function(e){throw new Error(e.name+": "+e.message)});else{var a=e("fs"),s=function(e){for(var t=new n(e.byteLength),r=new Uint8Array(e),o=0;o<t.length;++o)t[o]=r[o];return t}(i);a.writeFileSync(t,s)}},Er.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Er.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Er.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Lr={make:function(e,t){var r,n,o,i,a=new ee.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);a.offsetToData=a.sizeOf();for(var s=0;s<e.axes.length;s++)a.fields=a.fields.concat((r=s,o=t,i=Tr((n=e.axes[s]).name,o),[{name:"tag_"+r,type:"TAG",value:n.tag},{name:"minValue_"+r,type:"FIXED",value:n.minValue<<16},{name:"defaultValue_"+r,type:"FIXED",value:n.defaultValue<<16},{name:"maxValue_"+r,type:"FIXED",value:n.maxValue<<16},{name:"flags_"+r,type:"USHORT",value:0},{name:"nameID_"+r,type:"USHORT",value:i}]));for(var l=0;l<e.instances.length;l++)a.fields=a.fields.concat(Or(l,e.instances[l],e.axes,t));return a},parse:function(e,t,r){var n=new le.Parser(e,t),o=n.parseULong();A.argument(65536===o,"Unsupported fvar table version.");var i=n.parseOffset16();n.skip("uShort",1);for(var a,s,l,u,c,d=n.parseUShort(),f=n.parseUShort(),h=n.parseUShort(),p=n.parseUShort(),y=[],m=0;m<d;m++)y.push((a=e,s=t+i+m*f,l=r,c=u=void 0,u={},c=new le.Parser(a,s),u.tag=c.parseTag(),u.minValue=c.parseFixed(),u.defaultValue=c.parseFixed(),u.maxValue=c.parseFixed(),c.skip("uShort",1),u.name=l[c.parseUShort()]||{},u));for(var g=[],v=t+i+d*f,b=0;b<h;b++)g.push(Cr(e,v+b*p,y,r));return{axes:y,instances:g}}},Pr=new Array(10);Pr[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ae.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ae.coverage),values:this.parseValueRecordList()}:void A.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Pr[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();A.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(ae.coverage),n=this.parseUShort(),o=this.parseUShort();if(1===t)return{posFormat:t,coverage:r,valueFormat1:n,valueFormat2:o,pairSets:this.parseList(ae.pointer(ae.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(n),value2:this.parseValueRecord(o)}})))};if(2===t){var i=this.parsePointer(ae.classDef),a=this.parsePointer(ae.classDef),s=this.parseUShort(),l=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:n,valueFormat2:o,classDef1:i,classDef2:a,class1Count:s,class2Count:l,classRecords:this.parseList(s,ae.list(l,function(){return{value1:this.parseValueRecord(n),value2:this.parseValueRecord(o)}}))}}},Pr[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Pr[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Pr[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Pr[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Pr[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Pr[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Pr[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var kr=new Array(10),Ar={parse:function(e,t){var r=new ae(e,t=t||0),n=r.parseVersion(1);return A.argument(1===n||1.1===n,"Unsupported GPOS table version "+n),1===n?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Pr)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Pr),variations:r.parseFeatureVariationsList()}},make:function(e){return new ee.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new ee.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new ee.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new ee.LookupList(e.lookups,kr)}])}},Rr={parse:function(e,t){var r=new le.Parser(e,t),n=r.parseUShort();if(0===n)return function(e){var t={};e.skip("uShort");var r=e.parseUShort();A.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var n=e.parseUShort();e.skip("uShort",3);for(var o=0;o<n;o+=1){var i=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[i+","+a]=s}return t}(r);if(1===n)return function(e){var t={};e.skip("uShort"),1<e.parseULong()&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=255&e.parseUShort();if(e.skip("uShort"),0==r){var n=e.parseUShort();e.skip("uShort",3);for(var o=0;o<n;o+=1){var i=e.parseUShort(),a=e.parseUShort(),s=e.parseShort();t[i+","+a]=s}}return t}(r);throw new Error("Unsupported kern table version ("+n+").")}},Dr={parse:function(e,t,r,n){for(var o=new le.Parser(e,t),i=n?o.parseUShort:o.parseULong,a=[],s=0;s<r+1;s+=1){var l=i.call(o);n&&(l*=2),a.push(l)}return a}};function Ir(e,t){for(var r=[],n=12,o=0;o<t;o+=1){var i=le.getTag(e,n),a=le.getULong(e,n+4),s=le.getULong(e,n+8),l=le.getULong(e,n+12);r.push({tag:i,checksum:a,offset:s,length:l,compression:!1}),n+=16}return r}function Ur(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),n=new Uint8Array(t.length);if(T(r,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}function Nr(e){var t,r,n,o,i,a,s,l,u,c,d,f,h,p,y=new Er({empty:!0}),m=new DataView(e,0),g=[],v=le.getTag(m,0);if(v===String.fromCharCode(0,1,0,0)||"true"===v||"typ1"===v)y.outlinesFormat="truetype",g=Ir(m,n=le.getUShort(m,4));else if("OTTO"===v)y.outlinesFormat="cff",g=Ir(m,n=le.getUShort(m,4));else{if("wOFF"!==v)throw new Error("Unsupported OpenType signature "+v);var b=le.getTag(m,4);if(b===String.fromCharCode(0,1,0,0))y.outlinesFormat="truetype";else{if("OTTO"!==b)throw new Error("Unsupported OpenType flavor "+v);y.outlinesFormat="cff"}g=function(e,t){for(var r=[],n=44,o=0;o<t;o+=1){var i,a=le.getTag(e,n),s=le.getULong(e,n+4),l=le.getULong(e,n+8),u=le.getULong(e,n+12);i=l<u&&"WOFF",r.push({tag:a,offset:s,compression:i,compressedLength:l,length:u}),n+=20}return r}(m,n=le.getUShort(m,12))}for(var _=0;_<n;_+=1){var x=g[_],w=void 0;switch(x.tag){case"cmap":w=Ur(m,x),y.tables.cmap=ue.parse(w.data,w.offset),y.encoding=new ye(y.tables.cmap);break;case"cvt ":w=Ur(m,x),p=new le.Parser(w.data,w.offset),y.tables.cvt=p.parseShortList(x.length/2);break;case"fvar":i=x;break;case"fpgm":w=Ur(m,x),p=new le.Parser(w.data,w.offset),y.tables.fpgm=p.parseByteList(x.length);break;case"head":w=Ur(m,x),y.tables.head=Ge.parse(w.data,w.offset),y.unitsPerEm=y.tables.head.unitsPerEm,t=y.tables.head.indexToLocFormat;break;case"hhea":w=Ur(m,x),y.tables.hhea=Ve.parse(w.data,w.offset),y.ascender=y.tables.hhea.ascender,y.descender=y.tables.hhea.descender,y.numberOfHMetrics=y.tables.hhea.numberOfHMetrics;break;case"hmtx":u=x;break;case"ltag":w=Ur(m,x),r=He.parse(w.data,w.offset);break;case"maxp":w=Ur(m,x),y.tables.maxp=We.parse(w.data,w.offset),y.numGlyphs=y.tables.maxp.numGlyphs;break;case"name":f=x;break;case"OS/2":w=Ur(m,x),y.tables.os2=at.parse(w.data,w.offset);break;case"post":w=Ur(m,x),y.tables.post=st.parse(w.data,w.offset),y.glyphNames=new ge(y.tables.post);break;case"prep":w=Ur(m,x),p=new le.Parser(w.data,w.offset),y.tables.prep=p.parseByteList(x.length);break;case"glyf":a=x;break;case"loca":d=x;break;case"CFF ":o=x;break;case"kern":c=x;break;case"GPOS":s=x;break;case"GSUB":l=x;break;case"meta":h=x}}var j=Ur(m,f);if(y.tables.name=ot.parse(j.data,j.offset,r),y.names=y.tables.name,a&&d){var S=0===t,M=Ur(m,d),E=Dr.parse(M.data,M.offset,y.numGlyphs,S),T=Ur(m,a);y.glyphs=Nt.parse(T.data,T.offset,E,y)}else{if(!o)throw new Error("Font doesn't contain TrueType or CFF outlines.");var O=Ur(m,o);Be.parse(O.data,O.offset,y)}var C=Ur(m,u);if(ze.parse(C.data,C.offset,y.numberOfHMetrics,y.numGlyphs,y.glyphs),function(e){for(var t,r=e.tables.cmap.glyphIndexMap,n=Object.keys(r),o=0;o<n.length;o+=1){var i=n[o],a=r[i];(t=e.glyphs.get(a)).addUnicode(parseInt(i))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}(y),c){var L=Ur(m,c);y.kerningPairs=Rr.parse(L.data,L.offset)}else y.kerningPairs={};if(s){var P=Ur(m,s);y.tables.gpos=Ar.parse(P.data,P.offset),y.position.init()}if(l){var k=Ur(m,l);y.tables.gsub=dt.parse(k.data,k.offset)}if(i){var A=Ur(m,i);y.tables.fvar=Lr.parse(A.data,A.offset,y.names)}if(h){var R=Ur(m,h);y.tables.meta=ft.parse(R.data,R.offset),y.metas=y.tables.meta}return y}t.Font=Er,t.Glyph=be,t.Path=L,t.BoundingBox=C,t._parse=le,t.parse=Nr,t.load=function(t,r){("undefined"==typeof window?function(t,r){e("fs").readFile(t,function(e,t){if(e)return r(e.message);r(null,Tt(t))})}:function(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()})(t,function(e,t){if(e)return r(e);var n;try{n=Nr(t)}catch(e){return r(e,null)}return r(null,n)})},t.loadSync=function(t){return Nr(Tt(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})})("object"==typeof r&&void 0!==t?r:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],240:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;-1<=i&&!o;i--){var a=0<=i?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,o="/"===a.charAt(0))}return(o?"/":"")+(r=t(n(r.split("/"),function(e){return!!e}),!o).join("/"))||"."},r.normalize=function(e){var i=r.isAbsolute(e),a="/"===o(e,-1);return(e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),a=Math.min(o.length,i.length),s=a,l=0;l<a;l++)if(o[l]!==i[l]){s=l;break}var u=[];for(l=s;l<o.length;l++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;1<=i;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},r.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;0<=t;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47===s){if(o)continue;r=a+1;break}-1===n&&(o=!1,n=a+1),46===s?-1===t?t=a:1!==i&&(i=1):-1!==t&&(i=-1)}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:241}],241:[function(e,t,r){var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var u,c=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!d){var e=l(h);d=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new y(e,t)),1!==c.length||d||l(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],242:[function(e,t,r){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))};p.prototype.append=function(e,t){e=d(e),t=f(t);var r=this.map[e];this.map[e]=r?r+","+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=f(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),h(e)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},p.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),h(e)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var c=[301,302,303,307,308];w.redirect=function(e,t){if(-1===c.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=_,e.Response=w,e.fetch=function(e,t){return new Promise(function(r,o){var i=new _(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new w(o,n))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&n&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function g(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(n&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&n&&s(e))this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e,t,r,n=y(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=m(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var r,n,o=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),-1<u.indexOf(n)?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function x(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function w(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},{}],243:[function(e,t,r){"use strict";e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=a(e("../core/main")),i=a(e("../color/color_conversion"));function a(e){return e&&e.__esModule?e:{default:e}}var s=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],l=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];o.default.prototype._rgbColorName=function(e){var t=i.default._rgbaToHSBA(e);return function(e){var t;if(0!==e[0]){e[0]=Math.round(100*e[0]);var r=e[0].toString().split(""),o=r.length-1;r[o]=parseInt(r[o]),r[o]<2.5?r[o]=0:2.5<=r[o]&&r[o]<7.5&&(r[o]=5),2===r.length?(r[0]=parseInt(r[0]),7.5<=r[o]&&(r[o]=0,r[0]=r[0]+1),e[0]=10*r[0]+r[1]):7.5<=r[o]?e[0]=10:e[0]=r[o]}e[2]=e[2]/255;for(var i=e.length-1;1<=i;i--)e[i]<=.25?e[i]=0:.25<e[i]&&e[i]<.75?e[i]=.5:e[i]=1;if(0===e[0]&&0===e[1]&&1===e[2]){for(var a=2;0<=a;a--)n[a]=Math.round(1e4*n[a])/1e4;for(var u=0;u<s.length;u++){if(s[u].h===n[0]&&s[u].s===n[1]&&s[u].b===n[2]){t=s[u].name;break}t="white"}}else for(var c=0;c<l.length;c++)if(l[c].h===e[0]&&l[c].s===e[1]&&l[c].b===e[2]){t=l[c].name;break}return t}([(n=t)[0],t[1],t[2]])};var u=o.default;r.default=u},{"../color/color_conversion":249,"../core/main":264,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],244:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n},i="_Description",a="_fallbackDesc",s="_fallbackTable",l="_Label",u="_labelDesc",c="_labelTable";function d(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}o.default.prototype.describe=function(e,t){if(o.default._validateParameters("describe",arguments),"string"==typeof e){var r=this.canvas.id;e=d(e),this.dummyDOM||(this.dummyDOM=document.getElementById(r).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e))}},o.default.prototype.describeElement=function(e,t,r){if(o.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e){var n=this.canvas.id;t=d(t);var i=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e);e=e.replace(/[^a-zA-Z0-9]/g,"");var a='<th scope="row">'.concat(i,"</th><td>").concat(t,"</td>");this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==a&&(this.descriptions.fallbackElements[e].innerHTML=a):this._describeElementHTML("fallback",e,a),r===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==a&&(this.descriptions.labelElements[e].innerHTML=a):this._describeElementHTML("label",e,a))}},o.default.prototype._describeHTML=function(e,t){var r=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(r+i)))this.dummyDOM.querySelector("#"+r+s).insertAdjacentHTML("beforebegin",'<p id="'.concat(r+a,'"></p>'));else{var n='<div id="'.concat(r).concat(i,'" role="region" aria-label="Canvas Description"><p id="').concat(r).concat(a,'"></p></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#".concat(r)).innerHTML=n}return this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(r).concat(a)),void(this.descriptions.fallback.innerHTML=t)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(r+l)))this.dummyDOM.querySelector("#".concat(r+c))&&this.dummyDOM.querySelector("#".concat(r+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(r).concat(u,'"></p>'));else{var o='<div id="'.concat(r).concat(l,'" class="p5Label"><p id="').concat(r).concat(u,'"></p></div>');this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",o)}return this.descriptions.label=this.dummyDOM.querySelector("#"+r+u),void(this.descriptions.label.innerHTML=t)}},o.default.prototype._describeElementHTML=function(e,t,r){var n=this.canvas.id;if("fallback"===e){if(this.dummyDOM.querySelector("#".concat(n+i)))this.dummyDOM.querySelector("#"+n+s)||this.dummyDOM.querySelector("#"+n+a).insertAdjacentHTML("afterend",'<table id="'.concat(n).concat(s,'"><caption>Canvas elements and their descriptions</caption></table>'));else{var o='<div id="'.concat(n).concat(i,'" role="region" aria-label="Canvas Description"><table id="').concat(n).concat(s,'"><caption>Canvas elements and their descriptions</caption></table></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutput")).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#"+n).innerHTML=o}var d=document.createElement("tr");return d.id=n+"_fte_"+t,this.dummyDOM.querySelector("#"+n+s).appendChild(d),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(n).concat("_fte_").concat(t)),void(this.descriptions.fallbackElements[t].innerHTML=r)}if("label"===e){if(this.dummyDOM.querySelector("#".concat(n+l)))this.dummyDOM.querySelector("#".concat(n+c))||this.dummyDOM.querySelector("#"+n+u).insertAdjacentHTML("afterend",'<table id="'.concat(n+c,'"></table>'));else{var f='<div id="'.concat(n).concat(l,'" class="p5Label"><table id="').concat(n).concat(c,'"></table></div>');this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(n,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",f):this.dummyDOM.querySelector("#"+n).insertAdjacentHTML("afterend",f)}var h=document.createElement("tr");h.id=n+"_lte_"+t,this.dummyDOM.querySelector("#"+n+c).appendChild(h),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(n).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=r}};var f=o.default;r.default=f},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.replace":189}],245:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.map"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype._updateGridOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],r=function(e,t){var r="",n="",o=0;for(var i in t){var a=0;for(var s in t[i]){var l='<li id="'.concat(e,"shape").concat(o,'">').concat(t[i][s].color," ").concat(i,",");"line"===i?l+=" location = ".concat(t[i][s].pos,", length = ").concat(t[i][s].length," pixels"):(l+=" location = ".concat(t[i][s].pos),"point"!==i&&(l+=", area = ".concat(t[i][s].area," %")),l+="</li>"),r+=l,a++,o++}n=1<a?"".concat(n," ").concat(a," ").concat(i,"s"):"".concat(n," ").concat(a," ").concat(i)}return{numShapes:[o,n],details:r}}(e,this.ingredients.shapes),n=function(e,t,r,n){var o="".concat(t," canvas, ").concat(r," by ").concat(n," pixels, contains ").concat(e[0]);return o=1===e[0]?"".concat(o," shape: ").concat(e[1]):"".concat(o," shapes: ").concat(e[1])}(r.numShapes,this.ingredients.colors.background,this.width,this.height),o=function(e,t){var r=0,n="",o=Array.apply(null,Array(10)).map(function(){});for(var i in o)o[i]=Array.apply(null,Array(10)).map(function(){});for(var a in t)for(var s in t[a]){var l;l="line"!==a?'<a href="#'.concat(e,"shape").concat(r,'">').concat(t[a][s].color," ").concat(a,"</a>"):'<a href="#'.concat(e,"shape").concat(r,'">').concat(t[a][s].color," ").concat(a," midpoint</a>"),o[t[a][s].loc.locY][t[a][s].loc.locX]?o[t[a][s].loc.locY][t[a][s].loc.locX]=o[t[a][s].loc.locY][t[a][s].loc.locX]+"  "+l:o[t[a][s].loc.locY][t[a][s].loc.locX]=l,r++}for(var u in o){var c="<tr>";for(var d in o[u])c+="<td>",void 0!==o[u][d]&&(c+=o[u][d]),c+="</td>";n=n+c+"</tr>"}return n}(e,this.ingredients.shapes);n!==t.summary.innerHTML&&(t.summary.innerHTML=n),o!==t.map.innerHTML&&(t.map.innerHTML=o),r.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=r.details),this._accessibleOutputs[e]=t}};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.map":161}],246:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e,t,r){return e[0]<.4*t?e[1]<.4*r?"top left":e[1]>.6*r?"bottom left":"mid left":e[0]>.6*t?e[1]<.4*r?"top right":e[1]>.6*r?"bottom right":"mid right":e[1]<.4*r?"top middle":e[1]>.6*r?"bottom middle":"middle"}function a(e,t,r){var n=Math.floor(e[0]/t*10),o=Math.floor(e[1]/r*10);return 10===n&&--n,10===o&&--o,{locX:n,locY:o}}o.default.prototype.textOutput=function(e){o.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},o.default.prototype.gridOutput=function(e){o.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},o.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},o.default.prototype._createOutput=function(e,t){var r,n,o,i=this.canvas.id;this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode);var a="";"Fallback"===t?(r=i+e,n=i+"accessibleOutput",this.dummyDOM.querySelector("#".concat(n))||(this.dummyDOM.querySelector("#".concat(i,"_Description"))?this.dummyDOM.querySelector("#".concat(i,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(i)).innerHTML='<div id="'.concat(n,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(r=i+e+(a=t),n=i+"accessibleOutput"+t,this.dummyDOM.querySelector("#".concat(n))||(this.dummyDOM.querySelector("#".concat(i,"_Label"))?this.dummyDOM.querySelector("#".concat(i,"_Label")).insertAdjacentHTML("afterend",'<div id="'.concat(n,'"></div>')):this.dummyDOM.querySelector("#".concat(i)).insertAdjacentHTML("afterend",'<div id="'.concat(n,'"></div>')))),this._accessibleOutputs[r]={},"textOutput"===e?(a="#".concat(i,"gridOutput").concat(a),o='<div id="'.concat(r,'">Text Output<div id="').concat(r,'Summary" aria-label="text output summary"><p id="').concat(r,'_summary"></p><ul id="').concat(r,'_list"></ul></div><table id="').concat(r,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",o):this.dummyDOM.querySelector("#".concat(n)).innerHTML=o,this._accessibleOutputs[r].list=this.dummyDOM.querySelector("#".concat(r,"_list"))):"gridOutput"===e&&(a="#".concat(i,"textOutput").concat(a),o='<div id="'.concat(r,'">Grid Output<p id="').concat(r,'_summary" aria-label="grid output summary"><table id="').concat(r,'_map" summary="grid output content"></table><ul id="').concat(r,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",o):this.dummyDOM.querySelector("#".concat(n)).innerHTML=o,this._accessibleOutputs[r].map=this.dummyDOM.querySelector("#".concat(r,"_map"))),this._accessibleOutputs[r].shapeDetails=this.dummyDOM.querySelector("#".concat(r,"_shapeDetails")),this._accessibleOutputs[r].summary=this.dummyDOM.querySelector("#".concat(r,"_summary"))},o.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)!==this.ingredients.pShapes&&(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},o.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},o.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},o.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var r={},n=!0,o=function(e,t){var r,n;return n="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(r=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(r=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(r=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(r=(t[0]+t[2])/2,(t[1]+t[3])/2):(r=t[0],t[1]),[r,n]}(e,t);if("line"===e){r.color=this.ingredients.colors.stroke,r.length=Math.round(this.dist(t[0],t[1],t[2],t[3]));var s=i([t[0],[1]],this.width,this.height),l=i([t[2],[3]],this.width,this.height);r.loc=a(o,this.width,this.height),r.pos=s===l?"at ".concat(s):"from ".concat(s," to ").concat(l)}else"point"===e?r.color=this.ingredients.colors.stroke:(r.color=this.ingredients.colors.fill,r.area=function(e,t,r,n){var o=0;if("arc"===e){var i=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(o=i*t[2]*t[3]/8,"open"===t[6]||"chord"===t[6]){var a=t[0],s=t[1],l=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),u=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),c=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),d=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),f=Math.abs(a*(u-d)+l*(d-s)+c*(s-u))/2;i>Math.PI?o+=f:o-=f}}else"ellipse"===e||"circle"===e?o=3.14*t[2]/2*t[3]/2:"line"===e?o=0:"point"===e?o=0:"quadrilateral"===e?o=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?o=t[2]*t[3]:"triangle"===e&&(o=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2);return Math.round(100*o/(r*n))}(e,t,this.width,this.height)),r.pos=i(o,this.width,this.height),r.loc=a(o,this.width,this.height);if(this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[r]){for(var u in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][u])===JSON.stringify(r)&&(n=!1);!0===n&&this.ingredients.shapes[e].push(r)}}else this.ingredients.shapes[e]=[r]};var s=o.default;r.default=s},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.map":161,"core-js/modules/es.number.to-fixed":172}],247:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype._updateTextOutput=function(e){if(this.dummyDOM.querySelector("#".concat(e,"_summary"))){var t=this._accessibleOutputs[e],r=function(e,t){var r="",n=0;for(var o in t)for(var i in t[o]){var a='<li><a href="#'.concat(e,"shape").concat(n,'">').concat(t[o][i].color," ").concat(o,"</a>");"line"===o?a+=", ".concat(t[o][i].pos,", ").concat(t[o][i].length," pixels long.</li>"):(a+=", at ".concat(t[o][i].pos),"point"!==o&&(a+=", covering ".concat(t[o][i].area,"% of the canvas")),a+=".</li>"),r+=a,n++}return{numShapes:n,listShapes:r}}(e,this.ingredients.shapes),n=function(e,t,r,n){var o="Your output is a, ".concat(r," by ").concat(n," pixels, ").concat(t," canvas containing the following");return o=1===e?"".concat(o," shape:"):"".concat(o," ").concat(e," shapes:")}(r.numShapes,this.ingredients.colors.background,this.width,this.height),o=function(e,t){var r="",n=0;for(var o in t)for(var i in t[o]){var a='<tr id="'.concat(e,"shape").concat(n,'"><th>').concat(t[o][i].color," ").concat(o,"</th>");"line"===o?a+="<td>location = ".concat(t[o][i].pos,"</td><td>length = ").concat(t[o][i].length," pixels</td></tr>"):(a+="<td>location = ".concat(t[o][i].pos,"</td>"),"point"!==o&&(a+="<td> area = ".concat(t[o][i].area,"%</td>")),a+="</tr>"),r+=a,n++}return r}(e,this.ingredients.shapes);n!==t.summary.innerHTML&&(t.summary.innerHTML=n),r.listShapes!==t.list.innerHTML&&(t.list.innerHTML=r.listShapes),o!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=o),this._accessibleOutputs[e]=t}};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array.concat":149}],248:[function(e,t,r){"use strict";var n,o=(n=e("./core/main"))&&n.__esModule?n:{default:n};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=o.default},{"./accessibility/color_namer":243,"./accessibility/describe":244,"./accessibility/gridOutput":245,"./accessibility/outputs":246,"./accessibility/textOutput":247,"./color/color_conversion":249,"./color/creating_reading":250,"./color/p5.Color":251,"./color/setting":252,"./core/constants":253,"./core/environment":254,"./core/friendly_errors/fes_core":255,"./core/friendly_errors/file_errors":256,"./core/friendly_errors/sketch_reader":257,"./core/friendly_errors/stacktrace":258,"./core/friendly_errors/validate_params":259,"./core/helpers":260,"./core/init":261,"./core/legacy":263,"./core/main":264,"./core/p5.Element":265,"./core/p5.Graphics":266,"./core/p5.Renderer":267,"./core/p5.Renderer2D":268,"./core/preload":269,"./core/rendering":270,"./core/shape/2d_primitives":271,"./core/shape/attributes":272,"./core/shape/curves":273,"./core/shape/vertex":274,"./core/shim":275,"./core/structure":276,"./core/transform":277,"./data/local_storage.js":278,"./data/p5.TypedDict":279,"./dom/dom":280,"./events/acceleration":281,"./events/keyboard":282,"./events/mouse":283,"./events/touch":284,"./image/filters":285,"./image/image":286,"./image/loading_displaying":287,"./image/p5.Image":288,"./image/pixels":289,"./io/files":290,"./io/p5.Table":291,"./io/p5.TableRow":292,"./io/p5.XML":293,"./math/calculation":294,"./math/math":295,"./math/noise":296,"./math/p5.Vector":297,"./math/random":298,"./math/trigonometry":299,"./typography/attributes":300,"./typography/loading_displaying":301,"./typography/p5.Font":302,"./utilities/array_functions":303,"./utilities/conversion":304,"./utilities/string_functions":305,"./utilities/time_date":306,"./webgl/3d_primitives":307,"./webgl/interaction":308,"./webgl/light":309,"./webgl/loading":310,"./webgl/material":311,"./webgl/p5.Camera":312,"./webgl/p5.Geometry":313,"./webgl/p5.Matrix":314,"./webgl/p5.RenderBuffer":315,"./webgl/p5.RendererGL":318,"./webgl/p5.RendererGL.Immediate":316,"./webgl/p5.RendererGL.Retained":317,"./webgl/p5.Shader":319,"./webgl/p5.Texture":320,"./webgl/text":321}],249:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.ColorConversion={},o.default.ColorConversion._hsbaToHSLA=function(e){var t=e[0],r=e[1],n=e[2],o=(2-r)*n/2;return 0!=o&&(1==o?r=0:o<.5?r/=2-r:r=r*n/(2-2*o)),[t,r,o,e[3]]},o.default.ColorConversion._hsbaToRGBA=function(e){var t=6*e[0],r=e[1],n=e[2],o=[];if(0===r)o=[n,n,n,e[3]];else{var i,a,s,l=Math.floor(t),u=n*(1-r),c=n*(1-r*(t-l)),d=n*(1-r*(1+l-t));s=1===l?(i=c,a=n,u):2===l?(i=u,a=n,d):3===l?(i=u,a=c,n):4===l?(i=d,a=u,n):5===l?(i=n,a=u,c):(i=n,a=d,u),o=[i,a,s,e[3]]}return o},o.default.ColorConversion._hslaToHSBA=function(e){var t,r=e[0],n=e[1],o=e[2];return[r,n=2*((t=o<.5?(1+n)*o:o+n-o*n)-o)/t,t,e[3]]},o.default.ColorConversion._hslaToRGBA=function(e){var t=6*e[0],r=e[1],n=e[2],o=[];if(0===r)o=[n,n,n,e[3]];else{var i,a=2*n-(i=n<.5?(1+r)*n:n+r-n*r),s=function(e,t,r){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(r-t)*e:e<3?r:e<4?t+(r-t)*(4-e):t};o=[s(2+t,a,i),s(t,a,i),s(t-2,a,i),e[3]]}return o},o.default.ColorConversion._rgbaToHSBA=function(e){var t,r,n=e[0],o=e[1],i=e[2],a=Math.max(n,o,i),s=a-Math.min(n,o,i);return 0==s?r=t=0:(r=s/a,n===a?t=(o-i)/s:o===a?t=2+(i-n)/s:i===a&&(t=4+(n-o)/s),t<0?t+=6:6<=t&&(t-=6)),[t/6,r,a,e[3]]},o.default.ColorConversion._rgbaToHSLA=function(e){var t,r,n=e[0],o=e[1],i=e[2],a=Math.max(n,o,i),s=Math.min(n,o,i),l=a+s,u=a-s;return 0==u?r=t=0:(r=l<1?u/l:u/(2-l),n===a?t=(o-i)/u:o===a?t=2+(i-n)/u:i===a&&(t=4+(n-o)/u),t<0?t+=6:6<=t&&(t-=6)),[t/6,r,l/2,e[3]]};var i=o.default.ColorConversion;r.default=i},{"../core/main":264}],250:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.map"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.alpha=function(e){return i.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},i.default.prototype.blue=function(e){return i.default._validateParameters("blue",arguments),this.color(e)._getBlue()},i.default.prototype.brightness=function(e){return i.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},i.default.prototype.color=function(){if(i.default._validateParameters("color",arguments),arguments[0]instanceof i.default.Color)return arguments[0];var e=arguments[0]instanceof Array?arguments[0]:arguments;return new i.default.Color(this,e)},i.default.prototype.green=function(e){return i.default._validateParameters("green",arguments),this.color(e)._getGreen()},i.default.prototype.hue=function(e){return i.default._validateParameters("hue",arguments),this.color(e)._getHue()},i.default.prototype.lerpColor=function(e,t,r){i.default._validateParameters("lerpColor",arguments);var n,o,s,l,u,c,d=this._colorMode,f=this._colorMaxes;if(d===a.RGB)u=e.levels.map(function(e){return e/255}),c=t.levels.map(function(e){return e/255});else if(d===a.HSB)e._getBrightness(),t._getBrightness(),u=e.hsba,c=t.hsba;else{if(d!==a.HSL)throw new Error("".concat(d,"cannot be used for interpolation."));e._getLightness(),t._getLightness(),u=e.hsla,c=t.hsla}return r=Math.max(Math.min(r,1),0),void 0===this.lerp&&(this.lerp=function(e,t,r){return r*(t-e)+e}),n=this.lerp(u[0],c[0],r),o=this.lerp(u[1],c[1],r),s=this.lerp(u[2],c[2],r),l=this.lerp(u[3],c[3],r),n*=f[d][0],o*=f[d][1],s*=f[d][2],l*=f[d][3],this.color(n,o,s,l)},i.default.prototype.lightness=function(e){return i.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},i.default.prototype.red=function(e){return i.default._validateParameters("red",arguments),this.color(e)._getRed()},i.default.prototype.saturation=function(e){return i.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var s=i.default;r.default=s},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.map":161}],251:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),a=s(e("./color_conversion"));function s(e){return e&&e.__esModule?e:{default:e}}o.default.Color=function(e,t){if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),this.mode!==i.RGB&&this.mode!==i.HSL&&this.mode!==i.HSB)throw new Error("".concat(this.mode," is an invalid colorMode."));return this._array=o.default.Color._parseInputs.apply(this,t),this._calculateLevels(),this},o.default.Color.prototype.toString=function(e){var t=this.levels,r=this._array,n=r[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*r[0]).toString(16),Math.round(15*r[1]).toString(16),Math.round(15*r[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*r[0]).toString(16),Math.round(15*r[1]).toString(16),Math.round(15*r[2]).toString(16),Math.round(15*r[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*r[0]).toPrecision(3),"%, ",(100*r[1]).toPrecision(3),"%, ",(100*r[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*r[0]).toPrecision(3),"%, ",(100*r[1]).toPrecision(3),"%, ",(100*r[2]).toPrecision(3),"%, ",(100*r[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[i.HSB][0],", ",this.hsba[1]*this.maxes[i.HSB][1],", ",this.hsba[2]*this.maxes[i.HSB][2],", ",n,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*n).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[i.HSL][0],", ",this.hsla[1]*this.maxes[i.HSL][1],", ",this.hsla[2]*this.maxes[i.HSL][2],", ",n,")");case"hsla%":return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*n).toPrecision(3),"%)");case"rgba":default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",n,")")}},o.default.Color.prototype.setRed=function(e){this._array[0]=e/this.maxes[i.RGB][0],this._calculateLevels()},o.default.Color.prototype.setGreen=function(e){this._array[1]=e/this.maxes[i.RGB][1],this._calculateLevels()},o.default.Color.prototype.setBlue=function(e){this._array[2]=e/this.maxes[i.RGB][2],this._calculateLevels()},o.default.Color.prototype.setAlpha=function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()},o.default.Color.prototype._calculateLevels=function(){for(var e=this._array,t=this.levels=new Array(e.length),r=e.length-1;0<=r;--r)t[r]=Math.round(255*e[r])},o.default.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},o.default.Color.prototype._storeModeAndMaxes=function(e,t){this.mode=e,this.maxes=t},o.default.Color.prototype._getMode=function(){return this.mode},o.default.Color.prototype._getMaxes=function(){return this.maxes},o.default.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[i.RGB][2]},o.default.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[i.HSB][2]},o.default.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[i.RGB][1]},o.default.Color.prototype._getHue=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[i.HSB][0]):(this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[i.HSL][0])},o.default.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[i.HSL][2]},o.default.Color.prototype._getRed=function(){return this._array[0]*this.maxes[i.RGB][0]},o.default.Color.prototype._getSaturation=function(){return this.mode===i.HSB?(this.hsba||(this.hsba=a.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[i.HSB][1]):(this.hsla||(this.hsla=a.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[i.HSL][1])};var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},u=/\s*/,c=/(\d{1,3})/,d=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,f=new RegExp("".concat(d.source,"%")),h={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(u.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(u.source),"i"),RGBA:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",d.source,"\\)$"].join(u.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(u.source),"i"),HSL:new RegExp(["^hsl\\(",c.source,",",f.source,",",f.source,"\\)$"].join(u.source),"i"),HSLA:new RegExp(["^hsla\\(",c.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(u.source),"i"),HSB:new RegExp(["^hsb\\(",c.source,",",f.source,",",f.source,"\\)$"].join(u.source),"i"),HSBA:new RegExp(["^hsba\\(",c.source,",",f.source,",",f.source,",",d.source,"\\)$"].join(u.source),"i")};o.default.Color._parseInputs=function(e,t,r,n){var s,u=arguments.length,c=this.mode,d=this.maxes[c],f=[];if(3<=u){for(f[0]=e/d[0],f[1]=t/d[1],f[2]=r/d[2],f[3]="number"==typeof n?n/d[3]:1,s=f.length-1;0<=s;--s){var p=f[s];p<0?f[s]=0:1<p&&(f[s]=1)}return c===i.HSL?a.default._hslaToRGBA(f):c===i.HSB?a.default._hsbaToRGBA(f):f}if(1===u&&"string"==typeof e){var y=e.trim().toLowerCase();if(l[y])return o.default.Color._parseInputs.call(this,l[y]);if(h.HEX3.test(y))return(f=h.HEX3.exec(y).slice(1).map(function(e){return parseInt(e+e,16)/255}))[3]=1,f;if(h.HEX6.test(y))return(f=h.HEX6.exec(y).slice(1).map(function(e){return parseInt(e,16)/255}))[3]=1,f;if(h.HEX4.test(y))return h.HEX4.exec(y).slice(1).map(function(e){return parseInt(e+e,16)/255});if(h.HEX8.test(y))return h.HEX8.exec(y).slice(1).map(function(e){return parseInt(e,16)/255});if(h.RGB.test(y))return(f=h.RGB.exec(y).slice(1).map(function(e){return e/255}))[3]=1,f;if(h.RGB_PERCENT.test(y))return(f=h.RGB_PERCENT.exec(y).slice(1).map(function(e){return parseFloat(e)/100}))[3]=1,f;if(h.RGBA.test(y))return h.RGBA.exec(y).slice(1).map(function(e,t){return 3===t?parseFloat(e):e/255});if(h.RGBA_PERCENT.test(y))return h.RGBA_PERCENT.exec(y).slice(1).map(function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100});if(h.HSL.test(y)?(f=h.HSL.exec(y).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}))[3]=1:h.HSLA.test(y)&&(f=h.HSLA.exec(y).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),(f=f.map(function(e){return Math.max(Math.min(e,1),0)})).length)return a.default._hslaToRGBA(f);if(h.HSB.test(y)?(f=h.HSB.exec(y).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}))[3]=1:h.HSBA.test(y)&&(f=h.HSBA.exec(y).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),f.length){for(s=f.length-1;0<=s;--s)f[s]=Math.max(Math.min(f[s],1),0);return a.default._hsbaToRGBA(f)}f=[1,1,1,1]}else{if(1!==u&&2!==u||"number"!=typeof e)throw new Error("".concat(arguments,"is not a valid color representation."));f[0]=e/d[2],f[1]=e/d[2],f[2]=e/d[2],f[3]="number"==typeof t?t/d[3]:1,f=f.map(function(e){return Math.max(Math.min(e,1),0)})}return f};var p=o.default.Color;r.default=p},{"../core/constants":253,"../core/main":264,"./color_conversion":249,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.trim":193}],252:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.fill"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.Color"),i.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},i.default.prototype.clear=function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,r=(arguments.length<=2?void 0:arguments[2])||0,n=(arguments.length<=3?void 0:arguments[3])||0;return this._renderer.clear(e,t,r,n),this},i.default.prototype.colorMode=function(e,t,r,n,o){if(i.default._validateParameters("colorMode",arguments),e===a.RGB||e===a.HSB||e===a.HSL){this._colorMode=e;var s=this._colorMaxes[e];2===arguments.length?(s[0]=t,s[1]=t,s[2]=t,s[3]=t):4===arguments.length?(s[0]=t,s[1]=r,s[2]=n):5===arguments.length&&(s[0]=t,s[1]=r,s[2]=n,s[3]=o)}return this},i.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},i.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},i.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},i.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},i.default.prototype.erase=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;return this._renderer.erase(e,t),this},i.default.prototype.noErase=function(){return this._renderer.noErase(),this};var s=i.default;r.default=s},{"../core/constants":253,"../core/main":264,"./p5.Color":251,"core-js/modules/es.array.fill":151}],253:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BEZIER=r.QUADRATIC=r.LINEAR=r._CTX_MIDDLE=r._DEFAULT_LEADMULT=r._DEFAULT_TEXT_FILL=r.WORD=r.CHAR=r.BOLDITALIC=r.BOLD=r.ITALIC=r.NORMAL=r.BLUR=r.ERODE=r.DILATE=r.POSTERIZE=r.INVERT=r.OPAQUE=r.GRAY=r.THRESHOLD=r.BURN=r.DODGE=r.SOFT_LIGHT=r.HARD_LIGHT=r.OVERLAY=r.REPLACE=r.SCREEN=r.MULTIPLY=r.EXCLUSION=r.SUBTRACT=r.DIFFERENCE=r.LIGHTEST=r.DARKEST=r.ADD=r.REMOVE=r.BLEND=r.UP_ARROW=r.TAB=r.SHIFT=r.RIGHT_ARROW=r.RETURN=r.OPTION=r.LEFT_ARROW=r.ESCAPE=r.ENTER=r.DOWN_ARROW=r.DELETE=r.CONTROL=r.BACKSPACE=r.ALT=r.AUTO=r.HSL=r.HSB=r.RGB=r.MITER=r.BEVEL=r.ROUND=r.SQUARE=r.PROJECT=r.PIE=r.CHORD=r.OPEN=r.CLOSE=r.TESS=r.QUAD_STRIP=r.QUADS=r.TRIANGLE_STRIP=r.TRIANGLE_FAN=r.TRIANGLES=r.LINE_LOOP=r.LINE_STRIP=r.LINES=r.POINTS=r.BASELINE=r.BOTTOM=r.TOP=r.CENTER=r.LEFT=r.RIGHT=r.RADIUS=r.CORNERS=r.CORNER=r.RAD_TO_DEG=r.DEG_TO_RAD=r.RADIANS=r.DEGREES=r.TWO_PI=r.TAU=r.QUARTER_PI=r.PI=r.HALF_PI=r.WAIT=r.TEXT=r.MOVE=r.HAND=r.CROSS=r.ARROW=r.WEBGL=r.P2D=r.VERSION=void 0,r.FALLBACK=r.LABEL=r.AXES=r.GRID=r._DEFAULT_FILL=r._DEFAULT_STROKE=r.PORTRAIT=r.LANDSCAPE=r.MIRROR=r.CLAMP=r.REPEAT=r.NEAREST=r.IMAGE=r.IMMEDIATE=r.TEXTURE=r.FILL=r.STROKE=r.CURVE=void 0;var n=Math.PI;r.VERSION="1.4.1",r.P2D="p2d",r.WEBGL="webgl",r.ARROW="default",r.CROSS="crosshair",r.HAND="pointer",r.MOVE="move",r.TEXT="text",r.WAIT="wait";var o=n/2;r.HALF_PI=o;var i=n;r.PI=i;var a=n/4;r.QUARTER_PI=a;var s=2*n;r.TAU=s;var l=2*n;r.TWO_PI=l,r.DEGREES="degrees",r.RADIANS="radians";var u=n/180;r.DEG_TO_RAD=u;var c=180/n;r.RAD_TO_DEG=c,r.CORNER="corner",r.CORNERS="corners",r.RADIUS="radius",r.RIGHT="right",r.LEFT="left",r.CENTER="center",r.TOP="top",r.BOTTOM="bottom",r.BASELINE="alphabetic",r.POINTS=0,r.LINES=1,r.LINE_STRIP=3,r.LINE_LOOP=2,r.TRIANGLES=4,r.TRIANGLE_FAN=6,r.TRIANGLE_STRIP=5,r.QUADS="quads",r.QUAD_STRIP="quad_strip",r.TESS="tess",r.CLOSE="close",r.OPEN="open",r.CHORD="chord",r.PIE="pie",r.PROJECT="square",r.SQUARE="butt",r.ROUND="round",r.BEVEL="bevel",r.MITER="miter",r.RGB="rgb",r.HSB="hsb",r.HSL="hsl",r.AUTO="auto",r.ALT=18,r.BACKSPACE=8,r.CONTROL=17,r.DELETE=46,r.DOWN_ARROW=40,r.ENTER=13,r.ESCAPE=27,r.LEFT_ARROW=37,r.OPTION=18,r.RETURN=13,r.RIGHT_ARROW=39,r.SHIFT=16,r.TAB=9,r.UP_ARROW=38,r.BLEND="source-over",r.REMOVE="destination-out",r.ADD="lighter",r.DARKEST="darken",r.LIGHTEST="lighten",r.DIFFERENCE="difference",r.SUBTRACT="subtract",r.EXCLUSION="exclusion",r.MULTIPLY="multiply",r.SCREEN="screen",r.REPLACE="copy",r.OVERLAY="overlay",r.HARD_LIGHT="hard-light",r.SOFT_LIGHT="soft-light",r.DODGE="color-dodge",r.BURN="color-burn",r.THRESHOLD="threshold",r.GRAY="gray",r.OPAQUE="opaque",r.INVERT="invert",r.POSTERIZE="posterize",r.DILATE="dilate",r.ERODE="erode",r.BLUR="blur",r.NORMAL="normal",r.ITALIC="italic",r.BOLD="bold",r.BOLDITALIC="bold italic",r.CHAR="CHAR",r.WORD="WORD",r._DEFAULT_TEXT_FILL="#000000",r._DEFAULT_LEADMULT=1.25,r._CTX_MIDDLE="middle",r.LINEAR="linear",r.QUADRATIC="quadratic",r.BEZIER="bezier",r.CURVE="curve",r.STROKE="stroke",r.FILL="fill",r.TEXTURE="texture",r.IMMEDIATE="immediate",r.IMAGE="image",r.NEAREST="nearest",r.REPEAT="repeat",r.CLAMP="clamp",r.MIRROR="mirror",r.LANDSCAPE="landscape",r.PORTRAIT="portrait",r._DEFAULT_STROKE="#000000",r._DEFAULT_FILL="#FFFFFF",r.GRID="grid",r.AXES="axes",r.LABEL="label",r.FALLBACK="fallback"},{}],254:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("./main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("./constants"));var s=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT];i.default.prototype._frameRate=0,i.default.prototype._lastFrameTime=window.performance.now(),i.default.prototype._targetFrameRate=60;var l=window.print;function u(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function c(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}i.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):l()},i.default.prototype.frameCount=0,i.default.prototype.deltaTime=0,i.default.prototype.focused=document.hasFocus(),i.default.prototype.cursor=function(e,t,r){var n="auto",o=this._curElement.elt;if(s.includes(e))n=e;else if("string"==typeof e){var i="";t&&r&&"number"==typeof t&&"number"==typeof r&&(i="".concat(t," ").concat(r)),n="http://"===e.substring(0,7)||"https://"===e.substring(0,8)?"url(".concat(e,") ").concat(i,", auto"):/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(i,", auto"):e}o.style.cursor=n},i.default.prototype.frameRate=function(e){return i.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},i.default.prototype.getFrameRate=function(){return this.frameRate()},i.default.prototype.setFrameRate=function(e){return this.frameRate(e)},i.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},i.default.prototype.displayWidth=screen.width,i.default.prototype.displayHeight=screen.height,i.default.prototype.windowWidth=u(),i.default.prototype.windowHeight=c(),i.default.prototype._onresize=function(e){this._setProperty("windowWidth",u()),this._setProperty("windowHeight",c());var t,r=this._isGlobal?window:this;"function"==typeof r.windowResized&&(void 0===(t=r.windowResized(e))||t||e.preventDefault())},i.default.prototype.width=0,i.default.prototype.height=0,i.default.prototype.fullscreen=function(e){if(i.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;e?function(e){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(document.documentElement):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},i.default.prototype.pixelDensity=function(e){var t;return i.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},i.default.prototype.displayDensity=function(){return window.devicePixelRatio},i.default.prototype.getURL=function(){return location.href},i.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(e){return""!==e})},i.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,r[e[1]]=e[2];return r};var d=i.default;r.default=d},{"./constants":253,"./main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.includes":156,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191}],255:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../main"))&&n.__esModule?n:{default:n};e("../internationalization");var i=null,a=null;o.default._friendlyError=o.default._checkForUserDefinedFunctions=o.default._fesErrorMonitor=function(){},i=null;var s="https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";function l(e,t){t=t||console.log.bind(console),i||a(),i.some(function(r){if(e.message&&null!==e.message.match("\\W?".concat(r.name,"\\W"))){var n="function"===r.type?"".concat(r.name,"()"):r.name;return t("Did you just try to use p5.js's ".concat(n," ").concat(r.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(s)),!0}})}a=function(){function t(e){return Object.getOwnPropertyNames(e).filter(function(e){return"_"!==e[0]&&!(e in r)&&(r[e]=!0)}).map(function(t){var r;return r="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:r}})}var r={};(i=[].concat(t(o.default.prototype),t(e("../constants")))).sort(function(e,t){return t.name.length-e.name.length})},o.default.prototype._helpForMisusedAtTopLevelCode=l,"complete"!==document.readyState&&(window.addEventListener("error",l,!1),window.addEventListener("load",function(){window.removeEventListener("error",l,!1)}));var u=o.default;r.default=u},{"../constants":253,"../internationalization":262,"../main":264,"./browser_errors":void 0,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.function.name":166,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.search":190,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],256:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../main"))&&n.__esModule?n:{default:n};e("../internationalization"),o.default._friendlyFileLoadError=function(){};var i=o.default;r.default=i},{"../internationalization":262,"../main":264}],257:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.flat-map"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.unscopables.flat-map"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../main"));e("../internationalization"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,t&&t.set(e,r)}(e("../constants"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}o.default._fesCodeReader=function(){};var a=o.default;r.default=a},{"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.flat-map":153,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.unscopables.flat-map":165,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],258:[function(e,t,r){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../main"))&&n.__esModule?n:{default:n};function i(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,r=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)},this).map(function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"("),r=t.match(/ (\((.+):(\d+):(\d+)\)$)/),n=(t=r?t.replace(r[0],""):t).split(/\s+/).slice(1),o=this.extractLocation(r?r[1]:n.pop());return{functionName:n.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(o[0])?void 0:o[0],lineNumber:o[1],columnNumber:o[2],source:e}},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(r)},this).map(function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return{functionName:e};var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=e.match(t),n=r&&r[1]?r[1]:void 0,o=this.extractLocation(e.replace(t,""));return{functionName:n,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e}},this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),n=[],o=2,i=r.length;o<i;o+=2){var a=t.exec(r[o]);a&&n.push({fileName:a[2],lineNumber:a[1],source:r[o]})}return n},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),n=[],o=0,i=r.length;o<i;o+=2){var a=t.exec(r[o]);a&&n.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:r[o]})}return n},parseOpera11:function(t){return t.stack.split("\n").filter(function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this).map(function(e){var t,r=e.split("@"),n=this.extractLocation(r.pop()),o=r.shift()||"",i=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return o.match(/\(([^)]*)\)/)&&(t=o.replace(/^[^(]+\(([^)]*)\)$/,"$1")),{functionName:i,args:void 0===t||"[arguments not available]"===t?void 0:t.split(","),fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e}},this)}}}o.default._getErrorStackParser=function(){return new i};var a=o.default;r.default=a},{"../main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191}],259:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../main"))&&n.__esModule?n:{default:n};(function(e){if(!(e&&e.__esModule||null===e||"object"!==function(e){return("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(e)&&"function"!=typeof e)){var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,t&&t.set(e,r)}})(e("../constants")),e("../internationalization"),o.default._validateParameters=o.default._clearValidateParamsCache=function(){};var i=o.default;r.default=i},{"../../../docs/parameterData.json":void 0,"../constants":253,"../internationalization":262,"../main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.map":167,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],260:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("./constants"));var i={modeAdjust:function(e,t,r,n,i){return i===o.CORNER?{x:e,y:t,w:r,h:n}:i===o.CORNERS?{x:e,y:t,w:r-e,h:n-t}:i===o.RADIUS?{x:e-r,y:t-n,w:2*r,h:2*n}:i===o.CENTER?{x:e-.5*r,y:t-.5*n,w:r,h:n}:void 0}};r.default=i},{"./constants":253}],261:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};e("./internationalization");var i=Promise.resolve();Promise.all([new Promise(function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)}),i]).then(function(){void 0===window._setupDone?window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!o.default.instance&&new o.default:console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import")})},{"../core/main":264,"./internationalization":262,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/web.dom-collections.iterator":229}],262:[function(e,t,r){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.setTranslatorLanguage=r.currentTranslatorLanguage=r.availableTranslatorLanguages=r.initialize=r.translator=void 0;var n,o=a(e("i18next")),i=a(e("i18next-browser-languagedetector"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,r){!function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.init(t,r)}var t,r;return t=e,(r=[{key:"fetchWithTimeout",value:function(e,t,r){var n=2<arguments.length&&void 0!==r?r:2e3;return Promise.race([fetch(e,t),new Promise(function(e,t){return setTimeout(function(){return t(new Error("timeout"))},n)})])}},{key:"init",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:{};this.services=e,this.options=r}},{key:"read",value:function(e,t,r){var o=this.options.loadPath;if(e===this.options.fallback)r(null,n[e][t]);else if((void 0).includes(e)){var i=this.services.interpolator.interpolate(o,{lng:e,ns:t});this.loadUrl(i,r)}else r("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then(function(t){if(!t.ok)throw new Error("failed loading ".concat(e));return t.json()},function(){throw new Error("failed loading ".concat(e))}).then(function(e){return t(null,e)}).catch(t)}}])&&s(t.prototype,r),e}();l.type="backend";var u=function(e,t){console.debug("p5.js translator called before translations were loaded"),o.default.t(e,t)};r.translator=u,r.initialize=function(){return o.default.use(i.default).use(l).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:n}).then(function(e){r.translator=u=e},function(e){return console.debug("Translations failed to load (".concat(e,")"))})},r.availableTranslatorLanguages=function(){return o.default.languages},r.currentTranslatorLanguage=function(){return o.default.language},r.setTranslatorLanguage=function(e){return o.default.changeLanguage(e||void 0,function(e){return console.debug("Translations failed to load (".concat(e,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/web.dom-collections.iterator":229,i18next:3,"i18next-browser-languagedetector":3}],263:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./main"))&&n.__esModule?n:{default:n};o.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},o.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},o.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},o.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")};var i=o.default;r.default=i},{"./main":264}],264:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,e("./shim");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r,n){var o=this;!function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=r,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var i=Object.getOwnPropertyNames(e.prototype._registeredMethods),a=!0,s=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;this._registeredMethods[d]=e.prototype._registeredMethods[d].slice()}}catch(t){s=!0,l=t}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){o._userNode&&"string"==typeof o._userNode&&(o._userNode=document.getElementById(o._userNode));var t=o._isGlobal?window:o;if(t.preload){var r=document.getElementById(o._loadingScreenId);r||((r=document.createElement("div")).innerHTML="Loading...",r.style.position="absolute",r.id=o._loadingScreenId,(o._userNode||document.body).appendChild(r));var n=o._preloadMethods;for(var i in n){n[i]=n[i]||e;var a=n[i];a!==e.prototype&&a!==e||(o._isGlobal&&(window[i]=o._wrapPreload(o,i)),a=o),o._registeredPreloadMethods[i]=a[i],a[i]=o._wrapPreload(a,i)}t.preload(),o._runIfPreloadsAreDone()}else o._setup(),o._draw()},this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(0===e._preloadCount){var t=document.getElementById(e._loadingScreenId);t&&t.parentNode.removeChild(t),this._setupDone||(this._lastFrameTime=window.performance.now(),e._setup(),e._draw())}},this._decrementPreload=function(){var e=this._isGlobal?window:this;"function"==typeof e.preload&&(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var r=this;return function(){r._incrementPreload();for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r._registeredPreloadMethods[t].apply(e,o)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){o.createCanvas(o._defaultCanvasSize.width,o._defaultCanvasSize.height,"p2d");var e=o._isGlobal?window:o;if("function"==typeof e.preload)for(var t in o._preloadMethods)e[t]=o._preloadMethods[t][t],e[t]&&o&&(e[t]=e[t].bind(o));o._millisStart=window.performance.now(),"function"==typeof e.setup&&e.setup();var r=document.getElementsByTagName("canvas"),n=!0,i=!1,a=void 0;try{for(var s,l=r[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;"true"===u.dataset.hidden&&(u.style.visibility="",delete u.dataset.hidden)}}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}o._lastFrameTime=window.performance.now(),o._setupDone=!0,(o._accessibleOutputs.grid||o._accessibleOutputs.text)&&o._updateAccsOutput()},this._draw=function(){var e=window.performance.now(),t=e-o._lastFrameTime,r=1e3/o._targetFrameRate;(!o._loop||r-5<=t)&&(o.redraw(),o._frameRate=1e3/(e-o._lastFrameTime),o.deltaTime=e-o._lastFrameTime,o._setProperty("deltaTime",o.deltaTime),o._lastFrameTime=e,void 0!==o._updateMouseCoords&&(o._updateMouseCoords(),o._setProperty("movedX",0),o._setProperty("movedY",0))),o._loop&&(o._requestAnimId=window.requestAnimationFrame(o._draw))},this._setProperty=function(e,t){o[e]=t,o._isGlobal&&(window[e]=t)},this.remove=function(){var t=document.getElementById(o._loadingScreenId);if(t&&(t.parentNode.removeChild(t),o._incrementPreload()),o._curElement){for(var r in o._loop=!1,o._requestAnimId&&window.cancelAnimationFrame(o._requestAnimId),o._events)window.removeEventListener(r,o._events[r]);var n=!0,i=!1,a=void 0;try{for(var s,l=o._elements[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var u=s.value;for(var c in u.elt&&u.elt.parentNode&&u.elt.parentNode.removeChild(u.elt),u._events)u.elt.removeEventListener(c,u._events[c])}}catch(t){i=!0,a=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}var d=o;o._registeredMethods.remove.forEach(function(e){void 0!==e&&e.call(d)})}if(o._isGlobal){for(var f in e.prototype)try{delete window[f]}catch(t){window[f]=void 0}for(var h in o)if(o.hasOwnProperty(h))try{delete window[h]}catch(t){window[h]=void 0}e.instance=null}},this._registeredMethods.init.forEach(function(e){void 0!==e&&e.call(this)},this),this._setupPromisePreloads();var f=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var h in this._isGlobal=!0,e.instance=this,e.prototype)if("function"==typeof e.prototype[h]){var p=h.substring(2);this._events.hasOwnProperty(p)||(Math.hasOwnProperty(h)&&Math[h]===e.prototype[h]?f(h,e.prototype[h]):f(h,e.prototype[h].bind(this)))}else f(h,e.prototype[h]);for(var y in this)this.hasOwnProperty(y)&&f(y,this[y])}for(var m in this._events){var g=this["_on".concat(m)];if(g){var v=g.bind(this);window.addEventListener(m,v,{passive:!1}),this._events[m]=v}}function b(){o._setProperty("focused",!0)}function _(){o._setProperty("focused",!1)}window.addEventListener("focus",b),window.addEventListener("blur",_),this.registerMethod("remove",function(){window.removeEventListener("focus",b),window.removeEventListener("blur",_)}),"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)}var t,r;return t=e,(r=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,r){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=r)}},{key:"registerMethod",value:function(t,r){var n=this||e.prototype;n._registeredMethods.hasOwnProperty(t)||(n._registeredMethods[t]=[]),n._registeredMethods[t].push(r)}},{key:"_createFriendlyGlobalFunctionBinder",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.globalObject||window;return t.log||console.log.bind(console),function(e,t){r[e]=t}}}])&&i(t.prototype,r),e}();for(var s in a.instance=null,a.disableFriendlyErrors=!1,o)a.prototype[s]=o[s];a.VERSION=o.VERSION,a.prototype._preloadMethods={loadJSON:a.prototype,loadImage:a.prototype,loadStrings:a.prototype,loadXML:a.prototype,loadBytes:a.prototype,loadTable:a.prototype,loadFont:a.prototype,loadModel:a.prototype,loadShader:a.prototype},a.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},a.prototype._registeredPreloadMethods={};var l=a;r.default=l},{"./constants":253,"./shim":275,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.get-own-property-names":174,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229}],265:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./main"))&&n.__esModule?n:{default:n};o.default.Element=function(e,t){this.elt=e,this._pInst=this._pixelsState=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},o.default.Element.prototype.parent=function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof o.default.Element&&(e=e.elt),e.appendChild(this.elt),this)},o.default.Element.prototype.id=function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},o.default.Element.prototype.class=function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)},o.default.Element.prototype.mousePressed=function(e){return o.default.Element._adjustListener("mousedown",function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this)},this),this},o.default.Element.prototype.doubleClicked=function(e){return o.default.Element._adjustListener("dblclick",e,this),this},o.default.Element.prototype.mouseWheel=function(e){return o.default.Element._adjustListener("wheel",e,this),this},o.default.Element.prototype.mouseReleased=function(e){return o.default.Element._adjustListener("mouseup",e,this),this},o.default.Element.prototype.mouseClicked=function(e){return o.default.Element._adjustListener("click",e,this),this},o.default.Element.prototype.mouseMoved=function(e){return o.default.Element._adjustListener("mousemove",e,this),this},o.default.Element.prototype.mouseOver=function(e){return o.default.Element._adjustListener("mouseover",e,this),this},o.default.Element.prototype.mouseOut=function(e){return o.default.Element._adjustListener("mouseout",e,this),this},o.default.Element.prototype.touchStarted=function(e){return o.default.Element._adjustListener("touchstart",e,this),this},o.default.Element.prototype.touchMoved=function(e){return o.default.Element._adjustListener("touchmove",e,this),this},o.default.Element.prototype.touchEnded=function(e){return o.default.Element._adjustListener("touchend",e,this),this},o.default.Element.prototype.dragOver=function(e){return o.default.Element._adjustListener("dragover",e,this),this},o.default.Element.prototype.dragLeave=function(e){return o.default.Element._adjustListener("dragleave",e,this),this},o.default.Element._adjustListener=function(e,t,r){return!1===t?o.default.Element._detachListener(e,r):o.default.Element._attachListener(e,t,r),this},o.default.Element._attachListener=function(e,t,r){r._events[e]&&o.default.Element._detachListener(e,r);var n=t.bind(r);r.elt.addEventListener(e,n,!1),r._events[e]=n},o.default.Element._detachListener=function(e,t){var r=t._events[e];t.elt.removeEventListener(e,r,!1),t._events[e]=null},o.default.Element.prototype._setProperty=function(e,t){this[e]=t};var i=o.default.Element;r.default=i},{"./main":264}],266:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("./main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("./constants"));i.default.Graphics=function(e,t,r,n){var o=r||a.P2D;this.canvas=document.createElement("canvas");var s=n._userNode||document.body;for(var l in s.appendChild(this.canvas),i.default.Element.call(this,this.canvas,n),i.default.prototype)this[l]||("function"==typeof i.default.prototype[l]?this[l]=i.default.prototype[l].bind(this):this[l]=i.default.prototype[l]);return i.default.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=n._pixelDensity,o===a.WEBGL?this._renderer=new i.default.RendererGL(this.canvas,this,!1):this._renderer=new i.default.Renderer2D(this.canvas,this,!1),n._elements.push(this),Object.defineProperty(this,"deltaTime",{get:function(){return this._pInst.deltaTime}}),this._renderer.resize(e,t),this._renderer._applyDefaults(),this},i.default.Graphics.prototype=Object.create(i.default.Element.prototype),i.default.Graphics.prototype.reset=function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()},i.default.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e=this._pInst._elements.indexOf(this);for(var t in-1!==e&&this._pInst._elements.splice(e,1),this._events)this.elt.removeEventListener(t,this._events[t])};var s=i.default.Graphics;r.default=s},{"./constants":253,"./main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.splice":164}],267:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./main"))&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){var t=0,r=0;if(e.offsetParent)for(;t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,r+=e.offsetTop;return[t,r]}o.default.Renderer=function(e,t,r){o.default.Element.call(this,e,t),this.canvas=e,this._pixelsState=t,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=i.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=i.LEFT,this._textBaseline=i.BASELINE,this._textWrap=i.WORD,this._rectMode=i.CORNER,this._ellipseMode=i.CENTER,this._curveTightness=0,this._imageMode=i.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._leadingSet=!1},o.default.Renderer.prototype=Object.create(o.default.Element.prototype),o.default.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}},o.default.Renderer.prototype.pop=function(e){e.properties&&Object.assign(this,e.properties)},o.default.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},o.default.Renderer.prototype.get=function(e,t,r,n){var i=this._pixelsState,a=i._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,r=i.width,n=i.height;else if(e*=a,t*=a,void 0===r&&void 0===n)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);var l=new o.default.Image(r,n);return l.canvas.getContext("2d").drawImage(s,e,t,r*a,n*a,0,0,r,n),l},o.default.Renderer.prototype.textLeading=function(e){return"number"==typeof e?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",e),this._pInst):this._textLeading},o.default.Renderer.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._leadingSet||this._setProperty("_textLeading",e*i._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},o.default.Renderer.prototype.textStyle=function(e){return e?(e!==i.NORMAL&&e!==i.ITALIC&&e!==i.BOLD&&e!==i.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},o.default.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},o.default.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},o.default.Renderer.prototype.textAlign=function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}},o.default.Renderer.prototype.textWrap=function(e){return this._setProperty("_textWrap",e),this._textWrap},o.default.Renderer.prototype.text=function(e,t,r,n,o){var a,s,l,u,c,d,f,h=this._pInst,p=this._textWrap,y=Number.MAX_VALUE;if((this._doFill||this._doStroke)&&void 0!==e){if("string"!=typeof e&&(e=e.toString()),a=(e=e.replace(/(\t)/g,"  ")).split("\n"),void 0!==n){switch(this._rectMode===i.CENTER&&(t-=n/2),this._textAlign){case i.CENTER:t+=n/2;break;case i.RIGHT:t+=n}var m=!1;if(void 0!==o){switch(this._rectMode===i.CENTER&&(r-=o/2),this._textBaseline){case i.BOTTOM:f=r+o,r=Math.max(f,r);break;case i.CENTER:f=r+o/2,r=Math.max(f,r);break;case i.BASELINE:m=!0,this._textBaseline=i.TOP}y=r+o-h.textAscent()}if(p===i.WORD){for(var g=[],v=0;v<a.length;v++){s="",c=a[v].split(" ");for(var b=0;b<c.length;b++)l="".concat(s+c[b])+" ",s=n<(u=this.textWidth(l))&&0<s.length?(g.push(s),"".concat(c[b])+" "):l;g.push(s)}var _=0,x=h.textAlign().vertical;x===i.CENTER?_=(g.length-1)*h.textLeading()/2:x===i.BOTTOM&&(_=(g.length-1)*h.textLeading());for(var w=0;w<a.length;w++){s="",c=a[w].split(" ");for(var j=0;j<c.length;j++)l="".concat(s+c[j])+" ",n<(u=this.textWidth(l))&&0<s.length?(this._renderText(h,s.trim(),t,r-_,y),s="".concat(c[j])+" ",r+=h.textLeading()):s=l;this._renderText(h,s.trim(),t,r-_,y),r+=h.textLeading(),m&&(this._textBaseline=i.BASELINE)}}else{for(var S=[],M=0;M<a.length;M++){s="",d=a[M].split("");for(var E=0;E<d.length;E++)l="".concat(s+d[E]),(u=this.textWidth(l))<=n?s+=d[E]:n<u&&0<s.length&&(S.push(s),s="".concat(d[E]))}S.push(s);var T=0,O=h.textAlign().vertical;O===i.CENTER?T=(S.length-1)*h.textLeading()/2:O===i.BOTTOM&&(T=(S.length-1)*h.textLeading());for(var C=0;C<a.length;C++){s="",d=a[C].split("");for(var L=0;L<d.length;L++)l="".concat(s+d[L]),(u=this.textWidth(l))<=n?s+=d[L]:n<u&&0<s.length&&(this._renderText(h,s.trim(),t,r-T,y),r+=h.textLeading(),s="".concat(d[L]))}this._renderText(h,s.trim(),t,r-T,y),r+=h.textLeading(),m&&(this._textBaseline=i.BASELINE)}}else{var P=0,k=h.textAlign().vertical;k===i.CENTER?P=(a.length-1)*h.textLeading()/2:k===i.BOTTOM&&(P=(a.length-1)*h.textLeading());for(var A=0;A<a.length;A++)this._renderText(h,a[A],t,r-P,y),r+=h.textLeading()}return h}},o.default.Renderer.prototype._applyDefaults=function(){return this},o.default.Renderer.prototype._isOpenType=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===a(e)&&e.font&&e.font.supported},o.default.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var e=document.createElement("span");e.style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|";var t=document.createElement("div");t.style.display="inline-block",t.style.width="1px",t.style.height="0px";var r=document.createElement("div");r.appendChild(e),r.appendChild(t),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),t.style.verticalAlign="baseline";var n=s(t),o=s(e),i=n[1]-o[1];t.style.verticalAlign="bottom",n=s(t),o=s(e);var a=n[1]-o[1]-i;return document.body.removeChild(r),this._setProperty("_textAscent",i),this._setProperty("_textDescent",a),this};var l=o.default.Renderer;r.default=l},{"../core/constants":253,"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],268:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e("./main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("./constants")),a=s(e("../image/filters"));function s(e){return e&&e.__esModule?e:{default:e}}e("./p5.Renderer");var l="rgba(0,0,0,0)";o.default.Renderer2D=function(e,t,r){return o.default.Renderer.call(this,e,t,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},o.default.Renderer2D.prototype=Object.create(o.default.Renderer.prototype),o.default.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=i.BLEND,this._setFill(i._DEFAULT_FILL),this._setStroke(i._DEFAULT_STROKE),this.drawingContext.lineCap=i.ROUND,this.drawingContext.font="normal 12px sans-serif"},o.default.Renderer2D.prototype.resize=function(e,t){o.default.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},o.default.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof o.default.Image)this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height);else{var e,t=this._getFill(),r=(e=this._pInst).color.apply(e,arguments);this._pInst._addAccsOutput()&&this._pInst._accsBackground(r.levels);var n=r.toString();this._setFill(n),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(t),this._isErasing&&this._pInst.erase()}this.drawingContext.restore()},o.default.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()},o.default.Renderer2D.prototype.fill=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setFill(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",t.levels)},o.default.Renderer2D.prototype.stroke=function(){var e,t=(e=this._pInst).color.apply(e,arguments);this._setStroke(t.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",t.levels)},o.default.Renderer2D.prototype.erase=function(e,t){if(!this._isErasing){this._cachedFillStyle=this.drawingContext.fillStyle;var r=this._pInst.color(255,e).toString();this.drawingContext.fillStyle=r,this._cachedStrokeStyle=this.drawingContext.strokeStyle;var n=this._pInst.color(255,t).toString();this.drawingContext.strokeStyle=n;var o=this._cachedBlendMode;this.blendMode(i.REMOVE),this._cachedBlendMode=o,this._isErasing=!0}},o.default.Renderer2D.prototype.noErase=function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)},o.default.Renderer2D.prototype.image=function(e,t,r,n,i,a,s,l,u){var c;e.gifProperties&&e._animateGif(this._pInst);try{this._tint&&(o.default.MediaElement&&e instanceof o.default.MediaElement&&e.loadPixels(),e.canvas&&(c=this._getTintedImageCanvas(e))),c=c||e.canvas||e.elt;var d=1;e.width&&0<e.width&&(d=c.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(c,d*t,d*r,d*n,d*i,a,s,l,u),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}},o.default.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=a.default._toPixels(e.canvas),r=document.createElement("canvas");r.width=e.canvas.width,r.height=e.canvas.height;for(var n=r.getContext("2d"),o=n.createImageData(e.canvas.width,e.canvas.height),i=o.data,s=0;s<t.length;s+=4){var l=t[s],u=t[s+1],c=t[s+2],d=t[s+3];i[s]=l*this._tint[0]/255,i[s+1]=u*this._tint[1]/255,i[s+2]=c*this._tint[2]/255,i[s+3]=d*this._tint[3]/255}return n.putImageData(o,0,0),r},o.default.Renderer2D.prototype.blendMode=function(e){if(e===i.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==i.BLEND&&e!==i.REMOVE&&e!==i.DARKEST&&e!==i.LIGHTEST&&e!==i.DIFFERENCE&&e!==i.MULTIPLY&&e!==i.EXCLUSION&&e!==i.SCREEN&&e!==i.REPLACE&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE&&e!==i.BURN&&e!==i.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}},o.default.Renderer2D.prototype.blend=function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[r.length-1],a=Array.prototype.slice.call(r,0,r.length-1);this.drawingContext.globalCompositeOperation=i,o.default.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=e},o.default.Renderer2D.prototype._getPixel=function(e,t){var r;return[(r=this.drawingContext.getImageData(e,t,1,1).data)[0],r[1],r[2],r[3]]},o.default.Renderer2D.prototype.loadPixels=function(){var e=this._pixelsState,t=e._pixelDensity,r=this.width*t,n=this.height*t,o=this.drawingContext.getImageData(0,0,r,n);e._setProperty("imageData",o),e._setProperty("pixels",o.data)},o.default.Renderer2D.prototype.set=function(e,t,r){e=Math.floor(e),t=Math.floor(t);var n=this._pixelsState;if(r instanceof o.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(n._pixelDensity,n._pixelDensity),this.drawingContext.clearRect(e,t,r.width,r.height),this.drawingContext.drawImage(r.canvas,e,t),this.drawingContext.restore();else{var i=0,a=0,s=0,l=0,u=4*(t*n._pixelDensity*(this.width*n._pixelDensity)+e*n._pixelDensity);if(n.imageData||n.loadPixels.call(n),"number"==typeof r)u<n.pixels.length&&(s=a=i=r,l=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");u<n.pixels.length&&(i=r[0],a=r[1],s=r[2],l=r[3])}else r instanceof o.default.Color&&u<n.pixels.length&&(i=r.levels[0],a=r.levels[1],s=r.levels[2],l=r.levels[3]);for(var c=0;c<n._pixelDensity;c++)for(var d=0;d<n._pixelDensity;d++)u=4*((t*n._pixelDensity+d)*this.width*n._pixelDensity+(e*n._pixelDensity+c)),n.pixels[u]=i,n.pixels[u+1]=a,n.pixels[u+2]=s,n.pixels[u+3]=l}},o.default.Renderer2D.prototype.updatePixels=function(e,t,r,n){var o=this._pixelsState,i=o._pixelDensity;void 0===e&&void 0===t&&void 0===r&&void 0===n&&(t=e=0,r=this.width,n=this.height),e*=i,t*=i,r*=i,n*=i,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=o.imageData),this.drawingContext.putImageData(o.imageData,e,t,0,0,r,n)},o.default.Renderer2D.prototype._acuteArcToBezier=function(e,t){var r=t/2,n=Math.cos(r),o=Math.sin(r),i=1/Math.tan(r),a=e+r,s=Math.cos(a),l=Math.sin(a),u=(4-n)/3,c=o+(n-u)*i;return{ax:Math.cos(e).toFixed(7),ay:Math.sin(e).toFixed(7),bx:(u*s+c*l).toFixed(7),by:(u*l-c*s).toFixed(7),cx:(u*s-c*l).toFixed(7),cy:(u*l+c*s).toFixed(7),dx:Math.cos(e+t).toFixed(7),dy:Math.sin(e+t).toFixed(7)}},o.default.Renderer2D.prototype.arc=function(e,t,r,n,o,a,s){var l=this.drawingContext,u=r/2,c=n/2,d=0,f=[];for(e+=u,t+=c;1e-5<=a-o;)d=Math.min(a-o,i.HALF_PI),f.push(this._acuteArcToBezier(o,d)),o+=d;return this._doFill&&(l.beginPath(),f.forEach(function(r,n){0===n&&l.moveTo(e+r.ax*u,t+r.ay*c),l.bezierCurveTo(e+r.bx*u,t+r.by*c,e+r.cx*u,t+r.cy*c,e+r.dx*u,t+r.dy*c)}),s!==i.PIE&&null!=s||l.lineTo(e,t),l.closePath(),l.fill()),this._doStroke&&(l.beginPath(),f.forEach(function(r,n){0===n&&l.moveTo(e+r.ax*u,t+r.ay*c),l.bezierCurveTo(e+r.bx*u,t+r.by*c,e+r.cx*u,t+r.cy*c,e+r.dx*u,t+r.dy*c)}),s===i.PIE?(l.lineTo(e,t),l.closePath()):s===i.CHORD&&l.closePath(),l.stroke()),this},o.default.Renderer2D.prototype.ellipse=function(e){var t=this.drawingContext,r=this._doFill,n=this._doStroke,o=parseFloat(e[0]),i=parseFloat(e[1]),a=parseFloat(e[2]),s=parseFloat(e[3]);if(r&&!n){if(this._getFill()===l)return this}else if(!r&&n&&this._getStroke()===l)return this;var u=a/2*.5522847498,c=s/2*.5522847498,d=o+a,f=i+s,h=o+a/2,p=i+s/2;t.beginPath(),t.moveTo(o,p),t.bezierCurveTo(o,p-c,h-u,i,h,i),t.bezierCurveTo(h+u,i,d,p-c,d,p),t.bezierCurveTo(d,p+c,h+u,f,h,f),t.bezierCurveTo(h-u,f,o,p+c,o,p),r&&t.fill(),n&&t.stroke()},o.default.Renderer2D.prototype.line=function(e,t,r,n){var o=this.drawingContext;return this._doStroke&&(this._getStroke()===l||(o.beginPath(),o.moveTo(e,t),o.lineTo(r,n),o.stroke())),this},o.default.Renderer2D.prototype.point=function(e,t){var r=this.drawingContext;if(!this._doStroke)return this;if(this._getStroke()===l)return this;var n=this._getStroke(),o=this._getFill();this._setFill(n),r.beginPath(),r.arc(e,t,r.lineWidth/2,0,i.TWO_PI,!1),r.fill(),this._setFill(o)},o.default.Renderer2D.prototype.quad=function(e,t,r,n,o,i,a,s){var u=this.drawingContext,c=this._doFill,d=this._doStroke;if(c&&!d){if(this._getFill()===l)return this}else if(!c&&d&&this._getStroke()===l)return this;return u.beginPath(),u.moveTo(e,t),u.lineTo(r,n),u.lineTo(o,i),u.lineTo(a,s),u.closePath(),c&&u.fill(),d&&u.stroke(),this},o.default.Renderer2D.prototype.rect=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],a=e[5],s=e[6],u=e[7],c=this.drawingContext,d=this._doFill,f=this._doStroke;if(d&&!f){if(this._getFill()===l)return this}else if(!d&&f&&this._getStroke()===l)return this;if(c.beginPath(),void 0===i)c.rect(t,r,n,o);else{void 0===a&&(a=i),void 0===s&&(s=a),void 0===u&&(u=s);var h=Math.abs(n),p=Math.abs(o),y=h/2,m=p/2;h<2*i&&(i=y),p<2*i&&(i=m),h<2*a&&(a=y),p<2*a&&(a=m),h<2*s&&(s=y),p<2*s&&(s=m),h<2*u&&(u=y),p<2*u&&(u=m),c.beginPath(),c.moveTo(t+i,r),c.arcTo(t+n,r,t+n,r+o,a),c.arcTo(t+n,r+o,t,r+o,s),c.arcTo(t,r+o,t,r,u),c.arcTo(t,r,t+n,r,i),c.closePath()}return this._doFill&&c.fill(),this._doStroke&&c.stroke(),this},o.default.Renderer2D.prototype.triangle=function(e){var t=this.drawingContext,r=this._doFill,n=this._doStroke,o=e[0],i=e[1],a=e[2],s=e[3],u=e[4],c=e[5];if(r&&!n){if(this._getFill()===l)return this}else if(!r&&n&&this._getStroke()===l)return this;t.beginPath(),t.moveTo(o,i),t.lineTo(a,s),t.lineTo(u,c),t.closePath(),r&&t.fill(),n&&t.stroke()},o.default.Renderer2D.prototype.endShape=function(e,t,r,n,o,a,s){if(0===t.length)return this;if(!this._doStroke&&!this._doFill)return this;var l,u,c,d=e===i.CLOSE;d&&!a&&t.push(t[0]);var f=t.length;if(!r||s!==i.POLYGON&&null!==s)if(!n||s!==i.POLYGON&&null!==s)if(!o||s!==i.POLYGON&&null!==s)if(s===i.POINTS)for(u=0;u<f;u++)l=t[u],this._doStroke&&this._pInst.stroke(l[6]),this._pInst.point(l[0],l[1]);else if(s===i.LINES)for(u=0;u+1<f;u+=2)l=t[u],this._doStroke&&this._pInst.stroke(t[u+1][6]),this._pInst.line(l[0],l[1],t[u+1][0],t[u+1][1]);else if(s===i.TRIANGLES)for(u=0;u+2<f;u+=3)l=t[u],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[u+1][0],t[u+1][1]),this.drawingContext.lineTo(t[u+2][0],t[u+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[u+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[u+2][6]),this.drawingContext.stroke());else if(s===i.TRIANGLE_STRIP)for(u=0;u+1<f;u++)l=t[u],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[u+1][0],t[u+1][1]),this.drawingContext.lineTo(l[0],l[1]),this._doStroke&&this._pInst.stroke(t[u+1][6]),this._doFill&&this._pInst.fill(t[u+1][5]),u+2<f&&(this.drawingContext.lineTo(t[u+2][0],t[u+2][1]),this._doStroke&&this._pInst.stroke(t[u+2][6]),this._doFill&&this._pInst.fill(t[u+2][5])),this._doFillStrokeClose(d);else if(s===i.TRIANGLE_FAN){if(2<f){for(this.drawingContext.beginPath(),u=2;u<f;u++)l=t[u],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[u-1][0],t[u-1][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),u<f-1&&(this._doFill&&l[5]!==t[u+1][5]||this._doStroke&&l[6]!==t[u+1][6])&&(this._doFill&&(this._pInst.fill(l[5]),this.drawingContext.fill(),this._pInst.fill(t[u+1][5])),this._doStroke&&(this._pInst.stroke(l[6]),this.drawingContext.stroke(),this._pInst.stroke(t[u+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose(d)}}else if(s===i.QUADS)for(u=0;u+3<f;u+=4){for(l=t[u],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),c=1;c<4;c++)this.drawingContext.lineTo(t[u+c][0],t[u+c][1]);this.drawingContext.lineTo(l[0],l[1]),this._doFill&&this._pInst.fill(t[u+3][5]),this._doStroke&&this._pInst.stroke(t[u+3][6]),this._doFillStrokeClose(d)}else if(s===i.QUAD_STRIP){if(3<f)for(u=0;u+1<f;u+=2)l=t[u],this.drawingContext.beginPath(),u+3<f?(this.drawingContext.moveTo(t[u+2][0],t[u+2][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[u+1][0],t[u+1][1]),this.drawingContext.lineTo(t[u+3][0],t[u+3][1]),this._doFill&&this._pInst.fill(t[u+3][5]),this._doStroke&&this._pInst.stroke(t[u+3][6])):(this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[u+1][0],t[u+1][1])),this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),u=1;u<f;u++)(l=t[u]).isVert&&(l.moveTo?this.drawingContext.moveTo(l[0],l[1]):this.drawingContext.lineTo(l[0],l[1]));this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),u=0;u<f;u++)t[u].isVert?t[u].moveTo?this.drawingContext.moveTo(t[u][0],t[u][1]):this.drawingContext.lineTo(t[u][0],t[u][1]):this.drawingContext.quadraticCurveTo(t[u][0],t[u][1],t[u][2],t[u][3]);this._doFillStrokeClose(d)}else{for(this.drawingContext.beginPath(),u=0;u<f;u++)t[u].isVert?t[u].moveTo?this.drawingContext.moveTo(t[u][0],t[u][1]):this.drawingContext.lineTo(t[u][0],t[u][1]):this.drawingContext.bezierCurveTo(t[u][0],t[u][1],t[u][2],t[u][3],t[u][4],t[u][5]);this._doFillStrokeClose(d)}else if(3<f){var h=[],p=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),u=1;u+2<f;u++)l=t[u],h[0]=[l[0],l[1]],h[1]=[l[0]+(p*t[u+1][0]-p*t[u-1][0])/6,l[1]+(p*t[u+1][1]-p*t[u-1][1])/6],h[2]=[t[u+1][0]+(p*t[u][0]-p*t[u+2][0])/6,t[u+1][1]+(p*t[u][1]-p*t[u+2][1])/6],h[3]=[t[u+1][0],t[u+1][1]],this.drawingContext.bezierCurveTo(h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]);d&&this.drawingContext.lineTo(t[u+1][0],t[u+1][1]),this._doFillStrokeClose(d)}return a=o=n=r=!1,d&&t.pop(),this},o.default.Renderer2D.prototype.strokeCap=function(e){return e!==i.ROUND&&e!==i.SQUARE&&e!==i.PROJECT||(this.drawingContext.lineCap=e),this},o.default.Renderer2D.prototype.strokeJoin=function(e){return e!==i.ROUND&&e!==i.BEVEL&&e!==i.MITER||(this.drawingContext.lineJoin=e),this},o.default.Renderer2D.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this},o.default.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},o.default.Renderer2D.prototype._setFill=function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)},o.default.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},o.default.Renderer2D.prototype._setStroke=function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)},o.default.Renderer2D.prototype.bezier=function(e,t,r,n,o,i,a,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(r,n,o,i,a,s),this._pInst.endShape(),this},o.default.Renderer2D.prototype.curve=function(e,t,r,n,o,i,a,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(r,n),this._pInst.curveVertex(o,i),this._pInst.curveVertex(a,s),this._pInst.endShape(),this},o.default.Renderer2D.prototype._doFillStrokeClose=function(e){e&&this.drawingContext.closePath(),this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke()},o.default.Renderer2D.prototype.applyMatrix=function(e,t,r,n,o,i){this.drawingContext.transform(e,t,r,n,o,i)},o.default.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},o.default.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},o.default.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},o.default.Renderer2D.prototype.translate=function(e,t){return e instanceof o.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this},o.default.Renderer2D.prototype.text=function(e,t,r,n,a){var s;void 0!==n&&this.drawingContext.textBaseline===i.BASELINE&&(s=!0,this.drawingContext.textBaseline=i.TOP);var l=o.default.Renderer.prototype.text.apply(this,arguments);return s&&(this.drawingContext.textBaseline=i.BASELINE),l},o.default.Renderer2D.prototype._renderText=function(e,t,r,n,o){if(!(o<=n))return e.push(),this._isOpenType()?this._textFont._renderPath(t,r,n,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,r,n),this._doFill&&(this._fillSet||this._setFill(i._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,r,n))),e.pop(),e},o.default.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},o.default.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(e||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this._textBaseline===i.CENTER?this.drawingContext.textBaseline=i._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,t},o.default.Renderer2D.prototype.push=function(){return this.drawingContext.save(),o.default.Renderer.prototype.push.apply(this)},o.default.Renderer2D.prototype.pop=function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,o.default.Renderer.prototype.pop.call(this,e)};var u=o.default.Renderer2D;r.default=u},{"../image/filters":285,"./constants":253,"./main":264,"./p5.Renderer":267,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],269:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var n,o=(n=e("./main"))&&n.__esModule?n:{default:n};o.default.prototype._promisePreloads=[];var i=!(o.default.prototype.registerPromisePreload=function(e){o.default.prototype._promisePreloads.push(e)});function a(){return{}}o.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,r=void 0;try{for(var n,a=this._promisePreloads[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value,l=this,u=s.method,c=s.addCallbacks,d=s.legacyPreloadSetup,f=s.target||this,h=f[u].bind(f);if(f===o.default.prototype){if(i)continue;l=null,h=f[u]}f[u]=this._wrapPromisePreload(l,h,c),d&&(f[d.method]=this._legacyPreloadGenerator(l,d,f[u]))}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}i=!0},o.default.prototype._wrapPromisePreload=function(e,t,r){var n=function(){var e=this;this._incrementPreload();for(var n=null,o=null,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(r)for(var l=a.length-1;0<=l&&!o&&"function"==typeof a[l];l--)o=n,n=a.pop();var u=Promise.resolve(t.apply(this,a));return n&&u.then(n),o&&u.catch(o),u.then(function(){return e._decrementPreload()}),u};return e&&(n=n.bind(e)),n},o.default.prototype._legacyPreloadGenerator=function(e,t,r){var n=t.createBaseObject||a,o=function(){var e=this;this._incrementPreload();var t=n.apply(this,arguments);return r.apply(this,arguments).then(function(r){Object.assign(t,r),e._decrementPreload()}),t};return e&&(o=o.bind(e)),o}},{"./main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],270:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./main"))&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var s="defaultCanvas0";o.default.prototype.createCanvas=function(e,t,r){o.default._validateParameters("createCanvas",arguments);var n,a=r||i.P2D;if(a===i.WEBGL){if(n=document.getElementById(s)){n.parentNode.removeChild(n);var l=this._renderer;this._elements=this._elements.filter(function(e){return e!==l})}(n=document.createElement("canvas")).id=s,n.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)n=this.canvas;else{n=document.createElement("canvas");for(var u=0;document.getElementById("defaultCanvas".concat(u));)u++;s="defaultCanvas".concat(u),n.id=s,n.classList.add("p5Canvas")}if(this._setupDone||(n.dataset.hidden=!0,n.style.visibility="hidden"),this._userNode)this._userNode.appendChild(n);else{if(0===document.getElementsByTagName("main").length){var c=document.createElement("main");document.body.appendChild(c)}document.getElementsByTagName("main")[0].appendChild(n)}return a===i.WEBGL?(this._setProperty("_renderer",new o.default.RendererGL(n,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new o.default.Renderer2D(n,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},o.default.prototype.resizeCanvas=function(e,t,r){if(o.default._validateParameters("resizeCanvas",arguments),this._renderer){var n={};for(var i in this.drawingContext){var s=this.drawingContext[i];"object"!==a(s)&&"function"!=typeof s&&(n[i]=s)}for(var l in this._renderer.resize(e,t),this.width=e,this.height=t,n)try{this.drawingContext[l]=n[l]}catch(e){}r||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},o.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},o.default.prototype.createGraphics=function(e,t,r){return o.default._validateParameters("createGraphics",arguments),new o.default.Graphics(e,t,r,this)},o.default.prototype.blendMode=function(e){o.default._validateParameters("blendMode",arguments),e===i.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=i.BLEND),this._renderer.blendMode(e)};var l=o.default;r.default=l},{"../webgl/p5.RendererGL":318,"./constants":253,"./main":264,"./p5.Graphics":266,"./p5.Renderer2D":268,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],271:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.slice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e("../main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../constants")),a=s(e("../helpers"));function s(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),o.default.prototype._normalizeArcAngles=function(e,t,r,n,o){var a;return e-=i.TWO_PI*Math.floor(e/i.TWO_PI),t-=i.TWO_PI*Math.floor(t/i.TWO_PI),a=Math.min(Math.abs(e-t),i.TWO_PI-Math.abs(e-t)),o&&(e=e<=i.HALF_PI?Math.atan(r/n*Math.tan(e)):e>i.HALF_PI&&e<=3*i.HALF_PI?Math.atan(r/n*Math.tan(e))+i.PI:Math.atan(r/n*Math.tan(e))+i.TWO_PI,t=t<=i.HALF_PI?Math.atan(r/n*Math.tan(t)):t>i.HALF_PI&&t<=3*i.HALF_PI?Math.atan(r/n*Math.tan(t))+i.PI:Math.atan(r/n*Math.tan(t))+i.TWO_PI),t<e&&(t+=i.TWO_PI),{start:e,stop:t,correspondToSamePoint:a<1e-5}},o.default.prototype.arc=function(e,t,r,n,i,s,l,u){if(o.default._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;if(i===s)return this;i=this._toRadians(i),s=this._toRadians(s),r=Math.abs(r),n=Math.abs(n);var c=a.default.modeAdjust(e,t,r,n,this._renderer._ellipseMode),d=this._normalizeArcAngles(i,s,c.w,c.h,!0);return d.correspondToSamePoint?this._renderer.ellipse([c.x,c.y,c.w,c.h,u]):(this._renderer.arc(c.x,c.y,c.w,c.h,d.start,d.stop,l,u),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[c.x,c.y,c.w,c.h,d.start,d.stop,l])),this},o.default.prototype.ellipse=function(e,t,r,n,i){return o.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},o.default.prototype.circle=function(){o.default._validateParameters("circle",arguments);var e=Array.prototype.slice.call(arguments,0,2);return e.push(arguments[2]),e.push(arguments[2]),this._renderEllipse.apply(this,e)},o.default.prototype._renderEllipse=function(e,t,r,n,o){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;r<0&&(r=Math.abs(r)),void 0===n?n=r:n<0&&(n=Math.abs(n));var i=a.default.modeAdjust(e,t,r,n,this._renderer._ellipseMode);return this._renderer.ellipse([i.x,i.y,i.w,i.h,o]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[i.x,i.y,i.w,i.h]),this},o.default.prototype.line=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return o.default._validateParameters("line",t),this._renderer._doStroke&&(n=this._renderer).line.apply(n,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",t),this},o.default.prototype.point=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return o.default._validateParameters("point",t),this._renderer._doStroke&&(1===t.length&&t[0]instanceof o.default.Vector?this._renderer.point.call(this._renderer,t[0].x,t[0].y,t[0].z):((n=this._renderer).point.apply(n,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",t))),this},o.default.prototype.quad=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return o.default._validateParameters("quad",t),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&t.length<=12?this._renderer.quad.call(this._renderer,t[0],t[1],0,t[2],t[3],0,t[4],t[5],0,t[6],t[7],0,t[8],t[9]):((n=this._renderer).quad.apply(n,t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",t))),this},o.default.prototype.rect=function(){return o.default._validateParameters("rect",arguments),this._renderRect.apply(this,arguments)},o.default.prototype.square=function(e,t,r,n,i,a,s){return o.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,r,r,n,i,a,s)},o.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=a.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],r=4;r<arguments.length;r++)t[r]=arguments[r];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},o.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this};var l=o.default;r.default=l},{"../constants":253,"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../helpers":260,"../main":264,"core-js/modules/es.array.slice":162}],272:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../constants"));i.default.prototype.ellipseMode=function(e){return i.default._validateParameters("ellipseMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._ellipseMode=e),this},i.default.prototype.noSmooth=function(){return this.setAttributes("antialias",!1),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},i.default.prototype.rectMode=function(e){return i.default._validateParameters("rectMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._rectMode=e),this},i.default.prototype.smooth=function(){return this.setAttributes("antialias",!0),this._renderer.isP3D||"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},i.default.prototype.strokeCap=function(e){return i.default._validateParameters("strokeCap",arguments),e!==a.ROUND&&e!==a.SQUARE&&e!==a.PROJECT||this._renderer.strokeCap(e),this},i.default.prototype.strokeJoin=function(e){return i.default._validateParameters("strokeJoin",arguments),e!==a.ROUND&&e!==a.BEVEL&&e!==a.MITER||this._renderer.strokeJoin(e),this},i.default.prototype.strokeWeight=function(e){return i.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var s=i.default;r.default=s},{"../constants":253,"../main":264}],273:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../main"))&&n.__esModule?n:{default:n};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),o.default.prototype.bezier=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.default._validateParameters("bezier",r),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,r),this},o.default.prototype.bezierDetail=function(e){return o.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},o.default.prototype.bezierPoint=function(e,t,r,n,i){o.default._validateParameters("bezierPoint",arguments);var a=1-i;return Math.pow(a,3)*e+3*Math.pow(a,2)*i*t+3*a*Math.pow(i,2)*r+Math.pow(i,3)*n},o.default.prototype.bezierTangent=function(e,t,r,n,i){o.default._validateParameters("bezierTangent",arguments);var a=1-i;return 3*n*Math.pow(i,2)-3*r*Math.pow(i,2)+6*r*a*i-6*t*a*i+3*t*Math.pow(a,2)-3*e*Math.pow(a,2)},o.default.prototype.curve=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return o.default._validateParameters("curve",t),this._renderer._doStroke&&(n=this._renderer).curve.apply(n,t),this},o.default.prototype.curveDetail=function(e){return o.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},o.default.prototype.curveTightness=function(e){return o.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},o.default.prototype.curvePoint=function(e,t,r,n,i){o.default._validateParameters("curvePoint",arguments);var a=i*i*i,s=i*i;return e*(-.5*a+s-.5*i)+t*(1.5*a-2.5*s+1)+r*(-1.5*a+2*s+.5*i)+n*(.5*a-.5*s)},o.default.prototype.curveTangent=function(e,t,r,n,i){o.default._validateParameters("curveTangent",arguments);var a=i*i;return e*(-3*a/2+2*i-.5)+t*(9*a/2-5*i)+r*(-9*a/2+4*i+.5)+n*(3*a/2-i)};var i=o.default;r.default=i},{"../friendly_errors/fes_core":255,"../friendly_errors/file_errors":256,"../friendly_errors/validate_params":259,"../main":264}],274:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.slice"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../constants"));var s=null,l=[],u=[],c=!1,d=!1,f=!1,h=!1,p=!0;i.default.prototype.beginContour=function(){return u=[],h=!0,this},i.default.prototype.beginShape=function(e){var t;return i.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(s=e===a.POINTS||e===a.LINES||e===a.TRIANGLES||e===a.TRIANGLE_FAN||e===a.TRIANGLE_STRIP||e===a.QUADS||e===a.QUAD_STRIP?e:null,l=[],u=[]),this},i.default.prototype.bezierVertex=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;if(i.default._validateParameters("bezierVertex",t),this._renderer.isP3D)(n=this._renderer).bezierVertex.apply(n,t);else if(0===l.length)i.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{c=!0;for(var o=[],a=0;a<t.length;a++)o[a]=t[a];o.isVert=!1,h?u.push(o):l.push(o)}return this},i.default.prototype.curveVertex=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;return i.default._validateParameters("curveVertex",t),this._renderer.isP3D?(n=this._renderer).curveVertex.apply(n,t):(d=!0,this.vertex(t[0],t[1])),this},i.default.prototype.endContour=function(){var e=u[0].slice();e.isVert=u[0].isVert,e.moveTo=!1,u.push(e),p&&(l.push(l[0]),p=!1);for(var t=0;t<u.length;t++)l.push(u[t]);return this},i.default.prototype.endShape=function(e){if(i.default._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(e,d,c,f,h,s);else{if(0===l.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===a.CLOSE;t&&!h&&l.push(l[0]),this._renderer.endShape(e,l,d,c,f,h,s),p=!(h=f=c=d=!1),t&&l.pop()}return this},i.default.prototype.quadraticVertex=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(i.default._validateParameters("quadraticVertex",t),this._renderer.isP3D){var n;(n=this._renderer).quadraticVertex.apply(n,t)}else{if(this._contourInited){var o={};return o.x=t[0],o.y=t[1],o.x3=t[2],o.y3=t[3],o.type=a.QUADRATIC,this._contourVertices.push(o),this}if(0<l.length){f=!0;for(var s=[],c=0;c<t.length;c++)s[c]=t[c];s.isVert=!1,h?u.push(s):l.push(s)}else i.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},i.default.prototype.vertex=function(e,t,r,n,o){if(this._renderer.isP3D){var i;(i=this._renderer).vertex.apply(i,arguments)}else{var a=[];a.isVert=!0,a[0]=e,a[1]=t,a[2]=0,a[3]=0,a[4]=0,a[5]=this._renderer._getFill(),a[6]=this._renderer._getStroke(),r&&(a.moveTo=r),h?(0===u.length&&(a.moveTo=!0),u.push(a)):l.push(a)}return this},i.default.prototype.normal=function(e,t,r){var n;return this._assert3d("normal"),i.default._validateParameters("normal",arguments),(n=this._renderer).normal.apply(n,arguments),this};var y=i.default;r.default=y},{"../constants":253,"../main":264,"core-js/modules/es.array.slice":162}],275:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1}),function(){if(!Object.assign){var e=Object.keys,t=Object.defineProperty,r="function"==typeof Symbol&&"symbol"===n(Symbol()),o=Object.prototype.propertyIsEnumerable,i=function(e){return function(t){return o.call(e,t)}};t(Object,"assign",{value:function(t,n){if(null==t)throw new TypeError("target must be an object");var o,a,s,l,u=Object(t);for(o=1;o<arguments.length;++o)for(a=Object(arguments[o]),l=e(a),r&&Object.getOwnPropertySymbols&&l.push.apply(l,Object.getOwnPropertySymbols(a).filter(i(a))),s=0;s<l.length;++s)u[l[s]]=a[l[s]];return u},configurable:!0,enumerable:!1,writable:!0})}}()},{"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-clamped-array":227,"core-js/modules/web.dom-collections.iterator":229}],276:[function(e,t,r){"use strict";e("core-js/modules/es.array.for-each"),e("core-js/modules/es.object.assign"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./main"))&&n.__esModule?n:{default:n};o.default.prototype.noLoop=function(){this._loop=!1},o.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},o.default.prototype.isLooping=function(){return this._loop},o.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},o.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},o.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e);(isNaN(t)||t<1)&&(t=1);var r=this._isGlobal?window:this;if("function"==typeof r.draw){void 0===r.setup&&r.scale(r._pixelDensity,r._pixelDensity);for(var n=function(e){e.call(r)},o=0;o<t;o++){r.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),r._renderer.isP3D&&r._renderer._update(),r._setProperty("frameCount",r.frameCount+1),r._registeredMethods.pre.forEach(n),this._inUserDraw=!0;try{r.draw()}finally{this._inUserDraw=!1}r._registeredMethods.post.forEach(n)}}}};var i=o.default;r.default=i},{"./main":264,"core-js/modules/es.array.for-each":154,"core-js/modules/es.object.assign":173,"core-js/modules/web.dom-collections.for-each":228}],277:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("./main"))&&n.__esModule?n:{default:n};o.default.prototype.applyMatrix=function(){var e,t,r=arguments[0]instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments[0])||r?(e=this._renderer).applyMatrix.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments[0])):(t=this._renderer).applyMatrix.apply(t,arguments),this},o.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},o.default.prototype.rotate=function(e,t){return o.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},o.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),o.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},o.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),o.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},o.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),o.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},o.default.prototype.scale=function(e,t,r){if(o.default._validateParameters("scale",arguments),e instanceof o.default.Vector){var n=e;e=n.x,t=n.y,r=n.z}else if(e instanceof Array){var i=e;e=i[0],t=i[1],r=i[2]||1}return isNaN(t)?t=r=e:isNaN(r)&&(r=1),this._renderer.scale.call(this._renderer,e,t,r),this},o.default.prototype.shearX=function(e){o.default._validateParameters("shearX",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,0,Math.tan(t),1,0,0),this},o.default.prototype.shearY=function(e){o.default._validateParameters("shearY",arguments);var t=this._toRadians(e);return this._renderer.applyMatrix(1,Math.tan(t),0,1,0,0),this},o.default.prototype.translate=function(e,t,r){return o.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,r):this._renderer.translate(e,t),this};var i=o.default;r.default=i},{"./main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.get-prototype-of":175,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229}],278:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}o.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var r=a(t);switch(r){case"number":case"boolean":t=t.toString();break;case"object":t instanceof o.default.Color?r="p5.Color":t instanceof o.default.Vector&&(r="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t);var n="".concat(e,"p5TypeID");localStorage.setItem(n,r)},o.default.prototype.getItem=function(e){var t=localStorage.getItem(e),r=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===r)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(r){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,i(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,i(t))}return t},o.default.prototype.clearStorage=function(){localStorage.clear()},o.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":264,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.ends-with":184,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],279:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.string.sub"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.createStringDict=function(e,t){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(e,t)},o.default.prototype.createNumberDict=function(e,t){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(e,t)},o.default.TypedDict=function(e,t){return e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this},o.default.TypedDict.prototype.size=function(){return Object.keys(this.data).length},o.default.TypedDict.prototype.hasKey=function(e){return this.data.hasOwnProperty(e)},o.default.TypedDict.prototype.get=function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))},o.default.TypedDict.prototype.set=function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")},o.default.TypedDict.prototype._addObj=function(e){for(var t in e)this.set(t,e[t])},o.default.TypedDict.prototype.create=function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")},o.default.TypedDict.prototype.clear=function(){this.data={}},o.default.TypedDict.prototype.remove=function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]},o.default.TypedDict.prototype.print=function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))},o.default.TypedDict.prototype.saveTable=function(e){var t="";for(var r in this.data)t+="".concat(r,",").concat(this.data[r],"\n");var n=new Blob([t],{type:"text/csv"});o.default.prototype.downloadFile(n,e||"mycsv","csv")},o.default.TypedDict.prototype.saveJSON=function(e,t){o.default.prototype.saveJSON(this.data,e,t)},o.default.TypedDict.prototype._validate=function(e){return!0},o.default.StringDict=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.default.TypedDict.apply(this,t)},o.default.StringDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.StringDict.prototype._validate=function(e){return"string"==typeof e},o.default.NumberDict=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.default.TypedDict.apply(this,t)},o.default.NumberDict.prototype=Object.create(o.default.TypedDict.prototype),o.default.NumberDict.prototype._validate=function(e){return"number"==typeof e},o.default.NumberDict.prototype.add=function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},o.default.NumberDict.prototype.sub=function(e,t){this.add(e,-t)},o.default.NumberDict.prototype.mult=function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},o.default.NumberDict.prototype.div=function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))},o.default.NumberDict.prototype._valueTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t=this.data[Object.keys(this.data)[0]];for(var r in this.data)this.data[r]*e<t*e&&(t=this.data[r]);return t},o.default.NumberDict.prototype.minValue=function(){return this._valueTest(1)},o.default.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},o.default.NumberDict.prototype._keyTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],r=1;r<Object.keys(this.data).length;r++)Object.keys(this.data)[r]*e<t*e&&(t=Object.keys(this.data)[r]);return t},o.default.NumberDict.prototype.minKey=function(){return this._keyTest(1)},o.default.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)};var i=o.default.TypedDict;r.default=i},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.object.keys":176,"core-js/modules/es.string.sub":192}],280:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r){(t._userNode?t._userNode:document.body).appendChild(e);var n=r?new o.default.MediaElement(e,t):new o.default.Element(e,t);return t._elements.push(n),n}function s(e,t,r,n){var o=document.createElement(t);"string"==typeof(r=r||"")&&(r=[r]);var i=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value,f=document.createElement("source");f.setAttribute("src",d),o.appendChild(f)}}catch(e){s=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw l}}"function"==typeof n&&o.addEventListener("canplaythrough",function e(){n(),o.removeEventListener("canplaythrough",e)});var h=a(o,e,!0);return h.loadedmetadata=!1,o.addEventListener("loadedmetadata",function(){h.width=o.videoWidth,h.height=o.videoHeight,0===h.elt.width&&(h.elt.width=o.videoWidth),0===h.elt.height&&(h.elt.height=o.videoHeight),h.presetPlaybackRate&&(h.elt.playbackRate=h.presetPlaybackRate,delete h.presetPlaybackRate),h.loadedmetadata=!0}),h}function l(e,t,r,n){this.callback=e,this.time=t,this.id=r,this.val=n}o.default.prototype.select=function(e,t){o.default._validateParameters("select",arguments);var r=this._getContainer(t).querySelector(e);return r?this._wrapElement(r):null},o.default.prototype.selectAll=function(e,t){o.default._validateParameters("selectAll",arguments);var r=[],n=this._getContainer(t).querySelectorAll(e);if(n)for(var i=0;i<n.length;i++){var a=this._wrapElement(n[i]);r.push(a)}return r},o.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof o.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},o.default.prototype._wrapElement=function(e){var t=Array.prototype.slice.call(e.children);if("INPUT"!==e.tagName||"checkbox"!==e.type)return"VIDEO"===e.tagName||"AUDIO"===e.tagName?new o.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new o.default.Element(e,this)):0<t.length&&t.every(function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName})?this.createRadio(new o.default.Element(e,this)):new o.default.Element(e,this);var r=new o.default.Element(e,this);return r.checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!!arguments[0],this)},r},o.default.prototype.removeElements=function(e){o.default._validateParameters("removeElements",arguments),this._elements.filter(function(e){return!(e.elt instanceof HTMLCanvasElement)}).map(function(e){return e.remove()})},o.default.Element.prototype.changed=function(e){return o.default.Element._adjustListener("change",e,this),this},o.default.Element.prototype.input=function(e){return o.default.Element._adjustListener("input",e,this),this},o.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,a(t,this)},o.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,a(t,this)},o.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,a(t,this)},o.default.prototype.createImg=function(){o.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),r=arguments;return 1<r.length&&"string"==typeof r[1]&&(t.alt=r[1]),2<r.length&&"string"==typeof r[2]&&(t.crossOrigin=r[2]),t.src=r[0],e=a(t,this),t.addEventListener("load",function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var n=r[r.length-1];"function"==typeof n&&n(e)}),e},o.default.prototype.createA=function(e,t,r){o.default._validateParameters("createA",arguments);var n=document.createElement("a");return n.href=e,n.innerHTML=t,r&&(n.target=r),a(n,this)},o.default.prototype.createSlider=function(e,t,r,n){o.default._validateParameters("createSlider",arguments);var i=document.createElement("input");return i.type="range",i.min=e,i.max=t,0===n?i.step=1e-18:n&&(i.step=n),"number"==typeof r&&(i.value=r),a(i,this)},o.default.prototype.createButton=function(e,t){o.default._validateParameters("createButton",arguments);var r=document.createElement("button");return r.innerHTML=e,t&&(r.value=t),a(r,this)},o.default.prototype.createCheckbox=function(){o.default._validateParameters("createCheckbox",arguments);var e=document.createElement("div"),t=document.createElement("input");t.type="checkbox";var r=document.createElement("label");r.appendChild(t),e.appendChild(r);var n=a(e,this);if(n.checked=function(){var e=n.elt.firstElementChild.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!!arguments[0]}return n},this.value=function(e){return n.value=e,this},arguments[0]){n.value(arguments[0]);var i=document.createElement("span");i.innerHTML=arguments[0],r.appendChild(i)}return arguments[1]&&(t.checked=!0),n},o.default.prototype.createSelect=function(){var e;o.default._validateParameters("createSelect",arguments);var t=arguments[0];if(t instanceof o.default.Element&&t.elt instanceof HTMLSelectElement)e=t,this.elt=t.elt;else if(t instanceof HTMLSelectElement)e=a(t,this),this.elt=t;else{var r=document.createElement("select");t&&"boolean"==typeof t&&r.setAttribute("multiple","true"),e=a(r,this),this.elt=r}return e.option=function(e,t){var r;if(void 0!==e){for(var n=0;n<this.elt.length;n+=1)if(this.elt[n].innerHTML===e){r=n;break}if(void 0!==r)!1===t?this.elt.remove(r):this.elt[r].value=t;else{var o=document.createElement("option");o.innerHTML=e,o.value=void 0===t?e:t,this.elt.appendChild(o),this._pInst._elements.push(o)}}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=this.elt.selectedOptions[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r.push(l.value)}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e},o.default.prototype.createRadio=function(){var e,t,r=arguments[0];r instanceof HTMLDivElement||r instanceof HTMLSpanElement?(e=r,"string"==typeof arguments[1]&&(t=arguments[1])):("string"==typeof r&&(t=r),e=document.createElement("div"));var n=a(this.elt=e,this);function o(e){return e instanceof HTMLInputElement&&"radio"===e.type}function i(e){return e instanceof HTMLLabelElement}return n._name=t||"radioOption",n._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(e){return o(e)||i(e)&&o(e.firstElementChild)}).map(function(e){return o(e)?e:e.firstElementChild})},n.option=function(e,t){var r,o,a,s=!0,l=!1,u=void 0;try{for(var c,d=n._getOptionsArray()[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;if(f.value===e){r=f;break}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return void 0===r&&((r=document.createElement("input")).setAttribute("type","radio"),r.setAttribute("value",e)),r.setAttribute("name",n._name),i(r.parentElement)?o=r.parentElement:(o=document.createElement("label")).insertAdjacentElement("afterbegin",r),o.lastElementChild instanceof HTMLSpanElement?a=o.lastElementChild:(a=document.createElement("span"),r.insertAdjacentElement("afterend",a)),a.innerHTML=void 0===t?e:t,this.elt.appendChild(o),r},n.remove=function(e){var t=!0,r=!1,o=void 0;try{for(var a,s=n._getOptionsArray()[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value;if(l.value===e)return void(i(l.parentElement)?l.parentElement.remove():l.remove())}}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}},n.value=function(){var e="",t=!0,r=!1,o=void 0;try{for(var i,a=n._getOptionsArray()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(s.checked){e=s.value;break}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return e},n.selected=function(e){var t=null;if(void 0===e){var r=!0,o=!1,i=void 0;try{for(var a,s=n._getOptionsArray()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.checked){t=l;break}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}else{var u=!0,c=!1,d=void 0;try{for(var f,h=n._getOptionsArray()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;p.value===e&&(p.setAttribute("checked",!0),t=p)}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}return t},n.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,r=!1,o=void 0;try{for(var i,a=n._getOptionsArray()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.setAttribute("disabled",e)}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}},n},o.default.prototype.createColorPicker=function(e){o.default._validateParameters("createColorPicker",arguments);var t,r=document.createElement("input");return r.type="color",e?e instanceof o.default.Color?r.value=e.toString("#rrggbb"):(o.default.prototype._colorMode="rgb",o.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},r.value=o.default.prototype.color(e).toString("#rrggbb")):r.value="#000000",(t=a(r,this)).color=function(){return e&&(e.mode&&(o.default.prototype._colorMode=e.mode),e.maxes&&(o.default.prototype._colorMaxes=e.maxes)),o.default.prototype.color(this.elt.value)},t},o.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text";o.default._validateParameters("createInput",arguments);var r=document.createElement("input");return r.setAttribute("value",e),r.setAttribute("type",t),a(r,this)},o.default.prototype.createFileInput=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(o.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob){var r=document.createElement("input");return r.setAttribute("type","file"),t&&r.setAttribute("multiple",!0),r.addEventListener("change",function(t){var r=!0,n=!1,i=void 0;try{for(var a,s=t.target.files[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;o.default.File._load(l,e)}}catch(t){n=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}},!1),a(r,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},o.default.prototype.createVideo=function(e,t){return o.default._validateParameters("createVideo",arguments),s(this,"video",e,t)},o.default.prototype.createAudio=function(e,t){return o.default._validateParameters("createAudio",arguments),s(this,"audio",e,t)},o.default.prototype.VIDEO="video",o.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise(function(r,n){t.call(navigator,e,r,n)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),o.default.prototype.createCapture=function(){if(o.default._validateParameters("createCapture",arguments),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");var e,t,r=!0,n=!0,s=!0,l=!1,u=void 0;try{for(var c,d=arguments[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var f=c.value;f===o.default.prototype.VIDEO?n=!1:f===o.default.prototype.AUDIO?r=!1:"object"===i(f)?e=f:"function"==typeof f&&(t=f)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}e=e||{video:r,audio:n};var h=document.createElement("video");h.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(e).then(function(t){try{"srcObject"in h?h.srcObject=t:h.src=window.URL.createObjectURL(t)}catch(e){h.src=t}},console.log);var p=a(h,this,!0);return p.loadedmetadata=!1,h.addEventListener("loadedmetadata",function(){h.play(),h.width?(p.width=h.width,p.height=h.height):(p.width=p.elt.width=h.videoWidth,p.height=p.elt.height=h.videoHeight),p.loadedmetadata=!0,t&&t(h.srcObject)}),p},o.default.prototype.createElement=function(e,t){o.default._validateParameters("createElement",arguments);var r=document.createElement(e);return void 0!==t&&(r.innerHTML=t),a(r,this)},o.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},o.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},o.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},o.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},o.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof o.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},o.default.Element.prototype.center=function(e){var t=this.elt.style.display,r="none"===this.elt.style.display,n="none"===this.parent().style.display,o={x:this.elt.offsetLeft,y:this.elt.offsetTop};r&&this.show(),n&&this.parent().show(),this.elt.style.display="block",this.position(0,0);var i=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(i/2+this.parent().offsetLeft,a/2+this.parent().offsetTop):"horizontal"===e?this.position(i/2+this.parent().offsetLeft,o.y):"vertical"===e&&this.position(o.x,a/2+this.parent().offsetTop),this.style("display",t),r&&this.hide(),n&&this.parent().hide(),this},o.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments[1]?this.elt.insertAdjacentHTML("beforeend",arguments[0]):this.elt.innerHTML=arguments[0],this)},o.default.Element.prototype.position=function(){if(0===arguments.length)return{x:this.elt.offsetLeft,y:this.elt.offsetTop};var e="absolute";return"static"!==arguments[2]&&"fixed"!==arguments[2]&&"relative"!==arguments[2]&&"sticky"!==arguments[2]&&"initial"!==arguments[2]&&"inherit"!==arguments[2]||(e=arguments[2]),this.elt.style.position=e,this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this},o.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":arguments[3]+"px"),this.elt.style.transform+=e,this},o.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=e,this},o.default.Element.prototype.style=function(e,t){if(t instanceof o.default.Color&&(t="rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")"),void 0===t){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var r=e.split(";"),n=0;n<r.length;n++){var i=r[n].split(":");i[0]&&i[1]&&(this.elt.style[i[0].trim()]=i[1].trim())}}else if(this.elt.style[e]=t,"width"===e||"height"===e||"left"===e||"top"===e){var a=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/\D+/g,"");this[e]=parseInt(a,10)}return this},o.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var r=0;r<this.elt.childNodes.length;r++)this.elt.childNodes[r].setAttribute(e,t)},o.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},o.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},o.default.Element.prototype.show=function(){return this.elt.style.display="block",this},o.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},o.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var r=e,n=t,i=o.default.prototype.AUTO;if(r!==i||n!==i){if(r===i?r=t*this.width/this.height:n===i&&(n=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var a,s={},l=this.elt.getContext("2d");for(a in l)s[a]=l[a];for(a in this.elt.setAttribute("width",r*this._pInst._pixelDensity),this.elt.setAttribute("height",n*this._pInst._pixelDensity),this.elt.style.width=r+"px",this.elt.style.height=n+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),s)this.elt.getContext("2d")[a]=s[a]}else this.elt.style.width=r+"px",this.elt.style.height=n+"px",this.elt.width=r,this.elt.height=n;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},o.default.Element.prototype.remove=function(){if(this instanceof o.default.MediaElement){this.stop();var e=this.elt.srcObject;null!==e&&e.getTracks().forEach(function(e){e.stop()})}var t=this._pInst._elements.indexOf(this);for(var r in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(r,this._events[r]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},o.default.Element.prototype.drop=function(e,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){if(!this._dragDisabled){this._dragDisabled=!0;var r=function(e){e.preventDefault()};this.elt.addEventListener("dragover",r),this.elt.addEventListener("dragleave",r)}o.default.Element._attachListener("drop",function(r){r.preventDefault(),"function"==typeof t&&t.call(this,r);for(var n=r.dataTransfer.files,i=0;i<n.length;i++){var a=n[i];o.default.File._load(a,e)}},this)}else console.log("The File APIs are not fully supported in this browser.");return this},o.default.MediaElement=function(e,t){o.default.Element.call(this,e,t);var r=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],(this._pixelsState=this)._pixelDensity=1,this._modified=!1,Object.defineProperty(r,"src",{get:function(){var e=r.elt.children[0].src,t=r.elt.src===window.location.href?"":r.elt.src;return e===window.location.href?t:e},set:function(t){for(var n=0;n<r.elt.children.length;n++)r.elt.removeChild(r.elt.children[n]);var o=document.createElement("source");o.src=t,e.appendChild(o),r.elt.src=t,r.modified=!0}}),r._onended=function(){},r.elt.onended=function(){r._onended(r)}},o.default.MediaElement.prototype=Object.create(o.default.Element.prototype),o.default.MediaElement.prototype.play=function(){var e,t=this;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch(function(e){"NotAllowedError"===e.name?o.default._friendlyAutoplayError(t.src):console.error("Media play method encountered an unexpected error",e)}),this},o.default.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},o.default.MediaElement.prototype.pause=function(){return this.elt.pause(),this},o.default.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},o.default.MediaElement.prototype.noLoop=function(){return this.elt.removeAttribute("loop"),this},o.default.MediaElement.prototype._setupAutoplayFailDetection=function(){var e=this,t=setTimeout(function(){return o.default._friendlyAutoplayError(e.src)},500);this.elt.addEventListener("play",function(){return clearTimeout(t)},{passive:!0,once:!0})},o.default.MediaElement.prototype.autoplay=function(e){var t=this,r=this.elt.getAttribute("autoplay");if(this.elt.setAttribute("autoplay",e),e&&!r){var n=function(){return t._setupAutoplayFailDetection()};4===this.elt.readyState?n():this.elt.addEventListener("canplay",n,{passive:!0,once:!0})}return this},o.default.MediaElement.prototype.volume=function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e},o.default.MediaElement.prototype.speed=function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e},o.default.MediaElement.prototype.time=function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)},o.default.MediaElement.prototype.duration=function(){return this.elt.duration},o.default.MediaElement.prototype.pixels=[],o.default.MediaElement.prototype._ensureCanvas=function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0)),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.setModified(!0))},o.default.MediaElement.prototype.loadPixels=function(){return this._ensureCanvas(),o.default.Renderer2D.prototype.loadPixels.apply(this,arguments)},o.default.MediaElement.prototype.updatePixels=function(e,t,r,n){return this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.updatePixels.call(this,e,t,r,n)),this.setModified(!0),this},o.default.MediaElement.prototype.get=function(){return this._ensureCanvas(),o.default.Renderer2D.prototype.get.apply(this,arguments)},o.default.MediaElement.prototype._getPixel=function(){return this.loadPixels(),o.default.Renderer2D.prototype._getPixel.apply(this,arguments)},o.default.MediaElement.prototype.set=function(e,t,r){this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.set.call(this,e,t,r),this.setModified(!0))},o.default.MediaElement.prototype.copy=function(){this._ensureCanvas(),o.default.prototype.copy.apply(this,arguments)},o.default.MediaElement.prototype.mask=function(){this.loadPixels(),this.setModified(!0),o.default.Image.prototype.mask.apply(this,arguments)},o.default.MediaElement.prototype.isModified=function(){return this._modified},o.default.MediaElement.prototype.setModified=function(e){this._modified=e},o.default.MediaElement.prototype.onended=function(e){return this._onended=e,this},o.default.MediaElement.prototype.connect=function(e){var t,r;if("function"==typeof o.default.prototype.getAudioContext)t=o.default.prototype.getAudioContext(),r=o.default.soundOut.input;else try{r=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(r)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(r)},o.default.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},o.default.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},o.default.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},o.default.MediaElement.prototype.addCue=function(e,t,r){var n=this._cueIDCounter++,o=new l(t,e,n,r);return this._cues.push(o),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),n},o.default.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)},o.default.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},o.default.MediaElement.prototype._onTimeUpdate=function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var r=this._cues[t].time,n=this._cues[t].val;this._prevTime<r&&r<=e&&this._cues[t].callback(n)}this._prevTime=e},o.default.File=function(e,t){this.file=e,this._pInst=t;var r=e.type.split("/");this.type=r[0],this.subtype=r[1],this.name=e.name,this.size=e.size,this.data=void 0},o.default.File._createLoader=function(e,t){var r=new FileReader;return r.onload=function(r){var n=new o.default.File(e);if("application/json"===n.file.type)n.data=JSON.parse(r.target.result);else if("text/xml"===n.file.type){var i=(new DOMParser).parseFromString(r.target.result,"text/xml");n.data=new o.default.XML(i.documentElement)}else n.data=r.target.result;t(n)},r},o.default.File._load=function(e,t){if(/^text\//.test(e.type)||"application/json"===e.type)o.default.File._createLoader(e,t).readAsText(e);else if(/^(video|audio)\//.test(e.type)){var r=new o.default.File(e);r.data=URL.createObjectURL(e),t(r)}else o.default.File._createLoader(e,t).readAsDataURL(e)};var u=o.default;r.default=u},{"../core/main":264,"core-js/modules/es.array.every":150,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.for-each":154,"core-js/modules/es.array.from":155,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.for-each":228,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231}],281:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",i.default.prototype.accelerationX=0,i.default.prototype.accelerationY=0,i.default.prototype.accelerationZ=0,i.default.prototype.pAccelerationX=0,i.default.prototype.pAccelerationY=0,i.default.prototype.pAccelerationZ=0,i.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},i.default.prototype.rotationX=0,i.default.prototype.rotationY=0,i.default.prototype.rotationZ=0,i.default.prototype.pRotationX=0,i.default.prototype.pRotationY=0;var s=i.default.prototype.pRotationZ=0,l=0,u=0,c="clockwise",d="clockwise",f="clockwise";i.default.prototype.pRotateDirectionX=void 0,i.default.prototype.pRotateDirectionY=void 0,i.default.prototype.pRotateDirectionZ=void 0,i.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},i.default.prototype.turnAxis=void 0;var h=.5,p=30;i.default.prototype.setMoveThreshold=function(e){i.default._validateParameters("setMoveThreshold",arguments),h=e},i.default.prototype.setShakeThreshold=function(e){i.default._validateParameters("setShakeThreshold",arguments),p=e},i.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._angleMode===a.radians&&(e.beta=e.beta*(_PI/180),e.gamma=e.gamma*(_PI/180),e.alpha=e.alpha*(_PI/180)),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},i.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},i.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,r=this._isGlobal?window:this;if("function"==typeof r.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>h||Math.abs(this.accelerationY-this.pAccelerationY)>h||Math.abs(this.accelerationZ-this.pAccelerationZ)>h)&&r.deviceMoved(),"function"==typeof r.deviceTurned){var n=this.rotationX+180,o=this.pRotationX+180,i=s+180;0<n-o&&n-o<270||n-o<-270?c="clockwise":(n-o<0||270<n-o)&&(c="counter-clockwise"),c!==this.pRotateDirectionX&&(i=n),90<Math.abs(n-i)&&Math.abs(n-i)<270&&(i=n,this._setProperty("turnAxis","X"),r.deviceTurned()),this.pRotateDirectionX=c,s=i-180;var a=this.rotationY+180,y=this.pRotationY+180,m=l+180;0<a-y&&a-y<270||a-y<-270?d="clockwise":(a-y<0||270<a-this.pRotationY)&&(d="counter-clockwise"),d!==this.pRotateDirectionY&&(m=a),90<Math.abs(a-m)&&Math.abs(a-m)<270&&(m=a,this._setProperty("turnAxis","Y"),r.deviceTurned()),this.pRotateDirectionY=d,l=m-180,0<this.rotationZ-this.pRotationZ&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?f="clockwise":(this.rotationZ-this.pRotationZ<0||270<this.rotationZ-this.pRotationZ)&&(f="counter-clockwise"),f!==this.pRotateDirectionZ&&(u=this.rotationZ),90<Math.abs(this.rotationZ-u)&&Math.abs(this.rotationZ-u)<270&&(u=this.rotationZ,this._setProperty("turnAxis","Z"),r.deviceTurned()),this.pRotateDirectionZ=f,this._setProperty("turnAxis",void 0)}"function"==typeof r.deviceShaken&&(null!==this.pAccelerationX&&(e=Math.abs(this.accelerationX-this.pAccelerationX),t=Math.abs(this.accelerationY-this.pAccelerationY)),p<e+t&&r.deviceShaken())};var y=i.default;r.default=y},{"../core/constants":253,"../core/main":264}],282:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.isKeyPressed=!1,o.default.prototype.keyIsPressed=!1,o.default.prototype.key="",o.default.prototype.keyCode=0,o.default.prototype._onkeydown=function(e){if(!this._downKeys[e.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"!=typeof t.keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault()}},o.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},o.default.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyTyped&&!1===t.keyTyped(e)&&e.preventDefault()}},o.default.prototype._onblur=function(e){this._downKeys={}},o.default.prototype.keyIsDown=function(e){return o.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},o.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1};var i=o.default;r.default=i},{"../core/main":264}],283:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype.movedX=0,i.default.prototype.movedY=0,i.default.prototype._hasMouseInteracted=!1,i.default.prototype.mouseX=0,i.default.prototype.mouseY=0,i.default.prototype.pmouseX=0,i.default.prototype.pmouseY=0,i.default.prototype.winMouseX=0,i.default.prototype.winMouseY=0,i.default.prototype.pwinMouseX=0,i.default.prototype.pwinMouseY=0,i.default.prototype.mouseButton=0,i.default.prototype.mouseIsPressed=!1,i.default.prototype._updateNextMouseCoords=function(e){if(null!==this._curElement&&(!e.touches||0<e.touches.length)){var t=function(e,t,r,n){n&&!n.clientX&&(n.touches?n=n.touches[0]:n.changedTouches&&(n=n.changedTouches[0]));var o=e.getBoundingClientRect(),i=e.scrollWidth/t||1,a=e.scrollHeight/r||1;return{x:(n.clientX-o.left)/i,y:(n.clientY-o.top)/a,winX:n.clientX,winY:n.clientY,id:n.identifier}}(this._curElement.elt,this.width,this.height,e);this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y),this._setProperty("winMouseX",t.winX),this._setProperty("winMouseY",t.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},i.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},i.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",a.CENTER):2===e.button?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},i.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},i.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},i.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},i.default.prototype._ondragend=i.default.prototype._onmouseup,i.default.prototype._ondragover=i.default.prototype._onmousemove,i.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},i.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},i.default.prototype._mouseWheelDeltaY=0,i.default.prototype._pmouseWheelDeltaY=0,i.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},i.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},i.default.prototype.exitPointerLock=function(){document.exitPointerLock()};var s=i.default;r.default=s},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],284:[function(e,t,r){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.string.includes"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e,t,r,n,o){var i=4<arguments.length&&void 0!==o?o:0,a=e.getBoundingClientRect(),s=e.scrollWidth/t||1,l=e.scrollHeight/r||1,u=n.touches[i]||n.changedTouches[i];return{x:(u.clientX-a.left)/s,y:(u.clientY-a.top)/l,winX:u.clientX,winY:u.clientY,id:u.identifier}}o.default.prototype.touches=[],o.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],r=0;r<e.touches.length;r++)t[r]=i(this._curElement.elt,this.width,this.height,e,r);this._setProperty("touches",t)}},o.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():navigator.userAgent.toLowerCase().includes("safari")&&"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},o.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},o.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()};var a=o.default;r.default=a},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.string.includes":185}],285:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o,i,a,s={};s._toPixels=function(e){if(e instanceof ImageData)return e.data;if(e.getContext("2d"))return e.getContext("2d").getImageData(0,0,e.width,e.height).data;if(e.getContext("webgl")){var t=e.getContext("webgl"),r=t.drawingBufferWidth*t.drawingBufferHeight*4,n=new Uint8Array(r);return t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n),n}},s._getARGB=function(e,t){var r=4*t;return e[3+r]<<24&4278190080|e[r]<<16&16711680|e[1+r]<<8&65280|255&e[2+r]},s._setPixels=function(e,t){for(var r=0,n=0,o=e.length;n<o;n++)e[0+(r=4*n)]=(16711680&t[n])>>>16,e[r+1]=(65280&t[n])>>>8,e[r+2]=255&t[n],e[r+3]=(4278190080&t[n])>>>24},s._toImageData=function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},s._createImageData=function(e,t){return s._tmpCanvas=document.createElement("canvas"),s._tmpCtx=s._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},s.apply=function(e,t,r){var n=e.getContext("2d"),o=n.getImageData(0,0,e.width,e.height),i=t(o,r);i instanceof ImageData?n.putImageData(i,0,0,0,0,e.width,e.height):n.putImageData(o,0,0,0,0,e.width,e.height)},s.threshold=function(e,t){var r=s._toPixels(e);void 0===t&&(t=.5);for(var n=Math.floor(255*t),o=0;o<r.length;o+=4){var i;i=n<=.2126*r[o]+.7152*r[o+1]+.0722*r[o+2]?255:0,r[o]=r[o+1]=r[o+2]=i}},s.gray=function(e){for(var t=s._toPixels(e),r=0;r<t.length;r+=4){var n=.2126*t[r]+.7152*t[r+1]+.0722*t[r+2];t[r]=t[r+1]=t[r+2]=n}},s.opaque=function(e){for(var t=s._toPixels(e),r=0;r<t.length;r+=4)t[r+3]=255;return t},s.invert=function(e){for(var t=s._toPixels(e),r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]},s.posterize=function(e,t){var r=s._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var n=t-1,o=0;o<r.length;o+=4){var i=r[o],a=r[o+1],l=r[o+2];r[o]=255*(i*t>>8)/n,r[o+1]=255*(a*t>>8)/n,r[o+2]=255*(l*t>>8)/n}},s.dilate=function(e){for(var t,r,n,o,i,a,l,u,c,d,f,h,p,y,m,g,v,b=s._toPixels(e),_=0,x=b.length?b.length/4:0,w=new Int32Array(x);_<x;)for(r=(t=_)+e.width;_<r;)n=o=s._getARGB(b,_),(l=_-1)<t&&(l=_),r<=(a=_+1)&&(a=_),(u=_-e.width)<0&&(u=0),x<=(c=_+e.width)&&(c=_),h=s._getARGB(b,u),f=s._getARGB(b,l),p=s._getARGB(b,c),(i=77*(n>>16&255)+151*(n>>8&255)+28*(255&n))<(m=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))&&(o=f,i=m),i<(y=77*((d=s._getARGB(b,a))>>16&255)+151*(d>>8&255)+28*(255&d))&&(o=d,i=y),i<(g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))&&(o=h,i=g),i<(v=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))&&(o=p,i=v),w[_++]=o;s._setPixels(b,w)},s.erode=function(e){for(var t,r,n,o,i,a,l,u,c,d,f,h,p,y,m,g,v,b=s._toPixels(e),_=0,x=b.length?b.length/4:0,w=new Int32Array(x);_<x;)for(r=(t=_)+e.width;_<r;)n=o=s._getARGB(b,_),(l=_-1)<t&&(l=_),r<=(a=_+1)&&(a=_),(u=_-e.width)<0&&(u=0),x<=(c=_+e.width)&&(c=_),h=s._getARGB(b,u),f=s._getARGB(b,l),p=s._getARGB(b,c),(m=77*(f>>16&255)+151*(f>>8&255)+28*(255&f))<(i=77*(n>>16&255)+151*(n>>8&255)+28*(255&n))&&(o=f,i=m),(y=77*((d=s._getARGB(b,a))>>16&255)+151*(d>>8&255)+28*(255&d))<i&&(o=d,i=y),(g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h))<i&&(o=h,i=g),(v=77*(p>>16&255)+151*(p>>8&255)+28*(255&p))<i&&(o=p,i=v),w[_++]=o;s._setPixels(b,w)},s.blur=function(e,t){!function(e,t){for(var r,l,u,c,d,f,h,p,y,m,g=s._toPixels(e),v=e.width,b=e.height,_=v*b,x=new Int32Array(_),w=0;w<_;w++)x[w]=s._getARGB(g,w);var j,S,M,E,T=new Int32Array(_),O=new Int32Array(_),C=new Int32Array(_),L=new Int32Array(_),P=0;for(function(e){var t=3.5*e|0;if(n!==(t=t<1?1:t<248?t:248)){o=1+(n=t)<<1,i=new Int32Array(o),a=new Array(o);for(var r=0;r<o;r++)a[r]=new Int32Array(256);for(var s,l,u,c,d=1,f=t-1;d<t;d++){i[t+d]=i[f]=l=f*f,u=a[t+d],c=a[f--];for(var h=0;h<256;h++)u[h]=c[h]=l*h}s=i[t]=t*t,u=a[t];for(var p=0;p<256;p++)u[p]=s*p}}(t),S=0;S<b;S++){for(j=0;j<v;j++){if(c=u=l=d=r=0,(f=j-n)<0)m=-f,f=0;else{if(v<=f)break;m=0}for(M=m;M<o&&!(v<=f);M++){var k=x[f+P];d+=(E=a[M])[(-16777216&k)>>>24],l+=E[(16711680&k)>>16],u+=E[(65280&k)>>8],c+=E[255&k],r+=i[M],f++}T[h=P+j]=d/r,O[h]=l/r,C[h]=u/r,L[h]=c/r}P+=v}for(y=(p=-n)*v,S=P=0;S<b;S++){for(j=0;j<v;j++){if(c=u=l=d=r=0,p<0)m=h=-p,f=j;else{if(b<=p)break;m=0,h=p,f=j+y}for(M=m;M<o&&!(b<=h);M++)d+=(E=a[M])[T[f]],l+=E[O[f]],u+=E[C[f]],c+=E[L[f]],r+=i[M],h++,f+=v;x[j+P]=d/r<<24|l/r<<16|u/r<<8|c/r}P+=v,y+=v,p++}s._setPixels(g,x)}(e,t)};var l=s;r.default=l},{"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int32-array":209,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],286:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("../core/main")),o=i(e("omggif"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.default.prototype.createImage=function(e,t){return n.default._validateParameters("createImage",arguments),new n.default.Image(e,t)},n.default.prototype.saveCanvas=function(){n.default._validateParameters("saveCanvas",arguments);var e,t,r,o,i=[].slice.call(arguments);switch(arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],i.shift()):arguments[0]instanceof n.default.Element?(e=arguments[0].elt,i.shift()):e=this._curElement&&this._curElement.elt,1<=i.length&&(t=i[0]),2<=i.length&&(r=i[1]),r=r||n.default.prototype._checkFileExtension(t,r)[1]||"png"){default:o="image/png";break;case"jpeg":case"jpg":o="image/jpeg"}e.toBlob(function(e){n.default.prototype.downloadFile(e,t,r)},o)},n.default.prototype.saveGif=function(e,t){var r=e.gifProperties,i=r.loopLimit;1===i?i=null:null===i&&(i=0);for(var s=new Uint8Array(e.width*e.height*r.numFrames),l=[],u={},c=0;c<r.numFrames;c++){for(var d=new Set,f=r.frames[c].image.data,h=f.length,p=new Uint32Array(e.width*e.height),y=0,m=0;y<h;y+=4,m++){var g=f[y+0]<<16|f[y+1]<<8|f[y+2]<<0;d.add(g),p[m]=g}var v=a(d).sort().toString();void 0===u[v]?u[v]={freq:1,frames:[c]}:(u[v].freq+=1,u[v].frames.push(c)),l.push(p)}var b=[],_=Object.keys(u).sort(function(e,t){return u[t].freq-u[e].freq}),x=_[0].split(",").map(function(e){return parseInt(e)});b=b.concat(u[x].frames);for(var w=new Set(x),j=1;j<_.length;j++){var S=_[j].split(",").map(function(e){return parseInt(e)}).filter(function(e){return!w.has(e)});if(x.length+S.length<=256){for(var M=0;M<S.length;M++)x.push(S[M]),w.add(S[M]);b=b.concat(u[_[j]].frames)}}b=new Set(b);for(var E={},T=0;T<x.length;T++)E[x[T]]||(E[x[T]]=T);for(var O=1;O<x.length;)O<<=1;x.length=O;for(var C={loop:i,palette:new Uint32Array(x)},L=new o.default.GifWriter(s,e.width,e.height,C),P={},k=function(t){for(var n=!b.has(t),o=n?[]:x,i=new Uint8Array(e.width*e.height),a={},s=new Set,u=0;u<l[t].length;u++){var c=l[t][u];n?(void 0===a[c]&&(a[c]=o.length,o.push(c)),i[u]=a[c]):i[u]=E[c],0<t&&l[t-1][u]!==c&&s.add(c)}var d={},f=o.filter(function(e){return!s.has(e)});if(0<f.length){var h=f[0],p=n?a[h]:E[h];if(0<t){for(var y=0;y<l[t].length;y++)l[t-1][y]===l[t][y]&&(i[y]=p);d.transparent=p,P.frameOpts.disposal=1}}if(d.delay=r.frames[t].delay/10,n){for(var m=1;m<o.length;)m<<=1;o.length=m,d.palette=new Uint32Array(o)}0<t&&L.addFrame(0,0,e.width,e.height,P.pixelPaletteIndex,P.frameOpts),P={pixelPaletteIndex:i,frameOpts:d}},A=0;A<r.numFrames;A++)k(A);P.frameOpts.disposal=1,L.addFrame(0,0,e.width,e.height,P.pixelPaletteIndex,P.frameOpts);var R=new Blob([s.slice(0,L.end())],{type:"image/gif"});n.default.prototype.downloadFile(R,t,"gif")},n.default.prototype.saveFrames=function(e,t,r,o,i){n.default._validateParameters("saveFrames",arguments);var a=r||3;a=n.default.prototype.constrain(a,0,15),a*=1e3;var s=o||15;s=n.default.prototype.constrain(s,0,22);var l=0,u=n.default.prototype._makeFrame,c=this._curElement.elt,d=[],f=setInterval(function(){d.push(u(e+l,t,c)),l++},1e3/s);setTimeout(function(){if(clearInterval(f),i)i(d);else{var e=!0,t=!1,r=void 0;try{for(var o,a=d[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;n.default.prototype.downloadFile(s.imageData,s.filename,s.ext)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}}d=[]},a+.01)},n.default.prototype._makeFrame=function(e,t,r){var n,o;if(n=this?this._curElement.elt:r,t)switch(t.toLowerCase()){case"png":o="image/png";break;case"jpeg":case"jpg":o="image/jpeg";break;default:o="image/png"}else t="png",o="image/png";var i=n.toDataURL(o);i=i.replace(o,"image/octet-stream");var a={};return a.imageData=i,a.filename=e,a.ext=t,a};var s=n.default;r.default=s},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.set":183,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,omggif:238}],287:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=u(e("../core/main")),i=u(e("./filters")),a=u(e("../core/helpers")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),l=u(e("omggif"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadImage=function(e,t,r){o.default._validateParameters("loadImage",arguments);var n=new o.default.Image(1,1,this),i=this,a=new Request(e,{method:"GET",mode:"cors"});return fetch(e,a).then(function(a){var s=a.headers.get("content-type");if(null===s&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),s&&s.includes("image/gif"))a.arrayBuffer().then(function(e){e&&function(e,t,r,n,i){var a=new l.default.GifReader(e);t.width=t.canvas.width=a.width,t.height=t.canvas.height=a.height;var s=[],u=a.numFrames(),c=new Uint8ClampedArray(t.width*t.height*4);if(1<u){for(var d=function(e,r){try{r.decodeAndBlitFrameRGBA(e,c)}catch(e){o.default._friendlyFileLoadError(8,t.src),"function"==typeof n?n(e):console.error(e)}},f=0;f<u;f++){var h=a.frameInfo(f),p=t.drawingContext.getImageData(0,0,t.width,t.height);c=p.data.slice(),d(f,a);var y=new ImageData(c,t.width,t.height);t.drawingContext.putImageData(y,0,0);var m=h.delay;0===m&&(m=10),s.push({image:t.drawingContext.getImageData(0,0,t.width,t.height),delay:10*m}),2===h.disposal?t.drawingContext.clearRect(h.x,h.y,h.width,h.height):3===h.disposal&&t.drawingContext.putImageData(p,0,0,h.x,h.y,h.width,h.height)}var g=a.loopCount();null===g?g=1:0===g&&(g=null),t.drawingContext.putImageData(s[0].image,0,0),t.gifProperties={displayIndex:0,loopLimit:g,loopCount:0,frames:s,numFrames:u,playing:!0,timeDisplayed:0,lastChangeTime:0}}"function"==typeof r&&r(t),i()}(new Uint8Array(e),n,t,r,function(e){i._decrementPreload()}.bind(i))},function(e){"function"==typeof r?r(e):console.error(e)});else{var u=new Image;u.onload=function(){n.width=n.canvas.width=u.width,n.height=n.canvas.height=u.height,n.drawingContext.drawImage(u,0,0),n.modified=!0,"function"==typeof t&&t(n),i._decrementPreload()},u.onerror=function(e){o.default._friendlyFileLoadError(0,u.src),"function"==typeof r?r(e):console.error(e)},0!==e.indexOf("data:image/")&&(u.crossOrigin="Anonymous"),u.src=e}n.modified=!0}).catch(function(t){o.default._friendlyFileLoadError(0,e),"function"==typeof r?r(t):console.error(t)}),n},o.default.prototype.image=function(e,t,r,n,i,s,l,u,d){o.default._validateParameters("image",arguments);var f=e.width,h=e.height;e.elt&&e.elt.videoWidth&&!e.canvas&&(f=e.elt.videoWidth,h=e.elt.videoHeight);var p=t,y=r,m=n||f,g=i||h,v=s||0,b=l||0,_=u||f,x=d||h;_=c(_,f),x=c(x,h);var w=1;e.elt&&!e.canvas&&e.elt.style.width&&(w=e.elt.videoWidth&&!n?e.elt.videoWidth:e.elt.width,w/=parseInt(e.elt.style.width,10)),v*=w,b*=w,x*=w,_*=w;var j=a.default.modeAdjust(p,y,m,g,this._renderer._imageMode);this._renderer.image(e,v,b,_,x,j.x,j.y,j.w,j.h)},o.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.default._validateParameters("tint",t);var n=this.color.apply(this,t);this._renderer._tint=n.levels},o.default.prototype.noTint=function(){this._renderer._tint=null},o.default.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=i.default._toPixels(e.canvas),r=document.createElement("canvas");r.width=e.canvas.width,r.height=e.canvas.height;for(var n=r.getContext("2d"),o=n.createImageData(e.canvas.width,e.canvas.height),a=o.data,s=0;s<t.length;s+=4){var l=t[s],u=t[s+1],c=t[s+2],d=t[s+3];a[s]=l*this._renderer._tint[0]/255,a[s+1]=u*this._renderer._tint[1]/255,a[s+2]=c*this._renderer._tint[2]/255,a[s+3]=d*this._renderer._tint[3]/255}return n.putImageData(o,0,0),r},o.default.prototype.imageMode=function(e){o.default._validateParameters("imageMode",arguments),e!==s.CORNER&&e!==s.CORNERS&&e!==s.CENTER||(this._renderer._imageMode=e)};var d=o.default;r.default=d},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/helpers":260,"../core/main":264,"./filters":285,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.string.includes":185,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/es.typed-array.uint8-clamped-array":227,omggif:238}],288:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("../core/main")),o=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}n.default.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]},n.default.Image.prototype._animateGif=function(e){var t=this.gifProperties,r=e._lastFrameTime;if(0===t.lastChangeTime&&(t.lastChangeTime=r),t.playing){t.timeDisplayed=r-t.lastChangeTime;var n=t.frames[t.displayIndex].delay;if(t.timeDisplayed>=n){var o=Math.floor(t.timeDisplayed/n);if(t.timeDisplayed=0,t.lastChangeTime=r,t.displayIndex+=o,t.loopCount=Math.floor(t.displayIndex/t.numFrames),null!==t.loopLimit&&t.loopCount>=t.loopLimit)t.playing=!1;else{var i=t.displayIndex%t.numFrames;this.drawingContext.putImageData(t.frames[i].image,0,0),t.displayIndex=i,this.setModified(!0)}}}},n.default.Image.prototype._setProperty=function(e,t){this[e]=t,this.setModified(!0)},n.default.Image.prototype.loadPixels=function(){n.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},n.default.Image.prototype.updatePixels=function(e,t,r,o){n.default.Renderer2D.prototype.updatePixels.call(this,e,t,r,o),this.setModified(!0)},n.default.Image.prototype.get=function(e,t,r,o){return n.default._validateParameters("p5.Image.get",arguments),n.default.Renderer2D.prototype.get.apply(this,arguments)},n.default.Image.prototype._getPixel=n.default.Renderer2D.prototype._getPixel,n.default.Image.prototype.set=function(e,t,r){n.default.Renderer2D.prototype.set.call(this,e,t,r),this.setModified(!0)},n.default.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var r=document.createElement("canvas");if(r.width=e,r.height=t,this.gifProperties)for(var n=this.gifProperties,o=function(e,t){for(var r=0,n=0;n<t.height;n++)for(var o=0;o<t.width;o++){var i=Math.floor(o*e.width/t.width),a=4*(Math.floor(n*e.height/t.height)*e.width+i);t.data[r++]=e.data[a++],t.data[r++]=e.data[a++],t.data[r++]=e.data[a++],t.data[r++]=e.data[a++]}},i=0;i<n.numFrames;i++){var a=this.drawingContext.createImageData(e,t);o(n.frames[i].image,a),n.frames[i].image=a}r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(r,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)},n.default.Image.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.default.prototype.copy.apply(this,t)},n.default.Image.prototype.mask=function(e){void 0===e&&(e=this);var t=this.drawingContext.globalCompositeOperation,r=1;e instanceof n.default.Renderer&&(r=e._pInst._pixelDensity);var o=[e,0,0,r*e.width,r*e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",n.default.Image.prototype.copy.apply(this,o),this.drawingContext.globalCompositeOperation=t,this.setModified(!0)},n.default.Image.prototype.filter=function(e,t){o.default.apply(this.canvas,o.default[e],t),this.setModified(!0)},n.default.Image.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.default._validateParameters("p5.Image.blend",arguments),n.default.prototype.blend.apply(this,t),this.setModified(!0)},n.default.Image.prototype.setModified=function(e){this._modified=e},n.default.Image.prototype.isModified=function(){return this._modified},n.default.Image.prototype.save=function(e,t){this.gifProperties?n.default.prototype.saveGif(this,e):n.default.prototype.saveCanvas(this.canvas,e,t)},n.default.Image.prototype.reset=function(){if(this.gifProperties){var e=this.gifProperties;e.playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0)}},n.default.Image.prototype.getCurrentFrame=function(){if(this.gifProperties){var e=this.gifProperties;return e.displayIndex%e.numFrames}},n.default.Image.prototype.setFrame=function(e){if(this.gifProperties){var t=this.gifProperties;e<t.numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero.")}},n.default.Image.prototype.numFrames=function(){if(this.gifProperties)return this.gifProperties.numFrames},n.default.Image.prototype.play=function(){this.gifProperties&&(this.gifProperties.playing=!0)},n.default.Image.prototype.pause=function(){this.gifProperties&&(this.gifProperties.playing=!1)},n.default.Image.prototype.delay=function(e,t){if(this.gifProperties){var r=this.gifProperties;if(t<r.numFrames&&0<=t)r.frames[t].delay=e;else{var n=!0,o=!1,i=void 0;try{for(var a,s=r.frames[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)a.value.delay=e}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}}}};var a=n.default.Image;r.default=a},{"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],289:[function(e,t,r){"use strict";e("core-js/modules/es.array.filter"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("../core/main")),o=i(e("./filters"));function i(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),n.default.prototype.pixels=[],n.default.prototype.blend=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o;n.default._validateParameters("blend",t),this._renderer?(o=this._renderer).blend.apply(o,t):n.default.Renderer2D.prototype.blend.apply(this,t)},n.default.prototype.copy=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,i,a,s,l,u,c,d,f;if(n.default._validateParameters("copy",t),9===t.length)o=t[0],i=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],f=t[8];else{if(8!==t.length)throw new Error("Signature not supported");o=this,i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7]}n.default.prototype._copyHelper(this,o,i,a,s,l,u,c,d,f)},n.default.prototype._copyHelper=function(e,t,r,o,i,a,s,l,u,c){t.loadPixels();var d=t.canvas.width/t.width,f=0,h=0;t._renderer&&t._renderer.isP3D&&(f=t.width/2,h=t.height/2),e._renderer&&e._renderer.isP3D?n.default.RendererGL.prototype.image.call(e._renderer,t,r+f,o+h,i,a,s,l,u,c):e.drawingContext.drawImage(t.canvas,d*(r+f),d*(o+h),d*i,d*a,s,l,u,c)},n.default.prototype.filter=function(e,t){n.default._validateParameters("filter",arguments),void 0!==this.canvas?o.default.apply(this.canvas,o.default[e],t):o.default.apply(this.elt,o.default[e],t)},n.default.prototype.get=function(e,t,r,o){var i;return n.default._validateParameters("get",arguments),(i=this._renderer).get.apply(i,arguments)},n.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},n.default.prototype.set=function(e,t,r){this._renderer.set(e,t,r)},n.default.prototype.updatePixels=function(e,t,r,o){n.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,r,o)};var a=n.default;r.default=a},{"../color/p5.Color":251,"../core/main":264,"./filters":285,"core-js/modules/es.array.filter":152}],290:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("../core/main"));e("whatwg-fetch"),e("es6-promise/auto");var o=a(e("fetch-jsonp")),i=a(e("file-saver"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var r={};if(void 0===(t=t||[]))for(var n=0;n<e.length;n++)t[n.toString()]=n;for(var o=0;o<t.length;o++){var i=t[o],a=e[o];r[i]=a}return r}function u(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function c(e,t){t&&!0!==t&&"true"!==t||(t="");var r="";return(e=e||"untitled")&&e.includes(".")&&(r=e.split(".").pop()),t&&r!==t&&(r=t,e="".concat(e,".").concat(r)),[e,r]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),n.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.default._validateParameters("loadJSON",t);for(var o,i,a,l=t[0],u={},c="json",d=1;d<t.length;d++){var f=t[d];"string"==typeof f?"jsonp"!==f&&"json"!==f||(c=f):"function"==typeof f?o?i=f:o=f:"object"===s(f)&&(f.hasOwnProperty("jsonpCallback")||f.hasOwnProperty("jsonpCallbackFunction"))&&(c="jsonp",a=f)}var h=this;return this.httpDo(l,"GET",a,c,function(e){for(var t in e)u[t]=e[t];void 0!==o&&o(e),h._decrementPreload()},function(e){if(n.default._friendlyFileLoadError(5,l),!i)throw e;i(e)}),u},n.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.default._validateParameters("loadStrings",t);for(var o,i,a=[],s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===o?o=l:void 0===i&&(i=l))}var u=this;return n.default.prototype.httpDo.call(this,t[0],"GET","text",function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),r=0,n=t.length;r<n;r+=32768)Array.prototype.push.apply(a,t.slice(r,Math.min(r+32768,n)));void 0!==o&&o(a),u._decrementPreload()},function(e){if(n.default._friendlyFileLoadError(3,e),!i)throw e;i(e)}),a},n.default.prototype.loadTable=function(e){var t,r,o,i=[],a=!1,s=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===s?o=",":"ssv"===s?o=";":"tsv"===s&&(o="\t");for(var u=1;u<arguments.length;u++)"function"==typeof arguments[u]?void 0===t?t=arguments[u]:void 0===r&&(r=arguments[u]):"string"==typeof arguments[u]&&(i.push(arguments[u]),"header"===arguments[u]&&(a=!0),"csv"===arguments[u]?o=",":"ssv"===arguments[u]?o=";":"tsv"===arguments[u]&&(o="\t"));var c=new n.default.Table,d=this;return this.httpDo(e,"GET","table",function(e){for(var r,i,s={},u=[],f=0,h=null,p=function(){s.currentState=0,s.token=""},y=function(){h.push(s.token),p()},m=function(){s.currentState=4,u.push(h),h=null};;){if(null==(r=e[f++])){if(s.escaped)throw new Error("Unclosed quote in file.");if(h){y(),m();break}}if(null===h&&(s.escaped=!1,h=[],p()),0===s.currentState){if('"'===r){s.escaped=!0,s.currentState=1;continue}s.currentState=1}if(1===s.currentState&&s.escaped)if('"'===r)'"'===e[f]?(s.token+='"',f++):(s.escaped=!1,s.currentState=2);else{if("\r"===r)continue;s.token+=r}else"\r"===r?("\n"===e[f]&&f++,y(),m()):"\n"===r?(y(),m()):r===o?y():1===s.currentState&&(s.token+=r)}if(a)c.columns=u.shift();else for(var g=0;g<u[0].length;g++)c.columns[g]="null";for(var v=0;v<u.length;v++)(1!==u[v].length||"undefined"!==u[v][0]&&""!==u[v][0])&&((i=new n.default.TableRow).arr=u[v],i.obj=l(u[v],c.columns),c.addRow(i));"function"==typeof t&&t(c),d._decrementPreload()},function(t){n.default._friendlyFileLoadError(2,e),r?r(t):console.error(t)}),c},n.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var o,i,a=new n.default.XML,s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===o?o=l:void 0===i&&(i=l))}var u=this;return this.httpDo(t[0],"GET","xml",function(e){for(var t in e)a[t]=e[t];void 0!==o&&o(a),u._decrementPreload()},function(e){if(n.default._friendlyFileLoadError(1,e),!i)throw e;i(e)}),a},n.default.prototype.loadBytes=function(e,t,r){var o={},i=this;return this.httpDo(e,"GET","arrayBuffer",function(e){o.bytes=new Uint8Array(e),"function"==typeof t&&t(o),i._decrementPreload()},function(t){if(n.default._friendlyFileLoadError(6,e),!r)throw t;r(t)}),o},n.default.prototype.httpGet=function(){n.default._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),n.default.prototype.httpDo.apply(this,e)},n.default.prototype.httpPost=function(){n.default._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),n.default.prototype.httpDo.apply(this,e)},n.default.prototype.httpDo=function(){for(var e,t,r,i,a,l={},u=0,c="text/plain",d=arguments.length-1;0<d&&"function"==typeof(d<0||arguments.length<=d?void 0:arguments[d]);d--)u++;var f=arguments.length<=0?void 0:arguments[0];if(2==arguments.length-u&&"string"==typeof f&&"object"===s(arguments.length<=1?void 0:arguments[1]))i=new Request(f,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],r=arguments.length<=3?void 0:arguments[3];else{for(var h,p="GET",y=1;y<arguments.length;y++){var m=y<0||arguments.length<=y?void 0:arguments[y];if("string"==typeof m)"GET"===m||"POST"===m||"PUT"===m||"DELETE"===m?p=m:"json"===m||"jsonp"===m||"binary"===m||"arrayBuffer"===m||"xml"===m||"text"===m||"table"===m?e=m:h=m;else if("number"==typeof m)h=m.toString();else if("object"===s(m))if(m.hasOwnProperty("jsonpCallback")||m.hasOwnProperty("jsonpCallbackFunction"))for(var g in m)l[g]=m[g];else c=m instanceof n.default.XML?(h=m.serialize(),"application/xml"):(h=JSON.stringify(m),"application/json");else"function"==typeof m&&(t?r=m:t=m)}var v="GET"===p?new Headers:new Headers({"Content-Type":c});i=new Request(f,{method:p,mode:"cors",body:h,headers:v})}return(a=(a="jsonp"===(e=e||(f.includes("json")?"json":f.includes("xml")?"xml":"text"))?(0,o.default)(f,l):fetch(i)).then(function(t){if(!t.ok){var r=new Error(t.body);throw r.status=t.status,r.ok=!1,r}var o=0;switch("jsonp"!==e&&(o=t.headers.get("content-length")),o&&64e6<o&&n.default._friendlyFileLoadError(7,f),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then(function(e){var t=(new DOMParser).parseFromString(e,"text/xml");return new n.default.XML(t.documentElement)});default:return t.text()}})).then(t||function(){}),a.catch(r||console.error),a},window.URL=window.URL||window.webkitURL,n.default.prototype._pWriters=[],n.default.prototype.createWriter=function(e,t){var r;for(var o in n.default.prototype._pWriters)if(n.default.prototype._pWriters[o].name===e)return r=new n.default.PrintWriter(e+this.millis(),t),n.default.prototype._pWriters.push(r),r;return r=new n.default.PrintWriter(e,t),n.default.prototype._pWriters.push(r),r},n.default.PrintWriter=function(e,t){var r=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var o=[];for(var i in o.push(this.content),n.default.prototype.writeFile(o,e,t),n.default.prototype._pWriters)n.default.prototype._pWriters[i].name===this.name&&n.default.prototype._pWriters.splice(i,1);r.clear(),r={}}},n.default.prototype.save=function(e,t,r){var o=arguments,i=this._curElement?this._curElement.elt:this.elt;if(0!==o.length)if(o[0]instanceof n.default.Renderer||o[0]instanceof n.default.Graphics)n.default.prototype.saveCanvas(o[0].elt,o[1],o[2]);else if(1===o.length&&"string"==typeof o[0])n.default.prototype.saveCanvas(i,o[0]);else switch(c(o[1],o[2])[1]){case"json":return void n.default.prototype.saveJSON(o[0],o[1],o[2]);case"txt":return void n.default.prototype.saveStrings(o[0],o[1],o[2]);default:o[0]instanceof Array?n.default.prototype.saveStrings(o[0],o[1],o[2]):o[0]instanceof n.default.Table?n.default.prototype.saveTable(o[0],o[1],o[2]):o[0]instanceof n.default.Image?n.default.prototype.saveCanvas(o[0].canvas,o[1]):o[0]instanceof n.default.SoundFile&&n.default.prototype.saveSound(o[0],o[1],o[2],o[3])}else n.default.prototype.saveCanvas(i)},n.default.prototype.saveJSON=function(e,t,r){var o;n.default._validateParameters("saveJSON",arguments),o=r?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(o.split("\n"),t,"json")},n.default.prototype.saveJSONObject=n.default.prototype.saveJSON,n.default.prototype.saveJSONArray=n.default.prototype.saveJSON,n.default.prototype.saveStrings=function(e,t,r,o){n.default._validateParameters("saveStrings",arguments);for(var i=r||"txt",a=this.createWriter(t,i),s=0;s<e.length;s++)o?a.write(e[s]+"\r\n"):a.write(e[s]+"\n");a.close(),a.clear()},n.default.prototype.saveTable=function(e,t,r){var o;n.default._validateParameters("saveTable",arguments),o=void 0===r?t.substring(t.lastIndexOf(".")+1,t.length):r;var i=this.createWriter(t,o),a=e.columns,s=",";if("tsv"===o&&(s="\t"),"html"!==o){if("0"!==a[0]){for(var l=0;l<a.length;l++)l<a.length-1?i.write(a[l]+s):i.write(a[l]);i.write("\n")}for(var c=0;c<e.rows.length;c++){var d=void 0;for(d=0;d<e.rows[c].arr.length;d++)d<e.rows[c].arr.length-1?"csv"===o&&String(e.rows[c].arr[d]).includes(",")?i.write('"'+e.rows[c].arr[d]+'"'+s):i.write(e.rows[c].arr[d]+s):"csv"===o&&String(e.rows[c].arr[d]).includes(",")?i.write('"'+e.rows[c].arr[d]+'"'):i.write(e.rows[c].arr[d]);i.write("\n")}}else{if(i.print("<html>"),i.print("<head>"),i.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),i.print("</head>"),i.print("<body>"),i.print("  <table>"),"0"!==a[0]){i.print("    <tr>");for(var f=0;f<a.length;f++){var h=u(a[f]);i.print("      <td>".concat(h)),i.print("      </td>")}i.print("    </tr>")}for(var p=0;p<e.rows.length;p++){i.print("    <tr>");for(var y=0;y<e.columns.length;y++){var m=u(e.rows[p].getString(y));i.print("      <td>".concat(m)),i.print("      </td>")}i.print("    </tr>")}i.print("  </table>"),i.print("</body>"),i.print("</html>")}i.close(),i.clear()},n.default.prototype.writeFile=function(e,t,r){var o="application/octet-stream";n.default.prototype._isSafari()&&(o="text/plain");var i=new Blob(e,{type:o});n.default.prototype.downloadFile(i,t,r)},n.default.prototype.downloadFile=function(e,t,r){var o=c(t,r),a=o[0];if(e instanceof Blob)i.default.saveAs(e,a);else{var s=document.createElement("a");if(s.href=e,s.download=a,s.onclick=function(e){var t;t=e,document.body.removeChild(t.target),e.stopPropagation()},s.style.display="none",document.body.appendChild(s),n.default.prototype._isSafari()){var l="Hello, Safari user! To download this file...\n";l+="1. Go to File --\x3e Save As.\n",l+='2. Choose "Page Source" as the Format.\n',l+='3. Name it with this extension: ."'.concat(o[1],'"'),alert(l)}s.click()}},n.default.prototype._checkFileExtension=c,n.default.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")};var d=n.default;r.default=d},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.promise":178,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,"core-js/modules/web.url":231,"es6-promise/auto":232,"fetch-jsonp":234,"file-saver":235,"whatwg-fetch":242}],291:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.Table=function(e){this.columns=[],this.rows=[]},o.default.Table.prototype.addRow=function(e){var t=e||new o.default.TableRow;if(void 0===t.arr||void 0===t.obj)throw new Error("invalid TableRow: ".concat(t));return(t.table=this).rows.push(t),t},o.default.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},o.default.Table.prototype.getRow=function(e){return this.rows[e]},o.default.Table.prototype.getRows=function(){return this.rows},o.default.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t]===e)return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t]===e)return this.rows[n];return null},o.default.Table.prototype.findRows=function(e,t){var r=[];if("string"==typeof t)for(var n=0;n<this.rows.length;n++)this.rows[n].obj[t]===e&&r.push(this.rows[n]);else for(var o=0;o<this.rows.length;o++)this.rows[o].arr[t]===e&&r.push(this.rows[o]);return r},o.default.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t].match(e))return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t].match(e))return this.rows[n];return null},o.default.Table.prototype.matchRows=function(e,t){var r=[];if("number"==typeof t)for(var n=0;n<this.rows.length;n++)this.rows[n].arr[t].match(e)&&r.push(this.rows[n]);else for(var o=0;o<this.rows.length;o++)this.rows[o].obj[t].match(e)&&r.push(this.rows[o]);return r},o.default.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].obj[e]);else for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].arr[e]);return t},o.default.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},o.default.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)},o.default.Table.prototype.getColumnCount=function(){return this.columns.length},o.default.Table.prototype.getRowCount=function(){return this.rows.length},o.default.Table.prototype.removeTokens=function(e,t){for(var r=[],n=0;n<e.length;n++)r.push(e.charAt(n).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var o=new RegExp(r.join("|"),"g");if(void 0===t)for(var i=0;i<this.columns.length;i++)for(var a=0;a<this.rows.length;a++){var s=this.rows[a].arr[i];s=s.replace(o,""),this.rows[a].arr[i]=s,this.rows[a].obj[this.columns[i]]=s}else if("string"==typeof t)for(var l=0;l<this.rows.length;l++){var u=this.rows[l].obj[t];u=u.replace(o,""),this.rows[l].obj[t]=u;var c=this.columns.indexOf(t);this.rows[l].arr[c]=u}else for(var d=0;d<this.rows.length;d++){var f=this.rows[d].arr[t];f=f.replace(o,""),this.rows[d].arr[t]=f,this.rows[d].obj[this.columns[t]]=f}},o.default.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if(void 0===e)for(var r=0;r<this.columns.length;r++)for(var n=0;n<this.rows.length;n++){var o=this.rows[n].arr[r];o=o.replace(t,""),this.rows[n].arr[r]=o,this.rows[n].obj[this.columns[r]]=o}else if("string"==typeof e)for(var i=0;i<this.rows.length;i++){var a=this.rows[i].obj[e];a=a.replace(t,""),this.rows[i].obj[e]=a;var s=this.columns.indexOf(e);this.rows[i].arr[s]=a}else for(var l=0;l<this.rows.length;l++){var u=this.rows[l].arr[e];u=u.replace(t,""),this.rows[l].arr[e]=u,this.rows[l].obj[this.columns[e]]=u}},o.default.Table.prototype.removeColumn=function(e){var t,r;"string"==typeof e?(t=e,r=this.columns.indexOf(e)):(r=e,t=this.columns[e]);var n=this.columns.splice(r+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(n);for(var o=0;o<this.rows.length;o++){var i=this.rows[o].arr,a=i.splice(r+1,i.length);i.pop(),this.rows[o].arr=i.concat(a),delete this.rows[o].obj[t]}},o.default.Table.prototype.set=function(e,t,r){this.rows[e].set(t,r)},o.default.Table.prototype.setNum=function(e,t,r){this.rows[e].setNum(t,r)},o.default.Table.prototype.setString=function(e,t,r){this.rows[e].setString(t,r)},o.default.Table.prototype.get=function(e,t){return this.rows[e].get(t)},o.default.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},o.default.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},o.default.Table.prototype.getObject=function(e){for(var t,r={},n=0;n<this.rows.length;n++)if(t=this.rows[n].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));r[t[e]]=t}else r[n]=this.rows[n].obj;return r},o.default.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.splice":164,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.trim":193}],292:[function(e,t,r){"use strict";e("core-js/modules/es.array.index-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.TableRow=function(e,t){var r=[],n={};e&&(t=t||",",r=e.split(t));for(var o=0;o<r.length;o++){var i=o,a=r[o];n[i]=a}this.arr=r,this.obj=n,this.table=null},o.default.TableRow.prototype.set=function(e,t){if("string"==typeof e){var r=this.table.columns.indexOf(e);if(!(0<=r))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[r]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t;var n=this.table.columns[e];this.obj[n]=t}},o.default.TableRow.prototype.setNum=function(e,t){var r=parseFloat(t);this.set(e,r)},o.default.TableRow.prototype.setString=function(e,t){var r=t.toString();this.set(e,r)},o.default.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},o.default.TableRow.prototype.getNum=function(e){var t;if("NaN"===(t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e])).toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t},o.default.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.split":191}],293:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.XML=function(e){if(e)this.DOM=e;else{var t=document.implementation.createDocument(null,"doc");this.DOM=t.createElement("root")}},o.default.XML.prototype.getParent=function(){return new o.default.XML(this.DOM.parentElement)},o.default.XML.prototype.getName=function(){return this.DOM.tagName},o.default.XML.prototype.setName=function(e){var t=this.DOM.innerHTML,r=this.DOM.attributes,n=document.implementation.createDocument(null,"default").createElement(e);n.innerHTML=t;for(var o=0;o<r.length;o++)n.setAttribute(r[o].nodeName,r.nodeValue);this.DOM=n},o.default.XML.prototype.hasChildren=function(){return 0<this.DOM.children.length},o.default.XML.prototype.listChildren=function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e},o.default.XML.prototype.getChildren=function(e){return function(e){for(var t=[],r=0;r<e.length;r++)t.push(new o.default.XML(e[r]));return t}(e?this.DOM.getElementsByTagName(e):this.DOM.children)},o.default.XML.prototype.getChild=function(e){if("string"!=typeof e)return new o.default.XML(this.DOM.children[e]);var t=!0,r=!1,n=void 0;try{for(var i,a=this.DOM.children[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;if(s.tagName===e)return new o.default.XML(s)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}},o.default.XML.prototype.addChild=function(e){e instanceof o.default.XML&&this.DOM.appendChild(e.DOM)},o.default.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var r=0;r<this.DOM.children.length;r++)if(this.DOM.children[r].tagName===e){t=r;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])},o.default.XML.prototype.getAttributeCount=function(){return this.DOM.attributes.length},o.default.XML.prototype.listAttributes=function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,i=this.DOM.attributes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push(a.nodeName)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e},o.default.XML.prototype.hasAttribute=function(e){var t={},r=!0,n=!1,o=void 0;try{for(var i,a=this.DOM.attributes[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;t[s.nodeName]=s.nodeValue}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return!!t[e]},o.default.XML.prototype.getNum=function(e,t){var r={},n=!0,o=!1,i=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r[l.nodeName]=l.nodeValue}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return Number(r[e])||t||0},o.default.XML.prototype.getString=function(e,t){var r={},n=!0,o=!1,i=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;r[l.nodeName]=l.nodeValue}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r[e]?String(r[e]):t||null},o.default.XML.prototype.setAttribute=function(e,t){this.DOM.setAttribute(e,t)},o.default.XML.prototype.getContent=function(e){return this.DOM.textContent.replace(/\s\s+/g,",")||e||null},o.default.XML.prototype.setContent=function(e){this.DOM.children.length||(this.DOM.textContent=e)},o.default.XML.prototype.serialize=function(){return(new XMLSerializer).serializeToString(this.DOM)};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.replace":189,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],294:[function(e,t,r){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(){if("function"==typeof Math.hypot)return Math.hypot.apply(null,arguments);for(var e=arguments.length,t=[],r=0,n=0;n<e;n++){var o=arguments[n];if((o=+o)==1/0||o===-1/0)return 1/0;r<(o=Math.abs(o))&&(r=o),t[n]=o}0===r&&(r=1);for(var i=0,a=0,s=0;s<e;s++){var l=t[s]/r,u=l*l-a,c=i+u;a=c-i-u,i=c}return Math.sqrt(i)*r}o.default.prototype.abs=Math.abs,o.default.prototype.ceil=Math.ceil,o.default.prototype.constrain=function(e,t,r){return o.default._validateParameters("constrain",arguments),Math.max(Math.min(e,r),t)},o.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default._validateParameters("dist",t),4===t.length?i(t[2]-t[0],t[3]-t[1]):6===t.length?i(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},o.default.prototype.exp=Math.exp,o.default.prototype.floor=Math.floor,o.default.prototype.lerp=function(e,t,r){return o.default._validateParameters("lerp",arguments),r*(t-e)+e},o.default.prototype.log=Math.log,o.default.prototype.mag=function(e,t){return o.default._validateParameters("mag",arguments),i(e,t)},o.default.prototype.map=function(e,t,r,n,i,a){o.default._validateParameters("map",arguments);var s=(e-t)/(r-t)*(i-n)+n;return a?n<i?this.constrain(s,n,i):this.constrain(s,i,n):s},o.default.prototype.max=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[0]instanceof Array?Math.max.apply(null,t[0]):Math.max.apply(null,t)},o.default.prototype.min=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t[0]instanceof Array?Math.min.apply(null,t[0]):Math.min.apply(null,t)},o.default.prototype.norm=function(e,t,r){return o.default._validateParameters("norm",arguments),this.map(e,t,r,0,1)},o.default.prototype.pow=Math.pow,o.default.prototype.round=function(e,t){if(!t)return Math.round(e);var r=Math.pow(10,t);return Math.round(e*r)/r},o.default.prototype.sq=function(e){return e*e},o.default.prototype.sqrt=Math.sqrt,o.default.prototype.fract=function(e){o.default._validateParameters("fract",arguments);var t=0,r=Number(e);if(isNaN(r)||Math.abs(r)===1/0)return r;if(r<0&&(r=-r,t=1),!String(r).includes(".")||String(r).includes("e"))return r<1?Math.abs(t-r):0;var n=String(r);return n=Number("0"+n.slice(n.indexOf("."))),Math.abs(t-n)};var a=o.default;r.default=a},{"../core/main":264,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.math.hypot":168,"core-js/modules/es.number.constructor":170,"core-js/modules/es.string.includes":185}],295:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e,t,r){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(o,r.prototype),o}).apply(null,arguments)}o.default.prototype.createVector=function(e,t,r){return this instanceof o.default?i(o.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new o.default.Vector(e,t,r)};var a=o.default;r.default=a},{"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.reflect.construct":179,"core-js/modules/es.regexp.to-string":182}],296:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e){return.5*(1-Math.cos(e*Math.PI))}var a,s=4095,l=4,u=.5;o.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==a){a=new Array(4096);for(var n=0;n<4096;n++)a[n]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);for(var o,c,d,f,h,p=Math.floor(e),y=Math.floor(t),m=Math.floor(r),g=e-p,v=t-y,b=r-m,_=0,x=.5,w=0;w<l;w++){var j=p+(y<<4)+(m<<8);o=i(g),c=i(v),d=a[j&s],d+=o*(a[j+1&s]-d),f=a[j+16&s],d+=c*((f+=o*(a[j+16+1&s]-f))-d),f=a[(j+=256)&s],f+=o*(a[j+1&s]-f),h=a[j+16&s],f+=c*((h+=o*(a[j+16+1&s]-h))-f),_+=(d+=i(b)*(f-d))*x,x*=u,p<<=1,y<<=1,m<<=1,1<=(g*=2)&&(p++,g--),1<=(v*=2)&&(y++,v--),1<=(b*=2)&&(m++,b--)}return _},o.default.prototype.noiseDetail=function(e,t){0<e&&(l=e),0<t&&(u=t)},o.default.prototype.noiseSeed=function(e){var t,r,n,o=(n=4294967296,{setSeed:function(e){r=t=(null==e?Math.random()*n:e)>>>0},getSeed:function(){return t},rand:function(){return(r=(1664525*r+1013904223)%n)/n}});o.setSeed(e),a=new Array(4096);for(var i=0;i<4096;i++)a[i]=o.rand()};var c=o.default;r.default=c},{"../core/main":264}],297:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.sub"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}function l(e,t,r){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==r&&(this.z=this.z%r),this}i.default.Vector=function(e,t,r,n,o){var i,a,s;s="[object Function]"==={}.toString.call(e)?(this.isPInst=!0,this._fromRadians=e,this._toRadians=t,i=r||0,a=n||0,o||0):(i=e||0,a=t||0,r||0),this.x=i,this.y=a,this.z=s},i.default.Vector.prototype.toString=function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")},i.default.Vector.prototype.set=function(e,t,r){return e instanceof i.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=r||0),this},i.default.Vector.prototype.copy=function(){return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new i.default.Vector(this.x,this.y,this.z)},i.default.Vector.prototype.add=function(e,t,r){return e instanceof i.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=r||0),this},i.default.Vector.prototype.rem=function(e,t,r){if(e instanceof i.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)){var n=parseFloat(e.x),o=parseFloat(e.y),a=parseFloat(e.z);return l.call(this,n,o,a)}}else if(e instanceof Array){if(e.every(function(e){return Number.isFinite(e)})){if(2===e.length)return s.call(this,e[0],e[1]);if(3===e.length)return l.call(this,e[0],e[1],e[2])}}else if(1===arguments.length){if(Number.isFinite(e)&&0!==e)return this.x=this.x%e,this.y=this.y%e,this.z=this.z%e,this}else if(2===arguments.length){var u=Array.prototype.slice.call(arguments);if(u.every(function(e){return Number.isFinite(e)})&&2===u.length)return s.call(this,u[0],u[1])}else if(3===arguments.length){var c=Array.prototype.slice.call(arguments);if(c.every(function(e){return Number.isFinite(e)})&&3===c.length)return l.call(this,c[0],c[1],c[2])}},i.default.Vector.prototype.sub=function(e,t,r){return e instanceof i.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=r||0),this},i.default.Vector.prototype.mult=function(e,t,r){if(e instanceof i.default.Vector)return Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z?(this.x*=e.x,this.y*=e.y,this.z*=e.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"),this;if(e instanceof Array)return e.every(function(e){return Number.isFinite(e)})&&e.every(function(e){return"number"==typeof e})?1===e.length?(this.x*=e[0],this.y*=e[0],this.z*=e[0]):2===e.length?(this.x*=e[0],this.y*=e[1]):3===e.length&&(this.x*=e[0],this.y*=e[1],this.z*=e[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"),this;var n=Array.prototype.slice.call(arguments);return n.every(function(e){return Number.isFinite(e)})&&n.every(function(e){return"number"==typeof e})?(1===arguments.length&&(this.x*=e,this.y*=e,this.z*=e),2===arguments.length&&(this.x*=e,this.y*=t),3===arguments.length&&(this.x*=e,this.y*=t,this.z*=r)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this},i.default.Vector.prototype.div=function(e,t,r){if(e instanceof i.default.Vector){if(Number.isFinite(e.x)&&Number.isFinite(e.y)&&Number.isFinite(e.z)&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.z){if(0===e.x||0===e.y||0===e.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=e.x,this.y/=e.y,this.z/=e.z}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}if(e instanceof Array){if(e.every(function(e){return Number.isFinite(e)})&&e.every(function(e){return"number"==typeof e})){if(e.some(function(e){return 0===e}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===e.length?(this.x/=e[0],this.y/=e[0],this.z/=e[0]):2===e.length?(this.x/=e[0],this.y/=e[1]):3===e.length&&(this.x/=e[0],this.y/=e[1],this.z/=e[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");return this}var n=Array.prototype.slice.call(arguments);if(n.every(function(e){return Number.isFinite(e)})&&n.every(function(e){return"number"==typeof e})){if(n.some(function(e){return 0===e}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===arguments.length&&(this.x/=e,this.y/=e,this.z/=e),2===arguments.length&&(this.x/=e,this.y/=t),3===arguments.length&&(this.x/=e,this.y/=t,this.z/=r)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this},i.default.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},i.default.Vector.prototype.magSq=function(){var e=this.x,t=this.y,r=this.z;return e*e+t*t+r*r},i.default.Vector.prototype.dot=function(e,t,r){return e instanceof i.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(r||0)},i.default.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,r=this.z*e.x-this.x*e.z,n=this.x*e.y-this.y*e.x;return this.isPInst?new i.default.Vector(this._fromRadians,this._toRadians,t,r,n):new i.default.Vector(t,r,n)},i.default.Vector.prototype.dist=function(e){return e.copy().sub(this).mag()},i.default.Vector.prototype.normalize=function(){var e=this.mag();return 0!==e&&this.mult(1/e),this},i.default.Vector.prototype.limit=function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this},i.default.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},i.default.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(e):e},i.default.Vector.prototype.setHeading=function(e){var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this},i.default.Vector.prototype.rotate=function(e){var t=this.heading()+e;this.isPInst&&(t=this._toRadians(t));var r=this.mag();return this.x=Math.cos(t)*r,this.y=Math.sin(t)*r,this},i.default.Vector.prototype.angleBetween=function(e){var t,r=this.dot(e)/(this.mag()*e.mag());return t=Math.acos(Math.min(1,Math.max(-1,r))),t*=Math.sign(this.cross(e).z||1),this.isPInst&&(t=this._fromRadians(t)),t},i.default.Vector.prototype.lerp=function(e,t,r,n){return e instanceof i.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*n||0,this.y+=(t-this.y)*n||0,this.z+=(r-this.z)*n||0,this)},i.default.Vector.prototype.reflect=function(e){return e.normalize(),this.sub(e.mult(2*this.dot(e)))},i.default.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},i.default.Vector.prototype.equals=function(e,t,r){var n,o,a;return a=e instanceof i.default.Vector?(n=e.x||0,o=e.y||0,e.z||0):e instanceof Array?(n=e[0]||0,o=e[1]||0,e[2]||0):(n=e||0,o=t||0,r||0),this.x===n&&this.y===o&&this.z===a},i.default.Vector.fromAngle=function(e,t){return void 0===t&&(t=1),new i.default.Vector(t*Math.cos(e),t*Math.sin(e),0)},i.default.Vector.fromAngles=function(e,t,r){void 0===r&&(r=1);var n=Math.cos(t),o=Math.sin(t),a=Math.cos(e),s=Math.sin(e);return new i.default.Vector(r*s*o,-r*a,r*s*n)},i.default.Vector.random2D=function(){return this.fromAngle(Math.random()*a.TWO_PI)},i.default.Vector.random3D=function(){var e=Math.random()*a.TWO_PI,t=2*Math.random()-1,r=Math.sqrt(1-t*t),n=r*Math.cos(e),o=r*Math.sin(e);return new i.default.Vector(n,o,t)},i.default.Vector.add=function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),r.add(t),r},i.default.Vector.rem=function(e,t){if(e instanceof i.default.Vector&&t instanceof i.default.Vector){var r=e.copy();return r.rem(t),r}},i.default.Vector.sub=function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),r.sub(t),r},i.default.Vector.mult=function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),r.mult(t),r},i.default.Vector.rotate=function(e,t,r){return 2===arguments.length?r=e.copy():(r instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),r.set(e)),r.rotate(t),r},i.default.Vector.div=function(e,t,r){return r?r.set(e):(r=e.copy(),3===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),r.div(t),r},i.default.Vector.dot=function(e,t){return e.dot(t)},i.default.Vector.cross=function(e,t){return e.cross(t)},i.default.Vector.dist=function(e,t){return e.dist(t)},i.default.Vector.lerp=function(e,t,r,n){return n?n.set(e):(n=e.copy(),4===arguments.length&&i.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),n.lerp(t,r),n},i.default.Vector.mag=function(e){var t=e.x,r=e.y,n=e.z,o=t*t+r*r+n*n;return Math.sqrt(o)},i.default.Vector.normalize=function(e,t){return arguments.length<2?t=e.copy():(t instanceof i.default.Vector||i.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),t.set(e)),t.normalize()};var u=i.default.Vector;r.default=u},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.every":150,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.some":163,"core-js/modules/es.math.sign":169,"core-js/modules/es.number.constructor":170,"core-js/modules/es.number.is-finite":171,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.sub":192}],298:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n},i="_lcg_random_state",a=4294967296,s=0;o.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%a,this[e]/a},o.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*a:t)>>>0},o.default.prototype.randomSeed=function(e){this._lcgSetSeed(i,e),this._gaussian_previous=!1},o.default.prototype.random=function(e,t){var r;if(o.default._validateParameters("random",arguments),r=null!=this[i]?this._lcg(i):Math.random(),void 0===e)return r;if(void 0===t)return e instanceof Array?e[Math.floor(r*e.length)]:r*e;if(t<e){var n=e;e=t,t=n}return r*(t-e)+e},o.default.prototype.randomGaussian=function(e){var t,r,n,o,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=s,this._gaussian_previous=!1;else{for(;1<=(o=(r=this.random(2)-1)*r+(n=this.random(2)-1)*n););t=r*(o=Math.sqrt(-2*Math.log(o)/o)),s=n*o,this._gaussian_previous=!0}return t*i+(e||0)};var l=o.default;r.default=l},{"../core/main":264}],299:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype._angleMode=a.RADIANS,i.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},i.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},i.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},i.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},i.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},i.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},i.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},i.default.prototype.degrees=function(e){return e*a.RAD_TO_DEG},i.default.prototype.radians=function(e){return e*a.DEG_TO_RAD},i.default.prototype.angleMode=function(e){e!==a.DEGREES&&e!==a.RADIANS||(this._angleMode=e)},i.default.prototype._toRadians=function(e){return this._angleMode===a.DEGREES?e*a.DEG_TO_RAD:e},i.default.prototype._toDegrees=function(e){return this._angleMode===a.RADIANS?e*a.RAD_TO_DEG:e},i.default.prototype._fromRadians=function(e){return this._angleMode===a.DEGREES?e*a.RAD_TO_DEG:e};var s=i.default;r.default=s},{"../core/constants":253,"../core/main":264}],300:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.textAlign=function(e,t){var r;return o.default._validateParameters("textAlign",arguments),(r=this._renderer).textAlign.apply(r,arguments)},o.default.prototype.textLeading=function(e){var t;return o.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},o.default.prototype.textSize=function(e){var t;return o.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},o.default.prototype.textStyle=function(e){var t;return o.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},o.default.prototype.textWidth=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r[0]+="",o.default._validateParameters("textWidth",r),0===r[0].length?0:(e=this._renderer).textWidth.apply(e,r)},o.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default._validateParameters("textAscent",t),this._renderer.textAscent()},o.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.default._validateParameters("textDescent",t),this._renderer.textDescent()},o.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},o.default.prototype.textWrap=function(e){if("WORD"!==e&&"CHAR"!==e)throw"Error: textWrap accepts only WORD or CHAR";return this._renderer.textWrap(e)};var i=o.default;r.default=i},{"../core/main":264}],301:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=u(e("../core/constants")),s=u(e("opentype.js"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function u(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadFont=function(e,t,r){i.default._validateParameters("loadFont",arguments);var n=new i.default.Font(this),o=this;return s.load(e,function(a,s){if(a)return i.default._friendlyFileLoadError(4,e),void 0!==r?r(a):void console.error(a,e);n.font=s,void 0!==t&&t(n),o._decrementPreload();var l,u,c=e.split("\\").pop().split("/").pop(),d=c.lastIndexOf("."),f=d<1?null:c.substr(d+1);["ttf","otf","woff","woff2"].includes(f)&&(l=c.substr(0,d),(u=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(l,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(u))}),n},i.default.prototype.text=function(e,t,r,n,o){var a;return i.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(a=this._renderer).text.apply(a,arguments):this},i.default.prototype.textFont=function(e,t){if(i.default._validateParameters("textFont",arguments),arguments.length){if(!e)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",t*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont};var c=i.default;r.default=c},{"../core/constants":253,"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.last-index-of":160,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.split":191,"opentype.js":239}],302:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=function(e,t){if("object"!==a(e))e=t;else for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}(t,{sampleFactor:.1,simplifyThreshold:0}),n=p(e,0,1),o=n/(n*r.sampleFactor),i=[],s=0;s<n;s+=o)i.push(p(e,s));return r.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=e.length-1;3<e.length&&0<=r;--r)d(c(e,r-1),c(e,r),c(e,r+1),t)&&(e.splice(r%e.length,1),0)}(i,r.simplifyThreshold),i}function l(e){for(var t,r=[],n=0;n<e.length;n++)"M"===e[n].type&&(t&&r.push(t),t=[]),t.push(u(e[n]));return r.push(t),r}function u(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}function c(e,t){var r=e.length;return e[t<0?t%r+r:t%r]}function d(e,t,r,n){if(!n)return 0==(o=e,a=r,((i=t)[0]-o[0])*(a[1]-o[1])-(a[0]-o[0])*(i[1]-o[1]));var o,i,a;void 0===d.tmpPoint1&&(d.tmpPoint1=[],d.tmpPoint2=[]);var s=d.tmpPoint1,l=d.tmpPoint2;s.x=t.x-e.x,s.y=t.y-e.y,l.x=r.x-t.x,l.y=r.y-t.y;var u=s.x*l.x+s.y*l.y,c=Math.sqrt(s.x*s.x+s.y*s.y),f=Math.sqrt(l.x*l.x+l.y*l.y);return Math.acos(u/(c*f))<n}function f(e,t,r,n,o,i,a,s,l){var u=1-l,c=Math.pow(u,3),d=Math.pow(u,2),f=l*l,h=f*l,p=c*e+3*d*l*r+3*u*l*l*o+h*a,y=c*t+3*d*l*n+3*u*l*l*i+h*s,m=e+2*l*(r-e)+f*(o-2*r+e),g=t+2*l*(n-t)+f*(i-2*n+t),v=r+2*l*(o-r)+f*(a-2*o+r),b=n+2*l*(i-n)+f*(s-2*i+n),_=u*e+l*r,x=u*t+l*n,w=u*o+l*a,j=u*i+l*s,S=90-180*Math.atan2(m-v,g-b)/Math.PI;return(v<m||g<b)&&(S+=180),{x:p,y:y,m:{x:m,y:g},n:{x:v,y:b},start:{x:_,y:x},end:{x:w,y:j},alpha:S}}function h(e,t,r,n,o,i,a,s,l){return null==l?b(e,t,r,n,o,i,a,s):f(e,t,r,n,o,i,a,s,function(e,t,r,n,o,i,a,s,l){if(!(l<0||b(e,t,r,n,o,i,a,s)<l)){var u,c=.5,d=1-c;for(u=b(e,t,r,n,o,i,a,s,d);.01<Math.abs(u-l);)u=b(e,t,r,n,o,i,a,s,d+=(u<l?1:-1)*(c/=2));return d}}(e,t,r,n,o,i,a,s,l))}function p(e,t,r){for(var n,o,i,a,s,l=0,u=0,c=(e=function(e,t){function r(e,t,r){var n,o;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,r,n,o,i,a,s,l,u,c){var d,f,h,p,y,m=Math.PI,g=120*m/180,v=m/180*(+i||0),b=[],_=function(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}};if(c)d=c[0],f=c[1],h=c[2],p=c[3];else{t=(y=_(t,r,-v)).x,r=y.y;var x=(t-(l=(y=_(l,u,-v)).x))/2,w=(r-(u=y.y))/2,j=x*x/(n*n)+w*w/(o*o);1<j&&(n*=j=Math.sqrt(j),o*=j);var S=n*n,M=o*o,E=(a===s?-1:1)*Math.sqrt(Math.abs((S*M-S*w*w-M*x*x)/(S*w*w+M*x*x)));h=E*n*w/o+(t+l)/2,p=E*-o*x/n+(r+u)/2,d=Math.asin(((r-p)/o).toFixed(9)),f=Math.asin(((u-p)/o).toFixed(9)),(d=t<h?m-d:d)<0&&(d=2*m+d),(f=l<h?m-f:f)<0&&(f=2*m+f),s&&f<d&&(d-=2*m),!s&&d<f&&(f-=2*m)}var T=f-d;if(Math.abs(T)>g){var O=f,C=l,L=u;f=d+g*(s&&d<f?1:-1),b=e(l=h+n*Math.cos(f),u=p+o*Math.sin(f),n,o,i,0,s,C,L,[f,O,h,p])}T=f-d;var P=Math.cos(d),k=Math.sin(d),A=Math.cos(f),R=Math.sin(f),D=Math.tan(T/4),I=4/3*n*D,U=4/3*o*D,N=[t,r],F=[t+I*k,r-U*P],B=[l+I*R,u-U*A],G=[l,u];if(F[0]=2*N[0]-F[0],F[1]=2*N[1]-F[1],c)return[F,B,G].concat(b);for(var V=[],z=0,H=(b=[F,B,G].concat(b).join().split(",")).length;z<H;z++)V[z]=z%2?_(b[z-1],b[z],v).y:_(b[z],b[z+1],v).x;return V}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":o="C"===r||"S"===r?(n=2*t.x-t.bx,2*t.y-t.by):(n=t.x,t.y),e=["C",n,o].concat(e.slice(1));break;case"T":"Q"===r||"T"===r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(v(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(v(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(g(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(g(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(g(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(g(t.x,t.y,t.X,t.Y))}return e}function n(e,t){if(7<e[t].length){e[t].shift();for(var r=e[t];r.length;)c[t]="A",s&&(d[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),i=Math.max(a.length,s&&s.length||0)}}function o(e,t,r,n,o){e&&t&&"M"===e[o][0]&&"M"!==t[o][0]&&(t.splice(o,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[o][1],r.y=e[o][2],i=Math.max(a.length,s&&s.length||0))}var i,a=y(e),s=t,l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],d=[],f="",h="";i=Math.max(a.length,s&&s.length||0);for(var p=0;p<i;p++){a[p]&&(f=a[p][0]),"C"!==f&&(c[p]=f,p&&(h=c[p-1])),a[p]=r(a[p],l,h),"A"!==c[p]&&"C"===f&&(c[p]="C"),n(a,p),s&&(s[p]&&(f=s[p][0]),"C"!==f&&(d[p]=f,p&&(h=d[p-1])),s[p]=r(s[p],u,h),"A"!==d[p]&&"C"===f&&(d[p]="C"),n(s,p)),o(a,s,l,u,p),o(s,a,u,l,p);var m=a[p],b=s&&s[p],_=m.length,x=s&&b.length;l.x=m[_-2],l.y=m[_-1],l.bx=parseFloat(m[_-4])||l.x,l.by=parseFloat(m[_-3])||l.y,u.bx=s&&(parseFloat(b[x-4])||u.x),u.by=s&&(parseFloat(b[x-3])||u.y),u.x=s&&b[x-2],u.y=s&&b[x-1]}return s?[a,s]:a}(e)).length;u<c;u++){if("M"===(i=e[u])[0])n=+i[1],o=+i[2];else{if(t<l+(a=h(n,o,i[1],i[2],i[3],i[4],i[5],i[6]))&&!r)return{x:(s=h(n,o,i[1],i[2],i[3],i[4],i[5],i[6],t-l)).x,y:s.y,alpha:s.alpha};l+=a,n=+i[5],o=+i[6]}i.shift()}return(s=r?l:f(n,o,i[0],i[1],i[2],i[3],i[4],i[5],1)).alpha&&(s={x:s.x,y:s.y,alpha:s.alpha}),s}function y(e){var t,r=[],n=0,o=0,i=0,a=0,s=0;if(!e)return r;"M"===e[0][0]&&(i=n=+e[0][1],a=o=+e[0][2],s++,r[0]=["M",n,o]);for(var l,u,c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),d=s,f=e.length;d<f;d++){if(r.push(l=[]),(u=e[d])[0]!==String.prototype.toUpperCase.call(u[0]))switch(l[0]=String.prototype.toUpperCase.call(u[0]),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+(u[6]+n),l[7]=+(u[7]+o);break;case"V":l[1]=+u[1]+o;break;case"H":l[1]=+u[1]+n;break;case"R":for(var h=2,p=(t=[n,o].concat(u.slice(1))).length;h<p;h++)t[h]=+t[h]+n,t[++h]=+t[h]+o;r.pop(),r=r.concat(m(t,c));break;case"M":i=+u[1]+n,a=+u[2]+o;break;default:for(var y=1,g=u.length;y<g;y++)l[y]=+u[y]+(y%2?n:o)}else if("R"===u[0])t=[n,o].concat(u.slice(1)),r.pop(),r=r.concat(m(t,c)),l=["R"].concat(u.slice(-2));else for(var v=0,b=u.length;v<b;v++)l[v]=u[v];switch(l[0]){case"Z":n=i,o=a;break;case"H":n=l[1];break;case"V":o=l[1];break;case"M":i=l[l.length-2],a=l[l.length-1];break;default:n=l[l.length-2],o=l[l.length-1]}}return r}function m(e,t){for(var r=[],n=0,o=e.length;n<o-2*!t;n+=2){var i=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?o-4===n?i[3]={x:+e[0],y:+e[1]}:o-2===n&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4===n?i[3]=i[2]:n||(i[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return r}function g(e,t,r,n){return[e,t,r,n,r,n]}function v(e,t,r,n,o,i){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*o+2/3*r,1/3*i+2/3*n,o,i]}function b(e,t,r,n,o,i,a,s,l){null==l&&(l=1);for(var u=(l=1<l?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=0,f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0;h<12;h++){var p=u*c[h]+u,y=_(p,e,r,o,a),m=_(p,t,n,i,s),g=y*y+m*m;d+=f[h]*Math.sqrt(g)}return u*d}function _(e,t,r,n,o){return e*(e*(-3*t+9*r-9*n+3*o)+6*t-12*r+6*n)-3*t+3*r}o.default.Font=function(e){this.parent=e,this.cache={},this.font=void 0},o.default.Font.prototype.textBounds=function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,s=a&&a.renderer&&a.renderer._pInst||this.parent,l=s._renderer.drawingContext;if(l.textAlign||i.LEFT,l.textBaseline||i.BASELINE,o=o||s._renderer._textSize,!t){var u,c,d=[],f=[],h=[];h[0]=[];var p=[],y=this._scale(o),m=s._renderer.textLeading(),g=0;this.font.forEachGlyph(e,r,n,o,a,function(e,t,r,n){var o=e.getMetrics();0===e.index||10===e.index?h[g+=1]=[]:(h[g].push(t+o.xMin*y),h[g].push(t+o.xMax*y),p.push(r+g*m+-o.yMin*y),p.push(r+g*m+-o.yMax*y))}),0<h[g].length&&(d[g]=Math.min.apply(null,h[g]),f[g]=Math.max.apply(null,h[g]));for(var v=0,b=0;b<=g;b++){d[b]=Math.min.apply(null,h[b]),f[b]=Math.max.apply(null,h[b]);var _=f[b]-d[b];v<_&&(v=_)}var x=Math.min.apply(null,d);t={x:x,y:u=Math.min.apply(null,p),h:Math.max.apply(null,p)-u,w:v,advance:x-r},c=this._handleAlignment(s._renderer,e,t.x,t.y,t.w+t.advance),t.x=c.x,t.y=c.y}return t},o.default.Font.prototype.textToPoints=function(e,t,r,n,o){var i,a=0,u=[],c=this._getGlyphs(e);n=n||this.parent._renderer._textSize;for(var d=0;d<c.length;d++){if(!(c[i=d].name&&"space"===c[i].name||e.length===c.length&&" "===e[i]))for(var f=l(c[d].getPath(t,r,n).commands),h=0;h<f.length;h++)for(var p=s(f[h],o),y=0;y<p.length;y++)p[y].x+=a,u.push(p[y]);a+=c[d].advanceWidth*this._scale(n)}return u},o.default.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},o.default.Font.prototype._getPath=function(e,t,r,n){var o=(n&&n.renderer&&n.renderer._pInst||this.parent)._renderer,i=this._handleAlignment(o,e,t,r);return this.font.getPath(e,i.x,i.y,o._textSize,n)},o.default.Font.prototype._getPathData=function(e,t,r,n){var o=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,r,n):"object"===a(t)&&(n=t),n&&"number"==typeof n.decimals&&(o=n.decimals),e.toPathData(o)},o.default.Font.prototype._getSVG=function(e,t,r,n){var o=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,r,n):"object"===a(t)&&(n=t),n&&("number"==typeof n.decimals&&(o=n.decimals),"number"==typeof n.strokeWidth&&(e.strokeWidth=n.strokeWidth),void 0!==n.fill&&(e.fill=n.fill),void 0!==n.stroke&&(e.stroke=n.stroke)),e.toSVG(o)},o.default.Font.prototype._renderPath=function(e,t,r,n){var o,s=n&&n.renderer||this.parent._renderer,l=s.drawingContext;o="object"===a(e)&&e.commands?e.commands:this._getPath(e,t,r,n).commands,l.beginPath();var u=!0,c=!1,d=void 0;try{for(var f,h=o[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;"M"===p.type?l.moveTo(p.x,p.y):"L"===p.type?l.lineTo(p.x,p.y):"C"===p.type?l.bezierCurveTo(p.x1,p.y1,p.x2,p.y2,p.x,p.y):"Q"===p.type?l.quadraticCurveTo(p.x1,p.y1,p.x,p.y):"Z"===p.type&&l.closePath()}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}return s._doStroke&&s._strokeSet&&l.stroke(),s._doFill&&(s._fillSet||s._setFill(i._DEFAULT_TEXT_FILL),l.fill()),this},o.default.Font.prototype._textWidth=function(e,t){return this.font.getAdvanceWidth(e,t)},o.default.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},o.default.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},o.default.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},o.default.Font.prototype._handleAlignment=function(e,t,r,n,o){var a=e._textSize;switch(void 0===o&&(o=this._textWidth(t,a)),e._textAlign){case i.CENTER:r-=o/2;break;case i.RIGHT:r-=o}switch(e._textBaseline){case i.TOP:n+=this._textAscent(a);break;case i.CENTER:n+=this._textAscent(a)/2;break;case i.BOTTOM:n-=this._textDescent(a)}return{x:r,y:n}};var x=o.default;r.default=x},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.join":159,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.function.name":166,"core-js/modules/es.number.to-fixed":172,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],303:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.append=function(e,t){return e.push(t),e},o.default.prototype.arrayCopy=function(e,t,r,n,o){var i,a;e=void 0!==o?(a=Math.min(o,e.length),i=n,e.slice(t,a+t)):(a=void 0!==r?(a=r,Math.min(a,e.length)):e.length,i=0,r=t,e.slice(0,a)),Array.prototype.splice.apply(r,[i,a].concat(e))},o.default.prototype.concat=function(e,t){return e.concat(t)},o.default.prototype.reverse=function(e){return e.reverse()},o.default.prototype.shorten=function(e){return e.pop(),e},o.default.prototype.shuffle=function(e,t){for(var r,n,o=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),i=(e=t||o?e:e.slice()).length;1<i;)r=this.random(0,1)*i|0,n=e[--i],e[i]=e[r],e[r]=n;return e},o.default.prototype.sort=function(e,t){var r=t?e.slice(0,Math.min(t,e.length)):e,n=t?e.slice(Math.min(t,e.length)):[];return(r="string"==typeof r[0]?r.sort():r.sort(function(e,t){return e-t})).concat(n)},o.default.prototype.splice=function(e,t,r){return Array.prototype.splice.apply(e,[r,0].concat(t)),e},o.default.prototype.subset=function(e,t,r){return void 0!==r?e.slice(t,t+r):e.slice(t,e.length)};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array-buffer.constructor":148,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177}],304:[function(e,t,r){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},o.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map(function(e){return o.default.prototype.int(e,t)}):void 0},o.default.prototype.str=function(e){return e instanceof Array?e.map(o.default.prototype.str):String(e)},o.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(o.default.prototype.boolean):void 0},o.default.prototype.byte=function(e){var t=o.default.prototype.int(e,10);return"number"==typeof t?(t+128)%256-128:t instanceof Array?t.map(o.default.prototype.byte):void 0},o.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(o.default.prototype.char):"string"==typeof e?o.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},o.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(o.default.prototype.unchar):void 0},o.default.prototype.hex=function(e,t){if(t=null==t?t=8:t,e instanceof Array)return e.map(function(e){return o.default.prototype.hex(e,t)});if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var r=Number(e).toString(16).toUpperCase();r.length<t;)r="0".concat(r);return r.length>=t&&(r=r.substring(r.length-t,r.length)),r}},o.default.prototype.unhex=function(e){return e instanceof Array?e.map(o.default.prototype.unhex):parseInt("0x".concat(e),16)};var i=o.default;r.default=i},{"../core/main":264,"core-js/modules/es.array.map":161,"core-js/modules/es.number.constructor":170,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.repeat":188}],305:[function(e,t,r){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e,t,r){var n=e<0,o=n?e.toString().substring(1):e.toString(),i=o.indexOf("."),a=-1!==i?o.substring(0,i):o,s=-1!==i?o.substring(i+1):"",l=n?"-":"";if(void 0!==r){var u="";(-1!==i||0<r-s.length)&&(u="."),s.length>r&&(s=s.substring(0,r));for(var c=0;c<t-a.length;c++)l+="0";l+=a,l+=u,l+=s;for(var d=0;d<r-s.length;d++)l+="0";return l}for(var f=0;f<Math.max(t-a.length,0);f++)l+="0";return l+o}function a(e,t){var r=(e=e.toString()).indexOf("."),n=-1!==r?e.substring(r):"",o=-1!==r?e.substring(0,r):e;if(o=o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)n="";else if(void 0!==t)if(t>n.length)for(var i=t-(n+=-1===r?".":"").length+1,a=0;a<i;a++)n+="0";else n=n.substring(0,t+1);return o+n}function s(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function l(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.join=function(e,t){return o.default._validateParameters("join",arguments),e.join(t)},o.default.prototype.match=function(e,t){return o.default._validateParameters("match",arguments),e.match(t)},o.default.prototype.matchAll=function(e,t){o.default._validateParameters("matchAll",arguments);for(var r=new RegExp(t,"g"),n=r.exec(e),i=[];null!==n;)i.push(n),n=r.exec(e);return i},o.default.prototype.nf=function(e,t,r){return o.default._validateParameters("nf",arguments),e instanceof Array?e.map(function(e){return i(e,t,r)}):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):i(e,t,r)},o.default.prototype.nfc=function(e,t){return o.default._validateParameters("nfc",arguments),e instanceof Array?e.map(function(e){return a(e,t)}):a(e,t)},o.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.default._validateParameters("nfp",t);var n=o.default.prototype.nf.apply(this,t);return n instanceof Array?n.map(s):s(n)},o.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.default._validateParameters("nfs",t);var n=o.default.prototype.nf.apply(this,t);return n instanceof Array?n.map(l):l(n)},o.default.prototype.split=function(e,t){return o.default._validateParameters("split",arguments),e.split(t)},o.default.prototype.splitTokens=function(e,t){var r;if(o.default._validateParameters("splitTokens",arguments),void 0!==t){var n=t,i=/\]/g.exec(n),a=/\[/g.exec(n);r=a&&i?(n=n.slice(0,i.index)+n.slice(i.index+1),a=/\[/g.exec(n),n=n.slice(0,a.index)+n.slice(a.index+1),new RegExp("[\\[".concat(n,"\\]]"),"g")):i?(n=n.slice(0,i.index)+n.slice(i.index+1),new RegExp("[".concat(n,"\\]]"),"g")):a?(n=n.slice(0,a.index)+n.slice(a.index+1),new RegExp("[".concat(n,"\\[]"),"g")):new RegExp("[".concat(n,"]"),"g")}else r=/\s/g;return e.split(r).filter(function(e){return e})},o.default.prototype.trim=function(e){return o.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var u=o.default;r.default=u},{"../core/friendly_errors/fes_core":255,"../core/friendly_errors/file_errors":256,"../core/friendly_errors/validate_params":259,"../core/main":264,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.join":159,"core-js/modules/es.array.map":161,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.constructor":180,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.match":187,"core-js/modules/es.string.replace":189,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],306:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.day=function(){return(new Date).getDate()},o.default.prototype.hour=function(){return(new Date).getHours()},o.default.prototype.minute=function(){return(new Date).getMinutes()},o.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},o.default.prototype.month=function(){return(new Date).getMonth()+1},o.default.prototype.second=function(){return(new Date).getSeconds()},o.default.prototype.year=function(){return(new Date).getFullYear()};var i=o.default;r.default=i},{"../core/main":264}],307:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.concat"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o};e("./p5.Geometry");var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(e,t,r,n,o,a,s){e=e<=0?1:e,t=t<0?0:t,r=r<=0?e:r,n=n<3?3:n;var l,u,c,d=(a=void 0===a||a)?-2:0,f=(o=o<1?1:o)+((s=void 0===s?0!==t:s)?2:0),h=Math.atan2(e-t,r),p=Math.sin(h),y=Math.cos(h);for(l=d;l<=f;++l){var m=l/o,g=r*m,v=void 0;for(v=l<0?(m=g=0,e):o<l?(g=r,m=1,t):e+(t-e)*m,-2!==l&&l!==o+2||(v=0),g-=r/2,u=0;u<n;++u){var b=u/(n-1),_=2*Math.PI*b,x=Math.sin(_),w=Math.cos(_);this.vertices.push(new i.default.Vector(x*v,g,w*v));var j;j=l<0?new i.default.Vector(0,-1,0):o<l&&t?new i.default.Vector(0,1,0):new i.default.Vector(x*y,p,w*y),this.vertexNormals.push(j),this.uvs.push(b,m)}}var S=0;if(a){for(c=0;c<n;++c){var M=(c+1)%n;this.faces.push([S+c,S+n+M,S+n+c])}S+=2*n}for(l=0;l<o;++l){for(u=0;u<n;++u){var E=(u+1)%n;this.faces.push([S+u,S+E,S+n+E]),this.faces.push([S+u,S+n+E,S+n+u])}S+=n}if(s)for(S+=n,u=0;u<n;++u)this.faces.push([S+u,S+(u+1)%n,S+n])}i.default.prototype.plane=function(e,t,r,n){this._assert3d("plane"),i.default._validateParameters("plane",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=1),void 0===n&&(n=1);var o="plane|".concat(r,"|").concat(n);if(!this._renderer.geometryInHash(o)){var a=new i.default.Geometry(r,n,function(){for(var e,t,r,n=0;n<=this.detailY;n++){t=n/this.detailY;for(var o=0;o<=this.detailX;o++)e=o/this.detailX,r=new i.default.Vector(e-.5,t-.5,0),this.vertices.push(r),this.uvs.push(e,t)}});a.computeFaces().computeNormals(),r<=1&&n<=1?a._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(o,a)}return this._renderer.drawBuffersScaled(o,e,t,1),this},i.default.prototype.box=function(e,t,r,n,o){this._assert3d("box"),i.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=t);var a=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;void 0===n&&(n=a?1:4),void 0===o&&(o=a?1:4);var s="box|".concat(n,"|").concat(o);if(!this._renderer.geometryInHash(s)){var l=new i.default.Geometry(n,o,function(){var e=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var t=0;t<e.length;t++){for(var r=e[t],n=4*t,o=0;o<4;o++){var a=r[o],s=new i.default.Vector((2*(1&a)-1)/2,((2&a)-1)/2,((4&a)/2-1)/2);this.vertices.push(s),this.uvs.push(1&o,(2&o)/2)}this.faces.push([n,1+n,2+n]),this.faces.push([2+n,1+n,3+n])}});l.computeNormals(),n<=4&&o<=4?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(s,l)}return this._renderer.drawBuffersScaled(s,e,t,r),this},i.default.prototype.sphere=function(e,t,r){return this._assert3d("sphere"),i.default._validateParameters("sphere",arguments),void 0===e&&(e=50),void 0===t&&(t=24),void 0===r&&(r=16),this.ellipsoid(e,e,e,t,r),this},i.default.prototype.cylinder=function(e,t,r,n,o,a){this._assert3d("cylinder"),i.default._validateParameters("cylinder",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=24),void 0===n&&(n=1),void 0===a&&(a=!0),void 0===o&&(o=!0);var l="cylinder|".concat(r,"|").concat(n,"|").concat(o,"|").concat(a);if(!this._renderer.geometryInHash(l)){var u=new i.default.Geometry(r,n);s.call(u,1,1,1,r,n,o,a),r<=24&&n<=16?u._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(l,u)}return this._renderer.drawBuffersScaled(l,e,t,e),this},i.default.prototype.cone=function(e,t,r,n,o){this._assert3d("cone"),i.default._validateParameters("cone",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=24),void 0===n&&(n=1),void 0===o&&(o=!0);var a="cone|".concat(r,"|").concat(n,"|").concat(o);if(!this._renderer.geometryInHash(a)){var l=new i.default.Geometry(r,n);s.call(l,1,0,1,r,n,o,!1),r<=24&&n<=16?l._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(a,l)}return this._renderer.drawBuffersScaled(a,e,t,e),this},i.default.prototype.ellipsoid=function(e,t,r,n,o){this._assert3d("ellipsoid"),i.default._validateParameters("ellipsoid",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===r&&(r=e),void 0===n&&(n=24),void 0===o&&(o=16);var a="ellipsoid|".concat(n,"|").concat(o);if(!this._renderer.geometryInHash(a)){var s=new i.default.Geometry(n,o,function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,r=Math.PI*t-Math.PI/2,n=Math.cos(r),o=Math.sin(r),a=0;a<=this.detailX;a++){var s=a/this.detailX,l=2*Math.PI*s,u=Math.cos(l),c=Math.sin(l),d=new i.default.Vector(n*c,o,n*u);this.vertices.push(d),this.vertexNormals.push(d),this.uvs.push(s,t)}});s.computeFaces(),n<=24&&o<=24?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(a,s)}return this._renderer.drawBuffersScaled(a,e,t,r),this},i.default.prototype.torus=function(e,t,r,n){if(this._assert3d("torus"),i.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===r&&(r=24),void 0===n&&(n=16);var o=(t/e).toPrecision(4),a="torus|".concat(o,"|").concat(r,"|").concat(n);if(!this._renderer.geometryInHash(a)){var s=new i.default.Geometry(r,n,function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,r=2*Math.PI*t,n=Math.cos(r),a=Math.sin(r),s=1+o*n,l=0;l<=this.detailX;l++){var u=l/this.detailX,c=2*Math.PI*u,d=Math.cos(c),f=Math.sin(c),h=new i.default.Vector(s*d,s*f,o*a),p=new i.default.Vector(n*d,n*f,a);this.vertices.push(h),this.vertexNormals.push(p),this.uvs.push(u,t)}});s.computeFaces(),r<=24&&n<=16?s._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(a,s)}return this._renderer.drawBuffersScaled(a,e,e,e),this},i.default.RendererGL.prototype.point=function(e,t,r){void 0===r&&(r=0);var n=[];return n.push(new i.default.Vector(e,t,r)),this._drawPoints(n,this.immediateMode.buffers.point),this},i.default.RendererGL.prototype.triangle=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],s=e[5];if(!this.geometryInHash("tri")){var l=new i.default.Geometry(1,1,function(){var e=[];e.push(new i.default.Vector(0,0,0)),e.push(new i.default.Vector(0,1,0)),e.push(new i.default.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]});l._makeTriangleEdges()._edgesToVertices(),l.computeNormals(),this.createBuffers("tri",l)}var u=this.uMVMatrix.copy();try{var c=new i.default.Matrix([n-t,o-r,0,0,a-t,s-r,0,0,0,0,1,0,t,r,0,1]).mult(this.uMVMatrix);this.uMVMatrix=c,this.drawBuffers("tri")}finally{this.uMVMatrix=u}return this},i.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,a.TWO_PI,a.OPEN,e[4])},i.default.RendererGL.prototype.arc=function(e){var t,r,n=e,o=arguments[1],s=arguments[2],l=arguments[3],u=arguments[4],c=arguments[5],d=arguments[6],f=arguments[7]||25;if(r=Math.abs(c-u)>=a.TWO_PI?"".concat(t="ellipse","|").concat(f,"|"):"".concat(t="arc","|").concat(u,"|").concat(c,"|").concat(d,"|").concat(f,"|"),!this.geometryInHash(r)){var h=new i.default.Geometry(f,1,function(){if(this.strokeIndices=[],u.toFixed(10)!==c.toFixed(10)){d!==a.PIE&&void 0!==d||(this.vertices.push(new i.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=f;e++){var t=e/f*(c-u)+u,r=.5+Math.cos(t)/2,n=.5+Math.sin(t)/2;this.vertices.push(new i.default.Vector(r,n,0)),this.uvs.push([r,n]),e<f-1&&(this.faces.push([0,e+1,e+2]),this.strokeIndices.push([e+1,e+2]))}switch(d){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.CHORD:this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1]);break;case a.OPEN:this.strokeIndices.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1])}}});h.computeNormals(),f<=50?h._makeTriangleEdges()._edgesToVertices(h):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(t," with more than 50 detail")),this.createBuffers(r,h)}var p=this.uMVMatrix.copy();try{this.uMVMatrix.translate([n,o,0]),this.uMVMatrix.scale(s,l,1),this.drawBuffers(r)}finally{this.uMVMatrix=p}return this},i.default.RendererGL.prototype.rect=function(e){var t=this._pInst._glAttributes.perPixelLighting,r=e[0],n=e[1],o=e[2],a=e[3],s=e[4]||(t?1:24),l=e[5]||(t?1:16),u="rect|".concat(s,"|").concat(l);if(!this.geometryInHash(u)){var c=new i.default.Geometry(s,l,function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,r=0;r<=this.detailX;r++){var n=r/this.detailX,o=new i.default.Vector(n,t,0);this.vertices.push(o),this.uvs.push(n,t)}0<s&&0<l&&(this.strokeIndices=[[0,s],[s,(s+1)*(l+1)-1],[(s+1)*(l+1)-1,(s+1)*l],[(s+1)*l,0]])});c.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(u,c)}var d=this.uMVMatrix.copy();try{this.uMVMatrix.translate([r,n,0]),this.uMVMatrix.scale(o,a,1),this.drawBuffers(u)}finally{this.uMVMatrix=d}return this},i.default.RendererGL.prototype.quad=function(e,t,r,n,o,a,s,l,u,c,d,f,h,p){void 0===h&&(h=2),void 0===p&&(p=2);var y="quad|".concat(e,"|").concat(t,"|").concat(r,"|").concat(n,"|").concat(o,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(u,"|").concat(c,"|").concat(d,"|").concat(f,"|").concat(h,"|").concat(p);if(!this.geometryInHash(y)){var m=new i.default.Geometry(h,p,function(){for(var h=1/(this.detailX-1),p=1/(this.detailY-1),y=0;y<this.detailY;y++)for(var m=0;m<this.detailX;m++){var g=m*h,v=y*p,b=(1-g)*((1-v)*e+v*c)+g*((1-v)*n+v*s),_=(1-g)*((1-v)*t+v*d)+g*((1-v)*o+v*l),x=(1-g)*((1-v)*r+v*f)+g*((1-v)*a+v*u);this.vertices.push(new i.default.Vector(b,_,x)),this.uvs.push([g,v])}});m.faces=[];for(var g=0;g<p-1;g++)for(var v=0;v<h-1;v++){var b=v+g*h,_=v+1+g*h,x=v+1+(g+1)*h,w=v+(g+1)*h;m.faces.push([b,_,x]),m.faces.push([b,x,w])}m.computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(y,m)}return this.drawBuffers(y),this},i.default.RendererGL.prototype.bezier=function(e,t,r,n,o,i,a,s,l,u,c,d){8===arguments.length&&(c=s,u=a,s=i,a=o,o=n,n=r,r=i=l=d=0);var f=this._pInst._bezierDetail||20;this.beginShape();for(var h=0;h<=f;h++){var p=Math.pow(1-h/f,3),y=h/f*3*Math.pow(1-h/f,2),m=3*Math.pow(h/f,2)*(1-h/f),g=Math.pow(h/f,3);this.vertex(e*p+n*y+a*m+u*g,t*p+o*y+s*m+c*g,r*p+i*y+l*m+d*g)}return this.endShape(),this},i.default.RendererGL.prototype.curve=function(e,t,r,n,o,i,a,s,l,u,c,d){8===arguments.length&&(u=a,c=s,a=o,s=n,o=n=r,r=i=l=d=0);var f=this._pInst._curveDetail;this.beginShape();for(var h=0;h<=f;h++){var p=.5*Math.pow(h/f,3),y=.5*Math.pow(h/f,2),m=h/f*.5,g=p*(3*n-e-3*a+u)+y*(2*e-5*n+4*a-u)+m*(-e+a)+2*n*.5,v=p*(3*o-t-3*s+c)+y*(2*t-5*o+4*s-c)+m*(-t+s)+2*o*.5,b=p*(3*i-r-3*l+d)+y*(2*r-5*i+4*l-d)+m*(-r+l)+2*i*.5;this.vertex(g,v,b)}return this.endShape(),this},i.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},i.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,r,n,o,i=[],a=[],s=[],l=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var u=1/this._lutBezierDetail,c=0,d=1,f=0;c<1;){if(e=parseFloat(c.toFixed(6)),this._lookUpTableBezier[f]=this._bezierCoefficients(e),d.toFixed(6)===u.toFixed(6)){e=parseFloat(d.toFixed(6))+parseFloat(c.toFixed(6)),++f,this._lookUpTableBezier[f]=this._bezierCoefficients(e);break}c+=u,d-=u,++f}}var h=this._lookUpTableBezier.length;if(6===l){for(this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],a=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],o=0;o<h;o++)t=i[0]*this._lookUpTableBezier[o][0]+i[1]*this._lookUpTableBezier[o][1]+i[2]*this._lookUpTableBezier[o][2]+i[3]*this._lookUpTableBezier[o][3],r=a[0]*this._lookUpTableBezier[o][0]+a[1]*this._lookUpTableBezier[o][1]+a[2]*this._lookUpTableBezier[o][2]+a[3]*this._lookUpTableBezier[o][3],this.vertex(t,r);this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===l){for(this.isBezier=!0,i=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],a=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]],s=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],o=0;o<h;o++)t=i[0]*this._lookUpTableBezier[o][0]+i[1]*this._lookUpTableBezier[o][1]+i[2]*this._lookUpTableBezier[o][2]+i[3]*this._lookUpTableBezier[o][3],r=a[0]*this._lookUpTableBezier[o][0]+a[1]*this._lookUpTableBezier[o][1]+a[2]*this._lookUpTableBezier[o][2]+a[3]*this._lookUpTableBezier[o][3],n=s[0]*this._lookUpTableBezier[o][0]+s[1]*this._lookUpTableBezier[o][1]+s[2]*this._lookUpTableBezier[o][2]+s[3]*this._lookUpTableBezier[o][3],this.vertex(t,r,n);this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},i.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,r,n,o,i=[],a=[],s=[],l=arguments.length;if((e=0)===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var u=1/this._lutQuadraticDetail,c=0,d=1,f=0;c<1;){if(e=parseFloat(c.toFixed(6)),this._lookUpTableQuadratic[f]=this._quadraticCoefficients(e),d.toFixed(6)===u.toFixed(6)){e=parseFloat(d.toFixed(6))+parseFloat(c.toFixed(6)),++f,this._lookUpTableQuadratic[f]=this._quadraticCoefficients(e);break}c+=u,d-=u,++f}}var h=this._lookUpTableQuadratic.length;if(4===l){for(this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],a=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],o=0;o<h;o++)t=i[0]*this._lookUpTableQuadratic[o][0]+i[1]*this._lookUpTableQuadratic[o][1]+i[2]*this._lookUpTableQuadratic[o][2],r=a[0]*this._lookUpTableQuadratic[o][0]+a[1]*this._lookUpTableQuadratic[o][1]+a[2]*this._lookUpTableQuadratic[o][2],this.vertex(t,r);this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===l){for(this.isQuadratic=!0,i=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],a=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]],s=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],o=0;o<h;o++)t=i[0]*this._lookUpTableQuadratic[o][0]+i[1]*this._lookUpTableQuadratic[o][1]+i[2]*this._lookUpTableQuadratic[o][2],r=a[0]*this._lookUpTableQuadratic[o][0]+a[1]*this._lookUpTableQuadratic[o][1]+a[2]*this._lookUpTableQuadratic[o][2],n=s[0]*this._lookUpTableQuadratic[o][0]+s[1]*this._lookUpTableQuadratic[o][1]+s[2]*this._lookUpTableQuadratic[o][2],this.vertex(t,r,n);this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},i.default.RendererGL.prototype.curveVertex=function(){var e,t,r,n,o,i=[],a=[],s=[],l=arguments.length;if((e=0)===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var u=1/this._lutBezierDetail,c=0,d=1,f=0;c<1;){if(e=parseFloat(c.toFixed(6)),this._lookUpTableBezier[f]=this._bezierCoefficients(e),d.toFixed(6)===u.toFixed(6)){e=parseFloat(d.toFixed(6))+parseFloat(c.toFixed(6)),++f,this._lookUpTableBezier[f]=this._bezierCoefficients(e);break}c+=u,d-=u,++f}}var h=this._lookUpTableBezier.length;if(2===l){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),a=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),o=0;o<h;o++)t=i[0]*this._lookUpTableBezier[o][0]+i[1]*this._lookUpTableBezier[o][1]+i[2]*this._lookUpTableBezier[o][2]+i[3]*this._lookUpTableBezier[o][3],r=a[0]*this._lookUpTableBezier[o][0]+a[1]*this._lookUpTableBezier[o][1]+a[2]*this._lookUpTableBezier[o][2]+a[3]*this._lookUpTableBezier[o][3],this.vertex(t,r);for(o=0;o<l;o++)this.immediateMode._curveVertex.shift()}}else if(3===l&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,i=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),a=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),o=0;o<h;o++)t=i[0]*this._lookUpTableBezier[o][0]+i[1]*this._lookUpTableBezier[o][1]+i[2]*this._lookUpTableBezier[o][2]+i[3]*this._lookUpTableBezier[o][3],r=a[0]*this._lookUpTableBezier[o][0]+a[1]*this._lookUpTableBezier[o][1]+a[2]*this._lookUpTableBezier[o][2]+a[3]*this._lookUpTableBezier[o][3],n=s[0]*this._lookUpTableBezier[o][0]+s[1]*this._lookUpTableBezier[o][1]+s[2]*this._lookUpTableBezier[o][2]+s[3]*this._lookUpTableBezier[o][3],this.vertex(t,r,n);for(o=0;o<l;o++)this.immediateMode._curveVertex.shift()}},i.default.RendererGL.prototype.image=function(e,t,r,n,o,i,s,l,u){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.texture(e),this._pInst.textureMode(a.NORMAL);var c=0;t<=e.width&&(c=t/e.width);var d=1;t+n<=e.width&&(d=(t+n)/e.width);var f=0;r<=e.height&&(f=r/e.height);var h=1;r+o<=e.height&&(h=(r+o)/e.height),this.beginShape(),this.vertex(i,s,0,c,f),this.vertex(i+l,s,0,d,f),this.vertex(i+l,s+u,0,d,h),this.vertex(i,s+u,0,c,h),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var l=i.default;r.default=l},{"../core/constants":253,"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.number.to-fixed":172}],308:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype.orbitControl=function(e,t,r){if(this._assert3d("orbitControl"),i.default._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var n=this._renderer._curCamera;void 0===e&&(e=1),void 0===t&&(t=e),void 0===r&&(r=.5),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var o=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,r*o):this._renderer._curCamera._orbit(0,0,-r*o)),this.mouseIsPressed)if(this.mouseButton===this.LEFT){var a=-e*(this.mouseX-this.pmouseX)/o,s=t*(this.mouseY-this.pmouseY)/o;this._renderer._curCamera._orbit(a,s,0)}else if(this.mouseButton===this.RIGHT){var l=n._getLocalAxes(),u=Math.sqrt(l.x[0]*l.x[0]+l.x[2]*l.x[2]);0!==u&&(l.x[0]/=u,l.x[2]/=u);var c=Math.sqrt(l.y[0]*l.y[0]+l.y[2]*l.y[2]);0!==c&&(l.y[0]/=c,l.y[2]/=c);var d=-1*e*(this.mouseX-this.pmouseX),f=-1*t*(this.mouseY-this.pmouseY);n.setPosition(n.eyeX+d*l.x[0]+f*l.z[0],n.eyeY,n.eyeZ+d*l.x[2]+f*l.z[2])}return this}},i.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.default._validateParameters("debugMode",t);for(var n=this._registeredMethods.post.length-1;0<=n;n--)this._registeredMethods.post[n].toString()!==this._grid().toString()&&this._registeredMethods.post[n].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(n,1);t[0]===a.GRID?this.registerMethod("post",this._grid.call(this,t[1],t[2],t[3],t[4],t[5])):t[0]===a.AXES?this.registerMethod("post",this._axesIcon.call(this,t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid.call(this,t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon.call(this,t[5],t[6],t[7],t[8])))},i.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},i.default.prototype._grid=function(e,t,r,n,o){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0);var i=e/t,a=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-a+r,n,e*i-a+o),this.vertex(+a+r,n,e*i-a+o),this.endShape();for(var s=0;s<=t;s++)this.beginShape(this.LINES),this.vertex(s*i-a+r,n,-a+o),this.vertex(s*i-a+r,n,+a+o),this.endShape();this.pop()}},i.default.prototype._axesIcon=function(e,t,r,n){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===r&&(r=t),void 0===n&&(n=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,r,n),this.vertex(t+e,r,n),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,r,n),this.vertex(t,r+e,n),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,r,n),this.vertex(t,r,n+e),this.endShape(),this.pop()}};var s=i.default;r.default=s},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182}],309:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.prototype.ambientLight=function(e,t,r,n){this._assert3d("ambientLight"),i.default._validateParameters("ambientLight",arguments);var o=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(o._array[0],o._array[1],o._array[2]),this._renderer._enableLighting=!0,this},i.default.prototype.specularColor=function(e,t,r){this._assert3d("specularColor"),i.default._validateParameters("specularColor",arguments);var n=this.color.apply(this,arguments);return this._renderer.specularColors=[n._array[0],n._array[1],n._array[2]],this},i.default.prototype.directionalLight=function(e,t,r,n,o,a){var s,l,u,c;this._assert3d("directionalLight"),i.default._validateParameters("directionalLight",arguments),s=e instanceof i.default.Color?e:this.color(e,t,r);var d=arguments[arguments.length-1];c="number"==typeof d?(l=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(l=d.x,u=d.y,d.z);var f=Math.sqrt(l*l+u*u+c*c);return this._renderer.directionalLightDirections.push(l/f,u/f,c/f),this._renderer.directionalLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.pointLight=function(e,t,r,n,o,a){var s,l,u,c;this._assert3d("pointLight"),i.default._validateParameters("pointLight",arguments),s=e instanceof i.default.Color?e:this.color(e,t,r);var d=arguments[arguments.length-1];return c="number"==typeof d?(l=arguments[arguments.length-3],u=arguments[arguments.length-2],arguments[arguments.length-1]):(l=d.x,u=d.y,d.z),this._renderer.pointLightPositions.push(l,u,c),this._renderer.pointLightDiffuseColors.push(s._array[0],s._array[1],s._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},i.default.prototype.lights=function(){if(this._assert3d("lights"),this._colorMode===a.RGB)this.ambientLight(128,128,128),this.directionalLight(128,128,128,0,0,-1);else{var e=this._colorMaxes[this._colorMode][2];this.ambientLight(0,0,e),this.directionalLight(0,0,e,0,0,-1)}return this},i.default.prototype.lightFalloff=function(e,t,r){return this._assert3d("lightFalloff"),i.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),r<0&&(r=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===r&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=r,this},i.default.prototype.spotLight=function(e,t,r,n,o,a,s,l,u,c,d){var f,h,p;this._assert3d("spotLight"),i.default._validateParameters("spotLight",arguments);var y=arguments.length;switch(y){case 11:case 10:f=this.color(e,t,r),h=new i.default.Vector(n,o,a),p=new i.default.Vector(s,l,u);break;case 9:e instanceof i.default.Color?(f=e,h=new i.default.Vector(t,r,n),p=new i.default.Vector(o,a,s),c=l,d=u):n instanceof i.default.Vector?(f=this.color(e,t,r),h=n,p=new i.default.Vector(o,a,s),c=l,d=u):s instanceof i.default.Vector?(f=this.color(e,t,r),h=new i.default.Vector(n,o,a),p=s,c=l,d=u):(f=this.color(e,t,r),h=new i.default.Vector(n,o,a),p=new i.default.Vector(s,l,u));break;case 8:p=e instanceof i.default.Color?(f=e,h=new i.default.Vector(t,r,n),new i.default.Vector(o,a,s)):n instanceof i.default.Vector?(f=this.color(e,t,r),h=n,new i.default.Vector(o,a,s)):(f=this.color(e,t,r),h=new i.default.Vector(n,o,a),s),c=l;break;case 7:e instanceof i.default.Color&&t instanceof i.default.Vector?(f=e,h=t,p=new i.default.Vector(r,n,o),c=a,d=s):e instanceof i.default.Color&&o instanceof i.default.Vector?(f=e,h=new i.default.Vector(t,r,n),p=o,c=a,d=s):n instanceof i.default.Vector&&o instanceof i.default.Vector?(f=this.color(e,t,r),h=n,p=o,c=a,d=s):p=e instanceof i.default.Color?(f=e,h=new i.default.Vector(t,r,n),new i.default.Vector(o,a,s)):n instanceof i.default.Vector?(f=this.color(e,t,r),h=n,new i.default.Vector(o,a,s)):(f=this.color(e,t,r),h=new i.default.Vector(n,o,a),s);break;case 6:n instanceof i.default.Vector&&o instanceof i.default.Vector?(f=this.color(e,t,r),h=n,p=o,c=a):e instanceof i.default.Color&&o instanceof i.default.Vector?(f=e,h=new i.default.Vector(t,r,n),p=o,c=a):e instanceof i.default.Color&&t instanceof i.default.Vector&&(f=e,h=t,p=new i.default.Vector(r,n,o),c=a);break;case 5:e instanceof i.default.Color&&t instanceof i.default.Vector&&r instanceof i.default.Vector?(f=e,h=t,p=r,c=n,d=o):n instanceof i.default.Vector&&o instanceof i.default.Vector?(f=this.color(e,t,r),h=n,p=o):e instanceof i.default.Color&&o instanceof i.default.Vector?(f=e,h=new i.default.Vector(t,r,n),p=o):e instanceof i.default.Color&&t instanceof i.default.Vector&&(f=e,h=t,p=new i.default.Vector(r,n,o));break;case 4:f=e,h=t,p=r,c=n;break;case 3:f=e,h=t,p=r;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(y<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(f._array[0],f._array[1],f._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(h.x,h.y,h.z),p.normalize(),this._renderer.spotLightDirections.push(p.x,p.y,p.z),void 0===c&&(c=Math.PI/3),void 0!==d&&d<1?(d=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===d&&(d=100),c=this._renderer._pInst._toRadians(c),this._renderer.spotLightAngle.push(Math.cos(c)),this._renderer.spotLightConc.push(d),this._renderer._enableLighting=!0,this},i.default.prototype.noLights=function(){return this._assert3d("noLights"),i.default._validateParameters("noLights",arguments),this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this};var s=i.default;r.default=s},{"../core/constants":253,"../core/main":264}],310:[function(e,t,r){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};function i(e,t,r){for(var n=0,o=e.length;n<o;n++)if(e[n]!==t.getUint8(r+n,!1))return!1;return!0}e("./p5.Geometry"),o.default.prototype.loadModel=function(e){var t,r,n;o.default._validateParameters("loadModel",arguments);var a=e.slice(-4);"boolean"==typeof arguments[1]?(t=arguments[1],r=arguments[2],n=arguments[3],void 0!==arguments[4]&&(a=arguments[4])):(t=!1,r=arguments[1],n=arguments[2],void 0!==arguments[3]&&(a=arguments[3]));var s=new o.default.Geometry;s.gid="".concat(e,"|").concat(t);var l=this;return a.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",function(e){!function(e,t){if(function(e){for(var t=new DataView(e),r=[115,111,108,105,100],n=0;n<5;n++)if(i(r,t,n))return!1;return!0}(t))!function(e,t){for(var r,n,i,a,s,l,u,c=new DataView(t),d=c.getUint32(80,!0),f=!1,h=0;h<70;h++)1129270351===c.getUint32(h,!1)&&82===c.getUint8(h+4)&&61===c.getUint8(h+5)&&(f=!0,a=[],s=c.getUint8(h+6)/255,l=c.getUint8(h+7)/255,u=c.getUint8(h+8)/255);for(var p=0;p<d;p++){var y=84+50*p,m=c.getFloat32(y,!0),g=c.getFloat32(4+y,!0),v=c.getFloat32(8+y,!0);if(f){var b=c.getUint16(48+y,!0);i=0==(32768&b)?(r=(31&b)/31,n=(b>>5&31)/31,(b>>10&31)/31):(r=s,n=l,u)}for(var _=new o.default.Vector(m,g,v),x=1;x<=3;x++){var w=y+12*x,j=new o.default.Vector(c.getFloat32(w,!0),c.getFloat32(4+w,!0),c.getFloat32(8+w,!0));e.vertices.push(j),e.vertexNormals.push(_),f&&a.push(r,n,i)}e.faces.push([3*p,3*p+1,3*p+2]),e.uvs.push([0,0],[0,0],[0,0])}}(e,t);else{var r=new DataView(t);if(!("TextDecoder"in window))return console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)");!function(e,t){for(var r,n,i="",a=[],s=0;s<t.length;++s){for(var l=t[s].trim(),u=l.split(" "),c=0;c<u.length;++c)""===u[c]&&u.splice(c,1);if(0!==u.length)switch(i){case"":if("solid"!==u[0])return console.error(l),console.error('Invalid state "'.concat(u[0],'", should be "solid"'));i="solid";break;case"solid":if("facet"!==u[0]||"normal"!==u[1])return console.error(l),console.error('Invalid state "'.concat(u[0],'", should be "facet normal"'));r=new o.default.Vector(parseFloat(u[2]),parseFloat(u[3]),parseFloat(u[4])),e.vertexNormals.push(r,r,r),i="facet normal";break;case"facet normal":if("outer"!==u[0]||"loop"!==u[1])return console.error(l),console.error('Invalid state "'.concat(u[0],'", should be "outer loop"'));i="vertex";break;case"vertex":if("vertex"===u[0])n=new o.default.Vector(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),e.vertices.push(n),e.uvs.push([0,0]),a.push(e.vertices.indexOf(n));else{if("endloop"!==u[0])return console.error(l),console.error('Invalid state "'.concat(u[0],'", should be "vertex" or "endloop"'));e.faces.push(a),a=[],i="endloop"}break;case"endloop":if("endfacet"!==u[0])return console.error(l),console.error('Invalid state "'.concat(u[0],'", should be "endfacet"'));i="endfacet";break;case"endfacet":if("endsolid"!==u[0]){if("facet"!==u[0]||"normal"!==u[1])return console.error(l),console.error('Invalid state "'.concat(u[0],'", should be "endsolid" or "facet normal"'));r=new o.default.Vector(parseFloat(u[2]),parseFloat(u[3]),parseFloat(u[4])),e.vertexNormals.push(r,r,r),i="facet normal"}break;default:console.error('Invalid state "'.concat(i,'"'))}}}(e,new TextDecoder("utf-8").decode(r).split("\n"))}}(s,e),t&&s.normalize(),l._decrementPreload(),"function"==typeof r&&r(s)},n):a.match(/\.obj$/i)?this.loadStrings(e,function(e){!function(e,t){for(var r={v:[],vt:[],vn:[]},n={},i=0;i<t.length;++i){var a=t[i].trim().split(/\b\s+/);if(0<a.length)if("v"===a[0]||"vn"===a[0]){var s=new o.default.Vector(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));r[a[0]].push(s)}else if("vt"===a[0]){var l=[parseFloat(a[1]),1-parseFloat(a[2])];r[a[0]].push(l)}else if("f"===a[0])for(var u=3;u<a.length;++u){for(var c=[],d=[1,u-1,u],f=0;f<d.length;++f){var h=a[d[f]],p=0;if(void 0!==n[h])p=n[h];else{for(var y=h.split("/"),m=0;m<y.length;m++)y[m]=parseInt(y[m])-1;p=n[h]=e.vertices.length,e.vertices.push(r.v[y[0]].copy()),r.vt[y[1]]?e.uvs.push(r.vt[y[1]].slice()):e.uvs.push([0,0]),r.vn[y[2]]&&e.vertexNormals.push(r.vn[y[2]].copy())}c.push(p)}c[0]!==c[1]&&c[0]!==c[2]&&c[1]!==c[2]&&e.faces.push(c)}}0===e.vertexNormals.length&&e.computeNormals()}(s,e),t&&s.normalize(),l._decrementPreload(),"function"==typeof r&&r(s)},n):(o.default._friendlyFileLoadError(3,e),n?n():console.error("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),s},o.default.prototype.model=function(e){this._assert3d("model"),o.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var a=o.default;r.default=a},{"../core/main":264,"./p5.Geometry":313,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.slice":162,"core-js/modules/es.array.splice":164,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.match":187,"core-js/modules/es.string.split":191,"core-js/modules/es.string.trim":193}],311:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.join"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.Texture"),i.default.prototype.loadShader=function(e,t,r,n){function o(){s._decrementPreload(),r&&r(a)}i.default._validateParameters("loadShader",arguments),n=n||console.error;var a=new i.default.Shader,s=this,l=!1,u=!1;return this.loadStrings(e,function(e){a._vertSrc=e.join("\n"),u=!0,l&&o()},n),this.loadStrings(t,function(e){a._fragSrc=e.join("\n"),l=!0,u&&o()},n),a},i.default.prototype.createShader=function(e,t){return this._assert3d("createShader"),i.default._validateParameters("createShader",arguments),new i.default.Shader(this._renderer,e,t)},i.default.prototype.shader=function(e){return this._assert3d("shader"),i.default._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.init(),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),this},i.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},i.default.prototype.texture=function(e){return this._assert3d("texture"),i.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.textureMode=function(e){e!==a.IMAGE&&e!==a.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},i.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e;this._renderer.textureWrapX=e,this._renderer.textureWrapY=t;for(var r=this._renderer.textures,n=0;n<r.length;n++)r[n].setWrapMode(e,t)},i.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.default._validateParameters("normalMaterial",t),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},i.default.prototype.ambientMaterial=function(e,t,r){this._assert3d("ambientMaterial"),i.default._validateParameters("ambientMaterial",arguments);var n=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=n._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this._renderer._setProperty("_doFill",!0),this},i.default.prototype.emissiveMaterial=function(e,t,r,n){this._assert3d("emissiveMaterial"),i.default._validateParameters("emissiveMaterial",arguments);var o=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=o._array,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.specularMaterial=function(e,t,r,n){this._assert3d("specularMaterial"),i.default._validateParameters("specularMaterial",arguments);var o=i.default.prototype.color.apply(this,arguments);return this._renderer.curFillColor=o._array,this._renderer._useSpecularMaterial=!0,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._tex=null,this},i.default.prototype.shininess=function(e){return this._assert3d("shininess"),i.default._validateParameters("shininess",arguments),e<1&&(e=1),this._renderer._useShininess=e,this},i.default.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,r=this.drawMode===a.TEXTURE||e[e.length-1]<1||this._isErasing;return r!==this._isBlending&&(r||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?t.enable(t.BLEND):t.disable(t.BLEND),t.depthMask(!0),this._isBlending=r),this._applyBlendMode(),e},i.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case a.BLEND:case a.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);break;case a.REMOVE:e.blendEquation(e.FUNC_REVERSE_SUBTRACT),e.blendFunc(e.SRC_ALPHA,e.DST_ALPHA);break;case a.MULTIPLY:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ONE,e.ONE);break;case a.SCREEN:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE,e.ONE,e.ONE);break;case a.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case a.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case a.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case a.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var s=i.default;r.default=s},{"../core/constants":253,"../core/main":264,"./p5.Texture":320,"core-js/modules/es.array.join":159}],312:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.default._validateParameters("camera",r),(e=this._renderer._curCamera).camera.apply(e,r),this},o.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.default._validateParameters("perspective",r),(e=this._renderer._curCamera).perspective.apply(e,r),this},o.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.default._validateParameters("ortho",r),(e=this._renderer._curCamera).ortho.apply(e,r),this},o.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return o.default._validateParameters("frustum",r),(e=this._renderer._curCamera).frustum.apply(e,r),this},o.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new o.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},o.default.Camera=function(e){this._renderer=e,this.cameraType="default",this.cameraMatrix=new o.default.Matrix,this.projMatrix=new o.default.Matrix},o.default.Camera.prototype.perspective=function(e,t,r,n){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===r&&(r=this.defaultCameraNear),void 0===n&&(n=this.defaultCameraFar),r<=1e-4&&(r=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),n<r&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=r,this.cameraFar=n,this.projMatrix=o.default.Matrix.identity();var i=1/Math.tan(this.cameraFOV/2),a=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(i/t,0,0,0,0,-i,0,0,0,0,(n+r)*a,-1,0,0,2*n*r*a,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15])},o.default.Camera.prototype.ortho=function(e,t,r,n,i,a){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===r&&(r=-this._renderer.height/2),void 0===n&&(n=this._renderer.height/2),void 0===i&&(i=0),void 0===a&&(a=Math.max(this._renderer.width,this._renderer.height));var s=t-e,l=n-r,u=a-i,c=2/s,d=2/l,f=-2/u,h=-(t+e)/s,p=-(n+r)/l,y=-(a+i)/u;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(c,0,0,0,0,-d,0,0,0,0,f,0,h,p,y,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype.frustum=function(e,t,r,n,i,a){void 0===e&&(e=-this._renderer.width/2),void 0===t&&(t=this._renderer.width/2),void 0===r&&(r=-this._renderer.height/2),void 0===n&&(n=this._renderer.height/2),void 0===i&&(i=0),void 0===a&&(a=Math.max(this._renderer.width,this._renderer.height));var s=t-e,l=n-r,u=a-i,c=2*i/s,d=2*i/l,f=-2*a*i/u,h=(t+e)/s,p=(n+r)/l,y=-(a+i)/u;this.projMatrix=o.default.Matrix.identity(),this.projMatrix.set(c,0,0,0,0,d,0,0,h,p,y,-1,0,0,f,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},o.default.Camera.prototype._rotateView=function(e,t,r,n){var i=this.centerX,a=this.centerY,s=this.centerZ;i-=this.eyeX,a-=this.eyeY,s-=this.eyeZ;var l=o.default.Matrix.identity(this._renderer._pInst);l.rotate(this._renderer._pInst._toRadians(e),t,r,n);var u=[i*l.mat4[0]+a*l.mat4[4]+s*l.mat4[8],i*l.mat4[1]+a*l.mat4[5]+s*l.mat4[9],i*l.mat4[2]+a*l.mat4[6]+s*l.mat4[10]];u[0]+=this.eyeX,u[1]+=this.eyeY,u[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,u[0],u[1],u[2],this.upX,this.upY,this.upZ)},o.default.Camera.prototype.pan=function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])},o.default.Camera.prototype.tilt=function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])},o.default.Camera.prototype.lookAt=function(e,t,r){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,r,this.upX,this.upY,this.upZ)},o.default.Camera.prototype.camera=function(e,t,r,n,o,i,a,s,l){void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,r=this.defaultEyeZ,n=e,o=t,s=1,l=a=i=0),this.eyeX=e,this.eyeY=t,this.eyeZ=r,void 0!==n&&(this.centerX=n,this.centerY=o,this.centerZ=i),void 0!==a&&(this.upX=a,this.upY=s,this.upZ=l);var u=this._getLocalAxes();this.cameraMatrix.set(u.x[0],u.y[0],u.z[0],0,u.x[1],u.y[1],u.z[1],0,u.x[2],u.y[2],u.z[2],0,0,0,0,1);var c=-e,d=-t,f=-r;return this.cameraMatrix.translate([c,d,f]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},o.default.Camera.prototype.move=function(e,t,r){var n=this._getLocalAxes(),o=[n.x[0]*e,n.x[1]*e,n.x[2]*e],i=[n.y[0]*t,n.y[1]*t,n.y[2]*t],a=[n.z[0]*r,n.z[1]*r,n.z[2]*r];this.camera(this.eyeX+o[0]+i[0]+a[0],this.eyeY+o[1]+i[1]+a[1],this.eyeZ+o[2]+i[2]+a[2],this.centerX+o[0]+i[0]+a[0],this.centerY+o[1]+i[1]+a[1],this.centerZ+o[2]+i[2]+a[2],0,1,0)},o.default.Camera.prototype.setPosition=function(e,t,r){var n=e-this.eyeX,o=t-this.eyeY,i=r-this.eyeZ;this.camera(e,t,r,this.centerX+n,this.centerY+o,this.centerZ+i,0,1,0)},o.default.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*Math.PI,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/Math.tan(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},o.default.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},o.default.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},o.default.Camera.prototype.copy=function(){var e=new o.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e},o.default.Camera.prototype._getLocalAxes=function(){var e=this.eyeX-this.centerX,t=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,n=Math.sqrt(e*e+t*t+r*r);0!==n&&(e/=n,t/=n,r/=n);var o=this.upX,i=this.upY,a=this.upZ,s=i*r-a*t,l=-o*r+a*e,u=o*t-i*e;o=t*u-r*l,i=-e*u+r*s,a=e*l-t*s;var c=Math.sqrt(s*s+l*l+u*u);0!==c&&(s/=c,l/=c,u/=c);var d=Math.sqrt(o*o+i*i+a*a);return 0!==d&&(o/=d,i/=d,a/=d),{x:[s,l,u],y:[o,i,a],z:[e,t,r]}},o.default.Camera.prototype._orbit=function(e,t,r){var n=this.eyeX-this.centerX,o=this.eyeY-this.centerY,i=this.eyeZ-this.centerZ,a=Math.sqrt(n*n+o*o+i*i),s=Math.atan2(n,i),l=Math.acos(Math.max(-1,Math.min(1,o/a)));s+=e,(a+=r)<0&&(a=.1),(l+=t)>Math.PI?l=Math.PI:l<=0&&(l=.001);var u=Math.sin(l)*a*Math.sin(s),c=Math.cos(l)*a,d=Math.sin(l)*a*Math.cos(s);this.camera(u+this.centerX,c+this.centerY,d+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},o.default.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},o.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])};var i=o.default.Camera;r.default=i},{"../core/main":264}],313:[function(e,t,r){"use strict";e("core-js/modules/es.string.sub"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.Geometry=function(e,t,r){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,this.dirtyFlags={},r instanceof Function&&r.call(this),this},o.default.Geometry.prototype.reset=function(){this.lineVertices.length=0,this.lineNormals.length=0,this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}},o.default.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var e,t,r,n,o=this.detailX+1,i=0;i<this.detailY;i++)for(var a=0;a<this.detailX;a++)t=(e=i*o+a)+1,r=(i+1)*o+a+1,n=(i+1)*o+a,this.faces.push([e,t,n]),this.faces.push([n,t,r]);return this},o.default.Geometry.prototype._getFaceNormal=function(e){var t=this.faces[e],r=this.vertices[t[0]],n=this.vertices[t[1]],i=this.vertices[t[2]],a=o.default.Vector.sub(n,r),s=o.default.Vector.sub(i,r),l=o.default.Vector.cross(a,s),u=o.default.Vector.mag(l),c=u/(o.default.Vector.mag(a)*o.default.Vector.mag(s));return 0===c||isNaN(c)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),l):(1<c&&(c=1),l.mult(Math.asin(c)/u))},o.default.Geometry.prototype.computeNormals=function(){var e,t=this.vertexNormals,r=this.vertices,n=this.faces;for(e=t.length=0;e<r.length;++e)t.push(new o.default.Vector);for(var i=0;i<n.length;++i)for(var a=n[i],s=this._getFaceNormal(i),l=0;l<3;++l)t[a[l]].add(s);for(e=0;e<r.length;++e)t[e].normalize();return this},o.default.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,r=o.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);r=o.default.Vector.div(r,2),this.vertexNormals[e*t]=r,this.vertexNormals[e*t+this.detailX]=r}return this},o.default.Geometry.prototype.averagePoleNormals=function(){for(var e=new o.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=o.default.Vector.div(e,this.detailX);for(var r=0;r<this.detailX;r++)this.vertexNormals[r]=e;e=new o.default.Vector(0,0,0);for(var n=this.vertices.length-1;n>this.vertices.length-1-this.detailX;n--)e.add(this.vertexNormals[n]);e=o.default.Vector.div(e,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=e;return this},o.default.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var e=0,t=this.strokeIndices.length;e<t;e++)this.edges.push(this.strokeIndices[e]);else for(var r=0;r<this.faces.length;r++)this.edges.push([this.faces[r][0],this.faces[r][1]]),this.edges.push([this.faces[r][1],this.faces[r][2]]),this.edges.push([this.faces[r][2],this.faces[r][0]]);return this},o.default.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0;for(var e=this.lineNormals.length=0;e<this.edges.length;e++){var t=this.vertices[this.edges[e][0]],r=this.vertices[this.edges[e][1]],n=r.copy().sub(t).normalize(),o=t.array(),i=t.array(),a=r.array(),s=r.array(),l=n.array(),u=n.array();l.push(1),u.push(-1),this.lineNormals.push(l,u,l,l,u,u),this.lineVertices.push(o,i,a,a,i,s)}return this},o.default.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),r=0;r<this.vertices.length;r++)e.x=Math.max(e.x,this.vertices[r].x),t.x=Math.min(t.x,this.vertices[r].x),e.y=Math.max(e.y,this.vertices[r].y),t.y=Math.min(t.y,this.vertices[r].y),e.z=Math.max(e.z,this.vertices[r].z),t.z=Math.min(t.z,this.vertices[r].z);for(var n=o.default.Vector.lerp(e,t,.5),i=o.default.Vector.sub(e,t),a=200/Math.max(Math.max(i.x,i.y),i.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(n),this.vertices[s].mult(a)}return this};var i=o.default.Geometry;r.default=i},{"../core/main":264,"core-js/modules/es.string.sub":192}],314:[function(e,t,r){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n},i=Array,a=function(e){return e instanceof Array};"undefined"!=typeof Float32Array&&(i=Float32Array,a=function(e){return e instanceof Array||e instanceof Float32Array}),o.default.Matrix=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e.length&&e[e.length-1]instanceof o.default&&(this.p5=e[e.length-1]),"mat3"===e[0]?this.mat3=Array.isArray(e[1])?e[1]:new i([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(e[0])?e[0]:new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},o.default.Matrix.prototype.set=function(e){return e instanceof o.default.Matrix?this.mat4=e.mat4:a(e)?this.mat4=e:16===arguments.length&&(this.mat4[0]=e,this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this},o.default.Matrix.prototype.get=function(){return new o.default.Matrix(this.mat4,this.p5)},o.default.Matrix.prototype.copy=function(){var e=new o.default.Matrix(this.p5);return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},o.default.Matrix.identity=function(e){return new o.default.Matrix(e)},o.default.Matrix.prototype.transpose=function(e){var t,r,n,i,s,l;return e instanceof o.default.Matrix?(t=e.mat4[1],r=e.mat4[2],n=e.mat4[3],i=e.mat4[6],s=e.mat4[7],l=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=r,this.mat4[9]=i,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=n,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e.mat4[15]):a(e)&&(t=e[1],r=e[2],n=e[3],i=e[6],s=e[7],l=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=r,this.mat4[9]=i,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=n,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e[15]),this},o.default.Matrix.prototype.invert=function(e){var t,r,n,i,s,l,u,c,d,f,h,p,y,m,g,v;e instanceof o.default.Matrix?(t=e.mat4[0],r=e.mat4[1],n=e.mat4[2],i=e.mat4[3],s=e.mat4[4],l=e.mat4[5],u=e.mat4[6],c=e.mat4[7],d=e.mat4[8],f=e.mat4[9],h=e.mat4[10],p=e.mat4[11],y=e.mat4[12],m=e.mat4[13],g=e.mat4[14],v=e.mat4[15]):a(e)&&(t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],f=e[9],h=e[10],p=e[11],y=e[12],m=e[13],g=e[14],v=e[15]);var b=t*l-r*s,_=t*u-n*s,x=t*c-i*s,w=r*u-n*l,j=r*c-i*l,S=n*c-i*u,M=d*m-f*y,E=d*g-h*y,T=d*v-p*y,O=f*g-h*m,C=f*v-p*m,L=h*v-p*g,P=b*L-_*C+x*O+w*T-j*E+S*M;return P?(P=1/P,this.mat4[0]=(l*L-u*C+c*O)*P,this.mat4[1]=(n*C-r*L-i*O)*P,this.mat4[2]=(m*S-g*j+v*w)*P,this.mat4[3]=(h*j-f*S-p*w)*P,this.mat4[4]=(u*T-s*L-c*E)*P,this.mat4[5]=(t*L-n*T+i*E)*P,this.mat4[6]=(g*x-y*S-v*_)*P,this.mat4[7]=(d*S-h*x+p*_)*P,this.mat4[8]=(s*C-l*T+c*M)*P,this.mat4[9]=(r*T-t*C-i*M)*P,this.mat4[10]=(y*j-m*x+v*b)*P,this.mat4[11]=(f*x-d*j-p*b)*P,this.mat4[12]=(l*E-s*O-u*M)*P,this.mat4[13]=(t*O-r*E+n*M)*P,this.mat4[14]=(m*_-y*w-g*b)*P,this.mat4[15]=(d*w-f*_+h*b)*P,this):null},o.default.Matrix.prototype.invert3x3=function(){var e=this.mat3[0],t=this.mat3[1],r=this.mat3[2],n=this.mat3[3],o=this.mat3[4],i=this.mat3[5],a=this.mat3[6],s=this.mat3[7],l=this.mat3[8],u=l*o-i*s,c=-l*n+i*a,d=s*n-o*a,f=e*u+t*c+r*d;return f?(f=1/f,this.mat3[0]=u*f,this.mat3[1]=(-l*t+r*s)*f,this.mat3[2]=(i*t-r*o)*f,this.mat3[3]=c*f,this.mat3[4]=(l*e-r*a)*f,this.mat3[5]=(-i*e+r*n)*f,this.mat3[6]=d*f,this.mat3[7]=(-s*e+t*a)*f,this.mat3[8]=(o*e-t*n)*f,this):null},o.default.Matrix.prototype.transpose3x3=function(e){var t=e[1],r=e[2],n=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=r,this.mat3[7]=n,this},o.default.Matrix.prototype.inverseTranspose=function(e){void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]);var t=this.invert3x3();if(t)t.transpose3x3(this.mat3);else for(var r=0;r<9;r++)this.mat3[r]=0;return this},o.default.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],n=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],o=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],i=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],a=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],u=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*c+r*u+n*l-o*s+i*a},o.default.Matrix.prototype.mult=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof o.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}var r=this.mat4[0],n=this.mat4[1],i=this.mat4[2],s=this.mat4[3];return this.mat4[0]=r*t[0]+n*t[4]+i*t[8]+s*t[12],this.mat4[1]=r*t[1]+n*t[5]+i*t[9]+s*t[13],this.mat4[2]=r*t[2]+n*t[6]+i*t[10]+s*t[14],this.mat4[3]=r*t[3]+n*t[7]+i*t[11]+s*t[15],r=this.mat4[4],n=this.mat4[5],i=this.mat4[6],s=this.mat4[7],this.mat4[4]=r*t[0]+n*t[4]+i*t[8]+s*t[12],this.mat4[5]=r*t[1]+n*t[5]+i*t[9]+s*t[13],this.mat4[6]=r*t[2]+n*t[6]+i*t[10]+s*t[14],this.mat4[7]=r*t[3]+n*t[7]+i*t[11]+s*t[15],r=this.mat4[8],n=this.mat4[9],i=this.mat4[10],s=this.mat4[11],this.mat4[8]=r*t[0]+n*t[4]+i*t[8]+s*t[12],this.mat4[9]=r*t[1]+n*t[5]+i*t[9]+s*t[13],this.mat4[10]=r*t[2]+n*t[6]+i*t[10]+s*t[14],this.mat4[11]=r*t[3]+n*t[7]+i*t[11]+s*t[15],r=this.mat4[12],n=this.mat4[13],i=this.mat4[14],s=this.mat4[15],this.mat4[12]=r*t[0]+n*t[4]+i*t[8]+s*t[12],this.mat4[13]=r*t[1]+n*t[5]+i*t[9]+s*t[13],this.mat4[14]=r*t[2]+n*t[6]+i*t[10]+s*t[14],this.mat4[15]=r*t[3]+n*t[7]+i*t[11]+s*t[15],this},o.default.Matrix.prototype.apply=function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof o.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}var r=this.mat4,n=r[0],i=r[4],s=r[8],l=r[12];r[0]=t[0]*n+t[1]*i+t[2]*s+t[3]*l,r[4]=t[4]*n+t[5]*i+t[6]*s+t[7]*l,r[8]=t[8]*n+t[9]*i+t[10]*s+t[11]*l,r[12]=t[12]*n+t[13]*i+t[14]*s+t[15]*l;var u=r[1],c=r[5],d=r[9],f=r[13];r[1]=t[0]*u+t[1]*c+t[2]*d+t[3]*f,r[5]=t[4]*u+t[5]*c+t[6]*d+t[7]*f,r[9]=t[8]*u+t[9]*c+t[10]*d+t[11]*f,r[13]=t[12]*u+t[13]*c+t[14]*d+t[15]*f;var h=r[2],p=r[6],y=r[10],m=r[14];r[2]=t[0]*h+t[1]*p+t[2]*y+t[3]*m,r[6]=t[4]*h+t[5]*p+t[6]*y+t[7]*m,r[10]=t[8]*h+t[9]*p+t[10]*y+t[11]*m,r[14]=t[12]*h+t[13]*p+t[14]*y+t[15]*m;var g=r[3],v=r[7],b=r[11],_=r[15];return r[3]=t[0]*g+t[1]*v+t[2]*b+t[3]*_,r[7]=t[4]*g+t[5]*v+t[6]*b+t[7]*_,r[11]=t[8]*g+t[9]*v+t[10]*b+t[11]*_,r[15]=t[12]*g+t[13]*v+t[14]*b+t[15]*_,this},o.default.Matrix.prototype.scale=function(e,t,r){return e instanceof o.default.Vector?(t=e.y,r=e.z,e=e.x):e instanceof Array&&(t=e[1],r=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=r,this.mat4[9]*=r,this.mat4[10]*=r,this.mat4[11]*=r,this},o.default.Matrix.prototype.rotate=function(e,t,r,n){t instanceof o.default.Vector?(r=t.y,n=t.z,t=t.x):t instanceof Array&&(r=t[1],n=t[2],t=t[0]);var i=Math.sqrt(t*t+r*r+n*n);t*=1/i,r*=1/i,n*=1/i;var a=this.mat4[0],s=this.mat4[1],l=this.mat4[2],u=this.mat4[3],c=this.mat4[4],d=this.mat4[5],f=this.mat4[6],h=this.mat4[7],p=this.mat4[8],y=this.mat4[9],m=this.mat4[10],g=this.mat4[11],v=Math.sin(e),b=Math.cos(e),_=1-b,x=t*t*_+b,w=r*t*_+n*v,j=n*t*_-r*v,S=t*r*_-n*v,M=r*r*_+b,E=n*r*_+t*v,T=t*n*_+r*v,O=r*n*_-t*v,C=n*n*_+b;return this.mat4[0]=a*x+c*w+p*j,this.mat4[1]=s*x+d*w+y*j,this.mat4[2]=l*x+f*w+m*j,this.mat4[3]=u*x+h*w+g*j,this.mat4[4]=a*S+c*M+p*E,this.mat4[5]=s*S+d*M+y*E,this.mat4[6]=l*S+f*M+m*E,this.mat4[7]=u*S+h*M+g*E,this.mat4[8]=a*T+c*O+p*C,this.mat4[9]=s*T+d*O+y*C,this.mat4[10]=l*T+f*O+m*C,this.mat4[11]=u*T+h*O+g*C,this},o.default.Matrix.prototype.translate=function(e){var t=e[0],r=e[1],n=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*r+this.mat4[8]*n,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*r+this.mat4[9]*n,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*r+this.mat4[10]*n,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*r+this.mat4[11]*n},o.default.Matrix.prototype.rotateX=function(e){this.rotate(e,1,0,0)},o.default.Matrix.prototype.rotateY=function(e){this.rotate(e,0,1,0)},o.default.Matrix.prototype.rotateZ=function(e){this.rotate(e,0,0,1)},o.default.Matrix.prototype.perspective=function(e,t,r,n){var o=1/Math.tan(e/2),i=1/(r-n);return this.mat4[0]=o/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=o,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(n+r)*i,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*n*r*i,this.mat4[15]=0,this},o.default.Matrix.prototype.ortho=function(e,t,r,n,o,i){var a=1/(e-t),s=1/(r-n),l=1/(o-i);return this.mat4[0]=-2*a,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(e+t)*a,this.mat4[13]=(n+r)*s,this.mat4[14]=(i+o)*l,this.mat4[15]=1,this};var s=o.default.Matrix;r.default=s},{"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223}],315:[function(e,t,r){"use strict";e("core-js/modules/es.array.map"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.RenderBuffer=function(e,t,r,n,o,i){this.size=e,this.src=t,this.dst=r,this.attr=n,this._renderer=o,this.map=i},o.default.RenderBuffer.prototype._prepareBuffer=function(e,t){var r,n=t.attributes,o=this._renderer.GL;r=e.model?e.model:e;var i=n[this.attr];if(i){var a=e[this.dst],s=r[this.src];if(0<s.length){var l=!a;if(l&&(e[this.dst]=a=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,a),l||!1!==r.dirtyFlags[this.src]){var u=this.map,c=u?u(s):s;this._renderer._bindBuffer(a,o.ARRAY_BUFFER,c),r.dirtyFlags[this.src]=!1}t.enableAttrib(i,this.size)}}};var i=o.default.RenderBuffer;r.default=i},{"../core/main":264,"core-js/modules/es.array.map":161}],316:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));e("./p5.RenderBuffer"),i.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:a.TRIANGLE_FAN,this.immediateMode.geometry.reset(),this},i.default.RendererGL.prototype.vertex=function(e,t){var r,n,o;r=n=o=0,3===arguments.length?r=arguments[2]:4===arguments.length?(n=arguments[2],o=arguments[3]):5===arguments.length&&(r=arguments[2],n=arguments[3],o=arguments[4]);var s=new i.default.Vector(e,t,r);this.immediateMode.geometry.vertices.push(s),this.immediateMode.geometry.vertexNormals.push(this._currentNormal);var l=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.geometry.vertexColors.push(l[0],l[1],l[2],l[3]),this.textureMode===a.IMAGE&&(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(n/=this._tex.width,o/=this._tex.height):null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(n,o),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=r,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=r,this},i.default.RendererGL.prototype.normal=function(e,t,r){return e instanceof i.default.Vector?this._currentNormal=e:this._currentNormal=new i.default.Vector(e,t,r),this},i.default.RendererGL.prototype.endShape=function(e,t,r,n,o,i){return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this._processVertices.apply(this,arguments),this._doFill&&1<this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(),this._doStroke&&1<this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},i.default.RendererGL.prototype._processVertices=function(e){if(0!==this.immediateMode.geometry.vertices.length){var t=this._doStroke&&this.drawMode!==a.TEXTURE,r=e===a.CLOSE;t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,r),this.immediateMode.geometry._edgesToVertices());var n=this.immediateMode.shapeMode===a.TESS;(this.isBezier||this.isQuadratic||this.isCurve||n)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape()}},i.default.RendererGL.prototype._calculateEdges=function(e,t,r){var n=[],o=0;switch(e){case a.TRIANGLE_STRIP:for(o=0;o<t.length-2;o++)n.push([o,o+1]),n.push([o,o+2]);n.push([o,o+1]);break;case a.TRIANGLES:for(o=0;o<t.length-2;o+=3)n.push([o,o+1]),n.push([o+1,o+2]),n.push([o+2,o]);break;case a.LINES:for(o=0;o<t.length-1;o+=2)n.push([o,o+1]);break;default:for(o=0;o<t.length-1;o++)n.push([o,o+1])}return r&&n.push([t.length-1,0]),n},i.default.RendererGL.prototype._tesselateShape=function(){this.immediateMode.shapeMode=a.TRIANGLES;var e=[new Float32Array(this._vToNArray(this.immediateMode.geometry.vertices))],t=this._triangulate(e);this.immediateMode.geometry.vertices=[];for(var r=0,n=t.length;r<n;r+=3)this.vertex(t[r],t[r+1],t[r+2])},i.default.RendererGL.prototype._drawImmediateFill=function(){var e=this.GL,t=this._getImmediateFillShader();this._setFillUniforms(t);var r=!0,n=!1,o=void 0;try{for(var i,s=this.immediateMode.buffers.fill[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN),this._applyColorBlend(this.curFillColor),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length),t.unbindShader()},i.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=this._getImmediateStrokeShader();this._setStrokeUniforms(t);var r=!0,n=!1,o=void 0;try{for(var i,a=this.immediateMode.buffers.stroke[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)i.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length),t.unbindShader()};var s=i.default.RendererGL;r.default=s},{"../core/constants":253,"../core/main":264,"./p5.RenderBuffer":315,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/web.dom-collections.iterator":229}],317:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};e("./p5.RendererGL"),e("./p5.RenderBuffer");var i=0;o.default.RendererGL.prototype._initBufferDefaults=function(e){if(this._freeBuffers(e),1e3<++i){var t=Object.keys(this.retainedMode.geometry)[0];delete this.retainedMode.geometry[t],i--}return this.retainedMode.geometry[e]={}},o.default.RendererGL.prototype._freeBuffers=function(e){var t=this.retainedMode.geometry[e];if(t){delete this.retainedMode.geometry[e],i--;var r=this.GL;t.indexBuffer&&r.deleteBuffer(t.indexBuffer),n(this.retainedMode.buffers.stroke),n(this.retainedMode.buffers.fill)}function n(e){var n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;t[l.dst]&&(r.deleteBuffer(t[l.dst]),t[l.dst]=null)}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}}},o.default.RendererGL.prototype.createBuffers=function(e,t){var r=this.GL,n=this._initBufferDefaults(e);n.model=t;var i=n.indexBuffer;if(t.faces.length){i=i||(n.indexBuffer=r.createBuffer());var a=o.default.RendererGL.prototype._flatten(t.faces),s=a.some(function(e){return 65535<e}),l=s?Uint32Array:Uint16Array;this._bindBuffer(i,r.ELEMENT_ARRAY_BUFFER,a,l),n.indexBufferType=s?r.UNSIGNED_INT:r.UNSIGNED_SHORT,n.vertexCount=3*t.faces.length}else i&&(r.deleteBuffer(i),n.indexBuffer=null),n.vertexCount=t.vertices?t.vertices.length:0;return n.lineVertexCount=t.lineVertices?t.lineVertices.length:0,n},o.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,r=this.retainedMode.geometry[e];if(this._doStroke&&0<r.lineVertexCount){var n=this._getRetainedStrokeShader();this._setStrokeUniforms(n);var o=!0,i=!1,a=void 0;try{for(var s,l=this.retainedMode.buffers.stroke[Symbol.iterator]();!(o=(s=l.next()).done);o=!0)s.value._prepareBuffer(r,n)}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),n.unbindShader()}if(this._doFill){var u=this._getRetainedFillShader();this._setFillUniforms(u);var c=!0,d=!1,f=void 0;try{for(var h,p=this.retainedMode.buffers.fill[Symbol.iterator]();!(c=(h=p.next()).done);c=!0)h.value._prepareBuffer(r,u)}catch(e){d=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw f}}r.indexBuffer&&this._bindBuffer(r.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),u.unbindShader()}return this},o.default.RendererGL.prototype.drawBuffersScaled=function(e,t,r,n){var o=this.uMVMatrix.copy();try{this.uMVMatrix.scale(t,r,n),this.drawBuffers(e)}finally{this.uMVMatrix=o}},o.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(e,t){var r=this.retainedMode.geometry[t],n=this.GL;if(r.indexBuffer){if(r.indexBufferType===n.UNSIGNED_INT&&!n.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");n.drawElements(n.TRIANGLES,r.vertexCount,r.indexBufferType,0)}else n.drawArrays(e||n.TRIANGLES,0,r.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(e,t){var r=this.GL,n=this._getImmediatePointShader();this._setPointUniforms(n),this._bindBuffer(t,r.ARRAY_BUFFER,this._vToNArray(e),Float32Array,r.STATIC_DRAW),n.enableAttrib(n.attributes.aPosition,3),r.drawArrays(r.Points,0,e.length),n.unbindShader()};var a=o.default.RendererGL;r.default=a},{"../core/main":264,"./p5.RenderBuffer":315,"./p5.RendererGL":318,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.some":163,"core-js/modules/es.object.keys":176,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/web.dom-collections.iterator":229}],318:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=s(e("../core/main")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),a=s(e("libtess"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("path");var u="precision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\n\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = _phongSpecular(lightDir, viewDirection, normal, uShininess);\n  lr.diffuse = _lambertDiffuse(lightDir, normal);\n  return lr;\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n",c={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:u+"// include lighting.glgl\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n}\n",lightTextureFrag:"precision highp float;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying highp vec2 vVertTexCoord;\nvarying vec3 vDiffuseColor;\nvarying vec3 vSpecularColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * vDiffuseColor + vSpecularColor;\n  }\n}",phongVert:"precision highp float;\nprecision highp int;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = uNormalMatrix * aNormal;\n  vTexCoord = aTexCoord;\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n}\n",phongFrag:u+"// include lighting.glsl\nprecision highp float;\nprecision highp int;\n\nuniform vec4 uMaterialColor;\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void) {\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, normalize(vNormal), diffuse, specular);\n\n  if(uEmissive && !isTexture) {\n    gl_FragColor = uMaterialColor;\n  }\n  else {\n    gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) * (uTint / vec4(255, 255, 255, 255)) : uMaterialColor;\n    gl_FragColor.rgb = gl_FragColor.rgb * (diffuse + vAmbientColor) + specular;\n  }\n}",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = uMaterialColor;\n  gl_FragColor.a *= saturate(max(antialias, cover));\n}",lineVert:"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\n\nattribute vec4 aPosition;\nattribute vec4 aDirection;\n  \nvoid main() {\n  // using a scale <1 moves the lines towards the camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  vec3 scale = vec3(0.9995);\n\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posq.xyz = posq.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 q = uProjectionMatrix * posq;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);\n\n  // flip tangent to normal (it's already normalized)\n  vec2 normal = vec2(-tangent.y, tangent.x);\n\n  float thickness = aDirection.w * uStrokeWeight;\n  vec2 offset = normal * thickness / 2.0;\n\n  vec2 curPerspScale;\n\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n    // invert Y, projections in Processing invert Y\n    curPerspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n}\n",lineFrag:"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\n\nvoid main() {\n  gl_FragColor = uMaterialColor;\n}",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n\tfloat mask = 0.0;\n\n\t// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n\tmask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n\t// if strokeWeight is 1 or less lets just draw a square\n\t// this prevents weird artifacting from carving circles when our points are really small\n\t// if strokeWeight is larger than 1, we just use it as is\n\n\tmask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n\t// throw away the borders of the mask\n    // otherwise we get weird alpha blending issues\n\n\tif(mask > 0.98){\n      discard;\n  \t}\n\n  \tgl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;\n}"};o.default.RendererGL=function(e,t,r,n){return o.default.Renderer.call(this,e,t,r),this._setAttributeDefaults(t),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this._pInst._setProperty("drawingContext",this.drawingContext),this._isErasing=!1,this._enableLighting=!1,this.ambientLightColors=[],this.specularColors=[1,1,1],this.directionalLightDirections=[],this.directionalLightDiffuseColors=[],this.directionalLightSpecularColors=[],this.pointLightPositions=[],this.pointLightDiffuseColors=[],this.pointLightSpecularColors=[],this.spotLightPositions=[],this.spotLightDirections=[],this.spotLightDiffuseColors=[],this.spotLightSpecularColors=[],this.spotLightAngle=[],this.spotLightConc=[],this.drawMode=i.FILL,this.curFillColor=this._cachedFillStyle=[1,1,1,1],this.curStrokeColor=this._cachedStrokeStyle=[0,0,0,1],this.curBlendMode=i.BLEND,this._cachedBlendMode=void 0,this.blendExt=this.GL.getExtension("EXT_blend_minmax"),this._isBlending=!1,this._useSpecularMaterial=!1,this._useEmissiveMaterial=!1,this._useNormalMaterial=!1,this._useShininess=1,this._tint=[255,255,255,255],this.constantAttenuation=1,this.linearAttenuation=0,this.quadraticAttenuation=0,this.uMVMatrix=new o.default.Matrix,this.uPMatrix=new o.default.Matrix,this.uNMatrix=new o.default.Matrix("mat3"),this._currentNormal=new o.default.Vector(0,0,1),this._curCamera=new o.default.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.userFillShader=void 0,this.userStrokeShader=void 0,this.userPointShader=void 0,this.retainedMode={geometry:{},buffers:{stroke:[new o.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new o.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],text:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)]}},this.immediateMode={geometry:new o.default.Geometry,shapeMode:i.TRIANGLE_FAN,_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",this,this._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",this,this._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",this),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",this),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",this,this._flatten)],stroke:[new o.default.RenderBuffer(3,"lineVertices","lineVertexBuffer","aPosition",this,this._flatten),new o.default.RenderBuffer(4,"lineNormals","lineNormalBuffer","aDirection",this,this._flatten)],point:this.GL.createBuffer()}},this.pointSize=5,this.curStrokeWeight=1,this.textures=[],this.textureMode=i.IMAGE,this.textureWrapX=i.CLAMP,this.textureWrapY=i.CLAMP,this._tex=null,this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this._curShader=void 0,this},o.default.RendererGL.prototype=Object.create(o.default.Renderer.prototype),o.default.RendererGL.prototype._setAttributeDefaults=function(e){var t={alpha:!1,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!1,preserveDrawingBuffer:!0,perPixelLighting:!0};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)},o.default.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(e){throw e}},o.default.RendererGL.prototype._resetContext=function(e,t){var r=this.width,n=this.height,i=this.canvas.id,a=this._pInst instanceof o.default.Graphics;if(a){var s=this._pInst;s.canvas.parentNode.removeChild(s.canvas),s.canvas=document.createElement("canvas"),(s._pInst._userNode||document.body).appendChild(s.canvas),o.default.Element.call(s,s.canvas,s._pInst),s.width=r,s.height=n}else{var l=this.canvas;l&&l.parentNode.removeChild(l),(l=document.createElement("canvas")).id=i,this._pInst._userNode?this._pInst._userNode.appendChild(l):document.body.appendChild(l),this._pInst.canvas=l}var u=new o.default.RendererGL(this._pInst.canvas,this._pInst,!a);this._pInst._setProperty("_renderer",u),u.resize(r,n),u._applyDefaults(),a||this._pInst._elements.push(u),"function"==typeof t&&setTimeout(function(){t.apply(window._renderer,e)},0)},o.default.prototype.setAttributes=function(e,t){if(void 0!==this._glAttributes){var r=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,r=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,r=!1),this._renderer.isP3D&&!r){if(!this._setupDone)for(var n in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(n))return void console.error("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}else console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.")},o.default.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clear(this.GL.DEPTH_BUFFER_BIT)},o.default.RendererGL.prototype.background=function(){var e,t=(e=this._pInst).color.apply(e,arguments),r=t.levels[0]/255,n=t.levels[1]/255,o=t.levels[2]/255,i=t.levels[3]/255;this.GL.clearColor(r,n,o,i),this.GL.clear(this.GL.COLOR_BUFFER_BIT)},o.default.RendererGL.prototype.fill=function(e,t,r,n){var a=o.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=a._array,this.drawMode=i.FILL,this._useNormalMaterial=!1,this._tex=null},o.default.RendererGL.prototype.stroke=function(e,t,r,n){arguments[3]=255;var i=o.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=i._array},o.default.RendererGL.prototype.strokeCap=function(e){console.error("Sorry, strokeCap() is not yet implemented in WEBGL mode")},o.default.RendererGL.prototype.strokeJoin=function(e){console.error("Sorry, strokeJoin() is not yet implemented in WEBGL mode")},o.default.RendererGL.prototype.filter=function(e){console.error("filter() does not work in WEBGL mode")},o.default.RendererGL.prototype.blendMode=function(e){e===i.DARKEST||e===i.LIGHTEST||e===i.ADD||e===i.BLEND||e===i.SUBTRACT||e===i.SCREEN||e===i.EXCLUSION||e===i.REPLACE||e===i.MULTIPLY||e===i.REMOVE?this.curBlendMode=e:e!==i.BURN&&e!==i.OVERLAY&&e!==i.HARD_LIGHT&&e!==i.SOFT_LIGHT&&e!==i.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")},o.default.RendererGL.prototype.erase=function(e,t){this._isErasing||(this._applyBlendMode(i.REMOVE),this._isErasing=!0,this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])},o.default.RendererGL.prototype.noErase=function(){this._isErasing&&(this._isErasing=!1,this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.blendMode(this._cachedBlendMode))},o.default.RendererGL.prototype.strokeWeight=function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)},o.default.RendererGL.prototype._getPixel=function(e,t){var r;return r=new Uint8Array(4),this.drawingContext.readPixels(e,t,1,1,this.drawingContext.RGBA,this.drawingContext.UNSIGNED_BYTE,r),[r[0],r[1],r[2],r[3]]},o.default.RendererGL.prototype.loadPixels=function(){var e=this._pixelsState;if(!0===this._pInst._glAttributes.preserveDrawingBuffer){var t=e.pixels,r=this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4;t instanceof Uint8Array&&t.length===r||(t=new Uint8Array(r),this._pixelsState._setProperty("pixels",t));var n=this._pInst._pixelDensity;this.GL.readPixels(0,0,this.width*n,this.height*n,this.GL.RGBA,this.GL.UNSIGNED_BYTE,t)}else console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.")},o.default.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.retainedMode.geometry[e]},o.default.RendererGL.prototype.resize=function(e,t){o.default.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize();var r=this._pixelsState;void 0!==r.pixels&&r._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4))},o.default.RendererGL.prototype.clear=function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,r=(arguments.length<=2?void 0:arguments[2])||0,n=(arguments.length<=3?void 0:arguments[3])||0;this.GL.clearColor(e,t,r,n),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},o.default.RendererGL.prototype.applyMatrix=function(e,t,r,n,i,a){16===arguments.length?o.default.Matrix.prototype.apply.apply(this.uMVMatrix,arguments):this.uMVMatrix.apply([e,t,0,0,r,n,0,0,0,0,1,0,i,a,0,1])},o.default.RendererGL.prototype.translate=function(e,t,r){return e instanceof o.default.Vector&&(r=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,r]),this},o.default.RendererGL.prototype.scale=function(e,t,r){return this.uMVMatrix.scale(e,t,r),this},o.default.RendererGL.prototype.rotate=function(e,t){return void 0===t?this.rotateZ(e):(o.default.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},o.default.RendererGL.prototype.rotateX=function(e){return this.rotate(e,1,0,0),this},o.default.RendererGL.prototype.rotateY=function(e){return this.rotate(e,0,1,0),this},o.default.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,0,0,1),this},o.default.RendererGL.prototype.push=function(){var e=o.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,t._currentNormal=this._currentNormal,e},o.default.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=o.default.Matrix.identity(this._pInst),this},o.default.RendererGL.prototype._getImmediateStrokeShader=function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()},o.default.RendererGL.prototype._getRetainedStrokeShader=o.default.RendererGL.prototype._getImmediateStrokeShader,o.default.RendererGL.prototype._getImmediateFillShader=function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e},o.default.RendererGL.prototype._getRetainedFillShader=function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e},o.default.RendererGL.prototype._getImmediatePointShader=function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()},o.default.RendererGL.prototype._getRetainedLineShader=o.default.RendererGL.prototype._getImmediateLineShader,o.default.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new o.default.Shader(this,c.phongVert,c.phongFrag):this._defaultLightShader=new o.default.Shader(this,c.lightVert,c.lightTextureFrag)),this._defaultLightShader},o.default.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new o.default.Shader(this,c.immediateVert,c.vertexColorFrag)),this._defaultImmediateModeShader},o.default.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new o.default.Shader(this,c.normalVert,c.normalFrag)),this._defaultNormalShader},o.default.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new o.default.Shader(this,c.normalVert,c.basicFrag)),this._defaultColorShader},o.default.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new o.default.Shader(this,c.pointVert,c.pointFrag)),this._defaultPointShader},o.default.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new o.default.Shader(this,c.lineVert,c.lineFrag)),this._defaultLineShader},o.default.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new o.default.Shader(this,c.fontVert,c.fontFrag)),this._defaultFontShader},o.default.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var e=new o.default.Image(1,1);e.set(0,0,255),this._emptyTexture=new o.default.Texture(this,e)}return this._emptyTexture},o.default.RendererGL.prototype.getTexture=function(e){var t=this.textures,r=!0,n=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.src===e)return l}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}var u=new o.default.Texture(this,e);return t.push(u),u},o.default.RendererGL.prototype._setStrokeUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight)},o.default.RendererGL.prototype._setFillUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uUseLighting",this._enableLighting);var t=this.pointLightDiffuseColors.length/3;e.setUniform("uPointLightCount",t),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors);var r=this.directionalLightDiffuseColors.length/3;e.setUniform("uDirectionalLightCount",r),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors);var n=this.ambientLightColors.length/3;e.setUniform("uAmbientLightCount",n),e.setUniform("uAmbientColor",this.ambientLightColors);var o=this.spotLightDiffuseColors.length/3;e.setUniform("uSpotLightCount",o),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()},o.default.RendererGL.prototype._setPointUniforms=function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)},o.default.RendererGL.prototype._bindBuffer=function(e,t,r,n,o){if(t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==r){var i=new(n||Float32Array)(r);this.GL.bufferData(t,i,o||this.GL.STATIC_DRAW)}},o.default.RendererGL.prototype._arraysEqual=function(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0},o.default.RendererGL.prototype._isTypedArray=function(e){return Float32Array,Float64Array,Int16Array,Uint16Array,e instanceof Uint32Array},o.default.RendererGL.prototype._flatten=function(e){if(0===e.length)return[];if(2e4<e.length){var t,r=Object.prototype.toString,n=[],o=e.slice();for(t=o.pop();"[object Array]"===r.call(t)?o.push.apply(o,l(t)):n.push(t),o.length&&void 0!==(t=o.pop()););return n.reverse(),n}var i;return(i=[]).concat.apply(i,l(e))},o.default.RendererGL.prototype._vToNArray=function(e){var t=[],r=!0,n=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;t.push(s.x,s.y,s.z)}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}return t},o.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},o.default.RendererGL.prototype._initTessy=function(){var e=new a.default.GluTesselator;return e.gluTessCallback(a.default.gluEnum.GLU_TESS_VERTEX_DATA,function(e,t){t[t.length]=e[0],t[t.length]=e[1],t[t.length]=e[2]}),e.gluTessCallback(a.default.gluEnum.GLU_TESS_BEGIN,function(e){e!==a.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))}),e.gluTessCallback(a.default.gluEnum.GLU_TESS_ERROR,function(e){console.log("error callback"),console.log("error number: ".concat(e))}),e.gluTessCallback(a.default.gluEnum.GLU_TESS_COMBINE,function(e,t,r){return[e[0],e[1],e[2]]}),e.gluTessCallback(a.default.gluEnum.GLU_TESS_EDGE_FLAG,function(e){}),e},o.default.RendererGL.prototype._triangulate=function(e){this._tessy.gluTessNormal(0,0,1);var t=[];this._tessy.gluTessBeginPolygon(t);for(var r=0;r<e.length;r++){this._tessy.gluTessBeginContour();for(var n=e[r],o=0;o<n.length;o+=3){var i=[n[o],n[o+1],n[o+2]];this._tessy.gluTessVertex(i,i)}this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),t},o.default.RendererGL.prototype._bezierCoefficients=function(e){var t=e*e,r=1-e,n=r*r;return[n*r,3*n*e,3*r*t,t*e]},o.default.RendererGL.prototype._quadraticCoefficients=function(e){var t=1-e;return[t*t,2*t*e,e*e]},o.default.RendererGL.prototype._bezierToCatmull=function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]};var d=o.default.RendererGL;r.default=d},{"../core/constants":253,"../core/main":264,"../core/p5.Renderer":267,"./p5.Camera":312,"./p5.Matrix":314,"./p5.Shader":319,"core-js/modules/es.array.concat":149,"core-js/modules/es.array.fill":151,"core-js/modules/es.array.filter":152,"core-js/modules/es.array.from":155,"core-js/modules/es.array.includes":156,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.object.assign":173,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.to-string":182,"core-js/modules/es.string.includes":185,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.float32-array":203,"core-js/modules/es.typed-array.float64-array":204,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.int16-array":208,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint16-array":224,"core-js/modules/es.typed-array.uint32-array":225,"core-js/modules/es.typed-array.uint8-array":226,"core-js/modules/web.dom-collections.iterator":229,libtess:237,path:240}],319:[function(e,t,r){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,o=(n=e("../core/main"))&&n.__esModule?n:{default:n};o.default.Shader=function(e,t,r){this._renderer=e,this._vertSrc=t,this._fragSrc=r,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},o.default.Shader.prototype.init=function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:".concat(e.getShaderInfoLog(this._vertShader))),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:".concat(e.getShaderInfoLog(this._fragShader))),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||console.error("Snap! Error linking shader program: ".concat(e.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this},o.default.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),r=0;r<t;++r){var n=e.getActiveAttrib(this._glProgram,r),o=n.name,i=e.getAttribLocation(this._glProgram,o),a={};a.name=o,a.location=i,a.index=r,a.type=n.type,a.size=n.size,this.attributes[o]=a}this._loadedAttributes=!0}},o.default.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),r=0,n=0;n<t;++n){var o=e.getActiveUniform(this._glProgram,n),i={};i.location=e.getUniformLocation(this._glProgram,o.name),i.size=o.size;var a=o.name;1<o.size&&(a=a.substring(0,a.indexOf("[0]"))),i.name=a,i.type=o.type,i._cachedData=void 0,i.type===e.SAMPLER_2D&&(i.samplerIndex=r,r++,this.samplers.push(i)),i.isArray=1<o.size||i.type===e.FLOAT_MAT3||i.type===e.FLOAT_MAT4||i.type===e.FLOAT_VEC2||i.type===e.FLOAT_VEC3||i.type===e.FLOAT_VEC4||i.type===e.INT_VEC2||i.type===e.INT_VEC4||i.type===e.INT_VEC3,this.uniforms[a]=i}this._loadedUniforms=!0}},o.default.Shader.prototype.compile=function(){},o.default.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))},o.default.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},o.default.Shader.prototype.bindTextures=function(){var e=this._renderer.GL,t=!0,r=!1,n=void 0;try{for(var o,i=this.samplers[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=a.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+a.samplerIndex),s.bindTexture(),s.update(),e.uniform1i(a.location,a.samplerIndex)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}},o.default.Shader.prototype.updateTextures=function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.samplers[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value.texture;i&&i.update()}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}},o.default.Shader.prototype.unbindTextures=function(){},o.default.Shader.prototype._setMatrixUniforms=function(){var e=this._renderer._curCamera.cameraMatrix,t=this._renderer.uPMatrix,r=this._renderer.uMVMatrix,n=r.copy();n.mult(t),this.isStrokeShader()&&("default"===this._renderer._curCamera.cameraType?this.setUniform("uPerspective",1):this.setUniform("uPerspective",0)),this.setUniform("uViewMatrix",e.mat4),this.setUniform("uProjectionMatrix",t.mat4),this.setUniform("uModelViewMatrix",r.mat4),this.setUniform("uModelViewProjectionMatrix",n.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},o.default.Shader.prototype.useProgram=function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this},o.default.Shader.prototype.setUniform=function(e,t){var r=this.uniforms[e];if(r){var n=this._renderer.GL;if(r.isArray){if(r._cachedData&&this._renderer._arraysEqual(r._cachedData,t))return;r._cachedData=t.slice(0)}else{if(r._cachedData&&r._cachedData===t)return;Array.isArray(t)?r._cachedData=t.slice(0):r._cachedData=t}var i=r.location;switch(this.useProgram(),r.type){case n.BOOL:!0===t?n.uniform1i(i,1):n.uniform1i(i,0);break;case n.INT:1<r.size?t.length&&n.uniform1iv(i,t):n.uniform1i(i,t);break;case n.FLOAT:1<r.size?t.length&&n.uniform1fv(i,t):n.uniform1f(i,t);break;case n.FLOAT_MAT3:n.uniformMatrix3fv(i,!1,t);break;case n.FLOAT_MAT4:n.uniformMatrix4fv(i,!1,t);break;case n.FLOAT_VEC2:1<r.size?t.length&&n.uniform2fv(i,t):n.uniform2f(i,t[0],t[1]);break;case n.FLOAT_VEC3:1<r.size?t.length&&n.uniform3fv(i,t):n.uniform3f(i,t[0],t[1],t[2]);break;case n.FLOAT_VEC4:1<r.size?t.length&&n.uniform4fv(i,t):n.uniform4f(i,t[0],t[1],t[2],t[3]);break;case n.INT_VEC2:1<r.size?t.length&&n.uniform2iv(i,t):n.uniform2i(i,t[0],t[1]);break;case n.INT_VEC3:1<r.size?t.length&&n.uniform3iv(i,t):n.uniform3i(i,t[0],t[1],t[2]);break;case n.INT_VEC4:1<r.size?t.length&&n.uniform4iv(i,t):n.uniform4i(i,t[0],t[1],t[2],t[3]);break;case n.SAMPLER_2D:n.activeTexture(n.TEXTURE0+r.samplerIndex),r.texture=t instanceof o.default.Texture?t:this._renderer.getTexture(t),n.uniform1i(i,r.samplerIndex)}return this}},o.default.Shader.prototype.isLightShader=function(){return void 0!==this.attributes.aNormal||void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalDiffuseColors||void 0!==this.uniforms.uDirectionalSpecularColors||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightDiffuseColors||void 0!==this.uniforms.uPointLightSpecularColors||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},o.default.Shader.prototype.isNormalShader=function(){return void 0!==this.attributes.aNormal},o.default.Shader.prototype.isTextureShader=function(){return 0<this.samplers.length},o.default.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},o.default.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},o.default.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},o.default.Shader.prototype.enableAttrib=function(e,t,r,n,o,i){if(e){var a=e.location;if(-1!==a){var s=this._renderer.GL;e.enabled||(s.enableVertexAttribArray(a),e.enabled=!0),this._renderer.GL.vertexAttribPointer(a,t,r||s.FLOAT,n||!1,o||0,i||0)}}return this};var i=o.default.Shader;r.default=i},{"../core/main":264,"core-js/modules/es.array.index-of":157,"core-js/modules/es.array.iterator":158,"core-js/modules/es.array.slice":162,"core-js/modules/es.function.name":166,"core-js/modules/es.object.to-string":177,"core-js/modules/es.string.iterator":186,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}],320:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));i.default.Texture=function(e,t,r){this._renderer=e;var n=this._renderer.GL;(r=r||{}).dataType===n.FLOAT&&(n.getExtension("OES_texture_float")||console.log("Oh no, your device doesn't support floating point textures!"),n.getExtension("OES_texture_float_linear")||console.log("Ack! Your device doesn't support linear filtering for floating point textures")),this.src=t,this.glTex=void 0,this.glTarget=n.TEXTURE_2D,this.glFormat=r.format||n.RGBA,this.mipmaps=!1,this.glMinFilter=r.minFilter||n.LINEAR,this.glMagFilter=r.magFilter||n.LINEAR,this.glWrapS=r.wrapS||n.CLAMP_TO_EDGE,this.glWrapT=r.wrapT||n.CLAMP_TO_EDGE,this.glDataType=r.dataType||n.UNSIGNED_BYTE,this.isSrcMediaElement=void 0!==i.default.MediaElement&&t instanceof i.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==i.default.Element&&t instanceof i.default.Element&&!(t instanceof i.default.Graphics),this.isSrcP5Image=t instanceof i.default.Image,this.isSrcP5Graphics=t instanceof i.default.Graphics,this.isImageData="undefined"!=typeof ImageData&&t instanceof ImageData;var o=this._getTextureDataFromSource();return this.width=o.width,this.height=o.height,this.init(o),this},i.default.Texture.prototype._getTextureDataFromSource=function(){var e;return this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e},i.default.Texture.prototype.init=function(e){var t=this._renderer.GL;if(this.glTex=t.createTexture(),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata){var r=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,this.glDataType,r)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)},i.default.Texture.prototype.update=function(){var e=this.src;if(0===e.width||0===e.height)return!1;var t=this._getTextureDataFromSource(),r=!1,n=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(r=!0,this.width=t.width,this.height=t.height,this.isSrcP5Image?e.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&e.setModified(!0)):this.isSrcP5Image?e.isModified()&&(r=!0,e.setModified(!1)):this.isSrcMediaElement?e.isModified()?(r=!0,e.setModified(!1)):e.loadedmetadata&&this._videoPrevUpdateTime!==e.time()&&(this._videoPrevUpdateTime=e.time(),r=!0):this.isImageData?e._dirty&&(r=!(e._dirty=!1)):r=!0,r&&(this.bindTexture(),n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,t)),r},i.default.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},i.default.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},i.default.Texture.prototype.setInterpolation=function(e,t){var r=this._renderer.GL;e===a.NEAREST?this.glMinFilter=r.NEAREST:this.glMinFilter=r.LINEAR,t===a.NEAREST?this.glMagFilter=r.NEAREST:this.glMagFilter=r.LINEAR,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.glMinFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},i.default.Texture.prototype.setWrapMode=function(e,t){function r(e){return 0==(e&e-1)}var n=this._renderer.GL,o=r(this.width),i=r(this.height);e===a.REPEAT?o&&i?this.glWrapS=n.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=n.CLAMP_TO_EDGE):e===a.MIRROR?o&&i?this.glWrapS=n.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=n.CLAMP_TO_EDGE):this.glWrapS=n.CLAMP_TO_EDGE,t===a.REPEAT?o&&i?this.glWrapT=n.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=n.CLAMP_TO_EDGE):t===a.MIRROR?o&&i?this.glWrapT=n.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=n.CLAMP_TO_EDGE):this.glWrapT=n.CLAMP_TO_EDGE,this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.glWrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()};var s=i.default.Texture;r.default=s},{"../core/constants":253,"../core/main":264,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.typed-array.copy-within":197,"core-js/modules/es.typed-array.every":198,"core-js/modules/es.typed-array.fill":199,"core-js/modules/es.typed-array.filter":200,"core-js/modules/es.typed-array.find":202,"core-js/modules/es.typed-array.find-index":201,"core-js/modules/es.typed-array.for-each":205,"core-js/modules/es.typed-array.includes":206,"core-js/modules/es.typed-array.index-of":207,"core-js/modules/es.typed-array.iterator":210,"core-js/modules/es.typed-array.join":211,"core-js/modules/es.typed-array.last-index-of":212,"core-js/modules/es.typed-array.map":213,"core-js/modules/es.typed-array.reduce":215,"core-js/modules/es.typed-array.reduce-right":214,"core-js/modules/es.typed-array.reverse":216,"core-js/modules/es.typed-array.set":217,"core-js/modules/es.typed-array.slice":218,"core-js/modules/es.typed-array.some":219,"core-js/modules/es.typed-array.sort":220,"core-js/modules/es.typed-array.subarray":221,"core-js/modules/es.typed-array.to-locale-string":222,"core-js/modules/es.typed-array.to-string":223,"core-js/modules/es.typed-array.uint8-array":226}],321:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var o,i=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=function(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return function(){return e},e}();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(e,t){this.width=e,this.height=t,this.infos=[],this.findImage=function(e){var t,r,n=this.width*this.height;if(n<e)throw new Error("font is too complex to render in 3D");for(var o=this.infos.length-1;0<=o;--o){var i=this.infos[o];if(i.index+e<n){r=(t=i).imageData;break}}if(!t){try{r=new ImageData(this.width,this.height)}catch(e){var a=document.getElementsByTagName("canvas")[0],s=!a;a||((a=document.createElement("canvas")).style.display="none",document.body.appendChild(a));var l=a.getContext("2d");l&&(r=l.createImageData(this.width,this.height)),s&&document.body.removeChild(a)}t={index:0,imageData:r},this.infos.push(t)}var u=t.index;return t.index+=e,r._dirty=!0,{imageData:r,index:u}}}function l(e,t,r,n,o){var i=e.imageData.data,a=4*e.index++;i[a++]=t,i[a++]=r,i[a++]=n,i[a++]=o}function u(e){this.font=e,this.strokeImageInfos=new s(64,64),this.colDimImageInfos=new s(64,64),this.rowDimImageInfos=new s(64,64),this.colCellImageInfos=new s(64,64),this.rowCellImageInfos=new s(64,64),this.glyphInfos={},this.getGlyphInfo=function(e){var t=this.glyphInfos[e.index];if(t)return t;var r,n=e.getBoundingBox(),o=n.x1,a=n.y1,s=n.x2-o,u=n.y2-a,d=e.path.commands;if(0==s||0==u||!d.length)return this.glyphInfos[e.index]={};var f,h,p,y,m=[],g=[],v=[];for(r=8;0<=r;--r)v.push([]);for(r=8;0<=r;--r)g.push([]);function b(e,t,r){var n=m.length;function o(e,t,r){for(var n=e.length;0<n--;){var o=e[n];o<t&&(t=o),r<o&&(r=o)}return{min:t,max:r}}m.push(r);for(var i=o(e,1,0),a=Math.max(Math.floor(9*i.min),0),s=Math.min(Math.ceil(9*i.max),9),l=a;l<s;++l)v[l].push(n);for(var u=o(t,1,0),c=Math.max(Math.floor(9*u.min),0),d=Math.min(Math.ceil(9*u.max),9),f=c;f<d;++f)g[f].push(n)}function _(e){return(t=255*e)<0?0:255<t?255:t;var t}function x(e,t,r,n){this.p0=e,this.c0=t,this.c1=r,this.p1=n,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return i.default.Vector.sub(i.default.Vector.sub(this.p1,this.p0),i.default.Vector.mult(i.default.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(e){var t=i.default.Vector.lerp(this.p0,this.c0,e),r=i.default.Vector.lerp(this.c0,this.c1,e),n=i.default.Vector.lerp(t,r,e);this.c1=i.default.Vector.lerp(this.c1,this.p1,e),this.c0=i.default.Vector.lerp(r,this.c1,e);var o=i.default.Vector.lerp(n,this.c0,e),a=new x(this.p0,t,n,o);return this.p0=o,a},this.splitInflections=function(){var e=i.default.Vector.sub(this.c0,this.p0),t=i.default.Vector.sub(i.default.Vector.sub(this.c1,this.c0),e),r=i.default.Vector.sub(i.default.Vector.sub(i.default.Vector.sub(this.p1,this.c1),e),i.default.Vector.mult(t,2)),n=[],o=t.x*r.y-t.y*r.x;if(0!==o){var a=e.x*r.y-e.y*r.x,s=e.x*t.y-e.y*t.x,l=a*a-4*o*s;if(0<=l){o<0&&(o=-o,a=-a,s=-s);var u=Math.sqrt(l),c=(-a-u)/(2*o),d=(-a+u)/(2*o);0<c&&c<1&&(n.push(this.split(c)),d=1-(1-d)/(1-c)),0<d&&d<1&&n.push(this.split(d))}}return n.push(this),n}}function w(e,t,r,n,o,a,s,l){var u=new x(new i.default.Vector(e,t),new i.default.Vector(r,n),new i.default.Vector(o,a),new i.default.Vector(s,l)).splitInflections(),d=[],f=30/c,h=!0,p=!1,y=void 0;try{for(var m,g=u[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){for(var v=m.value,b=[],_=void 0;!(.125<=(_=f/v.quadError()));){var w=Math.pow(_,1/3),j=v.split(w),S=v.split(1-w/(1-w));d.push(j),b.push(v),v=S}_<1&&d.push(v.split(.5)),d.push(v),Array.prototype.push.apply(d,b.reverse())}}catch(e){p=!0,y=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw y}}return d}function j(e,t,r,n){b([e,r],[t,n],{x:e,y:t,cx:(e+r)/2,cy:(t+n)/2})}function S(e,t,r,n){return Math.abs(r-e)<1e-5&&Math.abs(n-t)<1e-5}var M=!0,E=!1,T=void 0;try{for(var O,C=d[Symbol.iterator]();!(M=(O=C.next()).done);M=!0){var L=O.value,P=(L.x-o)/s,k=(L.y-a)/u;if(!S(f,h,P,k)){switch(L.type){case"M":p=P,y=k;break;case"L":j(f,h,P,k);break;case"Q":var A=(L.x1-o)/s,R=(L.y1-a)/u;b([f,P,A],[h,k,R],{x:f,y:h,cx:A,cy:R});break;case"Z":S(f,h,p,y)?m.push({x:f,y:h}):(j(f,h,p,y),m.push({x:p,y:y}));break;case"C":for(var D=w(f,h,(L.x1-o)/s,(L.y1-a)/u,(L.x2-o)/s,(L.y2-a)/u,P,k),I=0;I<D.length;I++){var U=D[I].toQuadratic();b([U.x,U.x1,U.cx],[U.y,U.y1,U.cy],U)}break;default:throw new Error("unknown command type: ".concat(L.type))}f=P,h=k}}}catch(e){E=!0,T=e}finally{try{M||null==C.return||C.return()}finally{if(E)throw T}}for(var N=m.length,F=this.strokeImageInfos.findImage(N),B=F.index,G=0;G<N;++G){var V=m[G];l(F,_(V.x),_(V.y),_(V.cx),_(V.cy))}function z(e,t,r){for(var n=e.length,o=t.findImage(n),i=o.index,a=0,s=0;s<n;++s)a+=e[s].length;for(var u=r.findImage(a),c=0;c<n;++c){var d=e[c],f=d.length,h=u.index;l(o,h>>7,127&h,f>>7,127&f);for(var p=0;p<f;++p){var y=d[p]+B;l(u,y>>7,127&y,0,0)}}return{cellImageInfo:u,dimOffset:i,dimImageInfo:o}}return(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[n.x1,-n.y1,n.x2,-n.y2],strokeImageInfo:F,strokes:m,colInfo:z(v,this.colDimImageInfos,this.colCellImageInfos),rowInfo:z(g,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset],t}}e("./p5.Shader"),e("./p5.RendererGL.Retained"),i.default.RendererGL.prototype._applyTextProperties=function(){},i.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var c=Math.sqrt(3);i.default.RendererGL.prototype._renderText=function(e,t,r,n,o){if(this._textFont&&"string"!=typeof this._textFont){if(!(o<=n)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported"),e;e.push();var s=this._doStroke,l=this.drawMode;this._doStroke=!1,this.drawMode=a.TEXTURE;var c=this._textFont.font,d=this._textFont._fontInfo;d=d||(this._textFont._fontInfo=new u(c));var f=this._textFont._handleAlignment(this,t,r,n),h=this._textSize/c.unitsPerEm;this.translate(f.x,f.y,0),this.scale(h,h,1);var p=this.GL,y=!this._defaultFontShader,m=this._getFontShader();m.init(),m.bindShader(),y&&(m.setUniform("uGridImageSize",[64,64]),m.setUniform("uCellsImageSize",[64,64]),m.setUniform("uStrokeImageSize",[64,64]),m.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var g=this.retainedMode.geometry.glyph;if(!g){var v=this._textGeom=new i.default.Geometry(1,1,function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new i.default.Vector(t,e,0)),this.uvs.push(t,e)});v.computeFaces().computeNormals(),g=this.createBuffers("glyph",v)}var b=!0,_=!1,x=void 0;try{for(var w,j=this.retainedMode.buffers.text[Symbol.iterator]();!(b=(w=j.next()).done);b=!0)w.value._prepareBuffer(g,m)}catch(e){_=!0,x=e}finally{try{b||null==j.return||j.return()}finally{if(_)throw x}}this._bindBuffer(g.indexBuffer,p.ELEMENT_ARRAY_BUFFER),m.setUniform("uMaterialColor",this.curFillColor);try{var S=0,M=null,E=c.stringToGlyphs(t),T=!0,O=!1,C=void 0;try{for(var L,P=E[Symbol.iterator]();!(T=(L=P.next()).done);T=!0){var k=L.value;M&&(S+=c.getKerningValue(M,k));var A=d.getGlyphInfo(k);if(A.uGlyphRect){var R=A.rowInfo,D=A.colInfo;m.setUniform("uSamplerStrokes",A.strokeImageInfo.imageData),m.setUniform("uSamplerRowStrokes",R.cellImageInfo.imageData),m.setUniform("uSamplerRows",R.dimImageInfo.imageData),m.setUniform("uSamplerColStrokes",D.cellImageInfo.imageData),m.setUniform("uSamplerCols",D.dimImageInfo.imageData),m.setUniform("uGridOffset",A.uGridOffset),m.setUniform("uGlyphRect",A.uGlyphRect),m.setUniform("uGlyphOffset",S),m.bindTextures(),p.drawElements(p.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}S+=k.advanceWidth,M=k}}catch(e){O=!0,C=e}finally{try{T||null==P.return||P.return()}finally{if(O)throw C}}}finally{m.unbindShader(),this._doStroke=s,this.drawMode=l,e.pop()}return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":253,"../core/main":264,"./p5.RendererGL.Retained":317,"./p5.Shader":319,"core-js/modules/es.array.iterator":158,"core-js/modules/es.object.to-string":177,"core-js/modules/es.regexp.exec":181,"core-js/modules/es.string.iterator":186,"core-js/modules/es.string.split":191,"core-js/modules/es.string.sub":192,"core-js/modules/es.symbol":196,"core-js/modules/es.symbol.description":194,"core-js/modules/es.symbol.iterator":195,"core-js/modules/web.dom-collections.iterator":229}]},{},[248])(248)});
},{}],"fM2c":[function(require,module,exports) {
module.exports="00_START.b84b8ef2.mp4";
},{}],"kI3r":[function(require,module,exports) {
module.exports="00_START_2.078ff188.mp4";
},{}],"i8sR":[function(require,module,exports) {
module.exports="11_STAR_0.f826d1c3.mp4";
},{}],"lKQn":[function(require,module,exports) {
module.exports="11_STAR_1.74788b74.mp4";
},{}],"p1Kf":[function(require,module,exports) {
module.exports="11_STAR_2.2908b5b1.mp4";
},{}],"wwMc":[function(require,module,exports) {
module.exports="11_STAR_3.e126be4d.mp4";
},{}],"MRPy":[function(require,module,exports) {
module.exports="11_STAR_4.efd5ef3b.mp4";
},{}],"yHfk":[function(require,module,exports) {
module.exports="11_STAR_5.c09cd64f.mp4";
},{}],"hJQf":[function(require,module,exports) {
module.exports="01.dd8324b5.mp4";
},{}],"luxa":[function(require,module,exports) {
module.exports="02.4f0f778e.mp4";
},{}],"lhhn":[function(require,module,exports) {
module.exports="03.e2205be0.mp4";
},{}],"K6E7":[function(require,module,exports) {
module.exports="06.30d541e1.mp4";
},{}],"x3aD":[function(require,module,exports) {
module.exports="05.d5e4b72c.mp4";
},{}],"atSs":[function(require,module,exports) {
module.exports="12.8fd2cf4a.mp4";
},{}],"RuAY":[function(require,module,exports) {
module.exports="07.964d7e6c.mp4";
},{}],"ER2f":[function(require,module,exports) {
module.exports="08.0599c41a.mp4";
},{}],"iaaL":[function(require,module,exports) {
module.exports="11.59ab9b07.mp4";
},{}],"T443":[function(require,module,exports) {
module.exports="10.2fdec08a.mp4";
},{}],"KTSw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"count",{enumerable:!0,get:function(){return r.default}}),exports.post=exports.level=void 0,Object.defineProperty(exports,"start",{enumerable:!0,get:function(){return e.default}});var e=T(require("./resources/videos/0318/00_START.mp4")),r=T(require("./resources/videos/0318/00_START_2.mp4")),s=T(require("./resources/videos/0318/11_STAR_0.mp4")),u=T(require("./resources/videos/0318/11_STAR_1.mp4")),o=T(require("./resources/videos/0318/11_STAR_2.mp4")),t=T(require("./resources/videos/0318/11_STAR_3.mp4")),i=T(require("./resources/videos/0318/11_STAR_4.mp4")),d=T(require("./resources/videos/0318/11_STAR_5.mp4")),p=T(require("./resources/videos/0318/01.mp4")),l=T(require("./resources/videos/0318/02.mp4")),a=T(require("./resources/videos/0318/03.mp4")),c=T(require("./resources/videos/0318/06.mp4")),f=T(require("./resources/videos/0318/05.mp4")),v=T(require("./resources/videos/0318/12.mp4")),m=T(require("./resources/videos/0318/07.mp4")),_=T(require("./resources/videos/0318/08.mp4")),q=T(require("./resources/videos/0318/11.mp4")),n=T(require("./resources/videos/0318/10.mp4"));function T(e){return e&&e.__esModule?e:{default:e}}var A=[s.default,u.default,o.default,t.default,i.default,d.default];exports.level=A;var R=[p.default,l.default,a.default,c.default,f.default,v.default,m.default,_.default,q.default,n.default];exports.post=R;
},{"./resources/videos/0318/00_START.mp4":"fM2c","./resources/videos/0318/00_START_2.mp4":"kI3r","./resources/videos/0318/11_STAR_0.mp4":"i8sR","./resources/videos/0318/11_STAR_1.mp4":"lKQn","./resources/videos/0318/11_STAR_2.mp4":"p1Kf","./resources/videos/0318/11_STAR_3.mp4":"wwMc","./resources/videos/0318/11_STAR_4.mp4":"MRPy","./resources/videos/0318/11_STAR_5.mp4":"yHfk","./resources/videos/0318/01.mp4":"hJQf","./resources/videos/0318/02.mp4":"luxa","./resources/videos/0318/03.mp4":"lhhn","./resources/videos/0318/06.mp4":"K6E7","./resources/videos/0318/05.mp4":"x3aD","./resources/videos/0318/12.mp4":"atSs","./resources/videos/0318/07.mp4":"RuAY","./resources/videos/0318/08.mp4":"ER2f","./resources/videos/0318/11.mp4":"iaaL","./resources/videos/0318/10.mp4":"T443"}],"nyCU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.postInd=exports.playing=exports.currentG=void 0,exports.successPost=k;var e=r(require("p5")),t=o(require("./clips"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(n=function(e){return e?o:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=n(t);if(o&&o.has(e))return o.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=i?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(r,u,s):r[u]=e[u]}return r.default=e,o&&o.set(e,r),r}function r(e){return e&&e.__esModule?e:{default:e}}var i,u,s,l,p=document.getElementById("p5-container"),c=5,a=9,f=13,d=15.5,v=19,y=!1,g=[],h=[],m=[];exports.postInd=l;var x=0;exports.currentG=x;var w=0,O=!1,b=!1,M=!1;exports.playing=M;var P=function(e){function n(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e.createVideo(t);return n&&o.loop(),o.volume(.5),o.hide(),o}e.setup=function(){e.createCanvas(800,400)},e.draw=function(){},e.mousePressed=function(){if(y)i==u?(console.log("ya"),E(u,s)):k();else{!function(){y=!0,u=n(t.start,!0),(s=n(t.count))._onended=function(){j()};for(var e=function(e){g.push(n(t.level[e])),g[e]._onended=function(){E(g[e],u)}},o=0;o<t.level.length;o++)e(o);for(var r=function(e){h.push(n(t.post[e])),console.log(h[e].elt),h[e].elt.addEventListener("timeupdate",function(){null!=this.temp&&e!=l[x]||(console.log(e,l[x],x,"~~~~~?"),this.currentTime>=v&&b?(h[e].elt.temp=!0,T()):this.currentTime>=f&&O?(h[e].elt.temp=!0,T()):this.currentTime>=a&&!b&&(exports.playing=M=!1,O=!0,console.log(e,"fail")))})},p=0;p<t.post.length;p++)r(p);i=u,u.show()}();var e=document.getElementById("output");e.setAttribute("style","display:none"),(e=document.getElementById("keypoints")).setAttribute("style","display:none")}}};function _(){console.log("!"),P.resizeCanvas(windowWidth,windowHeight)}function j(){var e=G(h,c);m=e[0],exports.postInd=l=e[1],exports.currentG=x=0,w=0,O=!1,b=!1,E(s,m[x]),setTimeout(function(){exports.playing=M=!0},2e3)}function T(){console.log("nextpost"),O=!1,b=!1,exports.currentG=x+=1,x==c?I():(E(m[x-1],m[x]),setTimeout(function(){exports.playing=M=!0},2e3)),m[x-1].elt.temp=void 0}function I(){E(m[x-1],g[w])}function k(){O||(exports.playing=M=!1,w+=1,b=!0,m[x].elt.currentTime=d)}function E(e,t){i=t,e.pause(),t.play(),t.show(),e.hide(),e.elt.currentTime=0}new e.default(P,p);var G=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],o=[],r=0;r<t;){var i=Math.floor(Math.random()*e.length);-1===n.indexOf(e[i])&&(o.push(i),n.push(e[i]),r++)}return[n,o]};
},{"p5":"SOQY","./clips":"KTSw"}],"clwT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.poseThres=void 0;var e=[95,105,110,110,70,70,76,75,90,110];exports.poseThres=e;
},{}],"wrx7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindPage=ae;var e=k(require("@tensorflow-models/posenet")),t=k(require("@tensorflow-models/facemesh")),r=k(require("@tensorflow/tfjs")),n=k(require("paper")),o=b(require("dat.gui")),a=b(require("stats.js"));require("babel-polyfill");var i=require("posenet-similarity"),s=require("./utils/demoUtils"),u=require("./utils/svgUtils"),c=require("./illustrationGen/illustration"),l=require("./illustrationGen/skeleton"),d=require("./utils/fileUtils"),p=k(require("./resources/illustration/girl.svg")),f=k(require("./resources/illustration/boy.svg")),g=k(require("./resources/illustration/abstract.svg")),h=k(require("./resources/illustration/blathers.svg")),v=k(require("./resources/illustration/tom-nook.svg")),m=k(require("./resources/images/full-body.png")),w=require("./sketch"),y=require("./poserelate");function b(e){return e&&e.__esModule?e:{default:e}}function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function q(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){q(a,n,o,i,s,"next",e)}function s(e){q(a,n,o,i,s,"throw",e)}i(void 0)})}}var P,D,M,I,j,R=!1,U=!1,O=.5,G=300,E=300,B=null,F=null,C=400,L=400,T=.15,V=.1,_=30,W=!1,A=new a.default,H={girl:p.default,boy:f.default,abstract:g.default,blathers:h.default,"tom-nook":v.default};function N(){return z.apply(this,arguments)}function z(){return(z=S(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");case 2:return(t=document.getElementById("video")).width=G,t.height=E,e.next=7,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:G,height:E}});case 7:return r=e.sent,t.srcObject=r,e.abrupt("return",new Promise(function(e){t.onloadedmetadata=function(){e(t)}}));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(){return J.apply(this,arguments)}function J(){return(J=S(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:return(t=e.sent).play(),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Q="MobileNetV1",X=2,Y=1,Z=16,$=200,ee={avatarSVG:Object.keys(H)[0],debug:{showDetectionDebug:!0,showIllustrationDebug:!1}};function te(e){if(R){e.length>0&&(ee.camera=e[0].deviceId);var t=new o.default.GUI({width:300}),r=t.addFolder("Image");t.add(ee,"avatarSVG",Object.keys(H)).onChange(function(){return se(H[ee.avatarSVG])}),r.open();var n=t.addFolder("Debug control");n.add(ee.debug,"showDetectionDebug"),n.add(ee.debug,"showIllustrationDebug"),n.open()}}function re(){R&&(A.showPanel(0),document.getElementById("main").appendChild(A.dom))}function ne(e){var t=document.getElementById("output"),n=document.getElementById("keypoints"),o=t.getContext("2d"),a=n.getContext("2d");function i(){return u.apply(this,arguments)}function u(){return(u=S(regeneratorRuntime.mark(function n(){var u,c,d,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return A.begin(),u=[],o.clearRect(0,0,G,E),o.save(),o.scale(-1,1),o.translate(-G,0),o.drawImage(e,0,0,G,E),o.restore(),c=r.browser.fromPixels(t),n.next=11,M.estimateFaces(c,!1,!1);case 11:return B=n.sent,n.next=14,I.estimatePoses(e,{flipHorizontal:!0,decodingMethod:"multi-person",maxDetections:1,scoreThreshold:V,nmsRadius:_});case 14:d=n.sent,u=u.concat(d),c.dispose(),a.clearRect(0,0,G,E),ee.debug.showDetectionDebug&&(u.forEach(function(e){var t=e.score,r=e.keypoints;t>=T&&((0,s.drawKeypoints)(r,V,a),(0,s.drawSkeleton)(r,V,a))}),B.forEach(function(e){Object.values(l.facePartName2Index).forEach(function(t){var r=e.scaledMesh[t];(0,s.drawPoint)(a,r[1],r[0],2,"red")})})),D.project.clear(),u.length>=1&&F&&(w.playing||U)&&(fe(u[0]),l.Skeleton.flipPose(u[0]),B&&B.length>0?(p=l.Skeleton.toFaceFrame(B[0]),F.updateSkeleton(u[0],p)):F.updateSkeleton(u[0],null),F.draw(D,G,E),ee.debug.showIllustrationDebug&&F.debugDraw(D)),D.project.activeLayer.scale(C/G,L/E,new D.Point(0,0)),A.end(),requestAnimationFrame(i);case 24:case"end":return n.stop()}},n)}))).apply(this,arguments)}t.width=G,t.height=E,n.width=G,n.height=E,i()}function oe(){(W=(0,s.isMobile)())&&(C=Math.min(window.innerWidth,window.innerHeight),L=C,G*=.7,E*=.7),D=n.default;var e=document.querySelector(".illustration-canvas");e.width=C,e.height=L,D.setup(e);e.getContext("2d")}function ae(){return ie.apply(this,arguments)}function ie(){return(ie=S(regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return oe(),(0,s.toggleLoadingUI)(!0),(0,s.setStatusText)("Loading PoseNet model..."),r.next=5,e.load({architecture:Q,outputStride:Z,inputResolution:$,multiplier:Y,quantBytes:X});case 5:return I=r.sent,(0,s.setStatusText)("Loading FaceMesh model..."),r.next=9,t.load();case 9:return M=r.sent,(0,s.setStatusText)("Loading Avatar file..."),new Date,r.next=14,se(Object.values(H)[0]);case 14:return(0,s.setStatusText)("Setting up camera..."),r.prev=15,r.next=18,K();case 18:P=r.sent,r.next=27;break;case 21:throw r.prev=21,r.t0=r.catch(15),(n=document.getElementById("info")).textContent="this device type is not supported yet, or this browser does not support video capture: "+r.t0.toString(),n.style.display="block",r.t0;case 27:te([],I),re(),le(),(0,s.toggleLoadingUI)(!1),ne(P,I);case 32:case"end":return r.stop()}},r,null,[[15,21]])}))).apply(this,arguments)}function se(e){return ue.apply(this,arguments)}function ue(){return(ue=S(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.SVGUtils.importSVG(t);case 2:r=e.sent,n=new l.Skeleton(r),(F=new c.PoseIllustration(D)).bindSkeleton(n,r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,d.FileUtils.setDragDropHandler(function(e){se(e)}),ae();var ce=[];function le(){return de.apply(this,arguments)}function de(){return(de=S(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<10)){e.next=12;break}return r=document.getElementById("pose-"+(t+1)),e.t0=ce,e.next=6,I.estimateSinglePose(r);case 6:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),console.log(ce[t]);case 9:t++,e.next=1;break;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(e){for(var t=-1,r=0;r<ce.length;r++){var n=1e3*(0,i.poseSimilarity)(e,ce[r]);n>t&&(t=n,r),console.log(Math.floor(n),r)}}function fe(e){var t=w.postInd[w.currentG];if(!(ce.length<=t))if(e.score<O)console.log("pscore < 0.5");else{var r=1e3*(0,i.poseSimilarity)(e,ce[t]);r<y.poseThres[t]&&((0,w.successPost)(),console.log("success!")),console.log(t,r)}}
},{"@tensorflow-models/posenet":"yqJr","@tensorflow-models/facemesh":"nF9o","@tensorflow/tfjs":"cHV2","paper":"kGI0","dat.gui":"ArXC","stats.js":"ZsAW","babel-polyfill":"JIy0","posenet-similarity":"K5m4","./utils/demoUtils":"IirR","./utils/svgUtils":"aM2g","./illustrationGen/illustration":"HF0I","./illustrationGen/skeleton":"CNpF","./utils/fileUtils":"bn5e","./resources/illustration/girl.svg":"pcCC","./resources/illustration/boy.svg":"zafw","./resources/illustration/abstract.svg":"dvZT","./resources/illustration/blathers.svg":"jfJc","./resources/illustration/tom-nook.svg":"XaSJ","./resources/images/full-body.png":"NLgJ","./sketch":"nyCU","./poserelate":"clwT"}]},{},["wrx7"], null)